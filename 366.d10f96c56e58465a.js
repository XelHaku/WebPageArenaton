(self.webpackChunkArenaton=self.webpackChunkArenaton||[]).push([[366],{5972:(Ne,M,G)=>{"use strict";M.Xx=M._w=M.aP=M.KS=M.jQ=void 0;G(5465);const ve=G(6713);G(3403);function X(V){const k=new Float64Array(16);if(V)for(let q=0;q<V.length;q++)k[q]=V[q];return k}M.jQ=64,M.KS=64,M.aP=32,new Uint8Array(32)[0]=9;const he=X(),te=X([1]),le=(X([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),X([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),Re=X([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),me=X([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);X([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function de(V,k){for(let q=0;q<16;q++)V[q]=0|k[q]}function Ge(V){let k=1;for(let q=0;q<16;q++){let h=V[q]+k+65535;k=Math.floor(h/65536),V[q]=h-65536*k}V[0]+=k-1+37*(k-1)}function Me(V,k,q){const h=~(q-1);for(let N=0;N<16;N++){const Ie=h&(V[N]^k[N]);V[N]^=Ie,k[N]^=Ie}}function ke(V,k){const q=X(),h=X();for(let N=0;N<16;N++)h[N]=k[N];Ge(h),Ge(h),Ge(h);for(let N=0;N<2;N++){q[0]=h[0]-65517;for(let De=1;De<15;De++)q[De]=h[De]-65535-(q[De-1]>>16&1),q[De-1]&=65535;q[15]=h[15]-32767-(q[14]>>16&1);const Ie=q[15]>>16&1;q[14]&=65535,Me(h,q,1-Ie)}for(let N=0;N<16;N++)V[2*N]=255&h[N],V[2*N+1]=h[N]>>8}function ne(V){const k=new Uint8Array(32);return ke(k,V),1&k[0]}function fe(V,k,q){for(let h=0;h<16;h++)V[h]=k[h]+q[h]}function Z(V,k,q){for(let h=0;h<16;h++)V[h]=k[h]-q[h]}function Q(V,k,q){let h,N,Ie=0,De=0,Xe=0,ut=0,rt=0,ot=0,zt=0,nr=0,ir=0,$t=0,Ht=0,Pt=0,Ot=0,it=0,pt=0,at=0,ct=0,Bt=0,Jt=0,ur=0,lr=0,sr=0,pr=0,gr=0,zr=0,yr=0,br=0,un=0,Jn=0,ln=0,fn=0,Rt=q[0],At=q[1],Lt=q[2],_t=q[3],Vt=q[4],Qt=q[5],Nt=q[6],jt=q[7],mt=q[8],Tt=q[9],bt=q[10],gt=q[11],kt=q[12],Yt=q[13],Kt=q[14],Gt=q[15];h=k[0],Ie+=h*Rt,De+=h*At,Xe+=h*Lt,ut+=h*_t,rt+=h*Vt,ot+=h*Qt,zt+=h*Nt,nr+=h*jt,ir+=h*mt,$t+=h*Tt,Ht+=h*bt,Pt+=h*gt,Ot+=h*kt,it+=h*Yt,pt+=h*Kt,at+=h*Gt,h=k[1],De+=h*Rt,Xe+=h*At,ut+=h*Lt,rt+=h*_t,ot+=h*Vt,zt+=h*Qt,nr+=h*Nt,ir+=h*jt,$t+=h*mt,Ht+=h*Tt,Pt+=h*bt,Ot+=h*gt,it+=h*kt,pt+=h*Yt,at+=h*Kt,ct+=h*Gt,h=k[2],Xe+=h*Rt,ut+=h*At,rt+=h*Lt,ot+=h*_t,zt+=h*Vt,nr+=h*Qt,ir+=h*Nt,$t+=h*jt,Ht+=h*mt,Pt+=h*Tt,Ot+=h*bt,it+=h*gt,pt+=h*kt,at+=h*Yt,ct+=h*Kt,Bt+=h*Gt,h=k[3],ut+=h*Rt,rt+=h*At,ot+=h*Lt,zt+=h*_t,nr+=h*Vt,ir+=h*Qt,$t+=h*Nt,Ht+=h*jt,Pt+=h*mt,Ot+=h*Tt,it+=h*bt,pt+=h*gt,at+=h*kt,ct+=h*Yt,Bt+=h*Kt,Jt+=h*Gt,h=k[4],rt+=h*Rt,ot+=h*At,zt+=h*Lt,nr+=h*_t,ir+=h*Vt,$t+=h*Qt,Ht+=h*Nt,Pt+=h*jt,Ot+=h*mt,it+=h*Tt,pt+=h*bt,at+=h*gt,ct+=h*kt,Bt+=h*Yt,Jt+=h*Kt,ur+=h*Gt,h=k[5],ot+=h*Rt,zt+=h*At,nr+=h*Lt,ir+=h*_t,$t+=h*Vt,Ht+=h*Qt,Pt+=h*Nt,Ot+=h*jt,it+=h*mt,pt+=h*Tt,at+=h*bt,ct+=h*gt,Bt+=h*kt,Jt+=h*Yt,ur+=h*Kt,lr+=h*Gt,h=k[6],zt+=h*Rt,nr+=h*At,ir+=h*Lt,$t+=h*_t,Ht+=h*Vt,Pt+=h*Qt,Ot+=h*Nt,it+=h*jt,pt+=h*mt,at+=h*Tt,ct+=h*bt,Bt+=h*gt,Jt+=h*kt,ur+=h*Yt,lr+=h*Kt,sr+=h*Gt,h=k[7],nr+=h*Rt,ir+=h*At,$t+=h*Lt,Ht+=h*_t,Pt+=h*Vt,Ot+=h*Qt,it+=h*Nt,pt+=h*jt,at+=h*mt,ct+=h*Tt,Bt+=h*bt,Jt+=h*gt,ur+=h*kt,lr+=h*Yt,sr+=h*Kt,pr+=h*Gt,h=k[8],ir+=h*Rt,$t+=h*At,Ht+=h*Lt,Pt+=h*_t,Ot+=h*Vt,it+=h*Qt,pt+=h*Nt,at+=h*jt,ct+=h*mt,Bt+=h*Tt,Jt+=h*bt,ur+=h*gt,lr+=h*kt,sr+=h*Yt,pr+=h*Kt,gr+=h*Gt,h=k[9],$t+=h*Rt,Ht+=h*At,Pt+=h*Lt,Ot+=h*_t,it+=h*Vt,pt+=h*Qt,at+=h*Nt,ct+=h*jt,Bt+=h*mt,Jt+=h*Tt,ur+=h*bt,lr+=h*gt,sr+=h*kt,pr+=h*Yt,gr+=h*Kt,zr+=h*Gt,h=k[10],Ht+=h*Rt,Pt+=h*At,Ot+=h*Lt,it+=h*_t,pt+=h*Vt,at+=h*Qt,ct+=h*Nt,Bt+=h*jt,Jt+=h*mt,ur+=h*Tt,lr+=h*bt,sr+=h*gt,pr+=h*kt,gr+=h*Yt,zr+=h*Kt,yr+=h*Gt,h=k[11],Pt+=h*Rt,Ot+=h*At,it+=h*Lt,pt+=h*_t,at+=h*Vt,ct+=h*Qt,Bt+=h*Nt,Jt+=h*jt,ur+=h*mt,lr+=h*Tt,sr+=h*bt,pr+=h*gt,gr+=h*kt,zr+=h*Yt,yr+=h*Kt,br+=h*Gt,h=k[12],Ot+=h*Rt,it+=h*At,pt+=h*Lt,at+=h*_t,ct+=h*Vt,Bt+=h*Qt,Jt+=h*Nt,ur+=h*jt,lr+=h*mt,sr+=h*Tt,pr+=h*bt,gr+=h*gt,zr+=h*kt,yr+=h*Yt,br+=h*Kt,un+=h*Gt,h=k[13],it+=h*Rt,pt+=h*At,at+=h*Lt,ct+=h*_t,Bt+=h*Vt,Jt+=h*Qt,ur+=h*Nt,lr+=h*jt,sr+=h*mt,pr+=h*Tt,gr+=h*bt,zr+=h*gt,yr+=h*kt,br+=h*Yt,un+=h*Kt,Jn+=h*Gt,h=k[14],pt+=h*Rt,at+=h*At,ct+=h*Lt,Bt+=h*_t,Jt+=h*Vt,ur+=h*Qt,lr+=h*Nt,sr+=h*jt,pr+=h*mt,gr+=h*Tt,zr+=h*bt,yr+=h*gt,br+=h*kt,un+=h*Yt,Jn+=h*Kt,ln+=h*Gt,h=k[15],at+=h*Rt,ct+=h*At,Bt+=h*Lt,Jt+=h*_t,ur+=h*Vt,lr+=h*Qt,sr+=h*Nt,pr+=h*jt,gr+=h*mt,zr+=h*Tt,yr+=h*bt,br+=h*gt,un+=h*kt,Jn+=h*Yt,ln+=h*Kt,fn+=h*Gt,Ie+=38*ct,De+=38*Bt,Xe+=38*Jt,ut+=38*ur,rt+=38*lr,ot+=38*sr,zt+=38*pr,nr+=38*gr,ir+=38*zr,$t+=38*yr,Ht+=38*br,Pt+=38*un,Ot+=38*Jn,it+=38*ln,pt+=38*fn,N=1,h=Ie+N+65535,N=Math.floor(h/65536),Ie=h-65536*N,h=De+N+65535,N=Math.floor(h/65536),De=h-65536*N,h=Xe+N+65535,N=Math.floor(h/65536),Xe=h-65536*N,h=ut+N+65535,N=Math.floor(h/65536),ut=h-65536*N,h=rt+N+65535,N=Math.floor(h/65536),rt=h-65536*N,h=ot+N+65535,N=Math.floor(h/65536),ot=h-65536*N,h=zt+N+65535,N=Math.floor(h/65536),zt=h-65536*N,h=nr+N+65535,N=Math.floor(h/65536),nr=h-65536*N,h=ir+N+65535,N=Math.floor(h/65536),ir=h-65536*N,h=$t+N+65535,N=Math.floor(h/65536),$t=h-65536*N,h=Ht+N+65535,N=Math.floor(h/65536),Ht=h-65536*N,h=Pt+N+65535,N=Math.floor(h/65536),Pt=h-65536*N,h=Ot+N+65535,N=Math.floor(h/65536),Ot=h-65536*N,h=it+N+65535,N=Math.floor(h/65536),it=h-65536*N,h=pt+N+65535,N=Math.floor(h/65536),pt=h-65536*N,h=at+N+65535,N=Math.floor(h/65536),at=h-65536*N,Ie+=N-1+37*(N-1),N=1,h=Ie+N+65535,N=Math.floor(h/65536),Ie=h-65536*N,h=De+N+65535,N=Math.floor(h/65536),De=h-65536*N,h=Xe+N+65535,N=Math.floor(h/65536),Xe=h-65536*N,h=ut+N+65535,N=Math.floor(h/65536),ut=h-65536*N,h=rt+N+65535,N=Math.floor(h/65536),rt=h-65536*N,h=ot+N+65535,N=Math.floor(h/65536),ot=h-65536*N,h=zt+N+65535,N=Math.floor(h/65536),zt=h-65536*N,h=nr+N+65535,N=Math.floor(h/65536),nr=h-65536*N,h=ir+N+65535,N=Math.floor(h/65536),ir=h-65536*N,h=$t+N+65535,N=Math.floor(h/65536),$t=h-65536*N,h=Ht+N+65535,N=Math.floor(h/65536),Ht=h-65536*N,h=Pt+N+65535,N=Math.floor(h/65536),Pt=h-65536*N,h=Ot+N+65535,N=Math.floor(h/65536),Ot=h-65536*N,h=it+N+65535,N=Math.floor(h/65536),it=h-65536*N,h=pt+N+65535,N=Math.floor(h/65536),pt=h-65536*N,h=at+N+65535,N=Math.floor(h/65536),at=h-65536*N,Ie+=N-1+37*(N-1),V[0]=Ie,V[1]=De,V[2]=Xe,V[3]=ut,V[4]=rt,V[5]=ot,V[6]=zt,V[7]=nr,V[8]=ir,V[9]=$t,V[10]=Ht,V[11]=Pt,V[12]=Ot,V[13]=it,V[14]=pt,V[15]=at}function p(V,k){Q(V,k,k)}function P(V,k){const q=X(),h=X(),N=X(),Ie=X(),De=X(),Xe=X(),ut=X(),rt=X(),ot=X();Z(q,V[1],V[0]),Z(ot,k[1],k[0]),Q(q,q,ot),fe(h,V[0],V[1]),fe(ot,k[0],k[1]),Q(h,h,ot),Q(N,V[3],k[3]),Q(N,N,le),Q(Ie,V[2],k[2]),fe(Ie,Ie,Ie),Z(De,h,q),Z(Xe,Ie,N),fe(ut,Ie,N),fe(rt,h,q),Q(V[0],De,Xe),Q(V[1],rt,ut),Q(V[2],ut,Xe),Q(V[3],De,rt)}function _(V,k,q){for(let h=0;h<4;h++)Me(V[h],k[h],q)}function d(V,k){const q=X(),h=X(),N=X();(function b(V,k){const q=X();let h;for(h=0;h<16;h++)q[h]=k[h];for(h=253;h>=0;h--)p(q,q),2!==h&&4!==h&&Q(q,q,k);for(h=0;h<16;h++)V[h]=q[h]})(N,k[2]),Q(q,k[0],N),Q(h,k[1],N),ke(V,h),V[31]^=ne(q)<<7}function C(V,k){const q=[X(),X(),X(),X()];de(q[0],Re),de(q[1],me),de(q[2],te),Q(q[3],Re,me),function E(V,k,q){de(V[0],he),de(V[1],te),de(V[2],te),de(V[3],he);for(let h=255;h>=0;--h){const N=q[h/8|0]>>(7&h)&1;_(V,k,N),P(k,V),P(V,V),_(V,k,N)}}(V,q,k)}M._w=function ge(V){if(V.length!==M.aP)throw new Error(`ed25519: seed must be ${M.aP} bytes`);const k=(0,ve.hash)(V);k[0]&=248,k[31]&=127,k[31]|=64;const q=new Uint8Array(32),h=[X(),X(),X(),X()];C(h,k),d(q,h);const N=new Uint8Array(64);return N.set(V),N.set(q,32),{publicKey:q,secretKey:N}};const re=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function z(V,k){let q,h,N,Ie;for(h=63;h>=32;--h){for(q=0,N=h-32,Ie=h-12;N<Ie;++N)k[N]+=q-16*k[h]*re[N-(h-32)],q=Math.floor((k[N]+128)/256),k[N]-=256*q;k[N]+=q,k[h]=0}for(q=0,N=0;N<32;N++)k[N]+=q-(k[31]>>4)*re[N],q=k[N]>>8,k[N]&=255;for(N=0;N<32;N++)k[N]-=q*re[N];for(h=0;h<32;h++)k[h+1]+=k[h]>>8,V[h]=255&k[h]}function Pe(V){const k=new Float64Array(64);for(let q=0;q<64;q++)k[q]=V[q];for(let q=0;q<64;q++)V[q]=0;z(V,k)}M.Xx=function $e(V,k){const q=new Float64Array(64),h=[X(),X(),X(),X()],N=(0,ve.hash)(V.subarray(0,32));N[0]&=248,N[31]&=127,N[31]|=64;const Ie=new Uint8Array(64);Ie.set(N.subarray(32),32);const De=new ve.SHA512;De.update(Ie.subarray(32)),De.update(k);const Xe=De.digest();De.clean(),Pe(Xe),C(h,Xe),d(Ie,h),De.reset(),De.update(Ie.subarray(0,32)),De.update(V.subarray(32)),De.update(k);const ut=De.digest();Pe(ut);for(let rt=0;rt<32;rt++)q[rt]=Xe[rt];for(let rt=0;rt<32;rt++)for(let ot=0;ot<32;ot++)q[rt+ot]+=ut[rt]*N[ot];return z(Ie.subarray(32),q),Ie}},6713:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var m=G(9546),ae=G(3403);M.DIGEST_LENGTH=64,M.BLOCK_SIZE=128;var ve=function(){function he(){this.digestLength=M.DIGEST_LENGTH,this.blockSize=M.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return he.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},he.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},he.prototype.clean=function(){ae.wipe(this._buffer),ae.wipe(this._tempHi),ae.wipe(this._tempLo),this.reset()},he.prototype.update=function(te,ce){if(void 0===ce&&(ce=te.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var le=0;if(this._bytesHashed+=ce,this._bufferLength>0){for(;this._bufferLength<M.BLOCK_SIZE&&ce>0;)this._buffer[this._bufferLength++]=te[le++],ce--;this._bufferLength===this.blockSize&&(X(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(ce>=this.blockSize&&(le=X(this._tempHi,this._tempLo,this._stateHi,this._stateLo,te,le,ce),ce%=this.blockSize);ce>0;)this._buffer[this._bufferLength++]=te[le++],ce--;return this},he.prototype.finish=function(te){if(!this._finished){var ce=this._bytesHashed,le=this._bufferLength,Re=ce/536870912|0,me=ce<<3,Se=ce%128<112?128:256;this._buffer[le]=128;for(var de=le+1;de<Se-8;de++)this._buffer[de]=0;m.writeUint32BE(Re,this._buffer,Se-8),m.writeUint32BE(me,this._buffer,Se-4),X(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Se),this._finished=!0}for(de=0;de<this.digestLength/8;de++)m.writeUint32BE(this._stateHi[de],te,8*de),m.writeUint32BE(this._stateLo[de],te,8*de+4);return this},he.prototype.digest=function(){var te=new Uint8Array(this.digestLength);return this.finish(te),te},he.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},he.prototype.restoreState=function(te){return this._stateHi.set(te.stateHi),this._stateLo.set(te.stateLo),this._bufferLength=te.bufferLength,te.buffer&&this._buffer.set(te.buffer),this._bytesHashed=te.bytesHashed,this._finished=!1,this},he.prototype.cleanSavedState=function(te){ae.wipe(te.stateHi),ae.wipe(te.stateLo),te.buffer&&ae.wipe(te.buffer),te.bufferLength=0,te.bytesHashed=0},he}();M.SHA512=ve;var x=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function X(he,te,ce,le,Re,me,Se){for(var d,E,C,ge,R,B,re,z,de=ce[0],Ge=ce[1],Me=ce[2],ke=ce[3],Je=ce[4],se=ce[5],ne=ce[6],ue=ce[7],fe=le[0],Z=le[1],Q=le[2],p=le[3],b=le[4],v=le[5],P=le[6],_=le[7];Se>=128;){for(var Pe=0;Pe<16;Pe++)he[Pe]=m.readUint32BE(Re,$e=8*Pe+me),te[Pe]=m.readUint32BE(Re,$e+4);for(Pe=0;Pe<80;Pe++){var h,zt,Qr=Ge,Yr=Me,dt=ke,V=Je,k=se,q=ne,Ie=Z,De=Q,Xe=p,ut=b,rt=v,ot=P;if(R=65535&(E=_),B=E>>>16,re=65535&(d=ue),z=d>>>16,R+=65535&(E=(b>>>14|Je<<18)^(b>>>18|Je<<14)^(Je>>>9|b<<23)),B+=E>>>16,re+=65535&(d=(Je>>>14|b<<18)^(Je>>>18|b<<14)^(b>>>9|Je<<23)),z+=d>>>16,R+=65535&(E=b&v^~b&P),B+=E>>>16,re+=65535&(d=Je&se^~Je&ne),z+=d>>>16,R+=65535&(E=x[2*Pe+1]),B+=E>>>16,re+=65535&(d=x[2*Pe]),z+=d>>>16,B+=(E=te[Pe%16])>>>16,re+=65535&(d=he[Pe%16]),z+=d>>>16,re+=(B+=(R+=65535&E)>>>16)>>>16,R=65535&(E=ge=65535&R|B<<16),B=E>>>16,re=65535&(d=C=65535&re|(z+=re>>>16)<<16),z=d>>>16,R+=65535&(E=(fe>>>28|de<<4)^(de>>>2|fe<<30)^(de>>>7|fe<<25)),B+=E>>>16,re+=65535&(d=(de>>>28|fe<<4)^(fe>>>2|de<<30)^(fe>>>7|de<<25)),z+=d>>>16,B+=(E=fe&Z^fe&Q^Z&Q)>>>16,re+=65535&(d=de&Ge^de&Me^Ge&Me),z+=d>>>16,h=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,zt=65535&R|B<<16,R=65535&(E=Xe),B=E>>>16,re=65535&(d=dt),z=d>>>16,B+=(E=ge)>>>16,re+=65535&(d=C),z+=d>>>16,Ge=de,Me=Qr,ke=Yr,Je=dt=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,se=V,ne=k,ue=q,de=h,Z=fe,Q=Ie,p=De,b=Xe=65535&R|B<<16,v=ut,P=rt,_=ot,fe=zt,Pe%16==15)for(var $e=0;$e<16;$e++)R=65535&(E=te[$e]),B=E>>>16,re=65535&(d=he[$e]),z=d>>>16,R+=65535&(E=te[($e+9)%16]),B+=E>>>16,re+=65535&(d=he[($e+9)%16]),z+=d>>>16,R+=65535&(E=((ge=te[($e+1)%16])>>>1|(C=he[($e+1)%16])<<31)^(ge>>>8|C<<24)^(ge>>>7|C<<25)),B+=E>>>16,re+=65535&(d=(C>>>1|ge<<31)^(C>>>8|ge<<24)^C>>>7),z+=d>>>16,B+=(E=((ge=te[($e+14)%16])>>>19|(C=he[($e+14)%16])<<13)^(C>>>29|ge<<3)^(ge>>>6|C<<26))>>>16,re+=65535&(d=(C>>>19|ge<<13)^(ge>>>29|C<<3)^C>>>6),z+=d>>>16,he[$e]=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,te[$e]=65535&R|B<<16}R=65535&(E=fe),B=E>>>16,re=65535&(d=de),z=d>>>16,B+=(E=le[0])>>>16,re+=65535&(d=ce[0]),z+=d>>>16,ce[0]=de=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[0]=fe=65535&R|B<<16,R=65535&(E=Z),B=E>>>16,re=65535&(d=Ge),z=d>>>16,B+=(E=le[1])>>>16,re+=65535&(d=ce[1]),z+=d>>>16,ce[1]=Ge=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[1]=Z=65535&R|B<<16,R=65535&(E=Q),B=E>>>16,re=65535&(d=Me),z=d>>>16,B+=(E=le[2])>>>16,re+=65535&(d=ce[2]),z+=d>>>16,ce[2]=Me=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[2]=Q=65535&R|B<<16,R=65535&(E=p),B=E>>>16,re=65535&(d=ke),z=d>>>16,B+=(E=le[3])>>>16,re+=65535&(d=ce[3]),z+=d>>>16,ce[3]=ke=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[3]=p=65535&R|B<<16,R=65535&(E=b),B=E>>>16,re=65535&(d=Je),z=d>>>16,B+=(E=le[4])>>>16,re+=65535&(d=ce[4]),z+=d>>>16,ce[4]=Je=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[4]=b=65535&R|B<<16,R=65535&(E=v),B=E>>>16,re=65535&(d=se),z=d>>>16,B+=(E=le[5])>>>16,re+=65535&(d=ce[5]),z+=d>>>16,ce[5]=se=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[5]=v=65535&R|B<<16,R=65535&(E=P),B=E>>>16,re=65535&(d=ne),z=d>>>16,B+=(E=le[6])>>>16,re+=65535&(d=ce[6]),z+=d>>>16,ce[6]=ne=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[6]=P=65535&R|B<<16,R=65535&(E=_),B=E>>>16,re=65535&(d=ue),z=d>>>16,B+=(E=le[7])>>>16,re+=65535&(d=ce[7]),z+=d>>>16,ce[7]=ue=65535&(re+=(B+=(R+=65535&E)>>>16)>>>16)|(z+=re>>>16)<<16,le[7]=_=65535&R|B<<16,me+=128,Se-=128}return me}M.hash=function xe(he){var te=new ve;te.update(he);var ce=te.digest();return te.clean(),ce}},7263:(Ne,M)=>{"use strict";function G(){return(null==global?void 0:global.crypto)||(null==global?void 0:global.msCrypto)||{}}function m(){const ve=G();return ve.subtle||ve.webkitSubtle}Object.defineProperty(M,"__esModule",{value:!0}),M.isBrowserCryptoAvailable=M.getSubtleCrypto=M.getBrowerCrypto=void 0,M.getBrowerCrypto=G,M.getSubtleCrypto=m,M.isBrowserCryptoAvailable=function ae(){return!!G()&&!!m()}},4574:(Ne,M)=>{"use strict";function G(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function m(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Object.defineProperty(M,"__esModule",{value:!0}),M.isBrowser=M.isNode=M.isReactNative=void 0,M.isReactNative=G,M.isNode=m,M.isBrowser=function ae(){return!G()&&!m()}},2299:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});const m=G(4308);m.__exportStar(G(7263),M),m.__exportStar(G(4574),M)},6366:(Ne,M,G)=>{"use strict";G.r(M),G.d(M,{EthereumProvider:()=>Gp,OPTIONAL_EVENTS:()=>Uu,OPTIONAL_METHODS:()=>Zu,REQUIRED_EVENTS:()=>js,REQUIRED_METHODS:()=>Ls,default:()=>Ms});var m=G(5861),ae=G(2016),ve=G.n(ae),x=G(4778),X=G(7297),xe=G(986),he=G(2997),te=G(2108);class ce extends te.q{constructor(n){super(),this.opts=n,this.protocol="wc",this.version=2}}class Re extends te.q{constructor(n,t){super(),this.core=n,this.logger=t,this.records=new Map}}class me{constructor(n,t){this.logger=n,this.core=t}}class Se extends te.q{constructor(n,t){super(),this.relayer=n,this.logger=t}}class de extends te.q{constructor(n){super()}}class Ge{constructor(n,t,o,a){this.core=n,this.logger=t,this.name=o}}class ke extends te.q{constructor(n,t){super(),this.relayer=n,this.logger=t}}class se extends te.q{constructor(n,t){super(),this.core=n,this.logger=t}}class ue{constructor(n,t){this.projectId=n,this.logger=t}}class Z{constructor(n){this.opts=n,this.protocol="wc",this.version=2}}class p{constructor(n){this.client=n}}const b=y=>JSON.stringify(y,(n,t)=>"bigint"==typeof t?t.toString()+"n":t);function P(y){if("string"!=typeof y)throw new Error("Cannot safe json parse value of type "+typeof y);try{return(y=>{const t=y.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(o,a)=>"string"==typeof a&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)})(y)}catch{return y}}function _(y){return"string"==typeof y?y:b(y)||""}var d=G(5972),E=G(5465),C=G(5409);const re="base64url",z="utf8",$e=":",Le="did",Qr="key",Yr="base58btc",dt="z",V="K36";var h=G(1376),N=G(878),Ie=G(2269);function Xe(y){return(0,N.B)((0,Ie.m)(_(y),z),re)}function ut(y){const n=(0,Ie.m)(V,Yr),t=dt+(0,N.B)((0,h.z)([n,y]),Yr);return[Le,Qr,t].join($e)}function ot(y){return(0,N.B)(y,re)}function Pt(y=(0,E.randomBytes)(32)){return d._w(y)}function it(){return(it=(0,m.Z)(function*(y,n,t,o,a=(0,C.fromMiliseconds)(Date.now())){const u={alg:"EdDSA",typ:"JWT"},D={iss:ut(o.publicKey),sub:y,aud:n,iat:a,exp:a+t},$=function nr(y){return(0,Ie.m)([Xe(y.header),Xe(y.payload)].join("."),"utf8")}({header:u,payload:D});return function $t(y){return[Xe(y.header),Xe(y.payload),ot(y.signature)].join(".")}({header:u,payload:D,signature:d.Xx(o.secretKey,$)})})).apply(this,arguments)}G(2768);var Bt=G(3544);const pr="INTERNAL_ERROR",gr="SERVER_ERROR",zr=[-32700,-32600,-32601,-32602,-32603],br={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[pr]:{code:-32603,message:"Internal error"},[gr]:{code:-32e3,message:"Server error"}},un=gr;function Rt(y){return Object.keys(br).includes(y)?br[y]:br[un]}function _t(y,n,t){return y.message.includes("getaddrinfo ENOTFOUND")||y.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${n}`):y}var Vt=G(2299);function Nt(y=3){return Date.now()*Math.pow(10,y)+Math.floor(Math.random()*Math.pow(10,y))}function jt(y=6){return BigInt(Nt(y))}function mt(y,n,t){return{id:t||Nt(),jsonrpc:"2.0",method:y,params:n}}function Tt(y,n){return{id:y,jsonrpc:"2.0",result:n}}function bt(y,n,t){return{id:y,jsonrpc:"2.0",error:gt(n,t)}}function gt(y,n){return typeof y>"u"?Rt(pr):("string"==typeof y&&(y=Object.assign(Object.assign({},Rt(gr)),{message:y})),typeof n<"u"&&(y.data=n),function ln(y){return zr.includes(y)}(y.code)&&(y=function At(y){return Object.values(br).find(t=>t.code===y)||br[un]}(y.code)),y)}class kt{}class Kt extends kt{constructor(){super()}}class Gt extends Kt{constructor(n){super()}}function ds(y,n){const t=function Do(y){const n=y.match(new RegExp(/^\w+:/,"gi"));if(n&&n.length)return n[0]}(y);return!(typeof t>"u")&&new RegExp(n).test(t)}function ps(y){return ds(y,"^https?:")}function gs(y){return ds(y,"^wss?:")}function hn(y){return"object"==typeof y&&"id"in y&&"jsonrpc"in y&&"2.0"===y.jsonrpc}function ji(y){return hn(y)&&"method"in y}function hi(y){return hn(y)&&(en(y)||Nr(y))}function en(y){return"result"in y}function Nr(y){return"error"in y}class Dr extends Gt{constructor(n){super(n),this.events=new ae.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(n),this.connection.connected&&this.registerEventListeners()}connect(n=this.connection){var t=this;return(0,m.Z)(function*(){yield t.open(n)})()}disconnect(){var n=this;return(0,m.Z)(function*(){yield n.close()})()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}request(n,t){var o=this;return(0,m.Z)(function*(){return o.requestStrict(mt(n.method,n.params||[],n.id||jt().toString()),t)})()}requestStrict(n,t){var o=this;return(0,m.Z)(function*(){return new Promise(function(){var a=(0,m.Z)(function*(u,f){if(!o.connection.connected)try{yield o.open()}catch(S){f(S)}o.events.on(`${n.id}`,S=>{Nr(S)?f(S.error):u(S.result)});try{yield o.connection.send(n,t)}catch(S){f(S)}});return function(u,f){return a.apply(this,arguments)}}())})()}setConnection(n=this.connection){return n}onPayload(n){this.events.emit("payload",n),hi(n)?this.events.emit(`${n.id}`,n):this.events.emit("message",{type:n.method,data:n.params})}onClose(n){n&&3e3===n.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${n.code} ${n.reason?`(${n.reason})`:""}`)),this.events.emit("disconnect")}open(n=this.connection){var t=this;return(0,m.Z)(function*(){t.connection===n&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof n&&(yield t.connection.open(n),n=t.connection),t.connection=t.setConnection(n),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var n=this;return(0,m.Z)(function*(){yield n.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",n=>this.onPayload(n)),this.connection.on("close",n=>this.onClose(n)),this.connection.on("error",n=>this.events.emit("error",n)),this.connection.on("register_error",n=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const ys=y=>y.split("?")[0],Fo=typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:G(3569);var Qn=G(2650),_s=G.n(Qn),qo=function ms(y,n){if(y.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),o=0;o<t.length;o++)t[o]=255;for(var a=0;a<y.length;a++){var u=y.charAt(a),f=u.charCodeAt(0);if(255!==t[f])throw new TypeError(u+" is ambiguous");t[f]=a}var S=y.length,D=y.charAt(0),$=Math.log(S)/Math.log(256),W=Math.log(256)/Math.log(S);function Oe(we){if("string"!=typeof we)throw new TypeError("Expected String");if(0===we.length)return new Uint8Array;var Ve=0;if(" "!==we[Ve]){for(var Qe=0,xt=0;we[Ve]===D;)Qe++,Ve++;for(var fr=(we.length-Ve)*$+1>>>0,yt=new Uint8Array(fr);we[Ve];){var Mt=t[we.charCodeAt(Ve)];if(255===Mt)return;for(var ft=0,Zt=fr-1;(0!==Mt||ft<xt)&&-1!==Zt;Zt--,ft++)yt[Zt]=(Mt+=S*yt[Zt]>>>0)%256>>>0,Mt=Mt/256>>>0;if(0!==Mt)throw new Error("Non-zero carry");xt=ft,Ve++}if(" "!==we[Ve]){for(var et=fr-xt;et!==fr&&0===yt[et];)et++;for(var ar=new Uint8Array(Qe+(fr-et)),Un=Qe;et!==fr;)ar[Un++]=yt[et++];return ar}}}return{encode:function pe(we){if(we instanceof Uint8Array||(ArrayBuffer.isView(we)?we=new Uint8Array(we.buffer,we.byteOffset,we.byteLength):Array.isArray(we)&&(we=Uint8Array.from(we))),!(we instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===we.length)return"";for(var Ve=0,Qe=0,xt=0,fr=we.length;xt!==fr&&0===we[xt];)xt++,Ve++;for(var yt=(fr-xt)*W+1>>>0,Mt=new Uint8Array(yt);xt!==fr;){for(var ft=we[xt],Zt=0,et=yt-1;(0!==ft||Zt<Qe)&&-1!==et;et--,Zt++)Mt[et]=(ft+=256*Mt[et]>>>0)%S>>>0,ft=ft/S>>>0;if(0!==ft)throw new Error("Non-zero carry");Qe=Zt,xt++}for(var ar=yt-Qe;ar!==yt&&0===Mt[ar];)ar++;for(var Un=D.repeat(Ve);ar<yt;++ar)Un+=y.charAt(Mt[ar]);return Un},decodeUnsafe:Oe,decode:function Fe(we){var Ve=Oe(we);if(Ve)return Ve;throw new Error(`Non-${n} character`)}}};const bs=y=>{if(y instanceof Uint8Array&&"Uint8Array"===y.constructor.name)return y;if(y instanceof ArrayBuffer)return new Uint8Array(y);if(ArrayBuffer.isView(y))return new Uint8Array(y.buffer,y.byteOffset,y.byteLength);throw new Error("Unknown type, must be binary type")};class $o{constructor(n,t,o){this.name=n,this.prefix=t,this.baseEncode=o}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}}class Ho{constructor(n,t,o){if(this.name=n,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=o}decode(n){if("string"==typeof n){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(n){return Yn(this,n)}}class xs{constructor(n){this.decoders=n}or(n){return Yn(this,n)}decode(n){const o=this.decoders[n[0]];if(o)return o.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Yn=(y,n)=>new xs({...y.decoders||{[y.prefix]:y},...n.decoders||{[n.prefix]:n}});class Fn{constructor(n,t,o,a){this.name=n,this.prefix=t,this.baseEncode=o,this.baseDecode=a,this.encoder=new $o(n,t,o),this.decoder=new Ho(n,t,a)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}}const di=({name:y,prefix:n,encode:t,decode:o})=>new Fn(y,n,t,o),Xn=({prefix:y,name:n,alphabet:t})=>{const{encode:o,decode:a}=qo(t,n);return di({prefix:y,name:n,encode:o,decode:u=>bs(a(u))})},Xt=({name:y,prefix:n,bitsPerChar:t,alphabet:o})=>di({prefix:n,name:y,encode:a=>((y,n,t)=>{const o="="===n[n.length-1],a=(1<<t)-1;let u="",f=0,S=0;for(let D=0;D<y.length;++D)for(S=S<<8|y[D],f+=8;f>t;)f-=t,u+=n[a&S>>f];if(f&&(u+=n[a&S<<t-f]),o)for(;u.length*t&7;)u+="=";return u})(a,o,t),decode:a=>((y,n,t,o)=>{const a={};for(let W=0;W<n.length;++W)a[n[W]]=W;let u=y.length;for(;"="===y[u-1];)--u;const f=new Uint8Array(u*t/8|0);let S=0,D=0,$=0;for(let W=0;W<u;++W){const pe=a[y[W]];if(void 0===pe)throw new SyntaxError(`Non-${o} character`);D=D<<t|pe,S+=t,S>=8&&(S-=8,f[$++]=255&D>>S)}if(S>=t||255&D<<8-S)throw new SyntaxError("Unexpected end of data");return f})(a,o,t,y)}),Vo=di({prefix:"\0",name:"identity",encode:y=>(y=>(new TextDecoder).decode(y))(y),decode:y=>(y=>(new TextEncoder).encode(y))(y)});var ko=Object.freeze({__proto__:null,identity:Vo});const Ko=Xt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xn=Object.freeze({__proto__:null,base2:Ko});const Es=Xt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Go=Object.freeze({__proto__:null,base8:Es});const pi=Xn({prefix:"9",name:"base10",alphabet:"0123456789"});var Wo=Object.freeze({__proto__:null,base10:pi});const Mi=Xt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Jo=Xt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Is=Object.freeze({__proto__:null,base16:Mi,base16upper:Jo});const Ss=Xt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ps=Xt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ei=Xt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Os=Xt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qo=Xt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yo=Xt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xo=Xt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),O=Xt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),L=Xt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ie=Object.freeze({__proto__:null,base32:Ss,base32upper:Ps,base32pad:ei,base32padupper:Os,base32hex:Qo,base32hexupper:Yo,base32hexpad:Xo,base32hexpadupper:O,base32z:L});const _e=Xn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lt=Xn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ue=Object.freeze({__proto__:null,base36:_e,base36upper:lt});const It=Xn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Wt=Xn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var er=Object.freeze({__proto__:null,base58btc:It,base58flickr:Wt});const wt=Xt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wr=Xt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Lr=Xt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),or=Xt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pr=Object.freeze({__proto__:null,base64:wt,base64pad:wr,base64url:Lr,base64urlpad:or});const xr=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),gn=xr.reduce((y,n,t)=>(y[t]=n,y),[]),tn=xr.reduce((y,n,t)=>(y[n.codePointAt(0)]=t,y),[]),gi=di({prefix:"\u{1f680}",name:"base256emoji",encode:function En(y){return y.reduce((n,t)=>n+gn[t],"")},decode:function Rs(y){const n=[];for(const t of y){const o=tn[t.codePointAt(0)];if(void 0===o)throw new Error(`Non-base256emoji character: ${t}`);n.push(o)}return new Uint8Array(n)}});var yi=Object.freeze({__proto__:null,base256emoji:gi}),$c=128,Ih=-128,Sh=Math.pow(2,31),Oh=128,Bc=127,Rh=Math.pow(2,7),Ah=Math.pow(2,14),Th=Math.pow(2,21),Ch=Math.pow(2,28),Nh=Math.pow(2,35),Dh=Math.pow(2,42),Lh=Math.pow(2,49),jh=Math.pow(2,56),Fh=Math.pow(2,63),Zh={encode:function Hc(y,n,t){n=n||[];for(var o=t=t||0;y>=Sh;)n[t++]=255&y|$c,y/=128;for(;y&Ih;)n[t++]=255&y|$c,y>>>=7;return n[t]=0|y,Hc.bytes=t-o+1,n},decode:function ea(y,o){var f,t=0,a=0,u=o=o||0,S=y.length;do{if(u>=S)throw ea.bytes=0,new RangeError("Could not decode varint");f=y[u++],t+=a<28?(f&Bc)<<a:(f&Bc)*Math.pow(2,a),a+=7}while(f>=Oh);return ea.bytes=u-o,t},encodingLength:function(y){return y<Rh?1:y<Ah?2:y<Th?3:y<Ch?4:y<Nh?5:y<Dh?6:y<Lh?7:y<jh?8:y<Fh?9:10}},Vc=Zh;const kc=(y,n,t=0)=>(Vc.encode(y,n,t),n),Kc=y=>Vc.encodingLength(y),ta=(y,n)=>{const t=n.byteLength,o=Kc(y),a=o+Kc(t),u=new Uint8Array(a+t);return kc(y,u,0),kc(t,u,o),u.set(n,a),new Uh(y,t,n,u)};class Uh{constructor(n,t,o,a){this.code=n,this.size=t,this.digest=o,this.bytes=a}}const Gc=({name:y,code:n,encode:t})=>new qh(y,n,t);class qh{constructor(n,t,o){this.name=n,this.code=t,this.encode=o}digest(n){if(n instanceof Uint8Array){const t=this.encode(n);return t instanceof Uint8Array?ta(this.code,t):t.then(o=>ta(this.code,o))}throw Error("Unknown type, must be binary type")}}const Wc=y=>function(){var n=(0,m.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(y,t))});return function(t){return n.apply(this,arguments)}}(),zh=Gc({name:"sha2-256",code:18,encode:Wc("SHA-256")}),$h=Gc({name:"sha2-512",code:19,encode:Wc("SHA-512")});Object.freeze({__proto__:null,sha256:zh,sha512:$h});const Qc=bs;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:Qc,digest:y=>ta(0,Qc(y))}}),new TextEncoder,new TextDecoder;const Yc={...ko,...xn,...Go,...Wo,...Is,...ie,...Ue,...er,...Pr,...yi};function Xc(y){return null!=globalThis.Buffer?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):y}function eu(y,n,t,o){return{name:y,prefix:n,encoder:{name:y,prefix:n,encode:t},decoder:{decode:o}}}const tu=eu("utf8","u",y=>"u"+new TextDecoder("utf8").decode(y),y=>(new TextEncoder).encode(y.substring(1))),ra=eu("ascii","a",y=>{let n="a";for(let t=0;t<y.length;t++)n+=String.fromCharCode(y[t]);return n},y=>{const n=function kh(y=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Xc(globalThis.Buffer.allocUnsafe(y)):new Uint8Array(y)}((y=y.substring(1)).length);for(let t=0;t<y.length;t++)n[t]=y.charCodeAt(t);return n}),Kh={utf8:tu,"utf-8":tu,hex:Yc.base16,latin1:ra,ascii:ra,binary:ra,...Yc},Mn="wc@2:core:",Qh={database:":memory:"},nu="client_ed25519_seed",Xh=C.ONE_DAY,id=C.SIX_HOURS,su="wss://relay.walletconnect.com",ou="wss://relay.walletconnect.org",ud=C.ONE_SECOND,yn_created="subscription_created",yn_deleted="subscription_deleted",yd=1e3*C.FIVE_SECONDS,Zi={wc_pairingDelete:{req:{ttl:C.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:C.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:C.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:C.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:C.ONE_DAY,prompt:!1,tag:0},res:{ttl:C.ONE_DAY,prompt:!1,tag:0}}},$r_expired="expirer_expired",ia="verify-api",As="https://verify.walletconnect.com",au="https://verify.walletconnect.org";class Ed{constructor(n,t){var o=this;this.core=n,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Mn,this.init=(0,m.Z)(function*(){if(!o.initialized){const a=yield o.getKeyChain();typeof a<"u"&&(o.keychain=a),o.initialized=!0}}),this.has=a=>(this.isInitialized(),this.keychain.has(a)),this.set=function(){var a=(0,m.Z)(function*(u,f){o.isInitialized(),o.keychain.set(u,f),yield o.persist()});return function(u,f){return a.apply(this,arguments)}}(),this.get=a=>{this.isInitialized();const u=this.keychain.get(a);if(typeof u>"u"){const{message:f}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${a}`);throw new Error(f)}return u},this.del=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),o.keychain.delete(u),yield o.persist()});return function(u){return a.apply(this,arguments)}}(),this.core=n,this.logger=(0,he.generateChildLogger)(t,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setKeyChain(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,(0,x.KC)(n))})()}getKeyChain(){var n=this;return(0,m.Z)(function*(){const t=yield n.core.storage.getItem(n.storageKey);return typeof t<"u"?(0,x.IP)(t):void 0})()}persist(){var n=this;return(0,m.Z)(function*(){yield n.setKeyChain(n.keychain)})()}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Id{constructor(n,t,o){var a=this;this.core=n,this.logger=t,this.name="crypto",this.initialized=!1,this.init=(0,m.Z)(function*(){a.initialized||(yield a.keychain.init(),a.initialized=!0)}),this.hasKeys=u=>(this.isInitialized(),this.keychain.has(u)),this.getClientId=(0,m.Z)(function*(){return a.isInitialized(),ut(Pt(yield a.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const u=(0,x.Au)();return this.setPrivateKey(u.publicKey,u.privateKey)},this.signJWT=function(){var u=(0,m.Z)(function*(f){a.isInitialized();const D=Pt(yield a.getClientSeed()),$=(0,x.jd)();return yield function Ot(y,n,t,o){return it.apply(this,arguments)}($,f,Xh,D)});return function(f){return u.apply(this,arguments)}}(),this.generateSharedKey=(u,f,S)=>{this.isInitialized();const D=this.getPrivateKey(u),$=(0,x.m$)(D,f);return this.setSymKey($,S)},this.setSymKey=function(){var u=(0,m.Z)(function*(f,S){a.isInitialized();const D=S||(0,x.Ym)(f);return yield a.keychain.set(D,f),D});return function(f,S){return u.apply(this,arguments)}}(),this.deleteKeyPair=function(){var u=(0,m.Z)(function*(f){a.isInitialized(),yield a.keychain.del(f)});return function(f){return u.apply(this,arguments)}}(),this.deleteSymKey=function(){var u=(0,m.Z)(function*(f){a.isInitialized(),yield a.keychain.del(f)});return function(f){return u.apply(this,arguments)}}(),this.encode=function(){var u=(0,m.Z)(function*(f,S,D){a.isInitialized();const $=(0,x.EN)(D),W=_(S);if((0,x.Q8)($)){const we=$.senderPublicKey,Ve=$.receiverPublicKey;f=yield a.generateSharedKey(we,Ve)}const pe=a.getSymKey(f),{type:Oe,senderPublicKey:Fe}=$;return(0,x.HI)({type:Oe,symKey:pe,message:W,senderPublicKey:Fe})});return function(f,S,D){return u.apply(this,arguments)}}(),this.decode=function(){var u=(0,m.Z)(function*(f,S,D){a.isInitialized();const $=(0,x.Ll)(S,D);if((0,x.Q8)($)){const W=$.receiverPublicKey,pe=$.senderPublicKey;f=yield a.generateSharedKey(W,pe)}try{const W=a.getSymKey(f);return P((0,x.pe)({symKey:W,encoded:S}))}catch(W){a.logger.error(`Failed to decode message from topic: '${f}', clientId: '${yield a.getClientId()}'`),a.logger.error(W)}});return function(f,S,D){return u.apply(this,arguments)}}(),this.getPayloadType=u=>{const f=(0,x.vB)(u);return(0,x.WG)(f.type)},this.getPayloadSenderPublicKey=u=>{const f=(0,x.vB)(u);return f.senderPublicKey?(0,Bt.BB)(f.senderPublicKey,x.AW):void 0},this.core=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.keychain=o||new Ed(this.core,this.logger)}get context(){return(0,he.getLoggerContext)(this.logger)}setPrivateKey(n,t){var o=this;return(0,m.Z)(function*(){return yield o.keychain.set(n,t),n})()}getPrivateKey(n){return this.keychain.get(n)}getClientSeed(){var n=this;return(0,m.Z)(function*(){let t="";try{t=n.keychain.get(nu)}catch{t=(0,x.jd)(),yield n.keychain.set(nu,t)}return function Gh(y,n="utf8"){const t=Kh[n];if(!t)throw new Error(`Unsupported encoding "${n}"`);return"utf8"!==n&&"utf-8"!==n||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${y}`):Xc(globalThis.Buffer.from(y,"utf-8"))}(t,"base16")})()}getSymKey(n){return this.keychain.get(n)}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Sd extends me{constructor(n,t){var o;super(n,t),o=this,this.logger=n,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Mn,this.init=(0,m.Z)(function*(){if(!o.initialized){o.logger.trace("Initialized");try{const a=yield o.getRelayerMessages();typeof a<"u"&&(o.messages=a),o.logger.debug(`Successfully Restored records for ${o.name}`),o.logger.trace({type:"method",method:"restore",size:o.messages.size})}catch(a){o.logger.debug(`Failed to Restore records for ${o.name}`),o.logger.error(a)}finally{o.initialized=!0}}}),this.set=function(){var a=(0,m.Z)(function*(u,f){o.isInitialized();const S=(0,x.rj)(f);let D=o.messages.get(u);return typeof D>"u"&&(D={}),typeof D[S]<"u"||(D[S]=f,o.messages.set(u,D),yield o.persist()),S});return function(u,f){return a.apply(this,arguments)}}(),this.get=a=>{this.isInitialized();let u=this.messages.get(a);return typeof u>"u"&&(u={}),u},this.has=(a,u)=>(this.isInitialized(),typeof this.get(a)[(0,x.rj)(u)]<"u"),this.del=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),o.messages.delete(u),yield o.persist()});return function(u){return a.apply(this,arguments)}}(),this.logger=(0,he.generateChildLogger)(n,this.name),this.core=t}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}setRelayerMessages(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,(0,x.KC)(n))})()}getRelayerMessages(){var n=this;return(0,m.Z)(function*(){const t=yield n.core.storage.getItem(n.storageKey);return typeof t<"u"?(0,x.IP)(t):void 0})()}persist(){var n=this;return(0,m.Z)(function*(){yield n.setRelayerMessages(n.messages)})()}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Pd extends Se{constructor(n,t){var o;super(n,t),o=this,this.relayer=n,this.logger=t,this.events=new ae.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,C.toMiliseconds)(C.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=function(){var a=(0,m.Z)(function*(u,f,S){var D;o.logger.debug("Publishing Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:u,message:f,opts:S}});try{const $=S?.ttl||id,W=(0,x._H)(S),pe=S?.prompt||!1,Oe=S?.tag||0,Fe=S?.id||jt().toString(),we={topic:u,message:f,opts:{ttl:$,relay:W,prompt:pe,tag:Oe,id:Fe}},Ve=setTimeout(()=>o.queue.set(Fe,we),o.publishTimeout);try{yield yield(0,x.hF)(o.rpcPublish(u,f,$,W,pe,Oe,Fe),o.publishTimeout,"Failed to publish payload, please try again."),o.removeRequestFromQueue(Fe),o.relayer.events.emit("relayer_publish",we)}catch(Qe){if(o.logger.debug("Publishing Payload stalled"),o.needsTransportRestart=!0,null!=(D=S?.internal)&&D.throwOnFailedPublish)throw o.removeRequestFromQueue(Fe),Qe;return}finally{clearTimeout(Ve)}o.logger.debug("Successfully Published Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:u,message:f,opts:S}})}catch($){throw o.logger.debug("Failed to Publish Payload"),o.logger.error($),$}});return function(u,f,S){return a.apply(this,arguments)}}(),this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.relayer=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,he.getLoggerContext)(this.logger)}rpcPublish(n,t,o,a,u,f,S){var D,$,W,pe;const Oe={method:(0,x.cO)(a.protocol).publish,params:{topic:n,message:t,ttl:o,prompt:u,tag:f},id:S};return(0,x.o8)(null==(D=Oe.params)?void 0:D.prompt)&&(null==($=Oe.params)||delete $.prompt),(0,x.o8)(null==(W=Oe.params)?void 0:W.tag)&&(null==(pe=Oe.params)||delete pe.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:Oe}),this.relayer.request(Oe)}removeRequestFromQueue(n){this.queue.delete(n)}checkQueue(){var n=this;this.queue.forEach(function(){var t=(0,m.Z)(function*(o){const{topic:a,message:u,opts:f}=o;yield n.publish(a,u,f)});return function(o){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit("relayer_connection_stalled");this.checkQueue()}),this.relayer.on("relayer_message_ack",n=>{this.removeRequestFromQueue(n.id.toString())})}}class Od{constructor(){this.map=new Map,this.set=(n,t)=>{const o=this.get(n);this.exists(n,t)||this.map.set(n,[...o,t])},this.get=n=>this.map.get(n)||[],this.exists=(n,t)=>this.get(n).includes(t),this.delete=(n,t)=>{if(typeof t>"u")return void this.map.delete(n);if(!this.map.has(n))return;const o=this.get(n);if(!this.exists(n,t))return;const a=o.filter(u=>u!==t);a.length?this.map.set(n,a):this.map.delete(n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Rd=Object.defineProperty,Ad=Object.defineProperties,Td=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,Cd=Object.prototype.hasOwnProperty,Nd=Object.prototype.propertyIsEnumerable,uu=(y,n,t)=>n in y?Rd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,qi=(y,n)=>{for(var t in n||(n={}))Cd.call(n,t)&&uu(y,t,n[t]);if(cu)for(var t of cu(n))Nd.call(n,t)&&uu(y,t,n[t]);return y},sa=(y,n)=>Ad(y,Td(n));class Dd extends ke{constructor(n,t){var o;super(n,t),o=this,this.relayer=n,this.logger=t,this.subscriptions=new Map,this.topicMap=new Od,this.events=new ae.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Mn,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=(0,m.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),o.registerEventListeners(),o.clientId=yield o.relayer.core.crypto.getClientId())}),this.subscribe=function(){var a=(0,m.Z)(function*(u,f){yield o.restartToComplete(),o.isInitialized(),o.logger.debug("Subscribing Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:u,opts:f}});try{const S=(0,x._H)(f),D={topic:u,relay:S};o.pending.set(u,D);const $=yield o.rpcSubscribe(u,S);return o.onSubscribe($,D),o.logger.debug("Successfully Subscribed Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:u,opts:f}}),$}catch(S){throw o.logger.debug("Failed to Subscribe Topic"),o.logger.error(S),S}});return function(u,f){return a.apply(this,arguments)}}(),this.unsubscribe=function(){var a=(0,m.Z)(function*(u,f){yield o.restartToComplete(),o.isInitialized(),typeof f?.id<"u"?yield o.unsubscribeById(u,f.id,f):yield o.unsubscribeByTopic(u,f)});return function(u,f){return a.apply(this,arguments)}}(),this.isSubscribed=function(){var a=(0,m.Z)(function*(u){return!!o.topics.includes(u)||(yield new Promise((f,S)=>{const D=new C.Watch;D.start(o.pendingSubscriptionWatchLabel);const $=setInterval(()=>{!o.pending.has(u)&&o.topics.includes(u)&&(clearInterval($),D.stop(o.pendingSubscriptionWatchLabel),f(!0)),D.elapsed(o.pendingSubscriptionWatchLabel)>=yd&&(clearInterval($),D.stop(o.pendingSubscriptionWatchLabel),S(new Error("Subscription resolution timeout")))},o.pollingInterval)}).catch(()=>!1))});return function(u){return a.apply(this,arguments)}}(),this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.restart=(0,m.Z)(function*(){o.restartInProgress=!0,yield o.restore(),yield o.reset(),o.restartInProgress=!1}),this.relayer=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(n,t){let o=!1;try{o=this.getSubscription(n).topic===t}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(n,t){var o=this;return(0,m.Z)(function*(){const a=o.topicMap.get(n);yield Promise.all(a.map(function(){var u=(0,m.Z)(function*(f){return yield o.unsubscribeById(n,f,t)});return function(f){return u.apply(this,arguments)}}()))})()}unsubscribeById(n,t,o){var a=this;return(0,m.Z)(function*(){a.logger.debug("Unsubscribing Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:t,opts:o}});try{const u=(0,x._H)(o);yield a.rpcUnsubscribe(n,t,u);const f=(0,x.D6)("USER_DISCONNECTED",`${a.name}, ${n}`);yield a.onUnsubscribe(n,t,f),a.logger.debug("Successfully Unsubscribed Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:t,opts:o}})}catch(u){throw a.logger.debug("Failed to Unsubscribe Topic"),a.logger.error(u),u}})()}rpcSubscribe(n,t){var o=this;return(0,m.Z)(function*(){const a={method:(0,x.cO)(t.protocol).subscribe,params:{topic:n}};o.logger.debug("Outgoing Relay Payload"),o.logger.trace({type:"payload",direction:"outgoing",request:a});try{yield yield(0,x.hF)(o.relayer.request(a),o.subscribeTimeout)}catch{o.logger.debug("Outgoing Relay Subscribe Payload stalled"),o.relayer.events.emit("relayer_connection_stalled")}return(0,x.rj)(n+o.clientId)})()}rpcBatchSubscribe(n){var t=this;return(0,m.Z)(function*(){if(!n.length)return;const a={method:(0,x.cO)(n[0].relay.protocol).batchSubscribe,params:{topics:n.map(u=>u.topic)}};t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:a});try{return yield yield(0,x.hF)(t.relayer.request(a),t.subscribeTimeout)}catch{t.logger.debug("Outgoing Relay Payload stalled"),t.relayer.events.emit("relayer_connection_stalled")}})()}rpcUnsubscribe(n,t,o){const a={method:(0,x.cO)(o.protocol).unsubscribe,params:{topic:n,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(n,t){this.setSubscription(n,sa(qi({},t),{id:n})),this.pending.delete(t.topic)}onBatchSubscribe(n){n.length&&n.forEach(t=>{this.setSubscription(t.id,qi({},t)),this.pending.delete(t.topic)})}onUnsubscribe(n,t,o){var a=this;return(0,m.Z)(function*(){a.events.removeAllListeners(t),a.hasSubscription(t,n)&&a.deleteSubscription(t,o),yield a.relayer.messages.del(n)})()}setRelayerSubscriptions(n){var t=this;return(0,m.Z)(function*(){yield t.relayer.core.storage.setItem(t.storageKey,n)})()}getRelayerSubscriptions(){var n=this;return(0,m.Z)(function*(){return yield n.relayer.core.storage.getItem(n.storageKey)})()}setSubscription(n,t){this.subscriptions.has(n)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:n,subscription:t}),this.addSubscription(n,t))}addSubscription(n,t){this.subscriptions.set(n,qi({},t)),this.topicMap.set(t.topic,n),this.events.emit(yn_created,t)}getSubscription(n){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:n});const t=this.subscriptions.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return t}deleteSubscription(n,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:n,reason:t});const o=this.getSubscription(n);this.subscriptions.delete(n),this.topicMap.delete(o.topic,n),this.events.emit(yn_deleted,sa(qi({},o),{reason:t}))}persist(){var n=this;return(0,m.Z)(function*(){yield n.setRelayerSubscriptions(n.values),n.events.emit("subscription_sync")})()}reset(){var n=this;return(0,m.Z)(function*(){if(n.cached.length){const t=Math.ceil(n.cached.length/n.batchSubscribeTopicsLimit);for(let o=0;o<t;o++){const a=n.cached.splice(0,n.batchSubscribeTopicsLimit);yield n.batchSubscribe(a)}}n.events.emit("subscription_resubscribed")})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(n.subscriptions.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),n.logger.error(`${n.name}: ${JSON.stringify(n.values)}`),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored subscriptions for ${n.name}`),n.logger.trace({type:"method",method:"restore",subscriptions:n.values})}catch(t){n.logger.debug(`Failed to Restore subscriptions for ${n.name}`),n.logger.error(t)}})()}batchSubscribe(n){var t=this;return(0,m.Z)(function*(){if(!n.length)return;const o=yield t.rpcBatchSubscribe(n);(0,x.qt)(o)&&t.onBatchSubscribe(o.map((a,u)=>sa(qi({},n[u]),{id:a})))})()}onConnect(){var n=this;return(0,m.Z)(function*(){n.restartInProgress||(yield n.restart(),n.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var n=this;return(0,m.Z)(function*(){if(!n.initialized||n.relayer.transportExplicitlyClosed)return;const t=[];n.pending.forEach(o=>{t.push(o)}),yield n.batchSubscribe(t)})()}registerEventListeners(){var n=this;this.relayer.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,(0,m.Z)(function*(){yield n.checkPending()})),this.relayer.on("relayer_connect",(0,m.Z)(function*(){yield n.onConnect()})),this.relayer.on("relayer_disconnect",()=>{this.onDisconnect()}),this.events.on(yn_created,function(){var t=(0,m.Z)(function*(o){const a=yn_created;n.logger.info(`Emitting ${a}`),n.logger.debug({type:"event",event:a,data:o}),yield n.persist()});return function(o){return t.apply(this,arguments)}}()),this.events.on(yn_deleted,function(){var t=(0,m.Z)(function*(o){const a=yn_deleted;n.logger.info(`Emitting ${a}`),n.logger.debug({type:"event",event:a,data:o}),yield n.persist()});return function(o){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}restartToComplete(){var n=this;return(0,m.Z)(function*(){n.restartInProgress&&(yield new Promise(t=>{const o=setInterval(()=>{n.restartInProgress||(clearInterval(o),t())},n.pollingInterval)}))})()}}var Ld=Object.defineProperty,lu=Object.getOwnPropertySymbols,jd=Object.prototype.hasOwnProperty,Fd=Object.prototype.propertyIsEnumerable,fu=(y,n,t)=>n in y?Ld(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t;class Zd extends de{constructor(n){var t;super(n),t=this,this.protocol="wc",this.version=2,this.events=new ae.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=function(){var o=(0,m.Z)(function*(a){t.logger.debug("Publishing Request Payload");try{return yield t.toEstablishConnection(),yield t.provider.request(a)}catch(u){throw t.logger.debug("Failed to Publish Request"),t.logger.error(u),u}});return function(a){return o.apply(this,arguments)}}(),this.onPayloadHandler=o=>{this.onProviderPayload(o)},this.onConnectHandler=()=>{this.events.emit("relayer_connect")},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=o=>{this.logger.error(o),this.events.emit("relayer_error",o),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on("payload",this.onPayloadHandler),this.provider.on("connect",this.onConnectHandler),this.provider.on("disconnect",this.onDisconnectHandler),this.provider.on("error",this.onProviderErrorHandler)},this.core=n.core,this.logger=typeof n.logger<"u"&&"string"!=typeof n.logger?(0,he.generateChildLogger)(n.logger,this.name):(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n.logger||"error"})),this.messages=new Sd(this.logger,n.core),this.subscriber=new Dd(this,this.logger),this.publisher=new Pd(this,this.logger),this.relayUrl=n?.relayUrl||su,this.projectId=n.projectId,this.provider={}}init(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized"),n.registerEventListeners(),yield n.createProvider(),yield Promise.all([n.messages.init(),n.subscriber.init()]);try{yield n.transportOpen()}catch{n.logger.warn(`Connection via ${n.relayUrl} failed, attempting to connect via failover domain ${ou}...`),yield n.restartTransport(ou)}n.initialized=!0,setTimeout((0,m.Z)(function*(){0===n.subscriber.topics.length&&(n.logger.info("No topics subscribed to after init, closing transport"),yield n.transportClose(),n.transportExplicitlyClosed=!1)}),1e4)})()}get context(){return(0,he.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(n,t,o){var a=this;return(0,m.Z)(function*(){a.isInitialized(),yield a.publisher.publish(n,t,o),yield a.recordMessageEvent({topic:n,message:t,publishedAt:Date.now()})})()}subscribe(n,t){var o=this;return(0,m.Z)(function*(){var a;o.isInitialized();let u=(null==(a=o.subscriber.topicMap.get(n))?void 0:a[0])||"";return u||(yield Promise.all([new Promise(f=>{o.subscriber.once(yn_created,S=>{S.topic===n&&f()})}),new Promise(function(){var f=(0,m.Z)(function*(S){u=yield o.subscriber.subscribe(n,t),S()});return function(S){return f.apply(this,arguments)}}())]),u)})()}unsubscribe(n,t){var o=this;return(0,m.Z)(function*(){o.isInitialized(),yield o.subscriber.unsubscribe(n,t)})()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}transportClose(){var n=this;return(0,m.Z)(function*(){n.transportExplicitlyClosed=!0,n.hasExperiencedNetworkDisruption&&n.connected?yield(0,x.hF)(n.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>n.onProviderDisconnect()):n.connected&&(yield n.provider.disconnect())})()}transportOpen(n){var t=this;return(0,m.Z)(function*(){if(t.transportExplicitlyClosed=!1,yield t.confirmOnlineStateOrThrow(),!t.connectionAttemptInProgress){n&&n!==t.relayUrl&&(t.relayUrl=n,yield t.transportClose(),yield t.createProvider()),t.connectionAttemptInProgress=!0;try{yield Promise.all([new Promise(o=>{if(!t.initialized)return o();t.subscriber.once("subscription_resubscribed",()=>{o()})}),new Promise(function(){var o=(0,m.Z)(function*(a,u){try{yield(0,x.hF)(t.provider.connect(),1e4,`Socket stalled when trying to connect to ${t.relayUrl}`)}catch(f){return void u(f)}a()});return function(a,u){return o.apply(this,arguments)}}())])}catch(o){if(t.logger.error(o),!t.isConnectionStalled(o.message))throw o;t.provider.events.emit("disconnect")}finally{t.connectionAttemptInProgress=!1,t.hasExperiencedNetworkDisruption=!1}}})()}restartTransport(n){var t=this;return(0,m.Z)(function*(){yield t.confirmOnlineStateOrThrow(),!t.connectionAttemptInProgress&&(t.relayUrl=n||t.relayUrl,yield t.transportClose(),yield t.createProvider(),yield t.transportOpen())})()}confirmOnlineStateOrThrow(){return(0,m.Z)(function*(){if(!(yield(0,x.Gg)()))throw new Error("No internet connection detected. Please restart your network and try again.")})()}isConnectionStalled(n){return this.staleConnectionErrors.some(t=>n.includes(t))}createProvider(){var n=this;return(0,m.Z)(function*(){n.provider.connection&&n.unregisterProviderListeners();const t=yield n.core.crypto.signJWT(n.relayUrl);n.provider=new Dr(new class Mo{constructor(n){if(this.url=n,this.events=new ae.EventEmitter,this.registering=!1,!gs(n))throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`);this.url=n}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}open(n=this.url){var t=this;return(0,m.Z)(function*(){yield t.register(n)})()}close(){var n=this;return(0,m.Z)(function*(){return new Promise((t,o)=>{typeof n.socket>"u"?o(new Error("Connection already closed")):(n.socket.onclose=a=>{n.onClose(a),t()},n.socket.close())})})()}send(n,t){var o=this;return(0,m.Z)(function*(){typeof o.socket>"u"&&(o.socket=yield o.register());try{o.socket.send(_(n))}catch(a){o.onError(n.id,a)}})()}register(n=this.url){if(!gs(n))throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((o,a)=>{this.events.once("register_error",u=>{this.resetMaxListeners(),a(u)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=n,this.registering=!0,new Promise((t,o)=>{const a=(0,Vt.isReactNative)()?void 0:{rejectUnauthorized:(y=n,!new RegExp("wss?://localhost(:d{2,5})?").test(y))},u=new Fo(n,[],a);var y;typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?u.onerror=f=>{o(this.emitError(f.error))}:u.on("error",f=>{o(this.emitError(f))}),u.onopen=()=>{this.onOpen(u),t(u)}})}onOpen(n){n.onmessage=t=>this.onPayload(t),n.onclose=t=>this.onClose(t),this.socket=n,this.registering=!1,this.events.emit("open")}onClose(n){this.socket=void 0,this.registering=!1,this.events.emit("close",n)}onPayload(n){if(typeof n.data>"u")return;const t="string"==typeof n.data?P(n.data):n.data;this.events.emit("payload",t)}onError(n,t){const o=this.parseError(t),u=bt(n,o.message||o.toString());this.events.emit("payload",u)}parseError(n,t=this.url){return _t(n,ys(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(n){const t=this.parseError(new Error(n?.message||`WebSocket connection failed for host: ${ys(this.url)}`));return this.events.emit("register_error",t),t}}((0,x.$0)({sdkVersion:"2.10.1",protocol:n.protocol,version:n.version,relayUrl:n.relayUrl,projectId:n.projectId,auth:t,useOnCloseEvent:!0}))),n.registerProviderListeners()})()}recordMessageEvent(n){var t=this;return(0,m.Z)(function*(){const{topic:o,message:a}=n;yield t.messages.set(o,a)})()}shouldIgnoreMessageEvent(n){var t=this;return(0,m.Z)(function*(){const{topic:o,message:a}=n;if(!a||0===a.length)return t.logger.debug(`Ignoring invalid/empty message: ${a}`),!0;if(!(yield t.subscriber.isSubscribed(o)))return t.logger.debug(`Ignoring message for non-subscribed topic ${o}`),!0;const u=t.messages.has(o,a);return u&&t.logger.debug(`Ignoring duplicate message: ${a}`),u})()}onProviderPayload(n){var t=this;return(0,m.Z)(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:n}),ji(n)){if(!n.method.endsWith("_subscription"))return;const o=n.params,{topic:a,message:u,publishedAt:f}=o.data,S={topic:a,message:u,publishedAt:f};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((y,n)=>{for(var t in n||(n={}))jd.call(n,t)&&fu(y,t,n[t]);if(lu)for(var t of lu(n))Fd.call(n,t)&&fu(y,t,n[t]);return y})({type:"event",event:o.id},S)),t.events.emit(o.id,S),yield t.acknowledgePayload(n),yield t.onMessageEvent(S)}else hi(n)&&t.events.emit("relayer_message_ack",n)})()}onMessageEvent(n){var t=this;return(0,m.Z)(function*(){(yield t.shouldIgnoreMessageEvent(n))||(t.events.emit("relayer_message",n),yield t.recordMessageEvent(n))})()}acknowledgePayload(n){var t=this;return(0,m.Z)(function*(){const o=Tt(n.id,!0);yield t.provider.connection.send(o)})()}unregisterProviderListeners(){this.provider.off("payload",this.onPayloadHandler),this.provider.off("connect",this.onConnectHandler),this.provider.off("disconnect",this.onDisconnectHandler),this.provider.off("error",this.onProviderErrorHandler)}registerEventListeners(){var n=this;return(0,m.Z)(function*(){n.events.on("relayer_connection_stalled",()=>{n.restartTransport().catch(o=>n.logger.error(o))});let t=yield(0,x.Gg)();(0,x.uw)(function(){var o=(0,m.Z)(function*(a){n.initialized&&t!==a&&(t=a,a?yield n.restartTransport().catch(u=>n.logger.error(u)):(n.hasExperiencedNetworkDisruption=!0,yield n.transportClose().catch(u=>n.logger.error(u))))});return function(a){return o.apply(this,arguments)}}())})()}onProviderDisconnect(){this.events.emit("relayer_disconnect"),this.attemptToReconnect()}attemptToReconnect(){var n=this;this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((0,m.Z)(function*(){yield n.restartTransport().catch(t=>n.logger.error(t))}),(0,C.toMiliseconds)(ud)))}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}toEstablishConnection(){var n=this;return(0,m.Z)(function*(){if(yield n.confirmOnlineStateOrThrow(),!n.connected){if(n.connectionAttemptInProgress)return yield new Promise(t=>{const o=setInterval(()=>{n.connected&&(clearInterval(o),t())},n.connectionStatusPollingInterval)});yield n.restartTransport()}})()}}var Ud=Object.defineProperty,hu=Object.getOwnPropertySymbols,qd=Object.prototype.hasOwnProperty,zd=Object.prototype.propertyIsEnumerable,du=(y,n,t)=>n in y?Ud(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,pu=(y,n)=>{for(var t in n||(n={}))qd.call(n,t)&&du(y,t,n[t]);if(hu)for(var t of hu(n))zd.call(n,t)&&du(y,t,n[t]);return y};class Ts extends Ge{constructor(n,t,o,a=Mn,u=void 0){var f;super(n,t,o,a),f=this,this.core=n,this.logger=t,this.name=o,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=(0,m.Z)(function*(){f.initialized||(f.logger.trace("Initialized"),yield f.restore(),f.cached.forEach(S=>{f.getKey&&null!==S&&!(0,x.o8)(S)?f.map.set(f.getKey(S),S):(0,x.xW)(S)?f.map.set(S.id,S):(0,x.h1)(S)&&f.map.set(S.topic,S)}),f.cached=[],f.initialized=!0)}),this.set=function(){var S=(0,m.Z)(function*(D,$){f.isInitialized(),f.map.has(D)?yield f.update(D,$):(f.logger.debug("Setting value"),f.logger.trace({type:"method",method:"set",key:D,value:$}),f.map.set(D,$),yield f.persist())});return function(D,$){return S.apply(this,arguments)}}(),this.get=S=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:S}),this.getData(S)),this.getAll=S=>(this.isInitialized(),S?this.values.filter(D=>Object.keys(S).every($=>_s()(D[$],S[$]))):this.values),this.update=function(){var S=(0,m.Z)(function*(D,$){f.isInitialized(),f.logger.debug("Updating value"),f.logger.trace({type:"method",method:"update",key:D,update:$});const W=pu(pu({},f.getData(D)),$);f.map.set(D,W),yield f.persist()});return function(D,$){return S.apply(this,arguments)}}(),this.delete=function(){var S=(0,m.Z)(function*(D,$){f.isInitialized(),f.map.has(D)&&(f.logger.debug("Deleting value"),f.logger.trace({type:"method",method:"delete",key:D,reason:$}),f.map.delete(D),yield f.persist())});return function(D,$){return S.apply(this,arguments)}}(),this.logger=(0,he.generateChildLogger)(t,this.name),this.storagePrefix=a,this.getKey=u}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,n)})()}getDataStore(){var n=this;return(0,m.Z)(function*(){return yield n.core.storage.getItem(n.storageKey)})()}getData(n){const t=this.map.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(o),new Error(o)}return t}persist(){var n=this;return(0,m.Z)(function*(){yield n.setDataStore(n.values)})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getDataStore();if(typeof t>"u"||!t.length)return;if(n.map.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored value for ${n.name}`),n.logger.trace({type:"method",method:"restore",value:n.values})}catch(t){n.logger.debug(`Failed to Restore value for ${n.name}`),n.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class $d{constructor(n,t){var o=this;this.core=n,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(ve()),this.initialized=!1,this.storagePrefix=Mn,this.ignoredPayloadTypes=[x.rV],this.registeredMethods=[],this.init=(0,m.Z)(function*(){o.initialized||(yield o.pairings.init(),yield o.cleanup(),o.registerRelayerEvents(),o.registerExpirerEvents(),o.initialized=!0,o.logger.trace("Initialized"))}),this.register=({methods:a})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...a])]},this.create=(0,m.Z)(function*(){o.isInitialized();const a=(0,x.jd)(),u=yield o.core.crypto.setSymKey(a),f=(0,x.gn)(C.FIVE_MINUTES),S={protocol:"irn"},D={topic:u,expiry:f,relay:S,active:!1},$=(0,x.Bv)({protocol:o.core.protocol,version:o.core.version,topic:u,symKey:a,relay:S});return yield o.pairings.set(u,D),yield o.core.relayer.subscribe(u),o.core.expirer.set(u,f),{topic:u,uri:$}}),this.pair=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),o.isValidPair(u);const{topic:f,symKey:S,relay:D}=(0,x.he)(u.uri);let $;if(o.pairings.keys.includes(f)&&($=o.pairings.get(f),$.active))throw new Error(`Pairing already exists: ${f}. Please try again with a new connection URI.`);o.core.crypto.keychain.has(f)||(yield o.core.crypto.setSymKey(S,f),yield o.core.relayer.subscribe(f,{relay:D}));const W=(0,x.gn)(C.FIVE_MINUTES),pe={topic:f,relay:D,expiry:W,active:!1};return yield o.pairings.set(f,pe),o.core.expirer.set(f,W),u.activatePairing&&(yield o.activate({topic:f})),o.events.emit("pairing_create",pe),pe});return function(u){return a.apply(this,arguments)}}(),this.activate=function(){var a=(0,m.Z)(function*({topic:u}){o.isInitialized();const f=(0,x.gn)(C.THIRTY_DAYS);yield o.pairings.update(u,{active:!0,expiry:f}),o.core.expirer.set(u,f)});return function(u){return a.apply(this,arguments)}}(),this.ping=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),yield o.isValidPing(u);const{topic:f}=u;if(o.pairings.keys.includes(f)){const S=yield o.sendRequest(f,"wc_pairingPing",{}),{done:D,resolve:$,reject:W}=(0,x.H1)();o.events.once((0,x.E0)("pairing_ping",S),({error:pe})=>{pe?W(pe):$()}),yield D()}});return function(u){return a.apply(this,arguments)}}(),this.updateExpiry=function(){var a=(0,m.Z)(function*({topic:u,expiry:f}){o.isInitialized(),yield o.pairings.update(u,{expiry:f})});return function(u){return a.apply(this,arguments)}}(),this.updateMetadata=function(){var a=(0,m.Z)(function*({topic:u,metadata:f}){o.isInitialized(),yield o.pairings.update(u,{peerMetadata:f})});return function(u){return a.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var a=(0,m.Z)(function*(u){o.isInitialized(),yield o.isValidDisconnect(u);const{topic:f}=u;o.pairings.keys.includes(f)&&(yield o.sendRequest(f,"wc_pairingDelete",(0,x.D6)("USER_DISCONNECTED")),yield o.deletePairing(f))});return function(u){return a.apply(this,arguments)}}(),this.sendRequest=function(){var a=(0,m.Z)(function*(u,f,S){const D=mt(f,S),$=yield o.core.crypto.encode(u,D),W=Zi[f].req;return o.core.history.set(u,D),o.core.relayer.publish(u,$,W),D.id});return function(u,f,S){return a.apply(this,arguments)}}(),this.sendResult=function(){var a=(0,m.Z)(function*(u,f,S){const D=Tt(u,S),$=yield o.core.crypto.encode(f,D),W=yield o.core.history.get(f,u),pe=Zi[W.request.method].res;yield o.core.relayer.publish(f,$,pe),yield o.core.history.resolve(D)});return function(u,f,S){return a.apply(this,arguments)}}(),this.sendError=function(){var a=(0,m.Z)(function*(u,f,S){const D=bt(u,S),$=yield o.core.crypto.encode(f,D),W=yield o.core.history.get(f,u),pe=Zi[W.request.method]?Zi[W.request.method].res:Zi.unregistered_method.res;yield o.core.relayer.publish(f,$,pe),yield o.core.history.resolve(D)});return function(u,f,S){return a.apply(this,arguments)}}(),this.deletePairing=function(){var a=(0,m.Z)(function*(u,f){yield o.core.relayer.unsubscribe(u),yield Promise.all([o.pairings.delete(u,(0,x.D6)("USER_DISCONNECTED")),o.core.crypto.deleteSymKey(u),f?Promise.resolve():o.core.expirer.del(u)])});return function(u,f){return a.apply(this,arguments)}}(),this.cleanup=(0,m.Z)(function*(){const a=o.pairings.getAll().filter(u=>(0,x.Bw)(u.expiry));yield Promise.all(a.map(u=>o.deletePairing(u.topic)))}),this.onRelayEventRequest=a=>{const{topic:u,payload:f}=a;switch(f.method){case"wc_pairingPing":return this.onPairingPingRequest(u,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(u,f);default:return this.onUnknownRpcMethodRequest(u,f)}},this.onRelayEventResponse=function(){var a=(0,m.Z)(function*(u){const{topic:f,payload:S}=u,D=(yield o.core.history.get(f,S.id)).request.method;return"wc_pairingPing"===D?o.onPairingPingResponse(f,S):o.onUnknownRpcMethodResponse(D)});return function(u){return a.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var a=(0,m.Z)(function*(u,f){const{id:S}=f;try{o.isValidPing({topic:u}),yield o.sendResult(S,u,!0),o.events.emit("pairing_ping",{id:S,topic:u})}catch(D){yield o.sendError(S,u,D),o.logger.error(D)}});return function(u,f){return a.apply(this,arguments)}}(),this.onPairingPingResponse=(a,u)=>{const{id:f}=u;setTimeout(()=>{en(u)?this.events.emit((0,x.E0)("pairing_ping",f),{}):Nr(u)&&this.events.emit((0,x.E0)("pairing_ping",f),{error:u.error})},500)},this.onPairingDeleteRequest=function(){var a=(0,m.Z)(function*(u,f){const{id:S}=f;try{o.isValidDisconnect({topic:u}),yield o.deletePairing(u),o.events.emit("pairing_delete",{id:S,topic:u})}catch(D){yield o.sendError(S,u,D),o.logger.error(D)}});return function(u,f){return a.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var a=(0,m.Z)(function*(u,f){const{id:S,method:D}=f;try{if(o.registeredMethods.includes(D))return;const $=(0,x.D6)("WC_METHOD_UNSUPPORTED",D);yield o.sendError(S,u,$),o.logger.error($)}catch($){yield o.sendError(S,u,$),o.logger.error($)}});return function(u,f){return a.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=a=>{this.registeredMethods.includes(a)||this.logger.error((0,x.D6)("WC_METHOD_UNSUPPORTED",a))},this.isValidPair=a=>{if(!(0,x.EJ)(a)){const{message:u}=(0,x.Z7)("MISSING_OR_INVALID",`pair() params: ${a}`);throw new Error(u)}if(!(0,x.jv)(a.uri)){const{message:u}=(0,x.Z7)("MISSING_OR_INVALID",`pair() uri: ${a.uri}`);throw new Error(u)}},this.isValidPing=function(){var a=(0,m.Z)(function*(u){if(!(0,x.EJ)(u)){const{message:S}=(0,x.Z7)("MISSING_OR_INVALID",`ping() params: ${u}`);throw new Error(S)}const{topic:f}=u;yield o.isValidPairingTopic(f)});return function(u){return a.apply(this,arguments)}}(),this.isValidDisconnect=function(){var a=(0,m.Z)(function*(u){if(!(0,x.EJ)(u)){const{message:S}=(0,x.Z7)("MISSING_OR_INVALID",`disconnect() params: ${u}`);throw new Error(S)}const{topic:f}=u;yield o.isValidPairingTopic(f)});return function(u){return a.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var a=(0,m.Z)(function*(u){if(!(0,x.M_)(u,!1)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${u}`);throw new Error(f)}if(!o.pairings.keys.includes(u)){const{message:f}=(0,x.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${u}`);throw new Error(f)}if((0,x.Bw)(o.pairings.get(u).expiry)){yield o.deletePairing(u);const{message:f}=(0,x.Z7)("EXPIRED",`pairing topic: ${u}`);throw new Error(f)}});return function(u){return a.apply(this,arguments)}}(),this.core=n,this.logger=(0,he.generateChildLogger)(t,this.name),this.pairings=new Ts(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,he.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){var n=this;this.core.relayer.on("relayer_message",function(){var t=(0,m.Z)(function*(o){const{topic:a,message:u}=o;if(!n.pairings.keys.includes(a)||n.ignoredPayloadTypes.includes(n.core.crypto.getPayloadType(u)))return;const f=yield n.core.crypto.decode(a,u);try{ji(f)?(n.core.history.set(a,f),n.onRelayEventRequest({topic:a,payload:f})):hi(f)&&(yield n.core.history.resolve(f),yield n.onRelayEventResponse({topic:a,payload:f}),n.core.history.delete(a,f.id))}catch(S){n.logger.error(S)}});return function(o){return t.apply(this,arguments)}}())}registerExpirerEvents(){var n=this;this.core.expirer.on($r_expired,function(){var t=(0,m.Z)(function*(o){const{topic:a}=(0,x.iP)(o.target);a&&n.pairings.keys.includes(a)&&(yield n.deletePairing(a,!0),n.events.emit("pairing_expire",{topic:a}))});return function(o){return t.apply(this,arguments)}}())}}class Hd extends Re{constructor(n,t){var o;super(n,t),o=this,this.core=n,this.logger=t,this.records=new Map,this.events=new ae.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=(0,m.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(a=>o.records.set(a.id,a)),o.cached=[],o.registerEventListeners(),o.initialized=!0)}),this.set=(a,u,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:a,request:u,chainId:f}),this.records.has(u.id))return;const S={id:u.id,topic:a,request:{method:u.method,params:u.params||null},chainId:f,expiry:(0,x.gn)(C.THIRTY_DAYS)};this.records.set(S.id,S),this.events.emit("history_created",S)},this.resolve=function(){var a=(0,m.Z)(function*(u){if(o.isInitialized(),o.logger.debug("Updating JSON-RPC response history record"),o.logger.trace({type:"method",method:"update",response:u}),!o.records.has(u.id))return;const f=yield o.getRecord(u.id);typeof f.response>"u"&&(f.response=Nr(u)?{error:u.error}:{result:u.result},o.records.set(f.id,f),o.events.emit("history_updated",f))});return function(u){return a.apply(this,arguments)}}(),this.get=function(){var a=(0,m.Z)(function*(u,f){return o.isInitialized(),o.logger.debug("Getting record"),o.logger.trace({type:"method",method:"get",topic:u,id:f}),yield o.getRecord(f)});return function(u,f){return a.apply(this,arguments)}}(),this.delete=(a,u)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:u}),this.values.forEach(f=>{if(f.topic===a){if(typeof u<"u"&&f.id!==u)return;this.records.delete(f.id),this.events.emit("history_deleted",f)}})},this.exists=function(){var a=(0,m.Z)(function*(u,f){return o.isInitialized(),!!o.records.has(f)&&(yield o.getRecord(f)).topic===u});return function(u,f){return a.apply(this,arguments)}}(),this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.logger=(0,he.generateChildLogger)(t,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const n=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const o={topic:t.topic,request:mt(t.request.method,t.request.params,t.id),chainId:t.chainId};return n.push(o)}),n}setJsonRpcRecords(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,n)})()}getJsonRpcRecords(){var n=this;return(0,m.Z)(function*(){return yield n.core.storage.getItem(n.storageKey)})()}getRecord(n){this.isInitialized();const t=this.records.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return t}persist(){var n=this;return(0,m.Z)(function*(){yield n.setJsonRpcRecords(n.values),n.events.emit("history_sync")})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(n.records.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored records for ${n.name}`),n.logger.trace({type:"method",method:"restore",records:n.values})}catch(t){n.logger.debug(`Failed to Restore records for ${n.name}`),n.logger.error(t)}})()}registerEventListeners(){this.events.on("history_created",n=>{const t="history_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:n}),this.persist()}),this.events.on("history_updated",n=>{const t="history_updated";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:n}),this.persist()}),this.events.on("history_deleted",n=>{const t="history_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:n}),this.persist()}),this.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(n=>{(0,C.toMiliseconds)(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.delete(n.topic,n.id))})}catch(n){this.logger.warn(n)}}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Bd extends se{constructor(n,t){var o;super(n,t),o=this,this.core=n,this.logger=t,this.expirations=new Map,this.events=new ae.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Mn,this.init=(0,m.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(a=>o.expirations.set(a.target,a)),o.cached=[],o.registerEventListeners(),o.initialized=!0)}),this.has=a=>{try{const u=this.formatTarget(a);return typeof this.getExpiration(u)<"u"}catch{return!1}},this.set=(a,u)=>{this.isInitialized();const f=this.formatTarget(a),S={target:f,expiry:u};this.expirations.set(f,S),this.checkExpiry(f,S),this.events.emit("expirer_created",{target:f,expiration:S})},this.get=a=>{this.isInitialized();const u=this.formatTarget(a);return this.getExpiration(u)},this.del=a=>{if(this.isInitialized(),this.has(a)){const u=this.formatTarget(a),f=this.getExpiration(u);this.expirations.delete(u),this.events.emit("expirer_deleted",{target:u,expiration:f})}},this.on=(a,u)=>{this.events.on(a,u)},this.once=(a,u)=>{this.events.once(a,u)},this.off=(a,u)=>{this.events.off(a,u)},this.removeListener=(a,u)=>{this.events.removeListener(a,u)},this.logger=(0,he.generateChildLogger)(t,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(n){if("string"==typeof n)return(0,x.Z4)(n);if("number"==typeof n)return(0,x.Gq)(n);const{message:t}=(0,x.Z7)("UNKNOWN_TYPE","Target type: "+typeof n);throw new Error(t)}setExpirations(n){var t=this;return(0,m.Z)(function*(){yield t.core.storage.setItem(t.storageKey,n)})()}getExpirations(){var n=this;return(0,m.Z)(function*(){return yield n.core.storage.getItem(n.storageKey)})()}persist(){var n=this;return(0,m.Z)(function*(){yield n.setExpirations(n.values),n.events.emit("expirer_sync")})()}restore(){var n=this;return(0,m.Z)(function*(){try{const t=yield n.getExpirations();if(typeof t>"u"||!t.length)return;if(n.expirations.size){const{message:o}=(0,x.Z7)("RESTORE_WILL_OVERRIDE",n.name);throw n.logger.error(o),new Error(o)}n.cached=t,n.logger.debug(`Successfully Restored expirations for ${n.name}`),n.logger.trace({type:"method",method:"restore",expirations:n.values})}catch(t){n.logger.debug(`Failed to Restore expirations for ${n.name}`),n.logger.error(t)}})()}getExpiration(n){const t=this.expirations.get(n);if(!t){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(o),new Error(o)}return t}checkExpiry(n,t){const{expiry:o}=t;(0,C.toMiliseconds)(o)-Date.now()<=0&&this.expire(n,t)}expire(n,t){this.expirations.delete(n),this.events.emit($r_expired,{target:n,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((n,t)=>this.checkExpiry(t,n))}registerEventListeners(){this.core.heartbeat.on(xe.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",n=>{const t="expirer_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:n}),this.persist()}),this.events.on($r_expired,n=>{const t=$r_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:n}),this.persist()}),this.events.on("expirer_deleted",n=>{const t="expirer_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:n}),this.persist()})}isInitialized(){if(!this.initialized){const{message:n}=(0,x.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Vd extends ue{constructor(n,t){var o;super(n,t),o=this,this.projectId=n,this.logger=t,this.name=ia,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=function(){var a=(0,m.Z)(function*(u){if(o.verifyDisabled||(0,x.b$)()||!(0,x.jU)())return;const f=u?.verifyUrl||As;o.verifyUrl!==f&&o.removeIframe(),o.verifyUrl=f;try{yield o.createIframe()}catch(S){o.logger.info(`Verify iframe failed to load: ${o.verifyUrl}`),o.logger.info(S)}if(!o.initialized){o.removeIframe(),o.verifyUrl=au;try{yield o.createIframe()}catch(S){o.logger.info(`Verify iframe failed to load: ${o.verifyUrl}`),o.logger.info(S),o.verifyDisabled=!0}}});return function(u){return a.apply(this,arguments)}}(),this.register=function(){var a=(0,m.Z)(function*(u){o.initialized?o.sendPost(u.attestationId):(o.addToQueue(u.attestationId),yield o.init())});return function(u){return a.apply(this,arguments)}}(),this.resolve=function(){var a=(0,m.Z)(function*(u){if(o.isDevEnv)return"";const f=u?.verifyUrl||As;let S;try{S=yield o.fetchAttestation(u.attestationId,f)}catch(D){o.logger.info(`failed to resolve attestation: ${u.attestationId} from url: ${f}`),o.logger.info(D),S=yield o.fetchAttestation(u.attestationId,au)}return S});return function(u){return a.apply(this,arguments)}}(),this.fetchAttestation=function(){var a=(0,m.Z)(function*(u,f){o.logger.info(`resolving attestation: ${u} from url: ${f}`);const S=o.startAbortTimer(2*C.ONE_SECOND),D=yield fetch(`${f}/attestation/${u}`,{signal:o.abortController.signal});return clearTimeout(S),200===D.status?yield D.json():void 0});return function(u,f){return a.apply(this,arguments)}}(),this.addToQueue=a=>{this.queue.push(a)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(a=>this.sendPost(a)),this.queue=[])},this.sendPost=a=>{var u;try{if(!this.iframe)return;null==(u=this.iframe.contentWindow)||u.postMessage(a,"*"),this.logger.info(`postMessage sent: ${a} ${this.verifyUrl}`)}catch{}},this.createIframe=(0,m.Z)(function*(){let a;const u=f=>{"verify_ready"===f.data&&(o.initialized=!0,o.processQueue(),window.removeEventListener("message",u),a())};yield Promise.race([new Promise(f=>{if(document.getElementById(ia))return f();window.addEventListener("message",u);const S=document.createElement("iframe");S.id=ia,S.src=`${o.verifyUrl}/${o.projectId}`,S.style.display="none",document.body.append(S),o.iframe=S,a=f}),new Promise((f,S)=>setTimeout(()=>{window.removeEventListener("message",u),S("verify iframe load timeout")},(0,C.toMiliseconds)(C.FIVE_SECONDS)))])}),this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=(0,he.generateChildLogger)(t,this.name),this.verifyUrl=As,this.abortController=new AbortController,this.isDevEnv=(0,x.UG)()&&process.env.IS_VITEST}get context(){return(0,he.getLoggerContext)(this.logger)}startAbortTimer(n){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,C.toMiliseconds)(n))}}var kd=Object.defineProperty,gu=Object.getOwnPropertySymbols,Kd=Object.prototype.hasOwnProperty,Gd=Object.prototype.propertyIsEnumerable,yu=(y,n,t)=>n in y?kd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,vu=(y,n)=>{for(var t in n||(n={}))Kd.call(n,t)&&yu(y,t,n[t]);if(gu)for(var t of gu(n))Gd.call(n,t)&&yu(y,t,n[t]);return y};class oa extends ce{constructor(n){super(n),this.protocol="wc",this.version=2,this.name="core",this.events=new ae.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=n?.projectId,this.relayUrl=n?.relayUrl||su;const t=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n?.logger||"error"}));this.logger=(0,he.generateChildLogger)(t,this.name),this.heartbeat=new xe.HeartBeat,this.crypto=new Id(this,this.logger,n?.keychain),this.history=new Hd(this,this.logger),this.expirer=new Bd(this,this.logger),this.storage=null!=n&&n.storage?n.storage:new X.ZP(vu(vu({},Qh),n?.storageOptions)),this.relayer=new Zd({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new $d(this,this.logger),this.verify=new Vd(this.projectId||"",this.logger)}static init(n){return(0,m.Z)(function*(){const t=new oa(n);yield t.initialize();const o=yield t.crypto.getClientId();return yield t.storage.setItem("WALLETCONNECT_CLIENT_ID",o),t})()}get context(){return(0,he.getLoggerContext)(this.logger)}start(){var n=this;return(0,m.Z)(function*(){n.initialized||(yield n.initialize())})()}initialize(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized");try{yield n.crypto.init(),yield n.history.init(),yield n.expirer.init(),yield n.relayer.init(),yield n.heartbeat.init(),yield n.pairing.init(),n.initialized=!0,n.logger.info("Core Initialization Success")}catch(t){throw n.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),n.logger.error(t.message),t}})()}}const Wd=oa,aa="wc@2:client:",wu="WALLETCONNECT_DEEPLINK_CHOICE",xu="Proposal expired",Cs=C.SEVEN_DAYS,zi={wc_sessionPropose:{req:{ttl:C.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:C.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:C.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:C.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:C.ONE_DAY,prompt:!1,tag:1104},res:{ttl:C.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:C.ONE_DAY,prompt:!1,tag:1106},res:{ttl:C.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:C.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:C.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:C.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:C.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:C.ONE_DAY,prompt:!1,tag:1112},res:{ttl:C.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:C.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:C.THIRTY_SECONDS,prompt:!1,tag:1115}}},ua={min:C.FIVE_MINUTES,max:C.SEVEN_DAYS},ep=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var tp=Object.defineProperty,rp=Object.defineProperties,np=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,Iu=(y,n,t)=>n in y?tp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Or=(y,n)=>{for(var t in n||(n={}))ip.call(n,t)&&Iu(y,t,n[t]);if(Eu)for(var t of Eu(n))sp.call(n,t)&&Iu(y,t,n[t]);return y},$i=(y,n)=>rp(y,np(n));class op extends p{constructor(n){var t;super(n),t=this,this.name="engine",this.events=new(ve()),this.initialized=!1,this.ignoredPayloadTypes=[x.rV],this.requestQueue={state:"IDLE",queue:[]},this.sessionRequestQueue={state:"IDLE",queue:[]},this.requestQueueDelay=C.ONE_SECOND,this.init=(0,m.Z)(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.registerPairingEvents(),t.client.core.pairing.register({methods:Object.keys(zi)}),t.initialized=!0,setTimeout(()=>{t.sessionRequestQueue.queue=t.getPendingSessionRequests(),t.processSessionRequestQueue()},(0,C.toMiliseconds)(t.requestQueueDelay)))}),this.connect=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized();const u=$i(Or({},a),{requiredNamespaces:a.requiredNamespaces||{},optionalNamespaces:a.optionalNamespaces||{}});yield t.isValidConnect(u);const{pairingTopic:f,requiredNamespaces:S,optionalNamespaces:D,sessionProperties:$,relays:W}=u;let Oe,pe=f,Fe=!1;if(pe&&(Fe=t.client.core.pairing.pairings.get(pe).active),!pe||!Fe){const{topic:ft,uri:Zt}=yield t.client.core.pairing.create();pe=ft,Oe=Zt}const we=yield t.client.core.crypto.generateKeyPair(),Ve=Or({requiredNamespaces:S,optionalNamespaces:D,relays:W??[{protocol:"irn"}],proposer:{publicKey:we,metadata:t.client.metadata}},$&&{sessionProperties:$}),{reject:Qe,resolve:xt,done:fr}=(0,x.H1)(C.FIVE_MINUTES,xu);if(t.events.once((0,x.E0)("session_connect"),function(){var ft=(0,m.Z)(function*({error:Zt,session:et}){if(Zt)Qe(Zt);else if(et){et.self.publicKey=we;const ar=$i(Or({},et),{requiredNamespaces:et.requiredNamespaces,optionalNamespaces:et.optionalNamespaces});yield t.client.session.set(et.topic,ar),yield t.setExpiry(et.topic,et.expiry),pe&&(yield t.client.core.pairing.updateMetadata({topic:pe,metadata:et.peer.metadata})),xt(ar)}});return function(Zt){return ft.apply(this,arguments)}}()),!pe){const{message:ft}=(0,x.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${pe}`);throw new Error(ft)}const yt=yield t.sendRequest({topic:pe,method:"wc_sessionPropose",params:Ve}),Mt=(0,x.gn)(C.FIVE_MINUTES);return yield t.setProposal(yt,Or({id:yt,expiry:Mt},Ve)),{uri:Oe,approval:fr}});return function(a){return o.apply(this,arguments)}}(),this.pair=function(){var o=(0,m.Z)(function*(a){return yield t.isInitialized(),yield t.client.core.pairing.pair(a)});return function(a){return o.apply(this,arguments)}}(),this.approve=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidApprove(a);const{id:u,relayProtocol:f,namespaces:S,sessionProperties:D}=a,$=t.client.proposal.get(u);let{pairingTopic:W,proposer:pe,requiredNamespaces:Oe,optionalNamespaces:Fe}=$;W=W||"",(0,x.L5)(Oe)||(Oe=(0,x.fc)(S,"approve()"));const we=yield t.client.core.crypto.generateKeyPair(),Ve=pe.publicKey,Qe=yield t.client.core.crypto.generateSharedKey(we,Ve);W&&u&&(yield t.client.core.pairing.updateMetadata({topic:W,metadata:pe.metadata}),yield t.sendResult({id:u,topic:W,result:{relay:{protocol:f??"irn"},responderPublicKey:we}}),yield t.client.proposal.delete(u,(0,x.D6)("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:W}));const xt=Or({relay:{protocol:f??"irn"},namespaces:S,requiredNamespaces:Oe,optionalNamespaces:Fe,pairingTopic:W,controller:{publicKey:we,metadata:t.client.metadata},expiry:(0,x.gn)(Cs)},D&&{sessionProperties:D});yield t.client.core.relayer.subscribe(Qe),yield t.sendRequest({topic:Qe,method:"wc_sessionSettle",params:xt,throwOnFailedPublish:!0});const fr=$i(Or({},xt),{topic:Qe,pairingTopic:W,acknowledged:!1,self:xt.controller,peer:{publicKey:pe.publicKey,metadata:pe.metadata},controller:we});return yield t.client.session.set(Qe,fr),yield t.setExpiry(Qe,(0,x.gn)(Cs)),{topic:Qe,acknowledged:()=>new Promise(yt=>setTimeout(()=>yt(t.client.session.get(Qe)),500))}});return function(a){return o.apply(this,arguments)}}(),this.reject=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidReject(a);const{id:u,reason:f}=a,{pairingTopic:S}=t.client.proposal.get(u);S&&(yield t.sendError(u,S,f),yield t.client.proposal.delete(u,(0,x.D6)("USER_DISCONNECTED")))});return function(a){return o.apply(this,arguments)}}(),this.update=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidUpdate(a);const{topic:u,namespaces:f}=a,S=yield t.sendRequest({topic:u,method:"wc_sessionUpdate",params:{namespaces:f}}),{done:D,resolve:$,reject:W}=(0,x.H1)();return t.events.once((0,x.E0)("session_update",S),({error:pe})=>{pe?W(pe):$()}),yield t.client.session.update(u,{namespaces:f}),{acknowledged:D}});return function(a){return o.apply(this,arguments)}}(),this.extend=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidExtend(a);const{topic:u}=a,f=yield t.sendRequest({topic:u,method:"wc_sessionExtend",params:{}}),{done:S,resolve:D,reject:$}=(0,x.H1)();return t.events.once((0,x.E0)("session_extend",f),({error:W})=>{W?$(W):D()}),yield t.setExpiry(u,(0,x.gn)(Cs)),{acknowledged:S}});return function(a){return o.apply(this,arguments)}}(),this.request=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidRequest(a);const{chainId:u,request:f,topic:S,expiry:D}=a,$=Nt(),{done:W,resolve:pe,reject:Oe}=(0,x.H1)(D);return t.events.once((0,x.E0)("session_request",$),({error:Fe,result:we})=>{Fe?Oe(Fe):pe(we)}),yield Promise.all([new Promise(function(){var Fe=(0,m.Z)(function*(we){yield t.sendRequest({clientRpcId:$,topic:S,method:"wc_sessionRequest",params:{request:f,chainId:u},expiry:D,throwOnFailedPublish:!0}).catch(Ve=>Oe(Ve)),t.client.events.emit("session_request_sent",{topic:S,request:f,chainId:u,id:$}),we()});return function(we){return Fe.apply(this,arguments)}}()),new Promise(function(){var Fe=(0,m.Z)(function*(we){const Ve=yield t.client.core.storage.getItem(wu);(0,x.Hh)({id:$,topic:S,wcDeepLink:Ve}),we()});return function(we){return Fe.apply(this,arguments)}}()),W()]).then(Fe=>Fe[2])});return function(a){return o.apply(this,arguments)}}(),this.respond=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidRespond(a);const{topic:u,response:f}=a,{id:S}=f;en(f)?yield t.sendResult({id:S,topic:u,result:f.result,throwOnFailedPublish:!0}):Nr(f)&&(yield t.sendError(S,u,f.error)),t.cleanupAfterResponse(a)});return function(a){return o.apply(this,arguments)}}(),this.ping=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidPing(a);const{topic:u}=a;if(t.client.session.keys.includes(u)){const f=yield t.sendRequest({topic:u,method:"wc_sessionPing",params:{}}),{done:S,resolve:D,reject:$}=(0,x.H1)();t.events.once((0,x.E0)("session_ping",f),({error:W})=>{W?$(W):D()}),yield S()}else t.client.core.pairing.pairings.keys.includes(u)&&(yield t.client.core.pairing.ping({topic:u}))});return function(a){return o.apply(this,arguments)}}(),this.emit=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidEmit(a);const{topic:u,event:f,chainId:S}=a;yield t.sendRequest({topic:u,method:"wc_sessionEvent",params:{event:f,chainId:S}})});return function(a){return o.apply(this,arguments)}}(),this.disconnect=function(){var o=(0,m.Z)(function*(a){yield t.isInitialized(),yield t.isValidDisconnect(a);const{topic:u}=a;t.client.session.keys.includes(u)?(yield t.sendRequest({topic:u,method:"wc_sessionDelete",params:(0,x.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield t.deleteSession(u)):yield t.client.core.pairing.disconnect({topic:u})});return function(a){return o.apply(this,arguments)}}(),this.find=o=>(this.isInitialized(),this.client.session.getAll().filter(a=>(0,x.Ih)(a,o))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=function(){var o=(0,m.Z)(function*(a){if(a.pairingTopic)try{const u=t.client.core.pairing.pairings.get(a.pairingTopic),f=t.client.core.pairing.pairings.getAll().filter(S=>{var D,$;return(null==(D=S.peerMetadata)?void 0:D.url)&&(null==($=S.peerMetadata)?void 0:$.url)===a.peer.metadata.url&&S.topic&&S.topic!==u.topic});if(0===f.length)return;t.client.logger.info(`Cleaning up ${f.length} duplicate pairing(s)`),yield Promise.all(f.map(S=>t.client.core.pairing.disconnect({topic:S.topic}))),t.client.logger.info("Duplicate pairings clean up finished")}catch(u){t.client.logger.error(u)}});return function(a){return o.apply(this,arguments)}}(),this.deleteSession=function(){var o=(0,m.Z)(function*(a,u){const{self:f}=t.client.session.get(a);yield t.client.core.relayer.unsubscribe(a),t.client.session.delete(a,(0,x.D6)("USER_DISCONNECTED")),t.client.core.crypto.keychain.has(f.publicKey)&&(yield t.client.core.crypto.deleteKeyPair(f.publicKey)),t.client.core.crypto.keychain.has(a)&&(yield t.client.core.crypto.deleteSymKey(a)),u||t.client.core.expirer.del(a),t.client.core.storage.removeItem(wu).catch(S=>t.client.logger.warn(S))});return function(a,u){return o.apply(this,arguments)}}(),this.deleteProposal=function(){var o=(0,m.Z)(function*(a,u){yield Promise.all([t.client.proposal.delete(a,(0,x.D6)("USER_DISCONNECTED")),u?Promise.resolve():t.client.core.expirer.del(a)])});return function(a,u){return o.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var o=(0,m.Z)(function*(a,u,f=!1){yield Promise.all([t.client.pendingRequest.delete(a,u),f?Promise.resolve():t.client.core.expirer.del(a)]),t.sessionRequestQueue.queue=t.sessionRequestQueue.queue.filter(S=>S.id!==a),f&&(t.sessionRequestQueue.state="IDLE")});return function(a,u){return o.apply(this,arguments)}}(),this.setExpiry=function(){var o=(0,m.Z)(function*(a,u){t.client.session.keys.includes(a)&&(yield t.client.session.update(a,{expiry:u})),t.client.core.expirer.set(a,u)});return function(a,u){return o.apply(this,arguments)}}(),this.setProposal=function(){var o=(0,m.Z)(function*(a,u){yield t.client.proposal.set(a,u),t.client.core.expirer.set(a,u.expiry)});return function(a,u){return o.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var o=(0,m.Z)(function*(a){const u=zi.wc_sessionRequest.req.ttl,{id:f,topic:S,params:D,verifyContext:$}=a;yield t.client.pendingRequest.set(f,{id:f,topic:S,params:D,verifyContext:$}),u&&t.client.core.expirer.set(f,(0,x.gn)(u))});return function(a){return o.apply(this,arguments)}}(),this.sendRequest=function(){var o=(0,m.Z)(function*(a){const{topic:u,method:f,params:S,expiry:D,relayRpcId:$,clientRpcId:W,throwOnFailedPublish:pe}=a,Oe=mt(f,S,W);if((0,x.jU)()&&ep.includes(f)){const Ve=(0,x.rj)(JSON.stringify(Oe));t.client.core.verify.register({attestationId:Ve})}const Fe=yield t.client.core.crypto.encode(u,Oe),we=zi[f].req;return D&&(we.ttl=D),$&&(we.id=$),t.client.core.history.set(u,Oe),pe?(we.internal=$i(Or({},we.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(u,Fe,we)):t.client.core.relayer.publish(u,Fe,we).catch(Ve=>t.client.logger.error(Ve)),Oe.id});return function(a){return o.apply(this,arguments)}}(),this.sendResult=function(){var o=(0,m.Z)(function*(a){const{id:u,topic:f,result:S,throwOnFailedPublish:D}=a,$=Tt(u,S),W=yield t.client.core.crypto.encode(f,$),pe=yield t.client.core.history.get(f,u),Oe=zi[pe.request.method].res;D?(Oe.internal=$i(Or({},Oe.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(f,W,Oe)):t.client.core.relayer.publish(f,W,Oe).catch(Fe=>t.client.logger.error(Fe)),yield t.client.core.history.resolve($)});return function(a){return o.apply(this,arguments)}}(),this.sendError=function(){var o=(0,m.Z)(function*(a,u,f){const S=bt(a,f),D=yield t.client.core.crypto.encode(u,S),$=yield t.client.core.history.get(u,a);t.client.core.relayer.publish(u,D,zi[$.request.method].res),yield t.client.core.history.resolve(S)});return function(a,u,f){return o.apply(this,arguments)}}(),this.cleanup=(0,m.Z)(function*(){const o=[],a=[];t.client.session.getAll().forEach(u=>{(0,x.Bw)(u.expiry)&&o.push(u.topic)}),t.client.proposal.getAll().forEach(u=>{(0,x.Bw)(u.expiry)&&a.push(u.id)}),yield Promise.all([...o.map(u=>t.deleteSession(u)),...a.map(u=>t.deleteProposal(u))])}),this.onRelayEventRequest=function(){var o=(0,m.Z)(function*(a){t.requestQueue.queue.push(a),yield t.processRequestsQueue()});return function(a){return o.apply(this,arguments)}}(),this.processRequestsQueue=(0,m.Z)(function*(){if("ACTIVE"!==t.requestQueue.state){for(t.client.logger.info(`Request queue starting with ${t.requestQueue.queue.length} requests`);t.requestQueue.queue.length>0;){t.requestQueue.state="ACTIVE";const o=t.requestQueue.queue.shift();if(o)try{t.processRequest(o),yield new Promise(a=>setTimeout(a,300))}catch(a){t.client.logger.warn(a)}}t.requestQueue.state="IDLE"}else t.client.logger.info("Request queue already active, skipping...")}),this.processRequest=o=>{const{topic:a,payload:u}=o,f=u.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(a,u);case"wc_sessionSettle":return this.onSessionSettleRequest(a,u);case"wc_sessionUpdate":return this.onSessionUpdateRequest(a,u);case"wc_sessionExtend":return this.onSessionExtendRequest(a,u);case"wc_sessionPing":return this.onSessionPingRequest(a,u);case"wc_sessionDelete":return this.onSessionDeleteRequest(a,u);case"wc_sessionRequest":return this.onSessionRequest(a,u);case"wc_sessionEvent":return this.onSessionEventRequest(a,u);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=function(){var o=(0,m.Z)(function*(a){const{topic:u,payload:f}=a,S=(yield t.client.core.history.get(u,f.id)).request.method;switch(S){case"wc_sessionPropose":return t.onSessionProposeResponse(u,f);case"wc_sessionSettle":return t.onSessionSettleResponse(u,f);case"wc_sessionUpdate":return t.onSessionUpdateResponse(u,f);case"wc_sessionExtend":return t.onSessionExtendResponse(u,f);case"wc_sessionPing":return t.onSessionPingResponse(u,f);case"wc_sessionRequest":return t.onSessionRequestResponse(u,f);default:return t.client.logger.info(`Unsupported response method ${S}`)}});return function(a){return o.apply(this,arguments)}}(),this.onRelayEventUnknownPayload=o=>{const{topic:a}=o,{message:u}=(0,x.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${a} is not identifiable as a JSON-RPC request or a response.`);throw new Error(u)},this.onSessionProposeRequest=function(){var o=(0,m.Z)(function*(a,u){const{params:f,id:S}=u;try{t.isValidConnect(Or({},u.params));const D=(0,x.gn)(C.FIVE_MINUTES),$=Or({id:S,pairingTopic:a,expiry:D},f);yield t.setProposal(S,$);const W=(0,x.rj)(JSON.stringify(u)),pe=yield t.getVerifyContext(W,$.proposer.metadata);t.client.events.emit("session_proposal",{id:S,params:$,verifyContext:pe})}catch(D){yield t.sendError(S,a,D),t.client.logger.error(D)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;if(en(u)){const{result:S}=u;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:S});const D=t.client.proposal.get(f);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:D});const $=D.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:$});const W=S.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:W});const pe=yield t.client.core.crypto.generateSharedKey($,W);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:pe});const Oe=yield t.client.core.relayer.subscribe(pe);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:Oe}),yield t.client.core.pairing.activate({topic:a})}else Nr(u)&&(yield t.client.proposal.delete(f,(0,x.D6)("USER_DISCONNECTED")),t.events.emit((0,x.E0)("session_connect"),{error:u.error}))});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f,params:S}=u;try{t.isValidSessionSettleRequest(S);const{relay:D,controller:$,expiry:W,namespaces:pe,requiredNamespaces:Oe,optionalNamespaces:Fe,sessionProperties:we,pairingTopic:Ve}=u.params,Qe=Or({topic:a,relay:D,expiry:W,namespaces:pe,acknowledged:!0,pairingTopic:Ve,requiredNamespaces:Oe,optionalNamespaces:Fe,controller:$.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:$.publicKey,metadata:$.metadata}},we&&{sessionProperties:we});yield t.sendResult({id:u.id,topic:a,result:!0}),t.events.emit((0,x.E0)("session_connect"),{session:Qe}),t.cleanupDuplicatePairings(Qe)}catch(D){yield t.sendError(f,a,D),t.client.logger.error(D)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;en(u)?(yield t.client.session.update(a,{acknowledged:!0}),t.events.emit((0,x.E0)("session_approve",f),{})):Nr(u)&&(yield t.client.session.delete(a,(0,x.D6)("USER_DISCONNECTED")),t.events.emit((0,x.E0)("session_approve",f),{error:u.error}))});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var o=(0,m.Z)(function*(a,u){const{params:f,id:S}=u;try{const D=`${a}_session_update`,$=x.O6.get(D);if($&&t.isRequestOutOfSync($,S))return void t.client.logger.info(`Discarding out of sync request - ${S}`);t.isValidUpdate(Or({topic:a},f)),yield t.client.session.update(a,{namespaces:f.namespaces}),yield t.sendResult({id:S,topic:a,result:!0}),t.client.events.emit("session_update",{id:S,topic:a,params:f}),x.O6.set(D,S)}catch(D){yield t.sendError(S,a,D),t.client.logger.error(D)}});return function(a,u){return o.apply(this,arguments)}}(),this.isRequestOutOfSync=(o,a)=>parseInt(a.toString().slice(0,-3))<=parseInt(o.toString().slice(0,-3)),this.onSessionUpdateResponse=(o,a)=>{const{id:u}=a;en(a)?this.events.emit((0,x.E0)("session_update",u),{}):Nr(a)&&this.events.emit((0,x.E0)("session_update",u),{error:a.error})},this.onSessionExtendRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;try{t.isValidExtend({topic:a}),yield t.setExpiry(a,(0,x.gn)(Cs)),yield t.sendResult({id:f,topic:a,result:!0}),t.client.events.emit("session_extend",{id:f,topic:a})}catch(S){yield t.sendError(f,a,S),t.client.logger.error(S)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionExtendResponse=(o,a)=>{const{id:u}=a;en(a)?this.events.emit((0,x.E0)("session_extend",u),{}):Nr(a)&&this.events.emit((0,x.E0)("session_extend",u),{error:a.error})},this.onSessionPingRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;try{t.isValidPing({topic:a}),yield t.sendResult({id:f,topic:a,result:!0}),t.client.events.emit("session_ping",{id:f,topic:a})}catch(S){yield t.sendError(f,a,S),t.client.logger.error(S)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionPingResponse=(o,a)=>{const{id:u}=a;setTimeout(()=>{en(a)?this.events.emit((0,x.E0)("session_ping",u),{}):Nr(a)&&this.events.emit((0,x.E0)("session_ping",u),{error:a.error})},500)},this.onSessionDeleteRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f}=u;try{t.isValidDisconnect({topic:a,reason:u.params}),yield Promise.all([new Promise(S=>{t.client.core.relayer.once("relayer_publish",(0,m.Z)(function*(){S(yield t.deleteSession(a))}))}),t.sendResult({id:f,topic:a,result:!0})]),t.client.events.emit("session_delete",{id:f,topic:a})}catch(S){t.client.logger.error(S)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f,params:S}=u;try{t.isValidRequest(Or({topic:a},S));const D=(0,x.rj)(JSON.stringify(mt("wc_sessionRequest",S,f))),$=t.client.session.get(a),pe={id:f,topic:a,params:S,verifyContext:yield t.getVerifyContext(D,$.peer.metadata)};yield t.setPendingSessionRequest(pe),t.addSessionRequestToSessionRequestQueue(pe),t.processSessionRequestQueue()}catch(D){yield t.sendError(f,a,D),t.client.logger.error(D)}});return function(a,u){return o.apply(this,arguments)}}(),this.onSessionRequestResponse=(o,a)=>{const{id:u}=a;en(a)?this.events.emit((0,x.E0)("session_request",u),{result:a.result}):Nr(a)&&this.events.emit((0,x.E0)("session_request",u),{error:a.error})},this.onSessionEventRequest=function(){var o=(0,m.Z)(function*(a,u){const{id:f,params:S}=u;try{const D=`${a}_session_event_${S.event.name}`,$=x.O6.get(D);if($&&t.isRequestOutOfSync($,f))return void t.client.logger.info(`Discarding out of sync request - ${f}`);t.isValidEmit(Or({topic:a},S)),t.client.events.emit("session_event",{id:f,topic:a,params:S}),x.O6.set(D,f)}catch(D){yield t.sendError(f,a,D),t.client.logger.error(D)}});return function(a,u){return o.apply(this,arguments)}}(),this.addSessionRequestToSessionRequestQueue=o=>{this.sessionRequestQueue.queue.push(o)},this.cleanupAfterResponse=o=>{this.deletePendingSessionRequest(o.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state="IDLE",this.processSessionRequestQueue()},(0,C.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if("ACTIVE"===this.sessionRequestQueue.state)return void this.client.logger.info("session request queue is already active.");const o=this.sessionRequestQueue.queue[0];if(o)try{this.sessionRequestQueue.state="ACTIVE",this.client.events.emit("session_request",o)}catch(a){this.client.logger.error(a)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=o=>{if(o.active)return;const a=this.client.proposal.getAll().find(u=>u.pairingTopic===o.topic);a&&this.onSessionProposeRequest(o.topic,mt("wc_sessionPropose",{requiredNamespaces:a.requiredNamespaces,optionalNamespaces:a.optionalNamespaces,relays:a.relays,proposer:a.proposer},a.id))},this.isValidConnect=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(a)}`);throw new Error(W)}const{pairingTopic:u,requiredNamespaces:f,optionalNamespaces:S,sessionProperties:D,relays:$}=a;if((0,x.o8)(u)||(yield t.isValidPairingTopic(u)),!(0,x.PM)($,!0)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`connect() relays: ${$}`);throw new Error(W)}!(0,x.o8)(f)&&0!==(0,x.L5)(f)&&t.validateNamespaces(f,"requiredNamespaces"),!(0,x.o8)(S)&&0!==(0,x.L5)(S)&&t.validateNamespaces(S,"optionalNamespaces"),(0,x.o8)(D)||t.validateSessionProps(D,"sessionProperties")});return function(a){return o.apply(this,arguments)}}(),this.validateNamespaces=(o,a)=>{const u=(0,x.n)(o,"connect()",a);if(u)throw new Error(u.message)},this.isValidApprove=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a))throw new Error((0,x.Z7)("MISSING_OR_INVALID",`approve() params: ${a}`).message);const{id:u,namespaces:f,relayProtocol:S,sessionProperties:D}=a;yield t.isValidProposalId(u);const $=t.client.proposal.get(u),W=(0,x.in)(f,"approve()");if(W)throw new Error(W.message);const pe=(0,x.rF)($.requiredNamespaces,f,"approve()");if(pe)throw new Error(pe.message);if(!(0,x.M_)(S,!0)){const{message:Oe}=(0,x.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${S}`);throw new Error(Oe)}(0,x.o8)(D)||t.validateSessionProps(D,"sessionProperties")});return function(a){return o.apply(this,arguments)}}(),this.isValidReject=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:S}=(0,x.Z7)("MISSING_OR_INVALID",`reject() params: ${a}`);throw new Error(S)}const{id:u,reason:f}=a;if(yield t.isValidProposalId(u),!(0,x.$t)(f)){const{message:S}=(0,x.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(f)}`);throw new Error(S)}});return function(a){return o.apply(this,arguments)}}(),this.isValidSessionSettleRequest=o=>{if(!(0,x.EJ)(o)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${o}`);throw new Error(W)}const{relay:a,controller:u,namespaces:f,expiry:S}=o;if(!(0,x.Z2)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(W)}const D=(0,x.Dd)(u,"onSessionSettleRequest()");if(D)throw new Error(D.message);const $=(0,x.in)(f,"onSessionSettleRequest()");if($)throw new Error($.message);if((0,x.Bw)(S)){const{message:W}=(0,x.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(W)}},this.isValidUpdate=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`update() params: ${a}`);throw new Error(W)}const{topic:u,namespaces:f}=a;yield t.isValidSessionTopic(u);const S=t.client.session.get(u),D=(0,x.in)(f,"update()");if(D)throw new Error(D.message);const $=(0,x.rF)(S.requiredNamespaces,f,"update()");if($)throw new Error($.message)});return function(a){return o.apply(this,arguments)}}(),this.isValidExtend=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`extend() params: ${a}`);throw new Error(f)}const{topic:u}=a;yield t.isValidSessionTopic(u)});return function(a){return o.apply(this,arguments)}}(),this.isValidRequest=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() params: ${a}`);throw new Error(W)}const{topic:u,request:f,chainId:S,expiry:D}=a;yield t.isValidSessionTopic(u);const{namespaces:$}=t.client.session.get(u);if(!(0,x.p8)($,S)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() chainId: ${S}`);throw new Error(W)}if(!(0,x.hH)(f)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(f)}`);throw new Error(W)}if(!(0,x.al)($,S,f.method)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() method: ${f.method}`);throw new Error(W)}if(D&&!(0,x.ON)(D,ua)){const{message:W}=(0,x.Z7)("MISSING_OR_INVALID",`request() expiry: ${D}. Expiry must be a number (in seconds) between ${ua.min} and ${ua.max}`);throw new Error(W)}});return function(a){return o.apply(this,arguments)}}(),this.isValidRespond=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:S}=(0,x.Z7)("MISSING_OR_INVALID",`respond() params: ${a}`);throw new Error(S)}const{topic:u,response:f}=a;if(yield t.isValidSessionTopic(u),!(0,x.JT)(f)){const{message:S}=(0,x.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(f)}`);throw new Error(S)}});return function(a){return o.apply(this,arguments)}}(),this.isValidPing=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`ping() params: ${a}`);throw new Error(f)}const{topic:u}=a;yield t.isValidSessionOrPairingTopic(u)});return function(a){return o.apply(this,arguments)}}(),this.isValidEmit=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:$}=(0,x.Z7)("MISSING_OR_INVALID",`emit() params: ${a}`);throw new Error($)}const{topic:u,event:f,chainId:S}=a;yield t.isValidSessionTopic(u);const{namespaces:D}=t.client.session.get(u);if(!(0,x.p8)(D,S)){const{message:$}=(0,x.Z7)("MISSING_OR_INVALID",`emit() chainId: ${S}`);throw new Error($)}if(!(0,x.nf)(f)){const{message:$}=(0,x.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error($)}if(!(0,x.sI)(D,S,f.name)){const{message:$}=(0,x.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error($)}});return function(a){return o.apply(this,arguments)}}(),this.isValidDisconnect=function(){var o=(0,m.Z)(function*(a){if(!(0,x.EJ)(a)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`disconnect() params: ${a}`);throw new Error(f)}const{topic:u}=a;yield t.isValidSessionOrPairingTopic(u)});return function(a){return o.apply(this,arguments)}}(),this.getVerifyContext=function(){var o=(0,m.Z)(function*(a,u){const f={verified:{verifyUrl:u.verifyUrl||As,validation:"UNKNOWN",origin:u.url||""}};try{const S=yield t.client.core.verify.resolve({attestationId:a,verifyUrl:u.verifyUrl});S&&(f.verified.origin=S.origin,f.verified.isScam=S.isScam,f.verified.validation=S.origin===new URL(u.url).origin?"VALID":"INVALID")}catch(S){t.client.logger.info(S)}return t.client.logger.info(`Verify context: ${JSON.stringify(f)}`),f});return function(a,u){return o.apply(this,arguments)}}(),this.validateSessionProps=(o,a)=>{Object.values(o).forEach(u=>{if(!(0,x.M_)(u,!1)){const{message:f}=(0,x.Z7)("MISSING_OR_INVALID",`${a} must be in Record<string, string> format. Received: ${JSON.stringify(u)}`);throw new Error(f)}})}}isInitialized(){var n=this;return(0,m.Z)(function*(){if(!n.initialized){const{message:t}=(0,x.Z7)("NOT_INITIALIZED",n.name);throw new Error(t)}yield n.client.core.relayer.confirmOnlineStateOrThrow()})()}registerRelayerEvents(){var n=this;this.client.core.relayer.on("relayer_message",function(){var t=(0,m.Z)(function*(o){const{topic:a,message:u}=o;if(n.ignoredPayloadTypes.includes(n.client.core.crypto.getPayloadType(u)))return;const f=yield n.client.core.crypto.decode(a,u);try{ji(f)?(n.client.core.history.set(a,f),n.onRelayEventRequest({topic:a,payload:f})):hi(f)?(yield n.client.core.history.resolve(f),yield n.onRelayEventResponse({topic:a,payload:f}),n.client.core.history.delete(a,f.id)):n.onRelayEventUnknownPayload({topic:a,payload:f})}catch(S){n.client.logger.error(S)}});return function(o){return t.apply(this,arguments)}}())}registerExpirerEvents(){var n=this;this.client.core.expirer.on($r_expired,function(){var t=(0,m.Z)(function*(o){const{topic:a,id:u}=(0,x.iP)(o.target);if(u&&n.client.pendingRequest.keys.includes(u))return yield n.deletePendingSessionRequest(u,(0,x.Z7)("EXPIRED"),!0);a?n.client.session.keys.includes(a)&&(yield n.deleteSession(a,!0),n.client.events.emit("session_expire",{topic:a})):u&&(yield n.deleteProposal(u,!0),n.client.events.emit("proposal_expire",{id:u}))});return function(o){return t.apply(this,arguments)}}())}registerPairingEvents(){this.client.core.pairing.events.on("pairing_create",n=>this.onPairingCreated(n))}isValidPairingTopic(n){if(!(0,x.M_)(n,!1)){const{message:t}=(0,x.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:t}=(0,x.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(t)}if((0,x.Bw)(this.client.core.pairing.pairings.get(n).expiry)){const{message:t}=(0,x.Z7)("EXPIRED",`pairing topic: ${n}`);throw new Error(t)}}isValidSessionTopic(n){var t=this;return(0,m.Z)(function*(){if(!(0,x.M_)(n,!1)){const{message:o}=(0,x.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(o)}if(!t.client.session.keys.includes(n)){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(o)}if((0,x.Bw)(t.client.session.get(n).expiry)){yield t.deleteSession(n);const{message:o}=(0,x.Z7)("EXPIRED",`session topic: ${n}`);throw new Error(o)}})()}isValidSessionOrPairingTopic(n){var t=this;return(0,m.Z)(function*(){if(t.client.session.keys.includes(n))yield t.isValidSessionTopic(n);else{if(!t.client.core.pairing.pairings.keys.includes(n)){if((0,x.M_)(n,!1)){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(o)}{const{message:o}=(0,x.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(o)}}t.isValidPairingTopic(n)}})()}isValidProposalId(n){var t=this;return(0,m.Z)(function*(){if(!(0,x.Q0)(n)){const{message:o}=(0,x.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(o)}if(!t.client.proposal.keys.includes(n)){const{message:o}=(0,x.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(o)}if((0,x.Bw)(t.client.proposal.get(n).expiry)){yield t.deleteProposal(n);const{message:o}=(0,x.Z7)("EXPIRED",`proposal id: ${n}`);throw new Error(o)}})()}}class ap extends Ts{constructor(n,t){super(n,t,"proposal",aa),this.core=n,this.logger=t}}class cp extends Ts{constructor(n,t){super(n,t,"session",aa),this.core=n,this.logger=t}}class up extends Ts{constructor(n,t){super(n,t,"request",aa,o=>o.id),this.core=n,this.logger=t}}class la extends Z{constructor(n){var t;super(n),t=this,this.protocol="wc",this.version=2,this.name="client",this.events=new ae.EventEmitter,this.on=(a,u)=>this.events.on(a,u),this.once=(a,u)=>this.events.once(a,u),this.off=(a,u)=>this.events.off(a,u),this.removeListener=(a,u)=>this.events.removeListener(a,u),this.removeAllListeners=a=>this.events.removeAllListeners(a),this.connect=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.connect(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.pair=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.pair(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.approve=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.approve(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.reject=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.reject(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.update=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.update(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.extend=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.extend(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.request=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.request(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.respond=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.respond(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.ping=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.ping(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.emit=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.emit(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.disconnect=function(){var a=(0,m.Z)(function*(u){try{return yield t.engine.disconnect(u)}catch(f){throw t.logger.error(f.message),f}});return function(u){return a.apply(this,arguments)}}(),this.find=a=>{try{return this.engine.find(a)}catch(u){throw this.logger.error(u.message),u}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(a){throw this.logger.error(a.message),a}},this.name=n?.name||"client",this.metadata=n?.metadata||(0,x.D)();const o=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n?.logger||"error"}));this.core=n?.core||new Wd(n),this.logger=(0,he.generateChildLogger)(o,this.name),this.session=new cp(this.core,this.logger),this.proposal=new ap(this.core,this.logger),this.pendingRequest=new up(this.core,this.logger),this.engine=new op(this)}static init(n){return(0,m.Z)(function*(){const t=new la(n);return yield t.initialize(),t})()}get context(){return(0,he.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized");try{yield n.core.start(),yield n.session.init(),yield n.proposal.init(),yield n.pendingRequest.init(),yield n.engine.init(),n.core.verify.init({verifyUrl:n.metadata.verifyUrl}),n.logger.info("SignClient Initialization Success")}catch(t){throw n.logger.info("SignClient Initialization Failure"),n.logger.error(t.message),t}})()}}var lp=G(2055),Su=G.n(lp);const Pu={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Ru{constructor(n,t=!1){if(this.url=n,this.disableProviderPing=t,this.events=new ae.EventEmitter,this.isAvailable=!1,this.registering=!1,!ps(n))throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`);this.url=n,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}off(n,t){this.events.off(n,t)}removeListener(n,t){this.events.removeListener(n,t)}open(n=this.url){var t=this;return(0,m.Z)(function*(){yield t.register(n)})()}close(){var n=this;return(0,m.Z)(function*(){if(!n.isAvailable)throw new Error("Connection already closed");n.onClose()})()}send(n,t){var o=this;return(0,m.Z)(function*(){o.isAvailable||(yield o.register());try{const a=_(n),f=yield(yield Su()(o.url,Object.assign(Object.assign({},Pu),{body:a}))).json();o.onPayload({data:f})}catch(a){o.onError(n.id,a)}})()}register(n=this.url){var t=this;return(0,m.Z)(function*(){if(!ps(n))throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`);if(t.registering){const o=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=o||t.events.listenerCount("open")>=o)&&t.events.setMaxListeners(o+1),new Promise((a,u)=>{t.events.once("register_error",f=>{t.resetMaxListeners(),u(f)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return u(new Error("HTTP connection is missing or invalid"));a()})})}t.url=n,t.registering=!0;try{if(!t.disableProviderPing){const o=_({id:1,jsonrpc:"2.0",method:"test",params:[]});yield Su()(n,Object.assign(Object.assign({},Pu),{body:o}))}t.onOpen()}catch(o){const a=t.parseError(o);throw t.events.emit("register_error",a),t.onClose(),a}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(n){if(typeof n.data>"u")return;const t="string"==typeof n.data?P(n.data):n.data;this.events.emit("payload",t)}onError(n,t){const o=this.parseError(t),u=bt(n,o.message||o.toString());this.events.emit("payload",u)}parseError(n,t=this.url){return _t(n,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const vi=Ru,Tu="wc@2:universal_provider:";var y,n,Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fa={exports:{}};y=fa,n=fa.exports,function(){var t,f="Expected a function",D="__lodash_hash_undefined__",W="__lodash_placeholder__",ri=1/0,qn=9007199254740991,_n=4294967295,ig=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],mi="[object Arguments]",Us="[object Array]",Vi="[object Boolean]",ki="[object Date]",qs="[object Error]",zs="[object Function]",Bu="[object GeneratorFunction]",rn="[object Map]",Ki="[object Number]",Pn="[object Object]",Vu="[object Promise]",Gi="[object RegExp]",nn="[object Set]",Wi="[object String]",$s="[object Symbol]",Ji="[object WeakMap]",Qi="[object ArrayBuffer]",bi="[object DataView]",va="[object Float32Array]",_a="[object Float64Array]",ma="[object Int8Array]",ba="[object Int16Array]",wa="[object Int32Array]",xa="[object Uint8Array]",Ea="[object Uint8ClampedArray]",Ia="[object Uint16Array]",Sa="[object Uint32Array]",fg=/\b__p \+= '';/g,hg=/\b(__p \+=) '' \+/g,dg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ku=/&(?:amp|lt|gt|quot|#39);/g,Ku=/[&<>"']/g,pg=RegExp(ku.source),gg=RegExp(Ku.source),yg=/<%-([\s\S]+?)%>/g,vg=/<%([\s\S]+?)%>/g,Gu=/<%=([\s\S]+?)%>/g,_g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mg=/^\w*$/,bg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pa=/[\\^$.*+?()[\]{}|]/g,wg=RegExp(Pa.source),Oa=/^\s+/,xg=/\s/,Eg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ig=/\{\n\/\* \[wrapped with (.+)\] \*/,Sg=/,? & /,Pg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Og=/[()=,{}\[\]\/\s]/,Rg=/\\(\\)?/g,Ag=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wu=/\w*$/,Tg=/^[-+]0x[0-9a-f]+$/i,Cg=/^0b[01]+$/i,Ng=/^\[object .+?Constructor\]$/,Dg=/^0o[0-7]+$/i,Lg=/^(?:0|[1-9]\d*)$/,jg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hs=/($^)/,Fg=/['\n\r\u2028\u2029\\]/g,Bs="\\ud800-\\udfff",Ju="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qu="\\u2700-\\u27bf",Yu="a-z\\xdf-\\xf6\\xf8-\\xff",Xu="A-Z\\xc0-\\xd6\\xd8-\\xde",el="\\ufe0e\\ufe0f",tl="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bg="["+Bs+"]",rl="["+tl+"]",Vs="["+Ju+"]",nl="\\d+",Vg="["+Qu+"]",il="["+Yu+"]",sl="[^"+Bs+tl+nl+Qu+Yu+Xu+"]",Aa="\\ud83c[\\udffb-\\udfff]",ol="[^"+Bs+"]",Ta="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",wi="["+Xu+"]",cl="(?:"+il+"|"+sl+")",Kg="(?:"+wi+"|"+sl+")",ul="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ll="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",fl="(?:"+Vs+"|"+Aa+")?",hl="["+el+"]?",dl=hl+fl+"(?:\\u200d(?:"+[ol,Ta,Ca].join("|")+")"+hl+fl+")*",Qg="(?:"+[Vg,Ta,Ca].join("|")+")"+dl,Yg="(?:"+[ol+Vs+"?",Vs,Ta,Ca,Bg].join("|")+")",Xg=RegExp("['\u2019]","g"),ey=RegExp(Vs,"g"),Na=RegExp(Aa+"(?="+Aa+")|"+Yg+dl,"g"),ty=RegExp([wi+"?"+il+"+"+ul+"(?="+[rl,wi,"$"].join("|")+")",Kg+"+"+ll+"(?="+[rl,wi+cl,"$"].join("|")+")",wi+"?"+cl+"+"+ul,wi+"+"+ll,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nl,Qg].join("|"),"g"),ry=RegExp("[\\u200d"+Bs+Ju+el+"]"),ny=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,iy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sy=-1,Et={};Et[va]=Et[_a]=Et[ma]=Et[ba]=Et[wa]=Et[xa]=Et[Ea]=Et[Ia]=Et[Sa]=!0,Et[mi]=Et[Us]=Et[Qi]=Et[Vi]=Et[bi]=Et[ki]=Et[qs]=Et[zs]=Et[rn]=Et[Ki]=Et[Pn]=Et[Gi]=Et[nn]=Et[Wi]=Et[Ji]=!1;var vt={};vt[mi]=vt[Us]=vt[Qi]=vt[bi]=vt[Vi]=vt[ki]=vt[va]=vt[_a]=vt[ma]=vt[ba]=vt[wa]=vt[rn]=vt[Ki]=vt[Pn]=vt[Gi]=vt[nn]=vt[Wi]=vt[$s]=vt[xa]=vt[Ea]=vt[Ia]=vt[Sa]=!0,vt[qs]=vt[zs]=vt[Ji]=!1;var uy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ly=parseFloat,fy=parseInt,pl="object"==typeof Hi&&Hi&&Hi.Object===Object&&Hi,hy="object"==typeof self&&self&&self.Object===Object&&self,hr=pl||hy||Function("return this")(),Da=n&&!n.nodeType&&n,ni=Da&&y&&!y.nodeType&&y,gl=ni&&ni.exports===Da,La=gl&&pl.process,Hr=function(){try{return ni&&ni.require&&ni.require("util").types||La&&La.binding&&La.binding("util")}catch{}}(),yl=Hr&&Hr.isArrayBuffer,vl=Hr&&Hr.isDate,_l=Hr&&Hr.isMap,ml=Hr&&Hr.isRegExp,bl=Hr&&Hr.isSet,wl=Hr&&Hr.isTypedArray;function jr(j,K,H){switch(H.length){case 0:return j.call(K);case 1:return j.call(K,H[0]);case 2:return j.call(K,H[0],H[1]);case 3:return j.call(K,H[0],H[1],H[2])}return j.apply(K,H)}function dy(j,K,H,be){for(var Ze=-1,tt=null==j?0:j.length;++Ze<tt;){var tr=j[Ze];K(be,tr,H(tr),j)}return be}function Br(j,K){for(var H=-1,be=null==j?0:j.length;++H<be&&!1!==K(j[H],H,j););return j}function py(j,K){for(var H=null==j?0:j.length;H--&&!1!==K(j[H],H,j););return j}function xl(j,K){for(var H=-1,be=null==j?0:j.length;++H<be;)if(!K(j[H],H,j))return!1;return!0}function zn(j,K){for(var H=-1,be=null==j?0:j.length,Ze=0,tt=[];++H<be;){var tr=j[H];K(tr,H,j)&&(tt[Ze++]=tr)}return tt}function ks(j,K){return!(null==j||!j.length)&&xi(j,K,0)>-1}function ja(j,K,H){for(var be=-1,Ze=null==j?0:j.length;++be<Ze;)if(H(K,j[be]))return!0;return!1}function St(j,K){for(var H=-1,be=null==j?0:j.length,Ze=Array(be);++H<be;)Ze[H]=K(j[H],H,j);return Ze}function $n(j,K){for(var H=-1,be=K.length,Ze=j.length;++H<be;)j[Ze+H]=K[H];return j}function Fa(j,K,H,be){var Ze=-1,tt=null==j?0:j.length;for(be&&tt&&(H=j[++Ze]);++Ze<tt;)H=K(H,j[Ze],Ze,j);return H}function gy(j,K,H,be){var Ze=null==j?0:j.length;for(be&&Ze&&(H=j[--Ze]);Ze--;)H=K(H,j[Ze],Ze,j);return H}function Ma(j,K){for(var H=-1,be=null==j?0:j.length;++H<be;)if(K(j[H],H,j))return!0;return!1}var yy=Za("length");function El(j,K,H){var be;return H(j,function(Ze,tt,tr){if(K(Ze,tt,tr))return be=tt,!1}),be}function Ks(j,K,H,be){for(var Ze=j.length,tt=H+(be?1:-1);be?tt--:++tt<Ze;)if(K(j[tt],tt,j))return tt;return-1}function xi(j,K,H){return K==K?function Ty(j,K,H){for(var be=H-1,Ze=j.length;++be<Ze;)if(j[be]===K)return be;return-1}(j,K,H):Ks(j,Il,H)}function my(j,K,H,be){for(var Ze=H-1,tt=j.length;++Ze<tt;)if(be(j[Ze],K))return Ze;return-1}function Il(j){return j!=j}function Sl(j,K){var H=null==j?0:j.length;return H?qa(j,K)/H:NaN}function Za(j){return function(K){return null==K?t:K[j]}}function Ua(j){return function(K){return null==j?t:j[K]}}function Pl(j,K,H,be,Ze){return Ze(j,function(tt,tr,ht){H=be?(be=!1,tt):K(H,tt,tr,ht)}),H}function qa(j,K){for(var H,be=-1,Ze=j.length;++be<Ze;){var tt=K(j[be]);tt!==t&&(H=H===t?tt:H+tt)}return H}function za(j,K){for(var H=-1,be=Array(j);++H<j;)be[H]=K(H);return be}function Ol(j){return j&&j.slice(0,Cl(j)+1).replace(Oa,"")}function Fr(j){return function(K){return j(K)}}function $a(j,K){return St(K,function(H){return j[H]})}function Yi(j,K){return j.has(K)}function Rl(j,K){for(var H=-1,be=j.length;++H<be&&xi(K,j[H],0)>-1;);return H}function Al(j,K){for(var H=j.length;H--&&xi(K,j[H],0)>-1;);return H}var Ey=Ua({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Iy=Ua({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Sy(j){return"\\"+uy[j]}function Ei(j){return ry.test(j)}function Ha(j){var K=-1,H=Array(j.size);return j.forEach(function(be,Ze){H[++K]=[Ze,be]}),H}function Tl(j,K){return function(H){return j(K(H))}}function Hn(j,K){for(var H=-1,be=j.length,Ze=0,tt=[];++H<be;){var tr=j[H];(tr===K||tr===W)&&(j[H]=W,tt[Ze++]=H)}return tt}function Gs(j){var K=-1,H=Array(j.size);return j.forEach(function(be){H[++K]=be}),H}function Ii(j){return Ei(j)?function Dy(j){for(var K=Na.lastIndex=0;Na.test(j);)++K;return K}(j):yy(j)}function sn(j){return Ei(j)?function Ly(j){return j.match(Na)||[]}(j):function vy(j){return j.split("")}(j)}function Cl(j){for(var K=j.length;K--&&xg.test(j.charAt(K)););return K}var Ny=Ua({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Si=function j(K){var e,H=(K=null==K?hr:Si.defaults(hr.Object(),K,Si.pick(hr,iy))).Array,be=K.Date,Ze=K.Error,tt=K.Function,tr=K.Math,ht=K.Object,Ba=K.RegExp,My=K.String,Vr=K.TypeError,Ws=H.prototype,Pi=ht.prototype,Js=K["__core-js_shared__"],Qs=tt.prototype.toString,st=Pi.hasOwnProperty,Uy=0,Nl=(e=/[^.]+$/.exec(Js&&Js.keys&&Js.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",Ys=Pi.toString,qy=Qs.call(ht),zy=hr._,$y=Ba("^"+Qs.call(st).replace(Pa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xs=gl?K.Buffer:t,Bn=K.Symbol,eo=K.Uint8Array,Dl=Xs?Xs.allocUnsafe:t,to=Tl(ht.getPrototypeOf,ht),Ll=ht.create,jl=Pi.propertyIsEnumerable,ro=Ws.splice,Fl=Bn?Bn.isConcatSpreadable:t,Xi=Bn?Bn.iterator:t,ii=Bn?Bn.toStringTag:t,no=function(){try{var e=ui(ht,"defineProperty");return e({},"",{}),e}catch{}}(),Hy=K.clearTimeout!==hr.clearTimeout&&K.clearTimeout,By=be&&be.now!==hr.Date.now&&be.now,Vy=K.setTimeout!==hr.setTimeout&&K.setTimeout,io=tr.ceil,so=tr.floor,Va=ht.getOwnPropertySymbols,ky=Xs?Xs.isBuffer:t,Ml=K.isFinite,Ky=Ws.join,Gy=Tl(ht.keys,ht),rr=tr.max,_r=tr.min,Wy=be.now,Jy=K.parseInt,Zl=tr.random,Qy=Ws.reverse,ka=ui(K,"DataView"),es=ui(K,"Map"),Ka=ui(K,"Promise"),Oi=ui(K,"Set"),ts=ui(K,"WeakMap"),rs=ui(ht,"create"),oo=ts&&new ts,Ri={},Yy=li(ka),Xy=li(es),e0=li(Ka),t0=li(Oi),r0=li(ts),ao=Bn?Bn.prototype:t,ns=ao?ao.valueOf:t,Ul=ao?ao.toString:t;function w(e){if(Dt(e)&&!qe(e)&&!(e instanceof We)){if(e instanceof kr)return e;if(st.call(e,"__wrapped__"))return zf(e)}return new kr(e)}var Ai=function(){function e(){}return function(r){if(!Ct(r))return{};if(Ll)return Ll(r);e.prototype=r;var s=new e;return e.prototype=t,s}}();function co(){}function kr(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=t}function We(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_n,this.__views__=[]}function si(e){var r=-1,s=null==e?0:e.length;for(this.clear();++r<s;){var l=e[r];this.set(l[0],l[1])}}function On(e){var r=-1,s=null==e?0:e.length;for(this.clear();++r<s;){var l=e[r];this.set(l[0],l[1])}}function Rn(e){var r=-1,s=null==e?0:e.length;for(this.clear();++r<s;){var l=e[r];this.set(l[0],l[1])}}function oi(e){var r=-1,s=null==e?0:e.length;for(this.__data__=new Rn;++r<s;)this.add(e[r])}function on(e){var r=this.__data__=new On(e);this.size=r.size}function ql(e,r){var s=qe(e),l=!s&&fi(e),g=!s&&!l&&Wn(e),I=!s&&!l&&!g&&Di(e),A=s||l||g||I,T=A?za(e.length,My):[],F=T.length;for(var Y in e)(r||st.call(e,Y))&&(!A||!("length"==Y||g&&("offset"==Y||"parent"==Y)||I&&("buffer"==Y||"byteLength"==Y||"byteOffset"==Y)||Nn(Y,F)))&&T.push(Y);return T}function zl(e){var r=e.length;return r?e[ic(0,r-1)]:t}function R0(e,r){return Eo(Rr(e),ai(r,0,e.length))}function A0(e){return Eo(Rr(e))}function Ga(e,r,s){(s!==t&&!an(e[r],s)||s===t&&!(r in e))&&An(e,r,s)}function is(e,r,s){var l=e[r];(!st.call(e,r)||!an(l,s)||s===t&&!(r in e))&&An(e,r,s)}function uo(e,r){for(var s=e.length;s--;)if(an(e[s][0],r))return s;return-1}function T0(e,r,s,l){return Vn(e,function(g,I,A){r(l,g,s(g),A)}),l}function $l(e,r){return e&&bn(r,cr(r),e)}function An(e,r,s){"__proto__"==r&&no?no(e,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[r]=s}function Wa(e,r){for(var s=-1,l=r.length,g=H(l),I=null==e;++s<l;)g[s]=I?t:Ac(e,r[s]);return g}function ai(e,r,s){return e==e&&(s!==t&&(e=e<=s?e:s),r!==t&&(e=e>=r?e:r)),e}function Kr(e,r,s,l,g,I){var A,T=1&r,F=2&r,Y=4&r;if(s&&(A=g?s(e,l,g,I):s(e)),A!==t)return A;if(!Ct(e))return e;var ee=qe(e);if(ee){if(A=function mv(e){var r=e.length,s=new e.constructor(r);return r&&"string"==typeof e[0]&&st.call(e,"index")&&(s.index=e.index,s.input=e.input),s}(e),!T)return Rr(e,A)}else{var oe=mr(e),ye=oe==zs||oe==Bu;if(Wn(e))return df(e,T);if(oe==Pn||oe==mi||ye&&!g){if(A=F||ye?{}:Nf(e),!T)return F?function cv(e,r){return bn(e,Tf(e),r)}(e,function C0(e,r){return e&&bn(r,Tr(r),e)}(A,e)):function av(e,r){return bn(e,_c(e),r)}(e,$l(A,e))}else{if(!vt[oe])return g?e:{};A=function bv(e,r,s){var l=e.constructor;switch(r){case Qi:return fc(e);case Vi:case ki:return new l(+e);case bi:return function nv(e,r){var s=r?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}(e,s);case va:case _a:case ma:case ba:case wa:case xa:case Ea:case Ia:case Sa:return pf(e,s);case rn:return new l;case Ki:case Wi:return new l(e);case Gi:return function iv(e){var r=new e.constructor(e.source,Wu.exec(e));return r.lastIndex=e.lastIndex,r}(e);case nn:return new l;case $s:return function sv(e){return ns?ht(ns.call(e)):{}}(e)}}(e,oe,T)}}I||(I=new on);var Ee=I.get(e);if(Ee)return Ee;I.set(e,A),ah(e)?e.forEach(function(Ce){A.add(Kr(Ce,r,s,Ce,e,I))}):sh(e)&&e.forEach(function(Ce,Ke){A.set(Ke,Kr(Ce,r,s,Ke,e,I))});var He=ee?t:(Y?F?gc:pc:F?Tr:cr)(e);return Br(He||e,function(Ce,Ke){He&&(Ce=e[Ke=Ce]),is(A,Ke,Kr(Ce,r,s,Ke,e,I))}),A}function Hl(e,r,s){var l=s.length;if(null==e)return!l;for(e=ht(e);l--;){var g=s[l],A=e[g];if(A===t&&!(g in e)||!(0,r[g])(A))return!1}return!0}function Bl(e,r,s){if("function"!=typeof e)throw new Vr(f);return fs(function(){e.apply(t,s)},r)}function ss(e,r,s,l){var g=-1,I=ks,A=!0,T=e.length,F=[],Y=r.length;if(!T)return F;s&&(r=St(r,Fr(s))),l?(I=ja,A=!1):r.length>=200&&(I=Yi,A=!1,r=new oi(r));e:for(;++g<T;){var ee=e[g],oe=null==s?ee:s(ee);if(ee=l||0!==ee?ee:0,A&&oe==oe){for(var ye=Y;ye--;)if(r[ye]===oe)continue e;F.push(ee)}else I(r,oe,l)||F.push(ee)}return F}w.templateSettings={escape:yg,evaluate:vg,interpolate:Gu,variable:"",imports:{_:w}},(w.prototype=co.prototype).constructor=w,(kr.prototype=Ai(co.prototype)).constructor=kr,(We.prototype=Ai(co.prototype)).constructor=We,si.prototype.clear=function o0(){this.__data__=rs?rs(null):{},this.size=0},si.prototype.delete=function a0(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},si.prototype.get=function c0(e){var r=this.__data__;if(rs){var s=r[e];return s===D?t:s}return st.call(r,e)?r[e]:t},si.prototype.has=function u0(e){var r=this.__data__;return rs?r[e]!==t:st.call(r,e)},si.prototype.set=function l0(e,r){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=rs&&r===t?D:r,this},On.prototype.clear=function f0(){this.__data__=[],this.size=0},On.prototype.delete=function h0(e){var r=this.__data__,s=uo(r,e);return!(s<0||(s==r.length-1?r.pop():ro.call(r,s,1),--this.size,0))},On.prototype.get=function d0(e){var r=this.__data__,s=uo(r,e);return s<0?t:r[s][1]},On.prototype.has=function p0(e){return uo(this.__data__,e)>-1},On.prototype.set=function g0(e,r){var s=this.__data__,l=uo(s,e);return l<0?(++this.size,s.push([e,r])):s[l][1]=r,this},Rn.prototype.clear=function y0(){this.size=0,this.__data__={hash:new si,map:new(es||On),string:new si}},Rn.prototype.delete=function v0(e){var r=xo(this,e).delete(e);return this.size-=r?1:0,r},Rn.prototype.get=function _0(e){return xo(this,e).get(e)},Rn.prototype.has=function m0(e){return xo(this,e).has(e)},Rn.prototype.set=function b0(e,r){var s=xo(this,e),l=s.size;return s.set(e,r),this.size+=s.size==l?0:1,this},oi.prototype.add=oi.prototype.push=function w0(e){return this.__data__.set(e,D),this},oi.prototype.has=function x0(e){return this.__data__.has(e)},on.prototype.clear=function E0(){this.__data__=new On,this.size=0},on.prototype.delete=function I0(e){var r=this.__data__,s=r.delete(e);return this.size=r.size,s},on.prototype.get=function S0(e){return this.__data__.get(e)},on.prototype.has=function P0(e){return this.__data__.has(e)},on.prototype.set=function O0(e,r){var s=this.__data__;if(s instanceof On){var l=s.__data__;if(!es||l.length<199)return l.push([e,r]),this.size=++s.size,this;s=this.__data__=new Rn(l)}return s.set(e,r),this.size=s.size,this};var Vn=_f(mn),Vl=_f(Qa,!0);function D0(e,r){var s=!0;return Vn(e,function(l,g,I){return s=!!r(l,g,I)}),s}function lo(e,r,s){for(var l=-1,g=e.length;++l<g;){var I=e[l],A=r(I);if(null!=A&&(T===t?A==A&&!Zr(A):s(A,T)))var T=A,F=I}return F}function kl(e,r){var s=[];return Vn(e,function(l,g,I){r(l,g,I)&&s.push(l)}),s}function dr(e,r,s,l,g){var I=-1,A=e.length;for(s||(s=xv),g||(g=[]);++I<A;){var T=e[I];r>0&&s(T)?r>1?dr(T,r-1,s,l,g):$n(g,T):l||(g[g.length]=T)}return g}var Ja=mf(),Kl=mf(!0);function mn(e,r){return e&&Ja(e,r,cr)}function Qa(e,r){return e&&Kl(e,r,cr)}function fo(e,r){return zn(r,function(s){return Dn(e[s])})}function ci(e,r){for(var s=0,l=(r=Kn(r,e)).length;null!=e&&s<l;)e=e[wn(r[s++])];return s&&s==l?e:t}function Gl(e,r,s){var l=r(e);return qe(e)?l:$n(l,s(e))}function Er(e){return null==e?e===t?"[object Undefined]":"[object Null]":ii&&ii in ht(e)?function yv(e){var r=st.call(e,ii),s=e[ii];try{e[ii]=t;var l=!0}catch{}var g=Ys.call(e);return l&&(r?e[ii]=s:delete e[ii]),g}(e):function Av(e){return Ys.call(e)}(e)}function Ya(e,r){return e>r}function j0(e,r){return null!=e&&st.call(e,r)}function F0(e,r){return null!=e&&r in ht(e)}function Xa(e,r,s){for(var l=s?ja:ks,g=e[0].length,I=e.length,A=I,T=H(I),F=1/0,Y=[];A--;){var ee=e[A];A&&r&&(ee=St(ee,Fr(r))),F=_r(ee.length,F),T[A]=!s&&(r||g>=120&&ee.length>=120)?new oi(A&&ee):t}ee=e[0];var oe=-1,ye=T[0];e:for(;++oe<g&&Y.length<F;){var Ee=ee[oe],Te=r?r(Ee):Ee;if(Ee=s||0!==Ee?Ee:0,!(ye?Yi(ye,Te):l(Y,Te,s))){for(A=I;--A;){var He=T[A];if(!(He?Yi(He,Te):l(e[A],Te,s)))continue e}ye&&ye.push(Te),Y.push(Ee)}}return Y}function os(e,r,s){var l=null==(e=Ff(e,r=Kn(r,e)))?e:e[wn(Wr(r))];return null==l?t:jr(l,e,s)}function Wl(e){return Dt(e)&&Er(e)==mi}function as(e,r,s,l,g){return e===r||(null==e||null==r||!Dt(e)&&!Dt(r)?e!=e&&r!=r:function z0(e,r,s,l,g,I){var A=qe(e),T=qe(r),F=A?Us:mr(e),Y=T?Us:mr(r),ee=(F=F==mi?Pn:F)==Pn,oe=(Y=Y==mi?Pn:Y)==Pn,ye=F==Y;if(ye&&Wn(e)){if(!Wn(r))return!1;A=!0,ee=!1}if(ye&&!ee)return I||(I=new on),A||Di(e)?Af(e,r,s,l,g,I):function pv(e,r,s,l,g,I,A){switch(s){case bi:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Qi:return!(e.byteLength!=r.byteLength||!I(new eo(e),new eo(r)));case Vi:case ki:case Ki:return an(+e,+r);case qs:return e.name==r.name&&e.message==r.message;case Gi:case Wi:return e==r+"";case rn:var T=Ha;case nn:if(T||(T=Gs),e.size!=r.size&&!(1&l))return!1;var Y=A.get(e);if(Y)return Y==r;l|=2,A.set(e,r);var ee=Af(T(e),T(r),l,g,I,A);return A.delete(e),ee;case $s:if(ns)return ns.call(e)==ns.call(r)}return!1}(e,r,F,s,l,g,I);if(!(1&s)){var Ee=ee&&st.call(e,"__wrapped__"),Te=oe&&st.call(r,"__wrapped__");if(Ee||Te){var He=Ee?e.value():e,Ce=Te?r.value():r;return I||(I=new on),g(He,Ce,s,l,I)}}return!!ye&&(I||(I=new on),function gv(e,r,s,l,g,I){var A=1&s,T=pc(e),F=T.length;if(F!=pc(r).length&&!A)return!1;for(var oe=F;oe--;){var ye=T[oe];if(!(A?ye in r:st.call(r,ye)))return!1}var Ee=I.get(e),Te=I.get(r);if(Ee&&Te)return Ee==r&&Te==e;var He=!0;I.set(e,r),I.set(r,e);for(var Ce=A;++oe<F;){var Ke=e[ye=T[oe]],Ye=r[ye];if(l)var Ur=A?l(Ye,Ke,ye,r,e,I):l(Ke,Ye,ye,e,r,I);if(!(Ur===t?Ke===Ye||g(Ke,Ye,s,l,I):Ur)){He=!1;break}Ce||(Ce="constructor"==ye)}if(He&&!Ce){var Sr=e.constructor,qr=r.constructor;Sr!=qr&&"constructor"in e&&"constructor"in r&&!("function"==typeof Sr&&Sr instanceof Sr&&"function"==typeof qr&&qr instanceof qr)&&(He=!1)}return I.delete(e),I.delete(r),He}(e,r,s,l,g,I))}(e,r,s,l,as,g))}function ec(e,r,s,l){var g=s.length,I=g,A=!l;if(null==e)return!I;for(e=ht(e);g--;){var T=s[g];if(A&&T[2]?T[1]!==e[T[0]]:!(T[0]in e))return!1}for(;++g<I;){var F=(T=s[g])[0],Y=e[F],ee=T[1];if(A&&T[2]){if(Y===t&&!(F in e))return!1}else{var oe=new on;if(l)var ye=l(Y,ee,F,e,r,oe);if(!(ye===t?as(ee,Y,3,l,oe):ye))return!1}}return!0}function Jl(e){return!(!Ct(e)||function Iv(e){return!!Nl&&Nl in e}(e))&&(Dn(e)?$y:Ng).test(li(e))}function Ql(e){return"function"==typeof e?e:null==e?Cr:"object"==typeof e?qe(e)?ef(e[0],e[1]):Xl(e):bh(e)}function tc(e){if(!ls(e))return Gy(e);var r=[];for(var s in ht(e))st.call(e,s)&&"constructor"!=s&&r.push(s);return r}function rc(e,r){return e<r}function Yl(e,r){var s=-1,l=Ar(e)?H(e.length):[];return Vn(e,function(g,I,A){l[++s]=r(g,I,A)}),l}function Xl(e){var r=vc(e);return 1==r.length&&r[0][2]?Lf(r[0][0],r[0][1]):function(s){return s===e||ec(s,e,r)}}function ef(e,r){return mc(e)&&Df(r)?Lf(wn(e),r):function(s){var l=Ac(s,e);return l===t&&l===r?Tc(s,e):as(r,l,3)}}function ho(e,r,s,l,g){e!==r&&Ja(r,function(I,A){if(g||(g=new on),Ct(I))!function K0(e,r,s,l,g,I,A){var T=wc(e,s),F=wc(r,s),Y=A.get(F);if(Y)Ga(e,s,Y);else{var ee=I?I(T,F,s+"",e,r,A):t,oe=ee===t;if(oe){var ye=qe(F),Ee=!ye&&Wn(F),Te=!ye&&!Ee&&Di(F);ee=F,ye||Ee||Te?qe(T)?ee=T:Ut(T)?ee=Rr(T):Ee?(oe=!1,ee=df(F,!0)):Te?(oe=!1,ee=pf(F,!0)):ee=[]:hs(F)||fi(F)?(ee=T,fi(T)?ee=lh(T):(!Ct(T)||Dn(T))&&(ee=Nf(F))):oe=!1}oe&&(A.set(F,ee),g(ee,F,l,I,A),A.delete(F)),Ga(e,s,ee)}}(e,r,A,s,ho,l,g);else{var T=l?l(wc(e,A),I,A+"",e,r,g):t;T===t&&(T=I),Ga(e,A,T)}},Tr)}function tf(e,r){var s=e.length;if(s)return Nn(r+=r<0?s:0,s)?e[r]:t}function rf(e,r,s){r=r.length?St(r,function(I){return qe(I)?function(A){return ci(A,1===I.length?I[0]:I)}:I}):[Cr];var l=-1;return r=St(r,Fr(Ae())),function by(j,K){var H=j.length;for(j.sort(K);H--;)j[H]=j[H].value;return j}(Yl(e,function(I,A,T){return{criteria:St(r,function(Y){return Y(I)}),index:++l,value:I}}),function(I,A){return function ov(e,r,s){for(var l=-1,g=e.criteria,I=r.criteria,A=g.length,T=s.length;++l<A;){var F=gf(g[l],I[l]);if(F)return l>=T?F:F*("desc"==s[l]?-1:1)}return e.index-r.index}(I,A,s)})}function nf(e,r,s){for(var l=-1,g=r.length,I={};++l<g;){var A=r[l],T=ci(e,A);s(T,A)&&cs(I,Kn(A,e),T)}return I}function nc(e,r,s,l){var g=l?my:xi,I=-1,A=r.length,T=e;for(e===r&&(r=Rr(r)),s&&(T=St(e,Fr(s)));++I<A;)for(var F=0,Y=r[I],ee=s?s(Y):Y;(F=g(T,ee,F,l))>-1;)T!==e&&ro.call(T,F,1),ro.call(e,F,1);return e}function sf(e,r){for(var s=e?r.length:0,l=s-1;s--;){var g=r[s];if(s==l||g!==I){var I=g;Nn(g)?ro.call(e,g,1):ac(e,g)}}return e}function ic(e,r){return e+so(Zl()*(r-e+1))}function sc(e,r){var s="";if(!e||r<1||r>qn)return s;do{r%2&&(s+=e),(r=so(r/2))&&(e+=e)}while(r);return s}function Be(e,r){return xc(jf(e,r,Cr),e+"")}function Q0(e){return zl(Li(e))}function Y0(e,r){var s=Li(e);return Eo(s,ai(r,0,s.length))}function cs(e,r,s,l){if(!Ct(e))return e;for(var g=-1,I=(r=Kn(r,e)).length,A=I-1,T=e;null!=T&&++g<I;){var F=wn(r[g]),Y=s;if("__proto__"===F||"constructor"===F||"prototype"===F)return e;if(g!=A){var ee=T[F];(Y=l?l(ee,F,T):t)===t&&(Y=Ct(ee)?ee:Nn(r[g+1])?[]:{})}is(T,F,Y),T=T[F]}return e}var of=oo?function(e,r){return oo.set(e,r),e}:Cr,X0=no?function(e,r){return no(e,"toString",{configurable:!0,enumerable:!1,value:Nc(r),writable:!0})}:Cr;function ev(e){return Eo(Li(e))}function Gr(e,r,s){var l=-1,g=e.length;r<0&&(r=-r>g?0:g+r),(s=s>g?g:s)<0&&(s+=g),g=r>s?0:s-r>>>0,r>>>=0;for(var I=H(g);++l<g;)I[l]=e[l+r];return I}function tv(e,r){var s;return Vn(e,function(l,g,I){return!(s=r(l,g,I))}),!!s}function po(e,r,s){var l=0,g=null==e?l:e.length;if("number"==typeof r&&r==r&&g<=2147483647){for(;l<g;){var I=l+g>>>1,A=e[I];null!==A&&!Zr(A)&&(s?A<=r:A<r)?l=I+1:g=I}return g}return oc(e,r,Cr,s)}function oc(e,r,s,l){var g=0,I=null==e?0:e.length;if(0===I)return 0;for(var A=(r=s(r))!=r,T=null===r,F=Zr(r),Y=r===t;g<I;){var ee=so((g+I)/2),oe=s(e[ee]),ye=oe!==t,Ee=null===oe,Te=oe==oe,He=Zr(oe);if(A)var Ce=l||Te;else Ce=Y?Te&&(l||ye):T?Te&&ye&&(l||!Ee):F?Te&&ye&&!Ee&&(l||!He):!Ee&&!He&&(l?oe<=r:oe<r);Ce?g=ee+1:I=ee}return _r(I,4294967294)}function af(e,r){for(var s=-1,l=e.length,g=0,I=[];++s<l;){var A=e[s],T=r?r(A):A;if(!s||!an(T,F)){var F=T;I[g++]=0===A?0:A}}return I}function cf(e){return"number"==typeof e?e:Zr(e)?NaN:+e}function Mr(e){if("string"==typeof e)return e;if(qe(e))return St(e,Mr)+"";if(Zr(e))return Ul?Ul.call(e):"";var r=e+"";return"0"==r&&1/e==-ri?"-0":r}function kn(e,r,s){var l=-1,g=ks,I=e.length,A=!0,T=[],F=T;if(s)A=!1,g=ja;else if(I>=200){var Y=r?null:hv(e);if(Y)return Gs(Y);A=!1,g=Yi,F=new oi}else F=r?[]:T;e:for(;++l<I;){var ee=e[l],oe=r?r(ee):ee;if(ee=s||0!==ee?ee:0,A&&oe==oe){for(var ye=F.length;ye--;)if(F[ye]===oe)continue e;r&&F.push(oe),T.push(ee)}else g(F,oe,s)||(F!==T&&F.push(oe),T.push(ee))}return T}function ac(e,r){return null==(e=Ff(e,r=Kn(r,e)))||delete e[wn(Wr(r))]}function uf(e,r,s,l){return cs(e,r,s(ci(e,r)),l)}function go(e,r,s,l){for(var g=e.length,I=l?g:-1;(l?I--:++I<g)&&r(e[I],I,e););return s?Gr(e,l?0:I,l?I+1:g):Gr(e,l?I+1:0,l?g:I)}function lf(e,r){var s=e;return s instanceof We&&(s=s.value()),Fa(r,function(l,g){return g.func.apply(g.thisArg,$n([l],g.args))},s)}function cc(e,r,s){var l=e.length;if(l<2)return l?kn(e[0]):[];for(var g=-1,I=H(l);++g<l;)for(var A=e[g],T=-1;++T<l;)T!=g&&(I[g]=ss(I[g]||A,e[T],r,s));return kn(dr(I,1),r,s)}function ff(e,r,s){for(var l=-1,g=e.length,I=r.length,A={};++l<g;)s(A,e[l],l<I?r[l]:t);return A}function uc(e){return Ut(e)?e:[]}function lc(e){return"function"==typeof e?e:Cr}function Kn(e,r){return qe(e)?e:mc(e,r)?[e]:qf(nt(e))}var rv=Be;function Gn(e,r,s){var l=e.length;return s=s===t?l:s,!r&&s>=l?e:Gr(e,r,s)}var hf=Hy||function(e){return hr.clearTimeout(e)};function df(e,r){if(r)return e.slice();var s=e.length,l=Dl?Dl(s):new e.constructor(s);return e.copy(l),l}function fc(e){var r=new e.constructor(e.byteLength);return new eo(r).set(new eo(e)),r}function pf(e,r){var s=r?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function gf(e,r){if(e!==r){var s=e!==t,l=null===e,g=e==e,I=Zr(e),A=r!==t,T=null===r,F=r==r,Y=Zr(r);if(!T&&!Y&&!I&&e>r||I&&A&&F&&!T&&!Y||l&&A&&F||!s&&F||!g)return 1;if(!l&&!I&&!Y&&e<r||Y&&s&&g&&!l&&!I||T&&s&&g||!A&&g||!F)return-1}return 0}function yf(e,r,s,l){for(var g=-1,I=e.length,A=s.length,T=-1,F=r.length,Y=rr(I-A,0),ee=H(F+Y),oe=!l;++T<F;)ee[T]=r[T];for(;++g<A;)(oe||g<I)&&(ee[s[g]]=e[g]);for(;Y--;)ee[T++]=e[g++];return ee}function vf(e,r,s,l){for(var g=-1,I=e.length,A=-1,T=s.length,F=-1,Y=r.length,ee=rr(I-T,0),oe=H(ee+Y),ye=!l;++g<ee;)oe[g]=e[g];for(var Ee=g;++F<Y;)oe[Ee+F]=r[F];for(;++A<T;)(ye||g<I)&&(oe[Ee+s[A]]=e[g++]);return oe}function Rr(e,r){var s=-1,l=e.length;for(r||(r=H(l));++s<l;)r[s]=e[s];return r}function bn(e,r,s,l){var g=!s;s||(s={});for(var I=-1,A=r.length;++I<A;){var T=r[I],F=l?l(s[T],e[T],T,s,e):t;F===t&&(F=e[T]),g?An(s,T,F):is(s,T,F)}return s}function yo(e,r){return function(s,l){var g=qe(s)?dy:T0,I=r?r():{};return g(s,e,Ae(l,2),I)}}function Ti(e){return Be(function(r,s){var l=-1,g=s.length,I=g>1?s[g-1]:t,A=g>2?s[2]:t;for(I=e.length>3&&"function"==typeof I?(g--,I):t,A&&Ir(s[0],s[1],A)&&(I=g<3?t:I,g=1),r=ht(r);++l<g;){var T=s[l];T&&e(r,T,l,I)}return r})}function _f(e,r){return function(s,l){if(null==s)return s;if(!Ar(s))return e(s,l);for(var g=s.length,I=r?g:-1,A=ht(s);(r?I--:++I<g)&&!1!==l(A[I],I,A););return s}}function mf(e){return function(r,s,l){for(var g=-1,I=ht(r),A=l(r),T=A.length;T--;){var F=A[e?T:++g];if(!1===s(I[F],F,I))break}return r}}function bf(e){return function(r){var s=Ei(r=nt(r))?sn(r):t,l=s?s[0]:r.charAt(0),g=s?Gn(s,1).join(""):r.slice(1);return l[e]()+g}}function Ci(e){return function(r){return Fa(_h(vh(r).replace(Xg,"")),e,"")}}function us(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var s=Ai(e.prototype),l=e.apply(s,r);return Ct(l)?l:s}}function wf(e){return function(r,s,l){var g=ht(r);if(!Ar(r)){var I=Ae(s,3);r=cr(r),s=function(T){return I(g[T],T,g)}}var A=e(r,s,l);return A>-1?g[I?r[A]:A]:t}}function xf(e){return Cn(function(r){var s=r.length,l=s,g=kr.prototype.thru;for(e&&r.reverse();l--;){var I=r[l];if("function"!=typeof I)throw new Vr(f);if(g&&!A&&"wrapper"==wo(I))var A=new kr([],!0)}for(l=A?l:s;++l<s;){var T=wo(I=r[l]),F="wrapper"==T?yc(I):t;A=F&&bc(F[0])&&424==F[1]&&!F[4].length&&1==F[9]?A[wo(F[0])].apply(A,F[3]):1==I.length&&bc(I)?A[T]():A.thru(I)}return function(){var Y=arguments,ee=Y[0];if(A&&1==Y.length&&qe(ee))return A.plant(ee).value();for(var oe=0,ye=s?r[oe].apply(this,Y):ee;++oe<s;)ye=r[oe].call(this,ye);return ye}})}function vo(e,r,s,l,g,I,A,T,F,Y){var ee=128&r,oe=1&r,ye=2&r,Ee=24&r,Te=512&r,He=ye?t:us(e);return function Ce(){for(var Ke=arguments.length,Ye=H(Ke),Ur=Ke;Ur--;)Ye[Ur]=arguments[Ur];if(Ee)var Sr=Ni(Ce),qr=function xy(j,K){for(var H=j.length,be=0;H--;)j[H]===K&&++be;return be}(Ye,Sr);if(l&&(Ye=yf(Ye,l,g,Ee)),I&&(Ye=vf(Ye,I,A,Ee)),Ke-=qr,Ee&&Ke<Y){var qt=Hn(Ye,Sr);return Sf(e,r,vo,Ce.placeholder,s,Ye,qt,T,F,Y-Ke)}var cn=oe?s:this,jn=ye?cn[e]:e;return Ke=Ye.length,T?Ye=function Tv(e,r){for(var s=e.length,l=_r(r.length,s),g=Rr(e);l--;){var I=r[l];e[l]=Nn(I,s)?g[I]:t}return e}(Ye,T):Te&&Ke>1&&Ye.reverse(),ee&&F<Ke&&(Ye.length=F),this&&this!==hr&&this instanceof Ce&&(jn=He||us(jn)),jn.apply(cn,Ye)}}function Ef(e,r){return function(s,l){return function Z0(e,r,s,l){return mn(e,function(g,I,A){r(l,s(g),I,A)}),l}(s,e,r(l),{})}}function _o(e,r){return function(s,l){var g;if(s===t&&l===t)return r;if(s!==t&&(g=s),l!==t){if(g===t)return l;"string"==typeof s||"string"==typeof l?(s=Mr(s),l=Mr(l)):(s=cf(s),l=cf(l)),g=e(s,l)}return g}}function hc(e){return Cn(function(r){return r=St(r,Fr(Ae())),Be(function(s){var l=this;return e(r,function(g){return jr(g,l,s)})})})}function mo(e,r){var s=(r=r===t?" ":Mr(r)).length;if(s<2)return s?sc(r,e):r;var l=sc(r,io(e/Ii(r)));return Ei(r)?Gn(sn(l),0,e).join(""):l.slice(0,e)}function If(e){return function(r,s,l){return l&&"number"!=typeof l&&Ir(r,s,l)&&(s=l=t),r=Ln(r),s===t?(s=r,r=0):s=Ln(s),function J0(e,r,s,l){for(var g=-1,I=rr(io((r-e)/(s||1)),0),A=H(I);I--;)A[l?I:++g]=e,e+=s;return A}(r,s,l=l===t?r<s?1:-1:Ln(l),e)}}function bo(e){return function(r,s){return"string"==typeof r&&"string"==typeof s||(r=Jr(r),s=Jr(s)),e(r,s)}}function Sf(e,r,s,l,g,I,A,T,F,Y){var ee=8&r;r|=ee?32:64,4&(r&=~(ee?64:32))||(r&=-4);var He=[e,r,g,ee?I:t,ee?A:t,ee?t:I,ee?t:A,T,F,Y],Ce=s.apply(t,He);return bc(e)&&Mf(Ce,He),Ce.placeholder=l,Zf(Ce,e,r)}function dc(e){var r=tr[e];return function(s,l){if(s=Jr(s),(l=null==l?0:_r(ze(l),292))&&Ml(s)){var g=(nt(s)+"e").split("e");return+((g=(nt(r(g[0]+"e"+(+g[1]+l)))+"e").split("e"))[0]+"e"+(+g[1]-l))}return r(s)}}var hv=Oi&&1/Gs(new Oi([,-0]))[1]==ri?function(e){return new Oi(e)}:jc;function Pf(e){return function(r){var s=mr(r);return s==rn?Ha(r):s==nn?function Ay(j){var K=-1,H=Array(j.size);return j.forEach(function(be){H[++K]=[be,be]}),H}(r):function wy(j,K){return St(K,function(H){return[H,j[H]]})}(r,e(r))}}function Tn(e,r,s,l,g,I,A,T){var F=2&r;if(!F&&"function"!=typeof e)throw new Vr(f);var Y=l?l.length:0;if(Y||(r&=-97,l=g=t),A=A===t?A:rr(ze(A),0),T=T===t?T:ze(T),Y-=g?g.length:0,64&r){var ee=l,oe=g;l=g=t}var ye=F?t:yc(e),Ee=[e,r,s,l,g,ee,oe,I,A,T];if(ye&&function Ov(e,r){var s=e[1],l=r[1],g=s|l;if(!(g<131)&&!(128==l&&8==s||128==l&&256==s&&e[7].length<=r[8]||384==l&&r[7].length<=r[8]&&8==s))return e;1&l&&(e[2]=r[2],g|=1&s?0:4);var T=r[3];if(T){var F=e[3];e[3]=F?yf(F,T,r[4]):T,e[4]=F?Hn(e[3],W):r[4]}(T=r[5])&&(e[5]=(F=e[5])?vf(F,T,r[6]):T,e[6]=F?Hn(e[5],W):r[6]),(T=r[7])&&(e[7]=T),128&l&&(e[8]=null==e[8]?r[8]:_r(e[8],r[8])),null==e[9]&&(e[9]=r[9]),e[0]=r[0],e[1]=g}(Ee,ye),e=Ee[0],r=Ee[1],s=Ee[2],l=Ee[3],g=Ee[4],!(T=Ee[9]=Ee[9]===t?F?0:e.length:rr(Ee[9]-Y,0))&&24&r&&(r&=-25),r&&1!=r)Te=8==r||16==r?function lv(e,r,s){var l=us(e);return function g(){for(var I=arguments.length,A=H(I),T=I,F=Ni(g);T--;)A[T]=arguments[T];var Y=I<3&&A[0]!==F&&A[I-1]!==F?[]:Hn(A,F);return(I-=Y.length)<s?Sf(e,r,vo,g.placeholder,t,A,Y,t,t,s-I):jr(this&&this!==hr&&this instanceof g?l:e,this,A)}}(e,r,T):32!=r&&33!=r||g.length?vo.apply(t,Ee):function fv(e,r,s,l){var g=1&r,I=us(e);return function A(){for(var T=-1,F=arguments.length,Y=-1,ee=l.length,oe=H(ee+F),ye=this&&this!==hr&&this instanceof A?I:e;++Y<ee;)oe[Y]=l[Y];for(;F--;)oe[Y++]=arguments[++T];return jr(ye,g?s:this,oe)}}(e,r,s,l);else var Te=function uv(e,r,s){var l=1&r,g=us(e);return function I(){return(this&&this!==hr&&this instanceof I?g:e).apply(l?s:this,arguments)}}(e,r,s);return Zf((ye?of:Mf)(Te,Ee),e,r)}function Of(e,r,s,l){return e===t||an(e,Pi[s])&&!st.call(l,s)?r:e}function Rf(e,r,s,l,g,I){return Ct(e)&&Ct(r)&&(I.set(r,e),ho(e,r,t,Rf,I),I.delete(r)),e}function dv(e){return hs(e)?t:e}function Af(e,r,s,l,g,I){var A=1&s,T=e.length,F=r.length;if(T!=F&&!(A&&F>T))return!1;var Y=I.get(e),ee=I.get(r);if(Y&&ee)return Y==r&&ee==e;var oe=-1,ye=!0,Ee=2&s?new oi:t;for(I.set(e,r),I.set(r,e);++oe<T;){var Te=e[oe],He=r[oe];if(l)var Ce=A?l(He,Te,oe,r,e,I):l(Te,He,oe,e,r,I);if(Ce!==t){if(Ce)continue;ye=!1;break}if(Ee){if(!Ma(r,function(Ke,Ye){if(!Yi(Ee,Ye)&&(Te===Ke||g(Te,Ke,s,l,I)))return Ee.push(Ye)})){ye=!1;break}}else if(Te!==He&&!g(Te,He,s,l,I)){ye=!1;break}}return I.delete(e),I.delete(r),ye}function Cn(e){return xc(jf(e,t,Bf),e+"")}function pc(e){return Gl(e,cr,_c)}function gc(e){return Gl(e,Tr,Tf)}var yc=oo?function(e){return oo.get(e)}:jc;function wo(e){for(var r=e.name+"",s=Ri[r],l=st.call(Ri,r)?s.length:0;l--;){var g=s[l],I=g.func;if(null==I||I==e)return g.name}return r}function Ni(e){return(st.call(w,"placeholder")?w:e).placeholder}function Ae(){var e=w.iteratee||Dc;return e=e===Dc?Ql:e,arguments.length?e(arguments[0],arguments[1]):e}function xo(e,r){var s=e.__data__;return function Ev(e){var r=typeof e;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e}(r)?s["string"==typeof r?"string":"hash"]:s.map}function vc(e){for(var r=cr(e),s=r.length;s--;){var l=r[s],g=e[l];r[s]=[l,g,Df(g)]}return r}function ui(e,r){var s=function Py(j,K){return null==j?t:j[K]}(e,r);return Jl(s)?s:t}var _c=Va?function(e){return null==e?[]:(e=ht(e),zn(Va(e),function(r){return jl.call(e,r)}))}:Fc,Tf=Va?function(e){for(var r=[];e;)$n(r,_c(e)),e=to(e);return r}:Fc,mr=Er;function Cf(e,r,s){for(var l=-1,g=(r=Kn(r,e)).length,I=!1;++l<g;){var A=wn(r[l]);if(!(I=null!=e&&s(e,A)))break;e=e[A]}return I||++l!=g?I:!!(g=null==e?0:e.length)&&Ao(g)&&Nn(A,g)&&(qe(e)||fi(e))}function Nf(e){return"function"!=typeof e.constructor||ls(e)?{}:Ai(to(e))}function xv(e){return qe(e)||fi(e)||!!(Fl&&e&&e[Fl])}function Nn(e,r){var s=typeof e;return!!(r=r??qn)&&("number"==s||"symbol"!=s&&Lg.test(e))&&e>-1&&e%1==0&&e<r}function Ir(e,r,s){if(!Ct(s))return!1;var l=typeof r;return!!("number"==l?Ar(s)&&Nn(r,s.length):"string"==l&&r in s)&&an(s[r],e)}function mc(e,r){if(qe(e))return!1;var s=typeof e;return!("number"!=s&&"symbol"!=s&&"boolean"!=s&&null!=e&&!Zr(e))||mg.test(e)||!_g.test(e)||null!=r&&e in ht(r)}function bc(e){var r=wo(e),s=w[r];if("function"!=typeof s||!(r in We.prototype))return!1;if(e===s)return!0;var l=yc(s);return!!l&&e===l[0]}(ka&&mr(new ka(new ArrayBuffer(1)))!=bi||es&&mr(new es)!=rn||Ka&&mr(Ka.resolve())!=Vu||Oi&&mr(new Oi)!=nn||ts&&mr(new ts)!=Ji)&&(mr=function(e){var r=Er(e),s=r==Pn?e.constructor:t,l=s?li(s):"";if(l)switch(l){case Yy:return bi;case Xy:return rn;case e0:return Vu;case t0:return nn;case r0:return Ji}return r});var Sv=Js?Dn:Mc;function ls(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||Pi)}function Df(e){return e==e&&!Ct(e)}function Lf(e,r){return function(s){return null!=s&&s[e]===r&&(r!==t||e in ht(s))}}function jf(e,r,s){return r=rr(r===t?e.length-1:r,0),function(){for(var l=arguments,g=-1,I=rr(l.length-r,0),A=H(I);++g<I;)A[g]=l[r+g];g=-1;for(var T=H(r+1);++g<r;)T[g]=l[g];return T[r]=s(A),jr(e,this,T)}}function Ff(e,r){return r.length<2?e:ci(e,Gr(r,0,-1))}function wc(e,r){if(("constructor"!==r||"function"!=typeof e[r])&&"__proto__"!=r)return e[r]}var Mf=Uf(of),fs=Vy||function(e,r){return hr.setTimeout(e,r)},xc=Uf(X0);function Zf(e,r,s){var l=r+"";return xc(e,function wv(e,r){var s=r.length;if(!s)return e;var l=s-1;return r[l]=(s>1?"& ":"")+r[l],r=r.join(s>2?", ":" "),e.replace(Eg,"{\n/* [wrapped with "+r+"] */\n")}(l,function Cv(e,r){return Br(ig,function(s){var l="_."+s[0];r&s[1]&&!ks(e,l)&&e.push(l)}),e.sort()}(function _v(e){var r=e.match(Ig);return r?r[1].split(Sg):[]}(l),s)))}function Uf(e){var r=0,s=0;return function(){var l=Wy(),g=16-(l-s);if(s=l,g>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(t,arguments)}}function Eo(e,r){var s=-1,l=e.length,g=l-1;for(r=r===t?l:r;++s<r;){var I=ic(s,g),A=e[I];e[I]=e[s],e[s]=A}return e.length=r,e}var qf=function Pv(e){var r=Oo(e,function(l){return 500===s.size&&s.clear(),l}),s=r.cache;return r}(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(bg,function(s,l,g,I){r.push(g?I.replace(Rg,"$1"):l||s)}),r});function wn(e){if("string"==typeof e||Zr(e))return e;var r=e+"";return"0"==r&&1/e==-ri?"-0":r}function li(e){if(null!=e){try{return Qs.call(e)}catch{}try{return e+""}catch{}}return""}function zf(e){if(e instanceof We)return e.clone();var r=new kr(e.__wrapped__,e.__chain__);return r.__actions__=Rr(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}var jv=Be(function(e,r){return Ut(e)?ss(e,dr(r,1,Ut,!0)):[]}),Fv=Be(function(e,r){var s=Wr(r);return Ut(s)&&(s=t),Ut(e)?ss(e,dr(r,1,Ut,!0),Ae(s,2)):[]}),Mv=Be(function(e,r){var s=Wr(r);return Ut(s)&&(s=t),Ut(e)?ss(e,dr(r,1,Ut,!0),t,s):[]});function $f(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=null==s?0:ze(s);return g<0&&(g=rr(l+g,0)),Ks(e,Ae(r,3),g)}function Hf(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=l-1;return s!==t&&(g=ze(s),g=s<0?rr(l+g,0):_r(g,l-1)),Ks(e,Ae(r,3),g,!0)}function Bf(e){return null!=e&&e.length?dr(e,1):[]}function Vf(e){return e&&e.length?e[0]:t}var Gv=Be(function(e){var r=St(e,uc);return r.length&&r[0]===e[0]?Xa(r):[]}),Wv=Be(function(e){var r=Wr(e),s=St(e,uc);return r===Wr(s)?r=t:s.pop(),s.length&&s[0]===e[0]?Xa(s,Ae(r,2)):[]}),Jv=Be(function(e){var r=Wr(e),s=St(e,uc);return(r="function"==typeof r?r:t)&&s.pop(),s.length&&s[0]===e[0]?Xa(s,t,r):[]});function Wr(e){var r=null==e?0:e.length;return r?e[r-1]:t}var e_=Be(kf);function kf(e,r){return e&&e.length&&r&&r.length?nc(e,r):e}var n_=Cn(function(e,r){var s=null==e?0:e.length,l=Wa(e,r);return sf(e,St(r,function(g){return Nn(g,s)?+g:g}).sort(gf)),l});function Ec(e){return null==e?e:Qy.call(e)}var m_=Be(function(e){return kn(dr(e,1,Ut,!0))}),b_=Be(function(e){var r=Wr(e);return Ut(r)&&(r=t),kn(dr(e,1,Ut,!0),Ae(r,2))}),w_=Be(function(e){var r=Wr(e);return r="function"==typeof r?r:t,kn(dr(e,1,Ut,!0),t,r)});function Ic(e){if(!e||!e.length)return[];var r=0;return e=zn(e,function(s){if(Ut(s))return r=rr(s.length,r),!0}),za(r,function(s){return St(e,Za(s))})}function Kf(e,r){if(!e||!e.length)return[];var s=Ic(e);return null==r?s:St(s,function(l){return jr(r,t,l)})}var S_=Be(function(e,r){return Ut(e)?ss(e,r):[]}),P_=Be(function(e){return cc(zn(e,Ut))}),O_=Be(function(e){var r=Wr(e);return Ut(r)&&(r=t),cc(zn(e,Ut),Ae(r,2))}),R_=Be(function(e){var r=Wr(e);return r="function"==typeof r?r:t,cc(zn(e,Ut),t,r)}),A_=Be(Ic),N_=Be(function(e){var r=e.length,s=r>1?e[r-1]:t;return s="function"==typeof s?(e.pop(),s):t,Kf(e,s)});function Gf(e){var r=w(e);return r.__chain__=!0,r}function Io(e,r){return r(e)}var L_=Cn(function(e){var r=e.length,s=r?e[0]:0,l=this.__wrapped__,g=function(I){return Wa(I,e)};return!(r>1||this.__actions__.length)&&l instanceof We&&Nn(s)?((l=l.slice(s,+s+(r?1:0))).__actions__.push({func:Io,args:[g],thisArg:t}),new kr(l,this.__chain__).thru(function(I){return r&&!I.length&&I.push(t),I})):this.thru(g)}),$_=yo(function(e,r,s){st.call(e,s)?++e[s]:An(e,s,1)}),V_=wf($f),k_=wf(Hf);function Wf(e,r){return(qe(e)?Br:Vn)(e,Ae(r,3))}function Jf(e,r){return(qe(e)?py:Vl)(e,Ae(r,3))}var J_=yo(function(e,r,s){st.call(e,s)?e[s].push(r):An(e,s,[r])}),Y_=Be(function(e,r,s){var l=-1,g="function"==typeof r,I=Ar(e)?H(e.length):[];return Vn(e,function(A){I[++l]=g?jr(r,A,s):os(A,r,s)}),I}),X_=yo(function(e,r,s){An(e,s,r)});function So(e,r){return(qe(e)?St:Yl)(e,Ae(r,3))}var tm=yo(function(e,r,s){e[s?0:1].push(r)},function(){return[[],[]]}),lm=Be(function(e,r){if(null==e)return[];var s=r.length;return s>1&&Ir(e,r[0],r[1])?r=[]:s>2&&Ir(r[0],r[1],r[2])&&(r=[r[0]]),rf(e,dr(r,1),[])}),Po=By||function(){return hr.Date.now()};function Qf(e,r,s){return r=s?t:r,Tn(e,128,t,t,t,t,r=e&&null==r?e.length:r)}function Yf(e,r){var s;if("function"!=typeof r)throw new Vr(f);return e=ze(e),function(){return--e>0&&(s=r.apply(this,arguments)),e<=1&&(r=t),s}}var Sc=Be(function(e,r,s){var l=1;if(s.length){var g=Hn(s,Ni(Sc));l|=32}return Tn(e,l,r,s,g)}),Xf=Be(function(e,r,s){var l=3;if(s.length){var g=Hn(s,Ni(Xf));l|=32}return Tn(r,l,e,s,g)});function rh(e,r,s){var l,g,I,A,T,F,Y=0,ee=!1,oe=!1,ye=!0;if("function"!=typeof e)throw new Vr(f);function Ee(qt){var cn=l,jn=g;return l=g=t,Y=qt,A=e.apply(jn,cn)}function Ce(qt){var cn=qt-F;return F===t||cn>=r||cn<0||oe&&qt-Y>=I}function Ke(){var qt=Po();if(Ce(qt))return Ye(qt);T=fs(Ke,function He(qt){var wh=r-(qt-F);return oe?_r(wh,I-(qt-Y)):wh}(qt))}function Ye(qt){return T=t,ye&&l?Ee(qt):(l=g=t,A)}function qr(){var qt=Po(),cn=Ce(qt);if(l=arguments,g=this,F=qt,cn){if(T===t)return function Te(qt){return Y=qt,T=fs(Ke,r),ee?Ee(qt):A}(F);if(oe)return hf(T),T=fs(Ke,r),Ee(F)}return T===t&&(T=fs(Ke,r)),A}return r=Jr(r)||0,Ct(s)&&(ee=!!s.leading,I=(oe="maxWait"in s)?rr(Jr(s.maxWait)||0,r):I,ye="trailing"in s?!!s.trailing:ye),qr.cancel=function Ur(){T!==t&&hf(T),Y=0,l=F=g=T=t},qr.flush=function Sr(){return T===t?A:Ye(Po())},qr}var hm=Be(function(e,r){return Bl(e,1,r)}),dm=Be(function(e,r,s){return Bl(e,Jr(r)||0,s)});function Oo(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new Vr(f);var s=function(){var l=arguments,g=r?r.apply(this,l):l[0],I=s.cache;if(I.has(g))return I.get(g);var A=e.apply(this,l);return s.cache=I.set(g,A)||I,A};return s.cache=new(Oo.Cache||Rn),s}function Ro(e){if("function"!=typeof e)throw new Vr(f);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}Oo.Cache=Rn;var ym=rv(function(e,r){var s=(r=1==r.length&&qe(r[0])?St(r[0],Fr(Ae())):St(dr(r,1),Fr(Ae()))).length;return Be(function(l){for(var g=-1,I=_r(l.length,s);++g<I;)l[g]=r[g].call(this,l[g]);return jr(e,this,l)})}),Pc=Be(function(e,r){var s=Hn(r,Ni(Pc));return Tn(e,32,t,r,s)}),nh=Be(function(e,r){var s=Hn(r,Ni(nh));return Tn(e,64,t,r,s)}),vm=Cn(function(e,r){return Tn(e,256,t,t,t,r)});function an(e,r){return e===r||e!=e&&r!=r}var Am=bo(Ya),Tm=bo(function(e,r){return e>=r}),fi=Wl(function(){return arguments}())?Wl:function(e){return Dt(e)&&st.call(e,"callee")&&!jl.call(e,"callee")},qe=H.isArray,Cm=yl?Fr(yl):function U0(e){return Dt(e)&&Er(e)==Qi};function Ar(e){return null!=e&&Ao(e.length)&&!Dn(e)}function Ut(e){return Dt(e)&&Ar(e)}var Wn=ky||Mc,Dm=vl?Fr(vl):function q0(e){return Dt(e)&&Er(e)==ki};function Oc(e){if(!Dt(e))return!1;var r=Er(e);return r==qs||"[object DOMException]"==r||"string"==typeof e.message&&"string"==typeof e.name&&!hs(e)}function Dn(e){if(!Ct(e))return!1;var r=Er(e);return r==zs||r==Bu||"[object AsyncFunction]"==r||"[object Proxy]"==r}function ih(e){return"number"==typeof e&&e==ze(e)}function Ao(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=qn}function Ct(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function Dt(e){return null!=e&&"object"==typeof e}var sh=_l?Fr(_l):function $0(e){return Dt(e)&&mr(e)==rn};function oh(e){return"number"==typeof e||Dt(e)&&Er(e)==Ki}function hs(e){if(!Dt(e)||Er(e)!=Pn)return!1;var r=to(e);if(null===r)return!0;var s=st.call(r,"constructor")&&r.constructor;return"function"==typeof s&&s instanceof s&&Qs.call(s)==qy}var Rc=ml?Fr(ml):function H0(e){return Dt(e)&&Er(e)==Gi},ah=bl?Fr(bl):function B0(e){return Dt(e)&&mr(e)==nn};function To(e){return"string"==typeof e||!qe(e)&&Dt(e)&&Er(e)==Wi}function Zr(e){return"symbol"==typeof e||Dt(e)&&Er(e)==$s}var Di=wl?Fr(wl):function V0(e){return Dt(e)&&Ao(e.length)&&!!Et[Er(e)]},Wm=bo(rc),Jm=bo(function(e,r){return e<=r});function ch(e){if(!e)return[];if(Ar(e))return To(e)?sn(e):Rr(e);if(Xi&&e[Xi])return function Ry(j){for(var K,H=[];!(K=j.next()).done;)H.push(K.value);return H}(e[Xi]());var r=mr(e);return(r==rn?Ha:r==nn?Gs:Li)(e)}function Ln(e){return e?(e=Jr(e))===ri||e===-ri?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ze(e){var r=Ln(e),s=r%1;return r==r?s?r-s:r:0}function uh(e){return e?ai(ze(e),0,_n):0}function Jr(e){if("number"==typeof e)return e;if(Zr(e))return NaN;if(Ct(e)){var r="function"==typeof e.valueOf?e.valueOf():e;e=Ct(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=Ol(e);var s=Cg.test(e);return s||Dg.test(e)?fy(e.slice(2),s?2:8):Tg.test(e)?NaN:+e}function lh(e){return bn(e,Tr(e))}function nt(e){return null==e?"":Mr(e)}var Ym=Ti(function(e,r){if(ls(r)||Ar(r))bn(r,cr(r),e);else for(var s in r)st.call(r,s)&&is(e,s,r[s])}),fh=Ti(function(e,r){bn(r,Tr(r),e)}),Co=Ti(function(e,r,s,l){bn(r,Tr(r),e,l)}),Xm=Ti(function(e,r,s,l){bn(r,cr(r),e,l)}),e1=Cn(Wa),r1=Be(function(e,r){e=ht(e);var s=-1,l=r.length,g=l>2?r[2]:t;for(g&&Ir(r[0],r[1],g)&&(l=1);++s<l;)for(var I=r[s],A=Tr(I),T=-1,F=A.length;++T<F;){var Y=A[T],ee=e[Y];(ee===t||an(ee,Pi[Y])&&!st.call(e,Y))&&(e[Y]=I[Y])}return e}),n1=Be(function(e){return e.push(t,Rf),jr(hh,t,e)});function Ac(e,r,s){var l=null==e?t:ci(e,r);return l===t?s:l}function Tc(e,r){return null!=e&&Cf(e,r,F0)}var d1=Ef(function(e,r,s){null!=r&&"function"!=typeof r.toString&&(r=Ys.call(r)),e[r]=s},Nc(Cr)),p1=Ef(function(e,r,s){null!=r&&"function"!=typeof r.toString&&(r=Ys.call(r)),st.call(e,r)?e[r].push(s):e[r]=[s]},Ae),g1=Be(os);function cr(e){return Ar(e)?ql(e):tc(e)}function Tr(e){return Ar(e)?ql(e,!0):function k0(e){if(!Ct(e))return function Rv(e){var r=[];if(null!=e)for(var s in ht(e))r.push(s);return r}(e);var r=ls(e),s=[];for(var l in e)"constructor"==l&&(r||!st.call(e,l))||s.push(l);return s}(e)}var _1=Ti(function(e,r,s){ho(e,r,s)}),hh=Ti(function(e,r,s,l){ho(e,r,s,l)}),m1=Cn(function(e,r){var s={};if(null==e)return s;var l=!1;r=St(r,function(I){return I=Kn(I,e),l||(l=I.length>1),I}),bn(e,gc(e),s),l&&(s=Kr(s,7,dv));for(var g=r.length;g--;)ac(s,r[g]);return s}),w1=Cn(function(e,r){return null==e?{}:function G0(e,r){return nf(e,r,function(s,l){return Tc(e,l)})}(e,r)});function dh(e,r){if(null==e)return{};var s=St(gc(e),function(l){return[l]});return r=Ae(r),nf(e,s,function(l,g){return r(l,g[0])})}var ph=Pf(cr),gh=Pf(Tr);function Li(e){return null==e?[]:$a(e,cr(e))}var D1=Ci(function(e,r,s){return r=r.toLowerCase(),e+(s?yh(r):r)});function yh(e){return Cc(nt(e).toLowerCase())}function vh(e){return(e=nt(e))&&e.replace(jg,Ey).replace(ey,"")}var M1=Ci(function(e,r,s){return e+(s?"-":"")+r.toLowerCase()}),Z1=Ci(function(e,r,s){return e+(s?" ":"")+r.toLowerCase()}),U1=bf("toLowerCase"),k1=Ci(function(e,r,s){return e+(s?"_":"")+r.toLowerCase()}),G1=Ci(function(e,r,s){return e+(s?" ":"")+Cc(r)}),ib=Ci(function(e,r,s){return e+(s?" ":"")+r.toUpperCase()}),Cc=bf("toUpperCase");function _h(e,r,s){return e=nt(e),(r=s?t:r)===t?function Oy(j){return ny.test(j)}(e)?function jy(j){return j.match(ty)||[]}(e):function _y(j){return j.match(Pg)||[]}(e):e.match(r)||[]}var mh=Be(function(e,r){try{return jr(e,t,r)}catch(s){return Oc(s)?s:new Ze(s)}}),sb=Cn(function(e,r){return Br(r,function(s){s=wn(s),An(e,s,Sc(e[s],e))}),e});function Nc(e){return function(){return e}}var ub=xf(),lb=xf(!0);function Cr(e){return e}function Dc(e){return Ql("function"==typeof e?e:Kr(e,1))}var db=Be(function(e,r){return function(s){return os(s,e,r)}}),pb=Be(function(e,r){return function(s){return os(e,s,r)}});function Lc(e,r,s){var l=cr(r),g=fo(r,l);null==s&&(!Ct(r)||!g.length&&l.length)&&(s=r,r=e,e=this,g=fo(r,cr(r)));var I=!(Ct(s)&&"chain"in s&&!s.chain),A=Dn(e);return Br(g,function(T){var F=r[T];e[T]=F,A&&(e.prototype[T]=function(){var Y=this.__chain__;if(I||Y){var ee=e(this.__wrapped__);return(ee.__actions__=Rr(this.__actions__)).push({func:F,args:arguments,thisArg:e}),ee.__chain__=Y,ee}return F.apply(e,$n([this.value()],arguments))})}),e}function jc(){}var vb=hc(St),_b=hc(xl),mb=hc(Ma);function bh(e){return mc(e)?Za(wn(e)):function W0(e){return function(r){return ci(r,e)}}(e)}var wb=If(),xb=If(!0);function Fc(){return[]}function Mc(){return!1}var Ab=_o(function(e,r){return e+r},0),Tb=dc("ceil"),Cb=_o(function(e,r){return e/r},1),Nb=dc("floor"),Ub=_o(function(e,r){return e*r},1),qb=dc("round"),zb=_o(function(e,r){return e-r},0);return w.after=function fm(e,r){if("function"!=typeof r)throw new Vr(f);return e=ze(e),function(){if(--e<1)return r.apply(this,arguments)}},w.ary=Qf,w.assign=Ym,w.assignIn=fh,w.assignInWith=Co,w.assignWith=Xm,w.at=e1,w.before=Yf,w.bind=Sc,w.bindAll=sb,w.bindKey=Xf,w.castArray=function Em(){if(!arguments.length)return[];var e=arguments[0];return qe(e)?e:[e]},w.chain=Gf,w.chunk=function Nv(e,r,s){r=(s?Ir(e,r,s):r===t)?1:rr(ze(r),0);var l=null==e?0:e.length;if(!l||r<1)return[];for(var g=0,I=0,A=H(io(l/r));g<l;)A[I++]=Gr(e,g,g+=r);return A},w.compact=function Dv(e){for(var r=-1,s=null==e?0:e.length,l=0,g=[];++r<s;){var I=e[r];I&&(g[l++]=I)}return g},w.concat=function Lv(){var e=arguments.length;if(!e)return[];for(var r=H(e-1),s=arguments[0],l=e;l--;)r[l-1]=arguments[l];return $n(qe(s)?Rr(s):[s],dr(r,1))},w.cond=function ob(e){var r=null==e?0:e.length,s=Ae();return e=r?St(e,function(l){if("function"!=typeof l[1])throw new Vr(f);return[s(l[0]),l[1]]}):[],Be(function(l){for(var g=-1;++g<r;){var I=e[g];if(jr(I[0],this,l))return jr(I[1],this,l)}})},w.conforms=function ab(e){return function N0(e){var r=cr(e);return function(s){return Hl(s,e,r)}}(Kr(e,1))},w.constant=Nc,w.countBy=$_,w.create=function t1(e,r){var s=Ai(e);return null==r?s:$l(s,r)},w.curry=function eh(e,r,s){var l=Tn(e,8,t,t,t,t,t,r=s?t:r);return l.placeholder=eh.placeholder,l},w.curryRight=function th(e,r,s){var l=Tn(e,16,t,t,t,t,t,r=s?t:r);return l.placeholder=th.placeholder,l},w.debounce=rh,w.defaults=r1,w.defaultsDeep=n1,w.defer=hm,w.delay=dm,w.difference=jv,w.differenceBy=Fv,w.differenceWith=Mv,w.drop=function Zv(e,r,s){var l=null==e?0:e.length;return l?Gr(e,(r=s||r===t?1:ze(r))<0?0:r,l):[]},w.dropRight=function Uv(e,r,s){var l=null==e?0:e.length;return l?Gr(e,0,(r=l-(r=s||r===t?1:ze(r)))<0?0:r):[]},w.dropRightWhile=function qv(e,r){return e&&e.length?go(e,Ae(r,3),!0,!0):[]},w.dropWhile=function zv(e,r){return e&&e.length?go(e,Ae(r,3),!0):[]},w.fill=function $v(e,r,s,l){var g=null==e?0:e.length;return g?(s&&"number"!=typeof s&&Ir(e,r,s)&&(s=0,l=g),function L0(e,r,s,l){var g=e.length;for((s=ze(s))<0&&(s=-s>g?0:g+s),(l=l===t||l>g?g:ze(l))<0&&(l+=g),l=s>l?0:uh(l);s<l;)e[s++]=r;return e}(e,r,s,l)):[]},w.filter=function B_(e,r){return(qe(e)?zn:kl)(e,Ae(r,3))},w.flatMap=function K_(e,r){return dr(So(e,r),1)},w.flatMapDeep=function G_(e,r){return dr(So(e,r),ri)},w.flatMapDepth=function W_(e,r,s){return s=s===t?1:ze(s),dr(So(e,r),s)},w.flatten=Bf,w.flattenDeep=function Hv(e){return null!=e&&e.length?dr(e,ri):[]},w.flattenDepth=function Bv(e,r){return null!=e&&e.length?dr(e,r=r===t?1:ze(r)):[]},w.flip=function pm(e){return Tn(e,512)},w.flow=ub,w.flowRight=lb,w.fromPairs=function Vv(e){for(var r=-1,s=null==e?0:e.length,l={};++r<s;){var g=e[r];l[g[0]]=g[1]}return l},w.functions=function l1(e){return null==e?[]:fo(e,cr(e))},w.functionsIn=function f1(e){return null==e?[]:fo(e,Tr(e))},w.groupBy=J_,w.initial=function Kv(e){return null!=e&&e.length?Gr(e,0,-1):[]},w.intersection=Gv,w.intersectionBy=Wv,w.intersectionWith=Jv,w.invert=d1,w.invertBy=p1,w.invokeMap=Y_,w.iteratee=Dc,w.keyBy=X_,w.keys=cr,w.keysIn=Tr,w.map=So,w.mapKeys=function y1(e,r){var s={};return r=Ae(r,3),mn(e,function(l,g,I){An(s,r(l,g,I),l)}),s},w.mapValues=function v1(e,r){var s={};return r=Ae(r,3),mn(e,function(l,g,I){An(s,g,r(l,g,I))}),s},w.matches=function fb(e){return Xl(Kr(e,1))},w.matchesProperty=function hb(e,r){return ef(e,Kr(r,1))},w.memoize=Oo,w.merge=_1,w.mergeWith=hh,w.method=db,w.methodOf=pb,w.mixin=Lc,w.negate=Ro,w.nthArg=function yb(e){return e=ze(e),Be(function(r){return tf(r,e)})},w.omit=m1,w.omitBy=function b1(e,r){return dh(e,Ro(Ae(r)))},w.once=function gm(e){return Yf(2,e)},w.orderBy=function em(e,r,s,l){return null==e?[]:(qe(r)||(r=null==r?[]:[r]),qe(s=l?t:s)||(s=null==s?[]:[s]),rf(e,r,s))},w.over=vb,w.overArgs=ym,w.overEvery=_b,w.overSome=mb,w.partial=Pc,w.partialRight=nh,w.partition=tm,w.pick=w1,w.pickBy=dh,w.property=bh,w.propertyOf=function bb(e){return function(r){return null==e?t:ci(e,r)}},w.pull=e_,w.pullAll=kf,w.pullAllBy=function t_(e,r,s){return e&&e.length&&r&&r.length?nc(e,r,Ae(s,2)):e},w.pullAllWith=function r_(e,r,s){return e&&e.length&&r&&r.length?nc(e,r,t,s):e},w.pullAt=n_,w.range=wb,w.rangeRight=xb,w.rearg=vm,w.reject=function im(e,r){return(qe(e)?zn:kl)(e,Ro(Ae(r,3)))},w.remove=function i_(e,r){var s=[];if(!e||!e.length)return s;var l=-1,g=[],I=e.length;for(r=Ae(r,3);++l<I;){var A=e[l];r(A,l,e)&&(s.push(A),g.push(l))}return sf(e,g),s},w.rest=function _m(e,r){if("function"!=typeof e)throw new Vr(f);return Be(e,r=r===t?r:ze(r))},w.reverse=Ec,w.sampleSize=function om(e,r,s){return r=(s?Ir(e,r,s):r===t)?1:ze(r),(qe(e)?R0:Y0)(e,r)},w.set=function E1(e,r,s){return null==e?e:cs(e,r,s)},w.setWith=function I1(e,r,s,l){return l="function"==typeof l?l:t,null==e?e:cs(e,r,s,l)},w.shuffle=function am(e){return(qe(e)?A0:ev)(e)},w.slice=function s_(e,r,s){var l=null==e?0:e.length;return l?(s&&"number"!=typeof s&&Ir(e,r,s)?(r=0,s=l):(r=null==r?0:ze(r),s=s===t?l:ze(s)),Gr(e,r,s)):[]},w.sortBy=lm,w.sortedUniq=function h_(e){return e&&e.length?af(e):[]},w.sortedUniqBy=function d_(e,r){return e&&e.length?af(e,Ae(r,2)):[]},w.split=function K1(e,r,s){return s&&"number"!=typeof s&&Ir(e,r,s)&&(r=s=t),(s=s===t?_n:s>>>0)?(e=nt(e))&&("string"==typeof r||null!=r&&!Rc(r))&&!(r=Mr(r))&&Ei(e)?Gn(sn(e),0,s):e.split(r,s):[]},w.spread=function mm(e,r){if("function"!=typeof e)throw new Vr(f);return r=null==r?0:rr(ze(r),0),Be(function(s){var l=s[r],g=Gn(s,0,r);return l&&$n(g,l),jr(e,this,g)})},w.tail=function p_(e){var r=null==e?0:e.length;return r?Gr(e,1,r):[]},w.take=function g_(e,r,s){return e&&e.length?Gr(e,0,(r=s||r===t?1:ze(r))<0?0:r):[]},w.takeRight=function y_(e,r,s){var l=null==e?0:e.length;return l?Gr(e,(r=l-(r=s||r===t?1:ze(r)))<0?0:r,l):[]},w.takeRightWhile=function v_(e,r){return e&&e.length?go(e,Ae(r,3),!1,!0):[]},w.takeWhile=function __(e,r){return e&&e.length?go(e,Ae(r,3)):[]},w.tap=function D_(e,r){return r(e),e},w.throttle=function bm(e,r,s){var l=!0,g=!0;if("function"!=typeof e)throw new Vr(f);return Ct(s)&&(l="leading"in s?!!s.leading:l,g="trailing"in s?!!s.trailing:g),rh(e,r,{leading:l,maxWait:r,trailing:g})},w.thru=Io,w.toArray=ch,w.toPairs=ph,w.toPairsIn=gh,w.toPath=function Ob(e){return qe(e)?St(e,wn):Zr(e)?[e]:Rr(qf(nt(e)))},w.toPlainObject=lh,w.transform=function S1(e,r,s){var l=qe(e),g=l||Wn(e)||Di(e);if(r=Ae(r,4),null==s){var I=e&&e.constructor;s=g?l?new I:[]:Ct(e)&&Dn(I)?Ai(to(e)):{}}return(g?Br:mn)(e,function(A,T,F){return r(s,A,T,F)}),s},w.unary=function wm(e){return Qf(e,1)},w.union=m_,w.unionBy=b_,w.unionWith=w_,w.uniq=function x_(e){return e&&e.length?kn(e):[]},w.uniqBy=function E_(e,r){return e&&e.length?kn(e,Ae(r,2)):[]},w.uniqWith=function I_(e,r){return r="function"==typeof r?r:t,e&&e.length?kn(e,t,r):[]},w.unset=function P1(e,r){return null==e||ac(e,r)},w.unzip=Ic,w.unzipWith=Kf,w.update=function O1(e,r,s){return null==e?e:uf(e,r,lc(s))},w.updateWith=function R1(e,r,s,l){return l="function"==typeof l?l:t,null==e?e:uf(e,r,lc(s),l)},w.values=Li,w.valuesIn=function A1(e){return null==e?[]:$a(e,Tr(e))},w.without=S_,w.words=_h,w.wrap=function xm(e,r){return Pc(lc(r),e)},w.xor=P_,w.xorBy=O_,w.xorWith=R_,w.zip=A_,w.zipObject=function T_(e,r){return ff(e||[],r||[],is)},w.zipObjectDeep=function C_(e,r){return ff(e||[],r||[],cs)},w.zipWith=N_,w.entries=ph,w.entriesIn=gh,w.extend=fh,w.extendWith=Co,Lc(w,w),w.add=Ab,w.attempt=mh,w.camelCase=D1,w.capitalize=yh,w.ceil=Tb,w.clamp=function T1(e,r,s){return s===t&&(s=r,r=t),s!==t&&(s=(s=Jr(s))==s?s:0),r!==t&&(r=(r=Jr(r))==r?r:0),ai(Jr(e),r,s)},w.clone=function Im(e){return Kr(e,4)},w.cloneDeep=function Pm(e){return Kr(e,5)},w.cloneDeepWith=function Om(e,r){return Kr(e,5,r="function"==typeof r?r:t)},w.cloneWith=function Sm(e,r){return Kr(e,4,r="function"==typeof r?r:t)},w.conformsTo=function Rm(e,r){return null==r||Hl(e,r,cr(r))},w.deburr=vh,w.defaultTo=function cb(e,r){return null==e||e!=e?r:e},w.divide=Cb,w.endsWith=function L1(e,r,s){e=nt(e),r=Mr(r);var l=e.length,g=s=s===t?l:ai(ze(s),0,l);return(s-=r.length)>=0&&e.slice(s,g)==r},w.eq=an,w.escape=function j1(e){return(e=nt(e))&&gg.test(e)?e.replace(Ku,Iy):e},w.escapeRegExp=function F1(e){return(e=nt(e))&&wg.test(e)?e.replace(Pa,"\\$&"):e},w.every=function H_(e,r,s){var l=qe(e)?xl:D0;return s&&Ir(e,r,s)&&(r=t),l(e,Ae(r,3))},w.find=V_,w.findIndex=$f,w.findKey=function i1(e,r){return El(e,Ae(r,3),mn)},w.findLast=k_,w.findLastIndex=Hf,w.findLastKey=function s1(e,r){return El(e,Ae(r,3),Qa)},w.floor=Nb,w.forEach=Wf,w.forEachRight=Jf,w.forIn=function o1(e,r){return null==e?e:Ja(e,Ae(r,3),Tr)},w.forInRight=function a1(e,r){return null==e?e:Kl(e,Ae(r,3),Tr)},w.forOwn=function c1(e,r){return e&&mn(e,Ae(r,3))},w.forOwnRight=function u1(e,r){return e&&Qa(e,Ae(r,3))},w.get=Ac,w.gt=Am,w.gte=Tm,w.has=function h1(e,r){return null!=e&&Cf(e,r,j0)},w.hasIn=Tc,w.head=Vf,w.identity=Cr,w.includes=function Q_(e,r,s,l){e=Ar(e)?e:Li(e),s=s&&!l?ze(s):0;var g=e.length;return s<0&&(s=rr(g+s,0)),To(e)?s<=g&&e.indexOf(r,s)>-1:!!g&&xi(e,r,s)>-1},w.indexOf=function kv(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=null==s?0:ze(s);return g<0&&(g=rr(l+g,0)),xi(e,r,g)},w.inRange=function C1(e,r,s){return r=Ln(r),s===t?(s=r,r=0):s=Ln(s),function M0(e,r,s){return e>=_r(r,s)&&e<rr(r,s)}(e=Jr(e),r,s)},w.invoke=g1,w.isArguments=fi,w.isArray=qe,w.isArrayBuffer=Cm,w.isArrayLike=Ar,w.isArrayLikeObject=Ut,w.isBoolean=function Nm(e){return!0===e||!1===e||Dt(e)&&Er(e)==Vi},w.isBuffer=Wn,w.isDate=Dm,w.isElement=function Lm(e){return Dt(e)&&1===e.nodeType&&!hs(e)},w.isEmpty=function jm(e){if(null==e)return!0;if(Ar(e)&&(qe(e)||"string"==typeof e||"function"==typeof e.splice||Wn(e)||Di(e)||fi(e)))return!e.length;var r=mr(e);if(r==rn||r==nn)return!e.size;if(ls(e))return!tc(e).length;for(var s in e)if(st.call(e,s))return!1;return!0},w.isEqual=function Fm(e,r){return as(e,r)},w.isEqualWith=function Mm(e,r,s){var l=(s="function"==typeof s?s:t)?s(e,r):t;return l===t?as(e,r,t,s):!!l},w.isError=Oc,w.isFinite=function Zm(e){return"number"==typeof e&&Ml(e)},w.isFunction=Dn,w.isInteger=ih,w.isLength=Ao,w.isMap=sh,w.isMatch=function Um(e,r){return e===r||ec(e,r,vc(r))},w.isMatchWith=function qm(e,r,s){return s="function"==typeof s?s:t,ec(e,r,vc(r),s)},w.isNaN=function zm(e){return oh(e)&&e!=+e},w.isNative=function $m(e){if(Sv(e))throw new Ze("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Jl(e)},w.isNil=function Bm(e){return null==e},w.isNull=function Hm(e){return null===e},w.isNumber=oh,w.isObject=Ct,w.isObjectLike=Dt,w.isPlainObject=hs,w.isRegExp=Rc,w.isSafeInteger=function Vm(e){return ih(e)&&e>=-qn&&e<=qn},w.isSet=ah,w.isString=To,w.isSymbol=Zr,w.isTypedArray=Di,w.isUndefined=function km(e){return e===t},w.isWeakMap=function Km(e){return Dt(e)&&mr(e)==Ji},w.isWeakSet=function Gm(e){return Dt(e)&&"[object WeakSet]"==Er(e)},w.join=function Qv(e,r){return null==e?"":Ky.call(e,r)},w.kebabCase=M1,w.last=Wr,w.lastIndexOf=function Yv(e,r,s){var l=null==e?0:e.length;if(!l)return-1;var g=l;return s!==t&&(g=(g=ze(s))<0?rr(l+g,0):_r(g,l-1)),r==r?function Cy(j,K,H){for(var be=H+1;be--;)if(j[be]===K)return be;return be}(e,r,g):Ks(e,Il,g,!0)},w.lowerCase=Z1,w.lowerFirst=U1,w.lt=Wm,w.lte=Jm,w.max=function Db(e){return e&&e.length?lo(e,Cr,Ya):t},w.maxBy=function Lb(e,r){return e&&e.length?lo(e,Ae(r,2),Ya):t},w.mean=function jb(e){return Sl(e,Cr)},w.meanBy=function Fb(e,r){return Sl(e,Ae(r,2))},w.min=function Mb(e){return e&&e.length?lo(e,Cr,rc):t},w.minBy=function Zb(e,r){return e&&e.length?lo(e,Ae(r,2),rc):t},w.stubArray=Fc,w.stubFalse=Mc,w.stubObject=function Eb(){return{}},w.stubString=function Ib(){return""},w.stubTrue=function Sb(){return!0},w.multiply=Ub,w.nth=function Xv(e,r){return e&&e.length?tf(e,ze(r)):t},w.noConflict=function gb(){return hr._===this&&(hr._=zy),this},w.noop=jc,w.now=Po,w.pad=function q1(e,r,s){e=nt(e);var l=(r=ze(r))?Ii(e):0;if(!r||l>=r)return e;var g=(r-l)/2;return mo(so(g),s)+e+mo(io(g),s)},w.padEnd=function z1(e,r,s){e=nt(e);var l=(r=ze(r))?Ii(e):0;return r&&l<r?e+mo(r-l,s):e},w.padStart=function $1(e,r,s){e=nt(e);var l=(r=ze(r))?Ii(e):0;return r&&l<r?mo(r-l,s)+e:e},w.parseInt=function H1(e,r,s){return s||null==r?r=0:r&&(r=+r),Jy(nt(e).replace(Oa,""),r||0)},w.random=function N1(e,r,s){if(s&&"boolean"!=typeof s&&Ir(e,r,s)&&(r=s=t),s===t&&("boolean"==typeof r?(s=r,r=t):"boolean"==typeof e&&(s=e,e=t)),e===t&&r===t?(e=0,r=1):(e=Ln(e),r===t?(r=e,e=0):r=Ln(r)),e>r){var l=e;e=r,r=l}if(s||e%1||r%1){var g=Zl();return _r(e+g*(r-e+ly("1e-"+((g+"").length-1))),r)}return ic(e,r)},w.reduce=function rm(e,r,s){var l=qe(e)?Fa:Pl,g=arguments.length<3;return l(e,Ae(r,4),s,g,Vn)},w.reduceRight=function nm(e,r,s){var l=qe(e)?gy:Pl,g=arguments.length<3;return l(e,Ae(r,4),s,g,Vl)},w.repeat=function B1(e,r,s){return r=(s?Ir(e,r,s):r===t)?1:ze(r),sc(nt(e),r)},w.replace=function V1(){var e=arguments,r=nt(e[0]);return e.length<3?r:r.replace(e[1],e[2])},w.result=function x1(e,r,s){var l=-1,g=(r=Kn(r,e)).length;for(g||(g=1,e=t);++l<g;){var I=null==e?t:e[wn(r[l])];I===t&&(l=g,I=s),e=Dn(I)?I.call(e):I}return e},w.round=qb,w.runInContext=j,w.sample=function sm(e){return(qe(e)?zl:Q0)(e)},w.size=function cm(e){if(null==e)return 0;if(Ar(e))return To(e)?Ii(e):e.length;var r=mr(e);return r==rn||r==nn?e.size:tc(e).length},w.snakeCase=k1,w.some=function um(e,r,s){var l=qe(e)?Ma:tv;return s&&Ir(e,r,s)&&(r=t),l(e,Ae(r,3))},w.sortedIndex=function o_(e,r){return po(e,r)},w.sortedIndexBy=function a_(e,r,s){return oc(e,r,Ae(s,2))},w.sortedIndexOf=function c_(e,r){var s=null==e?0:e.length;if(s){var l=po(e,r);if(l<s&&an(e[l],r))return l}return-1},w.sortedLastIndex=function u_(e,r){return po(e,r,!0)},w.sortedLastIndexBy=function l_(e,r,s){return oc(e,r,Ae(s,2),!0)},w.sortedLastIndexOf=function f_(e,r){if(null!=e&&e.length){var l=po(e,r,!0)-1;if(an(e[l],r))return l}return-1},w.startCase=G1,w.startsWith=function W1(e,r,s){return e=nt(e),s=null==s?0:ai(ze(s),0,e.length),r=Mr(r),e.slice(s,s+r.length)==r},w.subtract=zb,w.sum=function $b(e){return e&&e.length?qa(e,Cr):0},w.sumBy=function Hb(e,r){return e&&e.length?qa(e,Ae(r,2)):0},w.template=function J1(e,r,s){var l=w.templateSettings;s&&Ir(e,r,s)&&(r=t),e=nt(e),r=Co({},r,l,Of);var T,F,g=Co({},r.imports,l.imports,Of),I=cr(g),A=$a(g,I),Y=0,ee=r.interpolate||Hs,oe="__p += '",ye=Ba((r.escape||Hs).source+"|"+ee.source+"|"+(ee===Gu?Ag:Hs).source+"|"+(r.evaluate||Hs).source+"|$","g"),Ee="//# sourceURL="+(st.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sy+"]")+"\n";e.replace(ye,function(Ce,Ke,Ye,Ur,Sr,qr){return Ye||(Ye=Ur),oe+=e.slice(Y,qr).replace(Fg,Sy),Ke&&(T=!0,oe+="' +\n__e("+Ke+") +\n'"),Sr&&(F=!0,oe+="';\n"+Sr+";\n__p += '"),Ye&&(oe+="' +\n((__t = ("+Ye+")) == null ? '' : __t) +\n'"),Y=qr+Ce.length,Ce}),oe+="';\n";var Te=st.call(r,"variable")&&r.variable;if(Te){if(Og.test(Te))throw new Ze("Invalid `variable` option passed into `_.template`")}else oe="with (obj) {\n"+oe+"\n}\n";oe=(F?oe.replace(fg,""):oe).replace(hg,"$1").replace(dg,"$1;"),oe="function("+(Te||"obj")+") {\n"+(Te?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(F?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+oe+"return __p\n}";var He=mh(function(){return tt(I,Ee+"return "+oe).apply(t,A)});if(He.source=oe,Oc(He))throw He;return He},w.times=function Pb(e,r){if((e=ze(e))<1||e>qn)return[];var s=_n,l=_r(e,_n);r=Ae(r),e-=_n;for(var g=za(l,r);++s<e;)r(s);return g},w.toFinite=Ln,w.toInteger=ze,w.toLength=uh,w.toLower=function Q1(e){return nt(e).toLowerCase()},w.toNumber=Jr,w.toSafeInteger=function Qm(e){return e?ai(ze(e),-qn,qn):0===e?e:0},w.toString=nt,w.toUpper=function Y1(e){return nt(e).toUpperCase()},w.trim=function X1(e,r,s){if((e=nt(e))&&(s||r===t))return Ol(e);if(!e||!(r=Mr(r)))return e;var l=sn(e),g=sn(r);return Gn(l,Rl(l,g),Al(l,g)+1).join("")},w.trimEnd=function eb(e,r,s){if((e=nt(e))&&(s||r===t))return e.slice(0,Cl(e)+1);if(!e||!(r=Mr(r)))return e;var l=sn(e);return Gn(l,0,Al(l,sn(r))+1).join("")},w.trimStart=function tb(e,r,s){if((e=nt(e))&&(s||r===t))return e.replace(Oa,"");if(!e||!(r=Mr(r)))return e;var l=sn(e);return Gn(l,Rl(l,sn(r))).join("")},w.truncate=function rb(e,r){var s=30,l="...";if(Ct(r)){var g="separator"in r?r.separator:g;s="length"in r?ze(r.length):s,l="omission"in r?Mr(r.omission):l}var I=(e=nt(e)).length;if(Ei(e)){var A=sn(e);I=A.length}if(s>=I)return e;var T=s-Ii(l);if(T<1)return l;var F=A?Gn(A,0,T).join(""):e.slice(0,T);if(g===t)return F+l;if(A&&(T+=F.length-T),Rc(g)){if(e.slice(T).search(g)){var Y,ee=F;for(g.global||(g=Ba(g.source,nt(Wu.exec(g))+"g")),g.lastIndex=0;Y=g.exec(ee);)var oe=Y.index;F=F.slice(0,oe===t?T:oe)}}else if(e.indexOf(Mr(g),T)!=T){var ye=F.lastIndexOf(g);ye>-1&&(F=F.slice(0,ye))}return F+l},w.unescape=function nb(e){return(e=nt(e))&&pg.test(e)?e.replace(ku,Ny):e},w.uniqueId=function Rb(e){var r=++Uy;return nt(e)+r},w.upperCase=ib,w.upperFirst=Cc,w.each=Wf,w.eachRight=Jf,w.first=Vf,Lc(w,function(){var e={};return mn(w,function(r,s){st.call(w.prototype,s)||(e[s]=r)}),e}(),{chain:!1}),w.VERSION="4.17.21",Br(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),Br(["drop","take"],function(e,r){We.prototype[e]=function(s){s=s===t?1:rr(ze(s),0);var l=this.__filtered__&&!r?new We(this):this.clone();return l.__filtered__?l.__takeCount__=_r(s,l.__takeCount__):l.__views__.push({size:_r(s,_n),type:e+(l.__dir__<0?"Right":"")}),l},We.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),Br(["filter","map","takeWhile"],function(e,r){var s=r+1,l=1==s||3==s;We.prototype[e]=function(g){var I=this.clone();return I.__iteratees__.push({iteratee:Ae(g,3),type:s}),I.__filtered__=I.__filtered__||l,I}}),Br(["head","last"],function(e,r){var s="take"+(r?"Right":"");We.prototype[e]=function(){return this[s](1).value()[0]}}),Br(["initial","tail"],function(e,r){var s="drop"+(r?"":"Right");We.prototype[e]=function(){return this.__filtered__?new We(this):this[s](1)}}),We.prototype.compact=function(){return this.filter(Cr)},We.prototype.find=function(e){return this.filter(e).head()},We.prototype.findLast=function(e){return this.reverse().find(e)},We.prototype.invokeMap=Be(function(e,r){return"function"==typeof e?new We(this):this.map(function(s){return os(s,e,r)})}),We.prototype.reject=function(e){return this.filter(Ro(Ae(e)))},We.prototype.slice=function(e,r){e=ze(e);var s=this;return s.__filtered__&&(e>0||r<0)?new We(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),r!==t&&(s=(r=ze(r))<0?s.dropRight(-r):s.take(r-e)),s)},We.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},We.prototype.toArray=function(){return this.take(_n)},mn(We.prototype,function(e,r){var s=/^(?:filter|find|map|reject)|While$/.test(r),l=/^(?:head|last)$/.test(r),g=w[l?"take"+("last"==r?"Right":""):r],I=l||/^find/.test(r);g&&(w.prototype[r]=function(){var A=this.__wrapped__,T=l?[1]:arguments,F=A instanceof We,Y=T[0],ee=F||qe(A),oe=function(Ke){var Ye=g.apply(w,$n([Ke],T));return l&&ye?Ye[0]:Ye};ee&&s&&"function"==typeof Y&&1!=Y.length&&(F=ee=!1);var ye=this.__chain__,Te=I&&!ye,He=F&&!this.__actions__.length;if(!I&&ee){A=He?A:new We(this);var Ce=e.apply(A,T);return Ce.__actions__.push({func:Io,args:[oe],thisArg:t}),new kr(Ce,ye)}return Te&&He?e.apply(this,T):(Ce=this.thru(oe),Te?l?Ce.value()[0]:Ce.value():Ce)})}),Br(["pop","push","shift","sort","splice","unshift"],function(e){var r=Ws[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var g=arguments;if(l&&!this.__chain__){var I=this.value();return r.apply(qe(I)?I:[],g)}return this[s](function(A){return r.apply(qe(A)?A:[],g)})}}),mn(We.prototype,function(e,r){var s=w[r];if(s){var l=s.name+"";st.call(Ri,l)||(Ri[l]=[]),Ri[l].push({name:r,func:s})}}),Ri[vo(t,2).name]=[{name:"wrapper",func:t}],We.prototype.clone=function n0(){var e=new We(this.__wrapped__);return e.__actions__=Rr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Rr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Rr(this.__views__),e},We.prototype.reverse=function i0(){if(this.__filtered__){var e=new We(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},We.prototype.value=function s0(){var e=this.__wrapped__.value(),r=this.__dir__,s=qe(e),l=r<0,g=s?e.length:0,I=function vv(e,r,s){for(var l=-1,g=s.length;++l<g;){var I=s[l],A=I.size;switch(I.type){case"drop":e+=A;break;case"dropRight":r-=A;break;case"take":r=_r(r,e+A);break;case"takeRight":e=rr(e,r-A)}}return{start:e,end:r}}(0,g,this.__views__),A=I.start,T=I.end,F=T-A,Y=l?T:A-1,ee=this.__iteratees__,oe=ee.length,ye=0,Ee=_r(F,this.__takeCount__);if(!s||!l&&g==F&&Ee==F)return lf(e,this.__actions__);var Te=[];e:for(;F--&&ye<Ee;){for(var He=-1,Ce=e[Y+=r];++He<oe;){var Ke=ee[He],Ur=Ke.type,Sr=(0,Ke.iteratee)(Ce);if(2==Ur)Ce=Sr;else if(!Sr){if(1==Ur)continue e;break e}}Te[ye++]=Ce}return Te},w.prototype.at=L_,w.prototype.chain=function j_(){return Gf(this)},w.prototype.commit=function F_(){return new kr(this.value(),this.__chain__)},w.prototype.next=function M_(){this.__values__===t&&(this.__values__=ch(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},w.prototype.plant=function U_(e){for(var r,s=this;s instanceof co;){var l=zf(s);l.__index__=0,l.__values__=t,r?g.__wrapped__=l:r=l;var g=l;s=s.__wrapped__}return g.__wrapped__=e,r},w.prototype.reverse=function q_(){var e=this.__wrapped__;if(e instanceof We){var r=e;return this.__actions__.length&&(r=new We(this)),(r=r.reverse()).__actions__.push({func:Io,args:[Ec],thisArg:t}),new kr(r,this.__chain__)}return this.thru(Ec)},w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=function z_(){return lf(this.__wrapped__,this.__actions__)},w.prototype.first=w.prototype.head,Xi&&(w.prototype[Xi]=function Z_(){return this}),w}();ni?((ni.exports=Si)._=Si,Da._=Si):hr._=Si}.call(Hi);var gp=Object.defineProperty,yp=Object.defineProperties,vp=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,_p=Object.prototype.hasOwnProperty,mp=Object.prototype.propertyIsEnumerable,Nu=(y,n,t)=>n in y?gp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Ns=(y,n)=>{for(var t in n||(n={}))_p.call(n,t)&&Nu(y,t,n[t]);if(Cu)for(var t of Cu(n))mp.call(n,t)&&Nu(y,t,n[t]);return y},bp=(y,n)=>yp(y,vp(n));function _i(y,n,t){var o;const a=(0,x.DQ)(y);return(null==(o=n.rpcMap)?void 0:o[a.reference])||`https://rpc.walletconnect.com/v1/?chainId=${a.namespace}:${a.reference}&projectId=${t}`}function ti(y){return y.includes(":")?y.split(":")[1]:y}function Du(y){return y.map(n=>`${n.split(":")[0]}:${n.split(":")[1]}`)}function Lu(y){var n,t,o,a;const u={};if(!(0,x.L5)(y))return u;for(const[f,S]of Object.entries(y)){const D=(0,x.gp)(f)?[f]:S.chains,$=S.methods||[],W=S.events||[],pe=S.rpcMap||{},Oe=(0,x.M)(f);u[Oe]=bp(Ns(Ns({},u[Oe]),S),{chains:(0,x.eG)(D,null==(n=u[Oe])?void 0:n.chains),methods:(0,x.eG)($,null==(t=u[Oe])?void 0:t.methods),events:(0,x.eG)(W,null==(o=u[Oe])?void 0:o.events),rpcMap:Ns(Ns({},pe),null==(a=u[Oe])?void 0:a.rpcMap)})}return u}function Ep(y){return y.includes(":")?y.split(":")[2]:y}function Ip(y){const n={};for(const[t,o]of Object.entries(y)){const a=o.methods||[],u=o.events||[],f=o.accounts||[],S=(0,x.gp)(t)?[t]:o.chains?o.chains:Du(o.accounts);n[t]={chains:S,methods:a,events:u,accounts:f}}return n}function ha(y){return"number"==typeof y?y:y.includes("0x")?parseInt(y,16):y.includes(":")?Number(y.split(":")[1]):Number(y)}const ju={},Ft=y=>ju[y],da=(y,n)=>{ju[y]=n};class Sp{constructor(n){this.name="polkadot",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getAccounts(){const n=this.namespace.accounts;return n&&n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ti(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||_i(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new vi(o,Ft("disableProviderPing")))}}class Pp{constructor(n){this.name="eip155",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(n){var t=this;return(0,m.Z)(function*(){switch(n.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return yield t.handleSwitchChain(n);case"eth_chainId":return parseInt(t.getDefaultChain())}return t.namespace.methods.includes(n.request.method)?yield t.client.request(n):t.getHttpProvider().request(n.request)})()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(parseInt(n),t),this.chainId=parseInt(n),this.events.emit("default_chain_changed",`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}createHttpProvider(n,t){const o=t||_i(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new Ru(o,Ft("disableProviderPing")))}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=parseInt(ti(t));n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const n=this.chainId,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}handleSwitchChain(n){var t=this;return(0,m.Z)(function*(){var o,a;let u=n.request.params?null==(o=n.request.params[0])?void 0:o.chainId:"0x0";u=u.startsWith("0x")?u:`0x${u}`;const f=parseInt(u,16);if(t.isChainApproved(f))t.setDefaultChain(`${f}`);else{if(!t.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${f}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);yield t.client.request({topic:n.topic,request:{method:n.request.method,params:[{chainId:u}]},chainId:null==(a=t.namespace.chains)?void 0:a[0]}),t.setDefaultChain(`${f}`)}return null})()}isChainApproved(n){return this.namespace.chains.includes(`${this.name}:${n}`)}}class Op{constructor(n){this.name="solana",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ti(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||_i(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new vi(o,Ft("disableProviderPing")))}}class Rp{constructor(n){this.name="cosmos",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ti(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||_i(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new vi(o,Ft("disableProviderPing")))}}class Ap{constructor(n){this.name="cip34",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{const o=this.getCardanoRPCUrl(t),a=ti(t);n[a]=this.createHttpProvider(a,o)}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}getCardanoRPCUrl(n){const t=this.namespace.rpcMap;if(t)return t[n]}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||this.getCardanoRPCUrl(n);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new vi(o,Ft("disableProviderPing")))}}class Tp{constructor(n){this.name="elrond",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ti(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||_i(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new vi(o,Ft("disableProviderPing")))}}class Cp{constructor(n){this.name="multiversx",this.namespace=n.namespace,this.events=Ft("events"),this.client=Ft("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,t){this.httpProviders[n]||this.setHttpProvider(n,t),this.chainId=n,this.events.emit("default_chain_changed",`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(t=>{var o;const a=ti(t);n[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,t=this.httpProviders[n];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return t}setHttpProvider(n,t){const o=this.createHttpProvider(n,t);o&&(this.httpProviders[n]=o)}createHttpProvider(n,t){const o=t||_i(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new Dr(new vi(o,Ft("disableProviderPing")))}}var Np=Object.defineProperty,Dp=Object.defineProperties,Lp=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,jp=Object.prototype.hasOwnProperty,Fp=Object.prototype.propertyIsEnumerable,Mu=(y,n,t)=>n in y?Np(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Ds=(y,n)=>{for(var t in n||(n={}))jp.call(n,t)&&Mu(y,t,n[t]);if(Fu)for(var t of Fu(n))Fp.call(n,t)&&Mu(y,t,n[t]);return y},pa=(y,n)=>Dp(y,Lp(n));class ga{constructor(n){this.events=new(ve()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=n,this.logger=typeof n?.logger<"u"&&"string"!=typeof n?.logger?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n?.logger||"error"})),this.disableProviderPing=n?.disableProviderPing||!1}static init(n){return(0,m.Z)(function*(){const t=new ga(n);return yield t.initialize(),t})()}request(n,t){var o=this;return(0,m.Z)(function*(){const[a,u]=o.validateChain(t);if(!o.session)throw new Error("Please call connect() before request()");return yield o.getProvider(a).request({request:Ds({},n),chainId:`${a}:${u}`,topic:o.session.topic})})()}sendAsync(n,t,o){this.request(n,o).then(a=>t(null,a)).catch(a=>t(a,void 0))}enable(){var n=this;return(0,m.Z)(function*(){if(!n.client)throw new Error("Sign Client not initialized");return n.session||(yield n.connect({namespaces:n.namespaces,optionalNamespaces:n.optionalNamespaces,sessionProperties:n.sessionProperties})),yield n.requestAccounts()})()}disconnect(){var n=this;return(0,m.Z)(function*(){var t;if(!n.session)throw new Error("Please call connect() before enable()");yield n.client.disconnect({topic:null==(t=n.session)?void 0:t.topic,reason:(0,x.D6)("USER_DISCONNECTED")}),yield n.cleanup()})()}connect(n){var t=this;return(0,m.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.setNamespaces(n),yield t.cleanupPendingPairings(),!n.skipPairing)return yield t.pair(n.pairingTopic)})()}on(n,t){this.events.on(n,t)}once(n,t){this.events.once(n,t)}removeListener(n,t){this.events.removeListener(n,t)}off(n,t){this.events.off(n,t)}get isWalletConnect(){return!0}pair(n){var t=this;return(0,m.Z)(function*(){t.shouldAbortPairingAttempt=!1;let o=0;do{if(t.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(o>=t.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:a,approval:u}=yield t.client.connect({pairingTopic:n,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties});a&&(t.uri=a,t.events.emit("display_uri",a)),yield u().then(f=>{t.session=f,t.namespaces||(t.namespaces=Ip(f.namespaces),t.persist("namespaces",t.namespaces))}).catch(f=>{if(f.message!==xu)throw f;o++})}while(!t.session);return t.onConnect(),t.session})()}setDefaultChain(n,t){try{if(!this.session)return;const[o,a]=this.validateChain(n);this.getProvider(o).setDefaultChain(a,t)}catch(o){if(!/Please call connect/.test(o.message))throw o}}cleanupPendingPairings(n={}){var t=this;return(0,m.Z)(function*(){t.logger.info("Cleaning up inactive pairings...");const o=t.client.pairing.getAll();if((0,x.qt)(o)){for(const a of o)n.deletePairings?t.client.core.expirer.set(a.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(a.topic);t.logger.info(`Inactive pairings cleared: ${o.length}`)}})()}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){var n=this;return(0,m.Z)(function*(){n.namespaces=yield n.getFromStore("namespaces"),n.optionalNamespaces=(yield n.getFromStore("optionalNamespaces"))||{},n.client.session.length&&(n.session=n.client.session.get(n.client.session.keys[n.client.session.keys.length-1]),n.createProviders())})()}initialize(){var n=this;return(0,m.Z)(function*(){n.logger.trace("Initialized"),yield n.createClient(),yield n.checkStorage(),n.registerEventListeners()})()}createClient(){var n=this;return(0,m.Z)(function*(){n.client=n.providerOpts.client||(yield la.init({logger:n.providerOpts.logger||"error",relayUrl:n.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:n.providerOpts.projectId,metadata:n.providerOpts.metadata,storageOptions:n.providerOpts.storageOptions,storage:n.providerOpts.storage,name:n.providerOpts.name})),n.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const n=[...new Set(Object.keys(this.session.namespaces).map(t=>(0,x.M)(t)))];da("client",this.client),da("events",this.events),da("disableProviderPing",this.disableProviderPing),n.forEach(t=>{if(!this.session)return;const o=function wp(y,n){const t=Object.keys(n.namespaces).filter(a=>a.includes(y));if(!t.length)return[];const o=[];return t.forEach(a=>{o.push(...n.namespaces[a].accounts)}),o}(t,this.session),a=Du(o),u=function xp(y={},n={}){const t=Lu(y),o=Lu(n);return fa.exports.merge(t,o)}(this.namespaces,this.optionalNamespaces),f=pa(Ds({},u[t]),{accounts:o,chains:a});switch(t){case"eip155":this.rpcProviders[t]=new Pp({namespace:f});break;case"solana":this.rpcProviders[t]=new Op({namespace:f});break;case"cosmos":this.rpcProviders[t]=new Rp({namespace:f});break;case"polkadot":this.rpcProviders[t]=new Sp({namespace:f});break;case"cip34":this.rpcProviders[t]=new Ap({namespace:f});break;case"elrond":this.rpcProviders[t]=new Tp({namespace:f});break;case"multiversx":this.rpcProviders[t]=new Cp({namespace:f})}})}registerEventListeners(){var n=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:o}=t,{event:a}=o;if("accountsChanged"===a.name){const u=a.data;u&&(0,x.qt)(u)&&this.events.emit("accountsChanged",u.map(Ep))}else if("chainChanged"===a.name){const u=o.chainId,f=o.event.data,S=(0,x.M)(u),D=ha(u)!==ha(f)?`${S}:${ha(f)}`:u;this.onChainChanged(D)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:o})=>{var a;const{namespaces:u}=o,f=null==(a=this.client)?void 0:a.session.get(t);this.session=pa(Ds({},f),{namespaces:u}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:o})}),this.client.on("session_delete",function(){var t=(0,m.Z)(function*(o){yield n.cleanup(),n.events.emit("session_delete",o),n.events.emit("disconnect",pa(Ds({},(0,x.D6)("USER_DISCONNECTED")),{data:o.topic}))});return function(o){return t.apply(this,arguments)}}()),this.on("default_chain_changed",t=>{this.onChainChanged(t,!0)})}getProvider(n){if(!this.rpcProviders[n])throw new Error(`Provider not found: ${n}`);return this.rpcProviders[n]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(n=>{var t;this.getProvider(n).updateNamespace(null==(t=this.session)?void 0:t.namespaces[n])})}setNamespaces(n){const{namespaces:t,optionalNamespaces:o,sessionProperties:a}=n;t&&Object.keys(t).length&&(this.namespaces=t),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",t),this.persist("optionalNamespaces",o)}validateChain(n){const[t,o]=n?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,o];if(t&&!Object.keys(this.namespaces||{}).map(f=>(0,x.M)(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&o)return[t,o];const a=(0,x.M)(Object.keys(this.namespaces)[0]);return[a,this.rpcProviders[a].getDefaultChain()]}requestAccounts(){var n=this;return(0,m.Z)(function*(){const[t]=n.validateChain();return yield n.getProvider(t).requestAccounts()})()}onChainChanged(n,t=!1){var o;if(!this.namespaces)return;const[a,u]=this.validateChain(n);t||this.getProvider(a).setDefaultChain(u),(null!=(o=this.namespaces[a])?o:this.namespaces[`${a}:${u}`]).defaultChain=u,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var n=this;return(0,m.Z)(function*(){n.session=void 0,n.namespaces=void 0,n.optionalNamespaces=void 0,n.sessionProperties=void 0,n.persist("namespaces",void 0),n.persist("optionalNamespaces",void 0),n.persist("sessionProperties",void 0),yield n.cleanupPendingPairings({deletePairings:!0})})()}persist(n,t){this.client.core.storage.setItem(`${Tu}/${n}`,t)}getFromStore(n){var t=this;return(0,m.Z)(function*(){return yield t.client.core.storage.getItem(`${Tu}/${n}`)})()}}const Mp=ga,Ls=["eth_sendTransaction","personal_sign"],Zu=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],js=["chainChanged","accountsChanged"],Uu=["chainChanged","accountsChanged","message","disconnect","connect"];var $p=Object.defineProperty,Hp=Object.defineProperties,Bp=Object.getOwnPropertyDescriptors,qu=Object.getOwnPropertySymbols,Vp=Object.prototype.hasOwnProperty,kp=Object.prototype.propertyIsEnumerable,zu=(y,n,t)=>n in y?$p(y,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):y[n]=t,Bi=(y,n)=>{for(var t in n||(n={}))Vp.call(n,t)&&zu(y,t,n[t]);if(qu)for(var t of qu(n))kp.call(n,t)&&zu(y,t,n[t]);return y},$u=(y,n)=>Hp(y,Bp(n));function Fs(y){return Number(y[0].split(":")[1])}function ya(y){return`0x${y.toString(16)}`}class Ms{constructor(){this.events=new ae.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(n,t)=>(this.events.on(n,t),this),this.once=(n,t)=>(this.events.once(n,t),this),this.removeListener=(n,t)=>(this.events.removeListener(n,t),this),this.off=(n,t)=>(this.events.off(n,t),this),this.parseAccount=n=>this.isCompatibleChainId(n)?this.parseAccountId(n).address:n,this.signer={},this.rpc={}}static init(n){return(0,m.Z)(function*(){const t=new Ms;return yield t.initialize(n),t})()}request(n){var t=this;return(0,m.Z)(function*(){return yield t.signer.request(n,t.formatChainId(t.chainId))})()}sendAsync(n,t){this.signer.sendAsync(n,t,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}enable(){var n=this;return(0,m.Z)(function*(){return n.session||(yield n.connect()),yield n.request({method:"eth_requestAccounts"})})()}connect(n){var t=this;return(0,m.Z)(function*(){if(!t.signer.client)throw new Error("Provider not initialized. Call init() first");t.loadConnectOpts(n);const{required:o,optional:a}=function Kp(y){const{chains:n,optionalChains:t,methods:o,optionalMethods:a,events:u,optionalEvents:f,rpcMap:S}=y;if(!(0,x.qt)(n))throw new Error("Invalid chains");const D={chains:n,methods:o||Ls,events:u||js,rpcMap:Bi({},n.length?{[Fs(n)]:S[Fs(n)]}:{})},$=u?.filter(Fe=>!js.includes(Fe)),W=o?.filter(Fe=>!Ls.includes(Fe));if(!(t||f||a||null!=$&&$.length||null!=W&&W.length))return{required:n.length?D:void 0};const Oe={chains:[...new Set($?.length&&W?.length||!t?D.chains.concat(t||[]):t)],methods:[...new Set(D.methods.concat(null!=a&&a.length?a:Zu))],events:[...new Set(D.events.concat(null!=f&&f.length?f:Uu))],rpcMap:S};return{required:n.length?D:void 0,optional:t.length?Oe:void 0}}(t.rpc);try{const u=yield new Promise(function(){var S=(0,m.Z)(function*(D,$){var W;t.rpc.showQrModal&&(null==(W=t.modal)||W.subscribeModal(pe=>{!pe.open&&!t.signer.session&&(t.signer.abortPairingAttempt(),$(new Error("Connection request reset. Please try again.")))})),yield t.signer.connect($u(Bi({namespaces:Bi({},o&&{[t.namespace]:o})},a&&{optionalNamespaces:{[t.namespace]:a}}),{pairingTopic:n?.pairingTopic})).then(pe=>{D(pe)}).catch(pe=>{$(new Error(pe.message))})});return function(D,$){return S.apply(this,arguments)}}());if(!u)return;const f=(0,x.gu)(u.namespaces,[t.namespace]);t.setChainIds(t.rpc.chains.length?t.rpc.chains:f),t.setAccounts(f),t.events.emit("connect",{chainId:ya(t.chainId)})}catch(u){throw t.signer.logger.error(u),u}finally{t.modal&&t.modal.closeModal()}})()}disconnect(){var n=this;return(0,m.Z)(function*(){n.session&&(yield n.signer.disconnect()),n.reset()})()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",n=>{const{params:t}=n,{event:o}=t;"accountsChanged"===o.name?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===o.name?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",n)}),this.signer.on("chainChanged",n=>{const t=parseInt(n);this.chainId=t,this.events.emit("chainChanged",ya(this.chainId)),this.persist()}),this.signer.on("session_update",n=>{this.events.emit("session_update",n)}),this.signer.on("session_delete",n=>{this.reset(),this.events.emit("session_delete",n),this.events.emit("disconnect",$u(Bi({},(0,x.D6)("USER_DISCONNECTED")),{data:n.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",n=>{var t,o;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(o=this.modal)||o.openModal({uri:n})),this.events.emit("display_uri",n)})}switchEthereumChain(n){this.request({method:"wallet_switchEthereumChain",params:[{chainId:n.toString(16)}]})}isCompatibleChainId(n){return"string"==typeof n&&n.startsWith(`${this.namespace}:`)}formatChainId(n){return`${this.namespace}:${n}`}parseChainId(n){return Number(n.split(":")[1])}setChainIds(n){const t=n.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ya(this.chainId)),this.persist())}setChainId(n){if(this.isCompatibleChainId(n)){const t=this.parseChainId(n);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(n){const[t,o,a]=n.split(":");return{chainId:`${t}:${o}`,address:a}}setAccounts(n){this.accounts=n.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(n){var t,o;const a=null!=(t=n?.chains)?t:[],u=null!=(o=n?.optionalChains)?o:[],f=a.concat(u);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const S=a.length?n?.methods||Ls:[],D=a.length?n?.events||js:[],$=n?.optionalMethods||[],W=n?.optionalEvents||[],pe=n?.rpcMap||this.buildRpcMap(f,n.projectId),Oe=n?.qrModalOptions||void 0;return{chains:a?.map(Fe=>this.formatChainId(Fe)),optionalChains:u.map(Fe=>this.formatChainId(Fe)),methods:S,events:D,optionalMethods:$,optionalEvents:W,rpcMap:pe,showQrModal:!(null==n||!n.showQrModal),qrModalOptions:Oe,projectId:n.projectId,metadata:n.metadata}}buildRpcMap(n,t){const o={};return n.forEach(a=>{o[a]=this.getRpcUrl(a,t)}),o}initialize(n){var t=this;return(0,m.Z)(function*(){if(t.rpc=t.getRpcConfig(n),t.chainId=Fs(t.rpc.chains.length?t.rpc.chains:t.rpc.optionalChains),t.signer=yield Mp.init({projectId:t.rpc.projectId,metadata:t.rpc.metadata,disableProviderPing:n.disableProviderPing,relayUrl:n.relayUrl,storageOptions:n.storageOptions}),t.registerEventListeners(),yield t.loadPersistedSession(),t.rpc.showQrModal){let o;try{const{WalletConnectModal:a}=yield G.e(301).then(G.bind(G,3301));o=a}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(o)try{t.modal=new o(Bi({walletConnectVersion:2,projectId:t.rpc.projectId,standaloneChains:t.rpc.chains},t.rpc.qrModalOptions))}catch(a){throw t.signer.logger.error(a),new Error("Could not generate WalletConnectModal Instance")}}})()}loadConnectOpts(n){if(!n)return;const{chains:t,optionalChains:o,rpcMap:a}=n;t&&(0,x.qt)(t)&&(this.rpc.chains=t.map(u=>this.formatChainId(u)),t.forEach(u=>{this.rpc.rpcMap[u]=a?.[u]||this.getRpcUrl(u)})),o&&(0,x.qt)(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o?.map(u=>this.formatChainId(u)),o.forEach(u=>{this.rpc.rpcMap[u]=a?.[u]||this.getRpcUrl(u)}))}getRpcUrl(n,t){var o;return(null==(o=this.rpc.rpcMap)?void 0:o[n])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${n}&projectId=${t||this.rpc.projectId}`}loadPersistedSession(){var n=this;return(0,m.Z)(function*(){if(!n.session)return;const t=yield n.signer.client.core.storage.getItem(`${n.STORAGE_KEY}/chainId`),o=n.session.namespaces[`${n.namespace}:${t}`]?n.session.namespaces[`${n.namespace}:${t}`]:n.session.namespaces[n.namespace];n.setChainIds(t?[n.formatChainId(t)]:o?.accounts),n.setAccounts(o?.accounts)})()}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(n){return"string"==typeof n||n instanceof String?[this.parseAccount(n)]:n.map(t=>this.parseAccount(t))}}const Gp=Ms},2108:(Ne,M,G)=>{"use strict";G.d(M,{q:()=>m});class m{}},699:(Ne,M,G)=>{"use strict";G.r(M),G.d(M,{IEvents:()=>m.q});var m=G(2108)},4953:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.HEARTBEAT_EVENTS=M.HEARTBEAT_INTERVAL=void 0;const m=G(5409);M.HEARTBEAT_INTERVAL=m.FIVE_SECONDS,M.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},5368:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),G(9653).__exportStar(G(4953),M)},9754:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.HeartBeat=void 0;const m=G(9653),ae=G(2016),ve=G(5409),x=G(4083),X=G(5368);class xe extends x.IHeartBeat{constructor(te){super(te),this.events=new ae.EventEmitter,this.interval=X.HEARTBEAT_INTERVAL,this.interval=te?.interval||X.HEARTBEAT_INTERVAL}static init(te){return m.__awaiter(this,void 0,void 0,function*(){const ce=new xe(te);return yield ce.init(),ce})}init(){return m.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(te,ce){this.events.on(te,ce)}once(te,ce){this.events.once(te,ce)}off(te,ce){this.events.off(te,ce)}removeListener(te,ce){this.events.removeListener(te,ce)}initialize(){return m.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),ve.toMiliseconds(this.interval))})}pulse(){this.events.emit(X.HEARTBEAT_EVENTS.pulse)}}M.HeartBeat=xe},986:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});const m=G(9653);m.__exportStar(G(9754),M),m.__exportStar(G(4083),M),m.__exportStar(G(5368),M)},7293:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.IHeartBeat=void 0;const m=G(699);M.IHeartBeat=class ae extends m.IEvents{constructor(x){super()}}},4083:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),G(9653).__exportStar(G(7293),M)},7297:(Ne,M,G)=>{"use strict";const ae=G(3893),ve=G(5499),x=ae.__importDefault(G(2906)),X=G(5420);M.ZP=class xe{constructor(){this.localStorage=x.default}getKeys(){return ae.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ae.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(X.parseEntry)})}getItem(te){return ae.__awaiter(this,void 0,void 0,function*(){const ce=this.localStorage.getItem(te);if(null!==ce)return ve.safeJsonParse(ce)})}setItem(te,ce){return ae.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(te,ve.safeJsonStringify(ce))})}removeItem(te){return ae.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(te)})}}},2906:Ne=>{"use strict";!function(){let M;function G(){}M=G,M.prototype.getItem=function(m){return this.hasOwnProperty(m)?String(this[m]):null},M.prototype.setItem=function(m,ae){this[m]=String(ae)},M.prototype.removeItem=function(m){delete this[m]},M.prototype.clear=function(){const m=this;Object.keys(m).forEach(function(ae){m[ae]=void 0,delete m[ae]})},M.prototype.key=function(m){return m=m||0,Object.keys(this)[m]},M.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),Ne.exports=typeof global<"u"&&global.localStorage?global.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new G}()},5420:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});const m=G(3893);m.__exportStar(G(3680),M),m.__exportStar(G(362),M)},3680:(Ne,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.IKeyValueStorage=void 0,M.IKeyValueStorage=class G{}},362:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.parseEntry=void 0;const m=G(5499);M.parseEntry=function ae(ve){var x;return[ve[0],m.safeJsonParse(null!==(x=ve[1])&&void 0!==x?x:"")]}},6904:(Ne,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.PINO_CUSTOM_CONTEXT_KEY=M.PINO_LOGGER_DEFAULTS=void 0,M.PINO_LOGGER_DEFAULTS={level:"info"},M.PINO_CUSTOM_CONTEXT_KEY="custom_context"},2997:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.pino=void 0;const m=G(7121),ae=m.__importDefault(G(1590));Object.defineProperty(M,"pino",{enumerable:!0,get:function(){return ae.default}}),m.__exportStar(G(6904),M),m.__exportStar(G(2723),M)},2723:(Ne,M,G)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.generateChildLogger=M.formatChildLoggerContext=M.getLoggerContext=M.setBrowserLoggerContext=M.getBrowserLoggerContext=M.getDefaultLoggerOptions=void 0;const m=G(6904);function ve(te,ce=m.PINO_CUSTOM_CONTEXT_KEY){return te[ce]||""}function x(te,ce,le=m.PINO_CUSTOM_CONTEXT_KEY){return te[le]=ce,te}function X(te,ce=m.PINO_CUSTOM_CONTEXT_KEY){let le="";return le=typeof te.bindings>"u"?ve(te,ce):te.bindings().context||"",le}function xe(te,ce,le=m.PINO_CUSTOM_CONTEXT_KEY){const Re=X(te,le);return Re.trim()?`${Re}/${ce}`:ce}M.getDefaultLoggerOptions=function ae(te){return Object.assign(Object.assign({},te),{level:te?.level||m.PINO_LOGGER_DEFAULTS.level})},M.getBrowserLoggerContext=ve,M.setBrowserLoggerContext=x,M.getLoggerContext=X,M.formatChildLoggerContext=xe,M.generateChildLogger=function he(te,ce,le=m.PINO_CUSTOM_CONTEXT_KEY){const Re=xe(te,ce,le);return x(te.child({context:Re}),Re,le)}},2768:()=>{},2055:function(Ne,M){var ve,G=typeof self<"u"?self:this,m=function(){function ve(){this.fetch=!1,this.DOMException=G.DOMException}return ve.prototype=G,new ve}();ve=m,function(X){var xe_searchParams="URLSearchParams"in ve,xe_iterable="Symbol"in ve&&"iterator"in Symbol,xe_blob="FileReader"in ve&&"Blob"in ve&&function(){try{return new Blob,!0}catch{return!1}}(),xe_formData="FormData"in ve,xe_arrayBuffer="ArrayBuffer"in ve;if(xe_arrayBuffer)var te=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ce=ArrayBuffer.isView||function(_){return _&&te.indexOf(Object.prototype.toString.call(_))>-1};function le(_){if("string"!=typeof _&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function Re(_){return"string"!=typeof _&&(_=String(_)),_}function me(_){var d={next:function(){var E=_.shift();return{done:void 0===E,value:E}}};return xe_iterable&&(d[Symbol.iterator]=function(){return d}),d}function Se(_){this.map={},_ instanceof Se?_.forEach(function(d,E){this.append(E,d)},this):Array.isArray(_)?_.forEach(function(d){this.append(d[0],d[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(d){this.append(d,_[d])},this)}function de(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function Ge(_){return new Promise(function(d,E){_.onload=function(){d(_.result)},_.onerror=function(){E(_.error)}})}function Me(_){var d=new FileReader,E=Ge(d);return d.readAsArrayBuffer(_),E}function se(_){if(_.slice)return _.slice(0);var d=new Uint8Array(_.byteLength);return d.set(new Uint8Array(_)),d.buffer}function ne(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?"string"==typeof _?this._bodyText=_:xe_blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:xe_formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:xe_searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():xe_arrayBuffer&&xe_blob&&function he(_){return _&&DataView.prototype.isPrototypeOf(_)}(_)?(this._bodyArrayBuffer=se(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):xe_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||ce(_))?this._bodyArrayBuffer=se(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||("string"==typeof _?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):xe_searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},xe_blob&&(this.blob=function(){var _=de(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?de(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Me)}),this.text=function(){var _=de(this);if(_)return _;if(this._bodyBlob)return function ke(_){var d=new FileReader,E=Ge(d);return d.readAsText(_),E}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function Je(_){for(var d=new Uint8Array(_),E=new Array(d.length),C=0;C<d.length;C++)E[C]=String.fromCharCode(d[C]);return E.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},xe_formData&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}Se.prototype.append=function(_,d){_=le(_),d=Re(d);var E=this.map[_];this.map[_]=E?E+", "+d:d},Se.prototype.delete=function(_){delete this.map[le(_)]},Se.prototype.get=function(_){return _=le(_),this.has(_)?this.map[_]:null},Se.prototype.has=function(_){return this.map.hasOwnProperty(le(_))},Se.prototype.set=function(_,d){this.map[le(_)]=Re(d)},Se.prototype.forEach=function(_,d){for(var E in this.map)this.map.hasOwnProperty(E)&&_.call(d,this.map[E],E,this)},Se.prototype.keys=function(){var _=[];return this.forEach(function(d,E){_.push(E)}),me(_)},Se.prototype.values=function(){var _=[];return this.forEach(function(d){_.push(d)}),me(_)},Se.prototype.entries=function(){var _=[];return this.forEach(function(d,E){_.push([E,d])}),me(_)},xe_iterable&&(Se.prototype[Symbol.iterator]=Se.prototype.entries);var ue=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Z(_,d){var E=(d=d||{}).body;if(_ instanceof Z){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,d.headers||(this.headers=new Se(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!E&&null!=_._bodyInit&&(E=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new Se(d.headers)),this.method=function fe(_){var d=_.toUpperCase();return ue.indexOf(d)>-1?d:_}(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&E)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(E)}function Q(_){var d=new FormData;return _.trim().split("&").forEach(function(E){if(E){var C=E.split("="),ge=C.shift().replace(/\+/g," "),R=C.join("=").replace(/\+/g," ");d.append(decodeURIComponent(ge),decodeURIComponent(R))}}),d}function p(_){var d=new Se;return _.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(C){var ge=C.split(":"),R=ge.shift().trim();if(R){var B=ge.join(":").trim();d.append(R,B)}}),d}function b(_,d){d||(d={}),this.type="default",this.status=void 0===d.status?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new Se(d.headers),this.url=d.url||"",this._initBody(_)}Z.prototype.clone=function(){return new Z(this,{body:this._bodyInit})},ne.call(Z.prototype),ne.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Se(this.headers),url:this.url})},b.error=function(){var _=new b(null,{status:0,statusText:""});return _.type="error",_};var v=[301,302,303,307,308];b.redirect=function(_,d){if(-1===v.indexOf(d))throw new RangeError("Invalid status code");return new b(null,{status:d,headers:{location:_}})},X.DOMException=ve.DOMException;try{new X.DOMException}catch{X.DOMException=function(d,E){this.message=d,this.name=E;var C=Error(d);this.stack=C.stack},X.DOMException.prototype=Object.create(Error.prototype),X.DOMException.prototype.constructor=X.DOMException}function P(_,d){return new Promise(function(E,C){var ge=new Z(_,d);if(ge.signal&&ge.signal.aborted)return C(new X.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function B(){R.abort()}R.onload=function(){var re={status:R.status,statusText:R.statusText,headers:p(R.getAllResponseHeaders()||"")};re.url="responseURL"in R?R.responseURL:re.headers.get("X-Request-URL"),E(new b("response"in R?R.response:R.responseText,re))},R.onerror=function(){C(new TypeError("Network request failed"))},R.ontimeout=function(){C(new TypeError("Network request failed"))},R.onabort=function(){C(new X.DOMException("Aborted","AbortError"))},R.open(ge.method,ge.url,!0),"include"===ge.credentials?R.withCredentials=!0:"omit"===ge.credentials&&(R.withCredentials=!1),"responseType"in R&&xe_blob&&(R.responseType="blob"),ge.headers.forEach(function(re,z){R.setRequestHeader(z,re)}),ge.signal&&(ge.signal.addEventListener("abort",B),R.onreadystatechange=function(){4===R.readyState&&ge.signal.removeEventListener("abort",B)}),R.send(typeof ge._bodyInit>"u"?null:ge._bodyInit)})}P.polyfill=!0,ve.fetch||(ve.fetch=P,ve.Headers=Se,ve.Request=Z,ve.Response=b),X.Headers=Se,X.Request=Z,X.Response=b,X.fetch=P,Object.defineProperty(X,"__esModule",{value:!0})}({}),m.fetch.ponyfill=!0,delete m.fetch.polyfill;var ae=m;(M=ae.fetch).default=ae.fetch,M.fetch=ae.fetch,M.Headers=ae.Headers,M.Request=ae.Request,M.Response=ae.Response,Ne.exports=M},2016:Ne=>{"use strict";var m,M="object"==typeof Reflect?Reflect:null,G=M&&"function"==typeof M.apply?M.apply:function(ne,ue,fe){return Function.prototype.apply.call(ne,ue,fe)};m=M&&"function"==typeof M.ownKeys?M.ownKeys:Object.getOwnPropertySymbols?function(ne){return Object.getOwnPropertyNames(ne).concat(Object.getOwnPropertySymbols(ne))}:function(ne){return Object.getOwnPropertyNames(ne)};var ve=Number.isNaN||function(ne){return ne!=ne};function x(){x.init.call(this)}Ne.exports=x,Ne.exports.once=function Me(se,ne){return new Promise(function(ue,fe){function Z(p){se.removeListener(ne,Q),fe(p)}function Q(){"function"==typeof se.removeListener&&se.removeListener("error",Z),ue([].slice.call(arguments))}Je(se,ne,Q,{once:!0}),"error"!==ne&&function ke(se,ne,ue){"function"==typeof se.on&&Je(se,"error",ne,ue)}(se,Z,{once:!0})})},x.EventEmitter=x,x.prototype._events=void 0,x.prototype._eventsCount=0,x.prototype._maxListeners=void 0;var X=10;function xe(se){if("function"!=typeof se)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof se)}function he(se){return void 0===se._maxListeners?x.defaultMaxListeners:se._maxListeners}function te(se,ne,ue,fe){var Z,Q,p;if(xe(ue),void 0===(Q=se._events)?(Q=se._events=Object.create(null),se._eventsCount=0):(void 0!==Q.newListener&&(se.emit("newListener",ne,ue.listener?ue.listener:ue),Q=se._events),p=Q[ne]),void 0===p)p=Q[ne]=ue,++se._eventsCount;else if("function"==typeof p?p=Q[ne]=fe?[ue,p]:[p,ue]:fe?p.unshift(ue):p.push(ue),(Z=he(se))>0&&p.length>Z&&!p.warned){p.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(ne)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=se,b.type=ne,b.count=p.length,function ae(se){console&&console.warn&&console.warn(se)}(b)}return se}function ce(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function le(se,ne,ue){var fe={fired:!1,wrapFn:void 0,target:se,type:ne,listener:ue},Z=ce.bind(fe);return Z.listener=ue,fe.wrapFn=Z,Z}function Re(se,ne,ue){var fe=se._events;if(void 0===fe)return[];var Z=fe[ne];return void 0===Z?[]:"function"==typeof Z?ue?[Z.listener||Z]:[Z]:ue?function Ge(se){for(var ne=new Array(se.length),ue=0;ue<ne.length;++ue)ne[ue]=se[ue].listener||se[ue];return ne}(Z):Se(Z,Z.length)}function me(se){var ne=this._events;if(void 0!==ne){var ue=ne[se];if("function"==typeof ue)return 1;if(void 0!==ue)return ue.length}return 0}function Se(se,ne){for(var ue=new Array(ne),fe=0;fe<ne;++fe)ue[fe]=se[fe];return ue}function Je(se,ne,ue,fe){if("function"==typeof se.on)fe.once?se.once(ne,ue):se.on(ne,ue);else{if("function"!=typeof se.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof se);se.addEventListener(ne,function Z(Q){fe.once&&se.removeEventListener(ne,Z),ue(Q)})}}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return X},set:function(se){if("number"!=typeof se||se<0||ve(se))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+se+".");X=se}}),x.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},x.prototype.setMaxListeners=function(ne){if("number"!=typeof ne||ne<0||ve(ne))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ne+".");return this._maxListeners=ne,this},x.prototype.getMaxListeners=function(){return he(this)},x.prototype.emit=function(ne){for(var ue=[],fe=1;fe<arguments.length;fe++)ue.push(arguments[fe]);var Z="error"===ne,Q=this._events;if(void 0!==Q)Z=Z&&void 0===Q.error;else if(!Z)return!1;if(Z){var p;if(ue.length>0&&(p=ue[0]),p instanceof Error)throw p;var b=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw b.context=p,b}var v=Q[ne];if(void 0===v)return!1;if("function"==typeof v)G(v,this,ue);else{var P=v.length,_=Se(v,P);for(fe=0;fe<P;++fe)G(_[fe],this,ue)}return!0},x.prototype.on=x.prototype.addListener=function(ne,ue){return te(this,ne,ue,!1)},x.prototype.prependListener=function(ne,ue){return te(this,ne,ue,!0)},x.prototype.once=function(ne,ue){return xe(ue),this.on(ne,le(this,ne,ue)),this},x.prototype.prependOnceListener=function(ne,ue){return xe(ue),this.prependListener(ne,le(this,ne,ue)),this},x.prototype.off=x.prototype.removeListener=function(ne,ue){var fe,Z,Q,p,b;if(xe(ue),void 0===(Z=this._events))return this;if(void 0===(fe=Z[ne]))return this;if(fe===ue||fe.listener===ue)0==--this._eventsCount?this._events=Object.create(null):(delete Z[ne],Z.removeListener&&this.emit("removeListener",ne,fe.listener||ue));else if("function"!=typeof fe){for(Q=-1,p=fe.length-1;p>=0;p--)if(fe[p]===ue||fe[p].listener===ue){b=fe[p].listener,Q=p;break}if(Q<0)return this;0===Q?fe.shift():function de(se,ne){for(;ne+1<se.length;ne++)se[ne]=se[ne+1];se.pop()}(fe,Q),1===fe.length&&(Z[ne]=fe[0]),void 0!==Z.removeListener&&this.emit("removeListener",ne,b||ue)}return this},x.prototype.removeAllListeners=function(ne){var ue,fe,Z;if(void 0===(fe=this._events))return this;if(void 0===fe.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==fe[ne]&&(0==--this._eventsCount?this._events=Object.create(null):delete fe[ne]),this;if(0===arguments.length){var p,Q=Object.keys(fe);for(Z=0;Z<Q.length;++Z)"removeListener"!==(p=Q[Z])&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ue=fe[ne]))this.removeListener(ne,ue);else if(void 0!==ue)for(Z=ue.length-1;Z>=0;Z--)this.removeListener(ne,ue[Z]);return this},x.prototype.listeners=function(ne){return Re(this,ne,!0)},x.prototype.rawListeners=function(ne){return Re(this,ne,!1)},x.listenerCount=function(se,ne){return"function"==typeof se.listenerCount?se.listenerCount(ne):me.call(se,ne)},x.prototype.listenerCount=me,x.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},2650:(Ne,M,G)=>{Ne=G.nmd(Ne);var ae="__lodash_hash_undefined__",ve=1,x=2,X=9007199254740991,xe="[object Arguments]",he="[object Array]",te="[object AsyncFunction]",ce="[object Boolean]",le="[object Date]",Re="[object Error]",me="[object Function]",Se="[object GeneratorFunction]",de="[object Map]",Ge="[object Number]",Me="[object Null]",ke="[object Object]",Je="[object Promise]",se="[object Proxy]",ne="[object RegExp]",ue="[object Set]",fe="[object String]",Q="[object Undefined]",p="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",Pe=/^\[object .+?Constructor\]$/,$e=/^(?:0|[1-9]\d*)$/,Le={};Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le[xe]=Le[he]=Le[b]=Le[ce]=Le[v]=Le[le]=Le[Re]=Le[me]=Le[de]=Le[Ge]=Le[ke]=Le[ne]=Le[ue]=Le[fe]=Le[p]=!1;var Qr="object"==typeof global&&global&&global.Object===Object&&global,Yr="object"==typeof self&&self&&self.Object===Object&&self,dt=Qr||Yr||Function("return this")(),V=M&&!M.nodeType&&M,k=V&&Ne&&!Ne.nodeType&&Ne,q=k&&k.exports===V,h=q&&Qr.process,N=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),Ie=N&&N.isTypedArray;function ut(O,L){for(var ie=-1,_e=null==O?0:O.length;++ie<_e;)if(L(O[ie],ie,O))return!0;return!1}function zt(O,L){return O.has(L)}function ir(O){var L=-1,ie=Array(O.size);return O.forEach(function(_e,lt){ie[++L]=[lt,_e]}),ie}function Ht(O){var L=-1,ie=Array(O.size);return O.forEach(function(_e){ie[++L]=_e}),ie}var O,Pt=Array.prototype,it=Object.prototype,pt=dt["__core-js_shared__"],at=Function.prototype.toString,ct=it.hasOwnProperty,Bt=(O=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",Jt=it.toString,ur=RegExp("^"+at.call(ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lr=q?dt.Buffer:void 0,sr=dt.Symbol,pr=dt.Uint8Array,gr=it.propertyIsEnumerable,zr=Pt.splice,yr=sr?sr.toStringTag:void 0,br=Object.getOwnPropertySymbols,un=lr?lr.isBuffer:void 0,Jn=function $t(O,L){return function(ie){return O(L(ie))}}(Object.keys,Object),ln=Fn(dt,"DataView"),fn=Fn(dt,"Map"),Rt=Fn(dt,"Promise"),At=Fn(dt,"Set"),Lt=Fn(dt,"WeakMap"),_t=Fn(Object,"create"),Vt=xn(ln),Qt=xn(fn),Nt=xn(Rt),jt=xn(At),mt=xn(Lt),Tt=sr?sr.prototype:void 0,bt=Tt?Tt.valueOf:void 0;function gt(O){var L=-1,ie=null==O?0:O.length;for(this.clear();++L<ie;){var _e=O[L];this.set(_e[0],_e[1])}}function Xr(O){var L=-1,ie=null==O?0:O.length;for(this.clear();++L<ie;){var _e=O[L];this.set(_e[0],_e[1])}}function hn(O){var L=-1,ie=null==O?0:O.length;for(this.clear();++L<ie;){var _e=O[L];this.set(_e[0],_e[1])}}function Dr(O){var L=-1,ie=null==O?0:O.length;for(this.__data__=new hn;++L<ie;)this.add(O[L])}function dn(O){var L=this.__data__=new Xr(O);this.size=L.size}function Fi(O,L){for(var ie=O.length;ie--;)if(Es(O[ie][0],L))return ie;return-1}function Qn(O){return null==O?void 0===O?Q:Me:yr&&yr in Object(O)?function di(O){var L=ct.call(O,yr),ie=O[yr];try{O[yr]=void 0;var _e=!0}catch{}var lt=Jt.call(O);return _e&&(L?O[yr]=ie:delete O[yr]),lt}(O):function Ko(O){return Jt.call(O)}(O)}function _s(O){return ei(O)&&Qn(O)==xe}function ms(O,L,ie,_e,lt){return O===L||(null==O||null==L||!ei(O)&&!ei(L)?O!=O&&L!=L:function Uo(O,L,ie,_e,lt,Ue){var It=pi(O),Wt=pi(L),er=It?he:pn(O),wt=Wt?he:pn(L),wr=(er=er==xe?ke:er)==ke,Lr=(wt=wt==xe?ke:wt)==ke,or=er==wt;if(or&&Mi(O)){if(!Mi(L))return!1;It=!0,wr=!1}if(or&&!wr)return Ue||(Ue=new dn),It||Os(O)?ws(O,L,ie,_e,lt,Ue):function $o(O,L,ie,_e,lt,Ue,It){switch(ie){case v:if(O.byteLength!=L.byteLength||O.byteOffset!=L.byteOffset)return!1;O=O.buffer,L=L.buffer;case b:return!(O.byteLength!=L.byteLength||!Ue(new pr(O),new pr(L)));case ce:case le:case Ge:return Es(+O,+L);case Re:return O.name==L.name&&O.message==L.message;case ne:case fe:return O==L+"";case de:var Wt=ir;case ue:if(Wt||(Wt=Ht),O.size!=L.size&&!(_e&ve))return!1;var wt=It.get(O);if(wt)return wt==L;_e|=x,It.set(O,L);var wr=ws(Wt(O),Wt(L),_e,lt,Ue,It);return It.delete(O),wr;case"[object Symbol]":if(bt)return bt.call(O)==bt.call(L)}return!1}(O,L,er,ie,_e,lt,Ue);if(!(ie&ve)){var Pr=wr&&ct.call(O,"__wrapped__"),xr=Lr&&ct.call(L,"__wrapped__");if(Pr||xr){var gn=Pr?O.value():O,tn=xr?L.value():L;return Ue||(Ue=new dn),lt(gn,tn,ie,_e,Ue)}}return!!or&&(Ue||(Ue=new dn),function Ho(O,L,ie,_e,lt,Ue){var It=ie&ve,Wt=xs(O),er=Wt.length;if(er!=xs(L).length&&!It)return!1;for(var Lr=er;Lr--;){var or=Wt[Lr];if(!(It?or in L:ct.call(L,or)))return!1}var Pr=Ue.get(O);if(Pr&&Ue.get(L))return Pr==L;var xr=!0;Ue.set(O,L),Ue.set(L,O);for(var gn=It;++Lr<er;){var tn=O[or=Wt[Lr]],En=L[or];if(_e)var Rs=It?_e(En,tn,or,L,O,Ue):_e(tn,En,or,O,L,Ue);if(!(void 0===Rs?tn===En||lt(tn,En,ie,_e,Ue):Rs)){xr=!1;break}gn||(gn="constructor"==or)}if(xr&&!gn){var gi=O.constructor,yi=L.constructor;gi!=yi&&"constructor"in O&&"constructor"in L&&!("function"==typeof gi&&gi instanceof gi&&"function"==typeof yi&&yi instanceof yi)&&(xr=!1)}return Ue.delete(O),Ue.delete(L),xr}(O,L,ie,_e,lt,Ue))}(O,L,ie,_e,ms,lt))}function ws(O,L,ie,_e,lt,Ue){var It=ie&ve,Wt=O.length,er=L.length;if(Wt!=er&&!(It&&er>Wt))return!1;var wt=Ue.get(O);if(wt&&Ue.get(L))return wt==L;var wr=-1,Lr=!0,or=ie&x?new Dr:void 0;for(Ue.set(O,L),Ue.set(L,O);++wr<Wt;){var Pr=O[wr],xr=L[wr];if(_e)var gn=It?_e(xr,Pr,wr,L,O,Ue):_e(Pr,xr,wr,O,L,Ue);if(void 0!==gn){if(gn)continue;Lr=!1;break}if(or){if(!ut(L,function(tn,En){if(!zt(or,En)&&(Pr===tn||lt(Pr,tn,ie,_e,Ue)))return or.push(En)})){Lr=!1;break}}else if(Pr!==xr&&!lt(Pr,xr,ie,_e,Ue)){Lr=!1;break}}return Ue.delete(O),Ue.delete(L),Lr}function xs(O){return function Zo(O,L,ie){var _e=L(O);return pi(O)?_e:function Xe(O,L){for(var ie=-1,_e=L.length,lt=O.length;++ie<_e;)O[lt+ie]=L[ie];return O}(_e,ie(O))}(O,Qo,Xn)}function Yn(O,L){var ie=O.__data__;return function Xt(O){var L=typeof O;return"string"==L||"number"==L||"symbol"==L||"boolean"==L?"__proto__"!==O:null===O}(L)?ie["string"==typeof L?"string":"hash"]:ie.map}function Fn(O,L){var ie=function nr(O,L){return O?.[L]}(O,L);return function qo(O){return!(!Ps(O)||function Vo(O){return!!Bt&&Bt in O}(O))&&(Is(O)?ur:Pe).test(xn(O))}(ie)?ie:void 0}gt.prototype.clear=function kt(){this.__data__=_t?_t(null):{},this.size=0},gt.prototype.delete=function Yt(O){var L=this.has(O)&&delete this.__data__[O];return this.size-=L?1:0,L},gt.prototype.get=function Kt(O){var L=this.__data__;if(_t){var ie=L[O];return ie===ae?void 0:ie}return ct.call(L,O)?L[O]:void 0},gt.prototype.has=function Gt(O){var L=this.__data__;return _t?void 0!==L[O]:ct.call(L,O)},gt.prototype.set=function No(O,L){var ie=this.__data__;return this.size+=this.has(O)?0:1,ie[O]=_t&&void 0===L?ae:L,this},Xr.prototype.clear=function Do(){this.__data__=[],this.size=0},Xr.prototype.delete=function ds(O){var L=this.__data__,ie=Fi(L,O);return!(ie<0||(ie==L.length-1?L.pop():zr.call(L,ie,1),--this.size,0))},Xr.prototype.get=function ps(O){var L=this.__data__,ie=Fi(L,O);return ie<0?void 0:L[ie][1]},Xr.prototype.has=function gs(O){return Fi(this.__data__,O)>-1},Xr.prototype.set=function Lo(O,L){var ie=this.__data__,_e=Fi(ie,O);return _e<0?(++this.size,ie.push([O,L])):ie[_e][1]=L,this},hn.prototype.clear=function ji(){this.size=0,this.__data__={hash:new gt,map:new(fn||Xr),string:new gt}},hn.prototype.delete=function hi(O){var L=Yn(this,O).delete(O);return this.size-=L?1:0,L},hn.prototype.get=function en(O){return Yn(this,O).get(O)},hn.prototype.has=function Nr(O){return Yn(this,O).has(O)},hn.prototype.set=function Zc(O,L){var ie=Yn(this,O),_e=ie.size;return ie.set(O,L),this.size+=ie.size==_e?0:1,this},Dr.prototype.add=Dr.prototype.push=function Uc(O){return this.__data__.set(O,ae),this},Dr.prototype.has=function qc(O){return this.__data__.has(O)},dn.prototype.clear=function jo(){this.__data__=new Xr,this.size=0},dn.prototype.delete=function zc(O){var L=this.__data__,ie=L.delete(O);return this.size=L.size,ie},dn.prototype.get=function ys(O){return this.__data__.get(O)},dn.prototype.has=function vs(O){return this.__data__.has(O)},dn.prototype.set=function Fo(O,L){var ie=this.__data__;if(ie instanceof Xr){var _e=ie.__data__;if(!fn||_e.length<199)return _e.push([O,L]),this.size=++ie.size,this;ie=this.__data__=new hn(_e)}return ie.set(O,L),this.size=ie.size,this};var Xn=br?function(O){return null==O?[]:(O=Object(O),function De(O,L){for(var ie=-1,_e=null==O?0:O.length,lt=0,Ue=[];++ie<_e;){var It=O[ie];L(It,ie,O)&&(Ue[lt++]=It)}return Ue}(br(O),function(L){return gr.call(O,L)}))}:function Yo(){return[]},pn=Qn;function Bo(O,L){return!!(L=L??X)&&("number"==typeof O||$e.test(O))&&O>-1&&O%1==0&&O<L}function xn(O){if(null!=O){try{return at.call(O)}catch{}try{return O+""}catch{}}return""}function Es(O,L){return O===L||O!=O&&L!=L}(ln&&pn(new ln(new ArrayBuffer(1)))!=v||fn&&pn(new fn)!=de||Rt&&pn(Rt.resolve())!=Je||At&&pn(new At)!=ue||Lt&&pn(new Lt)!=p)&&(pn=function(O){var L=Qn(O),ie=L==ke?O.constructor:void 0,_e=ie?xn(ie):"";if(_e)switch(_e){case Vt:return v;case Qt:return de;case Nt:return Je;case jt:return ue;case mt:return p}return L});var Go=_s(function(){return arguments}())?_s:function(O){return ei(O)&&ct.call(O,"callee")&&!gr.call(O,"callee")},pi=Array.isArray,Mi=un||function Xo(){return!1};function Is(O){if(!Ps(O))return!1;var L=Qn(O);return L==me||L==Se||L==te||L==se}function Ss(O){return"number"==typeof O&&O>-1&&O%1==0&&O<=X}function Ps(O){var L=typeof O;return null!=O&&("object"==L||"function"==L)}function ei(O){return null!=O&&"object"==typeof O}var Os=Ie?function ot(O){return function(L){return O(L)}}(Ie):function bs(O){return ei(O)&&Ss(O.length)&&!!Le[Qn(O)]};function Qo(O){return function Wo(O){return null!=O&&Ss(O.length)&&!Is(O)}(O)?function Mo(O,L){var ie=pi(O),_e=!ie&&Go(O),lt=!ie&&!_e&&Mi(O),Ue=!ie&&!_e&&!lt&&Os(O),It=ie||_e||lt||Ue,Wt=It?function rt(O,L){for(var ie=-1,_e=Array(O);++ie<O;)_e[ie]=L(ie);return _e}(O.length,String):[],er=Wt.length;for(var wt in O)(L||ct.call(O,wt))&&(!It||!("length"==wt||lt&&("offset"==wt||"parent"==wt)||Ue&&("buffer"==wt||"byteLength"==wt||"byteOffset"==wt)||Bo(wt,er)))&&Wt.push(wt);return Wt}(O):function zo(O){if(!function ko(O){var L=O&&O.constructor;return O===("function"==typeof L&&L.prototype||it)}(O))return Jn(O);var L=[];for(var ie in Object(O))ct.call(O,ie)&&"constructor"!=ie&&L.push(ie);return L}(O)}Ne.exports=function Jo(O,L){return ms(O,L)}},514:Ne=>{"use strict";function M(m){try{return JSON.stringify(m)}catch{return'"[Circular]"'}}Ne.exports=function G(m,ae,ve){var x=ve&&ve.stringify||M;if("object"==typeof m&&null!==m){var xe=ae.length+1;if(1===xe)return m;var he=new Array(xe);he[0]=x(m);for(var te=1;te<xe;te++)he[te]=x(ae[te]);return he.join(" ")}if("string"!=typeof m)return m;var ce=ae.length;if(0===ce)return m;for(var le="",Re=0,me=-1,Se=m&&m.length||0,de=0;de<Se;){if(37===m.charCodeAt(de)&&de+1<Se){switch(me=me>-1?me:0,m.charCodeAt(de+1)){case 100:case 102:if(Re>=ce||null==ae[Re])break;me<de&&(le+=m.slice(me,de)),le+=Number(ae[Re]),me=de+2,de++;break;case 105:if(Re>=ce||null==ae[Re])break;me<de&&(le+=m.slice(me,de)),le+=Math.floor(Number(ae[Re])),me=de+2,de++;break;case 79:case 111:case 106:if(Re>=ce||void 0===ae[Re])break;me<de&&(le+=m.slice(me,de));var Ge=typeof ae[Re];if("string"===Ge){le+="'"+ae[Re]+"'",me=de+2,de++;break}if("function"===Ge){le+=ae[Re].name||"<anonymous>",me=de+2,de++;break}le+=x(ae[Re]),me=de+2,de++;break;case 115:if(Re>=ce)break;me<de&&(le+=m.slice(me,de)),le+=String(ae[Re]),me=de+2,de++;break;case 37:me<de&&(le+=m.slice(me,de)),le+="%",me=de+2,de++,Re--}++Re}++de}return-1===me?m:(me<Se&&(le+=m.slice(me)),le)}},5499:(Ne,M)=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.safeJsonParse=function G(ae){if("string"!=typeof ae)throw new Error("Cannot safe json parse value of type "+typeof ae);try{return JSON.parse(ae)}catch{return ae}},M.safeJsonStringify=function m(ae){return"string"==typeof ae?ae:JSON.stringify(ae,(ve,x)=>typeof x>"u"?null:x)}},3569:Ne=>{"use strict";Ne.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},4308:(Ne,M,G)=>{"use strict";G.r(M),G.d(M,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>Z,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Se,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,P){v.__proto__=P}||function(v,P){for(var _ in P)P.hasOwnProperty(_)&&(v[_]=P[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,P=1,_=arguments.length;P<_;P++)for(var d in v=arguments[P])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var P in p)Object.prototype.hasOwnProperty.call(p,P)&&b.indexOf(P)<0&&(v[P]=p[P]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(P=Object.getOwnPropertySymbols(p);_<P.length;_++)b.indexOf(P[_])<0&&Object.prototype.propertyIsEnumerable.call(p,P[_])&&(v[P[_]]=p[P[_]])}return v}function X(p,b,v,P){var E,_=arguments.length,d=_<3?b:null===P?P=Object.getOwnPropertyDescriptor(b,v):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,P);else for(var C=p.length-1;C>=0;C--)(E=p[C])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,P){b(v,P,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,P){return new(v||(v=Promise))(function(d,E){function C(B){try{R(P.next(B))}catch(re){E(re)}}function ge(B){try{R(P.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(C,ge)}R((P=P.apply(p,b||[])).next())})}function ce(p,b){var P,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function C(R){return function(B){return function ge(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{P=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,P){void 0===P&&(P=v),p[P]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],P=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&P>=p.length&&(p=void 0),{value:p&&p[P++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,P=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=P.next()).done;)d.push(_.value)}catch(C){E={error:C}}finally{try{_&&!_.done&&(v=P.return)&&v.call(P)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Se(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var P=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,C=d.length;E<C;E++,_++)P[_]=d[E];return P}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,P=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E(z){P[z]&&(_[z]=function(Pe){return new Promise(function($e,Le){d.push([z,Pe,$e,Le])>1||C(z,Pe)})})}function C(z,Pe){try{!function ge(z){z.value instanceof Me?Promise.resolve(z.value.v).then(R,B):re(d[0][2],z)}(P[z](Pe))}catch($e){re(d[0][3],$e)}}function R(z){C("next",z)}function B(z){C("throw",z)}function re(z,Pe){z(Pe),d.shift(),d.length&&C(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},P("next"),P("throw",function(_){throw _}),P("return"),b[Symbol.iterator]=function(){return this},b;function P(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(d){v[d]=p[d]&&function(E){return new Promise(function(C,ge){!function _(d,E,C,ge){Promise.resolve(ge).then(function(R){d({value:R,done:C})},E)}(C,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function Z(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},9653:(Ne,M,G)=>{"use strict";G.r(M),G.d(M,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>Z,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Se,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,P){v.__proto__=P}||function(v,P){for(var _ in P)P.hasOwnProperty(_)&&(v[_]=P[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,P=1,_=arguments.length;P<_;P++)for(var d in v=arguments[P])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var P in p)Object.prototype.hasOwnProperty.call(p,P)&&b.indexOf(P)<0&&(v[P]=p[P]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(P=Object.getOwnPropertySymbols(p);_<P.length;_++)b.indexOf(P[_])<0&&Object.prototype.propertyIsEnumerable.call(p,P[_])&&(v[P[_]]=p[P[_]])}return v}function X(p,b,v,P){var E,_=arguments.length,d=_<3?b:null===P?P=Object.getOwnPropertyDescriptor(b,v):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,P);else for(var C=p.length-1;C>=0;C--)(E=p[C])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,P){b(v,P,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,P){return new(v||(v=Promise))(function(d,E){function C(B){try{R(P.next(B))}catch(re){E(re)}}function ge(B){try{R(P.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(C,ge)}R((P=P.apply(p,b||[])).next())})}function ce(p,b){var P,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function C(R){return function(B){return function ge(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{P=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,P){void 0===P&&(P=v),p[P]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],P=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&P>=p.length&&(p=void 0),{value:p&&p[P++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,P=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=P.next()).done;)d.push(_.value)}catch(C){E={error:C}}finally{try{_&&!_.done&&(v=P.return)&&v.call(P)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Se(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var P=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,C=d.length;E<C;E++,_++)P[_]=d[E];return P}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,P=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E(z){P[z]&&(_[z]=function(Pe){return new Promise(function($e,Le){d.push([z,Pe,$e,Le])>1||C(z,Pe)})})}function C(z,Pe){try{!function ge(z){z.value instanceof Me?Promise.resolve(z.value.v).then(R,B):re(d[0][2],z)}(P[z](Pe))}catch($e){re(d[0][3],$e)}}function R(z){C("next",z)}function B(z){C("throw",z)}function re(z,Pe){z(Pe),d.shift(),d.length&&C(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},P("next"),P("throw",function(_){throw _}),P("return"),b[Symbol.iterator]=function(){return this},b;function P(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(d){v[d]=p[d]&&function(E){return new Promise(function(C,ge){!function _(d,E,C,ge){Promise.resolve(ge).then(function(R){d({value:R,done:C})},E)}(C,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function Z(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},3893:(Ne,M,G)=>{"use strict";G.r(M),G.d(M,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>Z,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Se,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,P){v.__proto__=P}||function(v,P){for(var _ in P)P.hasOwnProperty(_)&&(v[_]=P[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,P=1,_=arguments.length;P<_;P++)for(var d in v=arguments[P])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var P in p)Object.prototype.hasOwnProperty.call(p,P)&&b.indexOf(P)<0&&(v[P]=p[P]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(P=Object.getOwnPropertySymbols(p);_<P.length;_++)b.indexOf(P[_])<0&&Object.prototype.propertyIsEnumerable.call(p,P[_])&&(v[P[_]]=p[P[_]])}return v}function X(p,b,v,P){var E,_=arguments.length,d=_<3?b:null===P?P=Object.getOwnPropertyDescriptor(b,v):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,P);else for(var C=p.length-1;C>=0;C--)(E=p[C])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,P){b(v,P,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,P){return new(v||(v=Promise))(function(d,E){function C(B){try{R(P.next(B))}catch(re){E(re)}}function ge(B){try{R(P.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(C,ge)}R((P=P.apply(p,b||[])).next())})}function ce(p,b){var P,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function C(R){return function(B){return function ge(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{P=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,P){void 0===P&&(P=v),p[P]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],P=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&P>=p.length&&(p=void 0),{value:p&&p[P++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,P=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=P.next()).done;)d.push(_.value)}catch(C){E={error:C}}finally{try{_&&!_.done&&(v=P.return)&&v.call(P)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Se(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var P=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,C=d.length;E<C;E++,_++)P[_]=d[E];return P}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,P=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E(z){P[z]&&(_[z]=function(Pe){return new Promise(function($e,Le){d.push([z,Pe,$e,Le])>1||C(z,Pe)})})}function C(z,Pe){try{!function ge(z){z.value instanceof Me?Promise.resolve(z.value.v).then(R,B):re(d[0][2],z)}(P[z](Pe))}catch($e){re(d[0][3],$e)}}function R(z){C("next",z)}function B(z){C("throw",z)}function re(z,Pe){z(Pe),d.shift(),d.length&&C(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},P("next"),P("throw",function(_){throw _}),P("return"),b[Symbol.iterator]=function(){return this},b;function P(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(d){v[d]=p[d]&&function(E){return new Promise(function(C,ge){!function _(d,E,C,ge){Promise.resolve(ge).then(function(R){d({value:R,done:C})},E)}(C,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function Z(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},7121:(Ne,M,G)=>{"use strict";G.r(M),G.d(M,{__assign:()=>ve,__asyncDelegator:()=>Je,__asyncGenerator:()=>ke,__asyncValues:()=>se,__await:()=>Me,__awaiter:()=>te,__classPrivateFieldGet:()=>Z,__classPrivateFieldSet:()=>Q,__createBinding:()=>le,__decorate:()=>X,__exportStar:()=>Re,__extends:()=>ae,__generator:()=>ce,__importDefault:()=>fe,__importStar:()=>ue,__makeTemplateObject:()=>ne,__metadata:()=>he,__param:()=>xe,__read:()=>Se,__rest:()=>x,__spread:()=>de,__spreadArrays:()=>Ge,__values:()=>me});var m=function(p,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,P){v.__proto__=P}||function(v,P){for(var _ in P)P.hasOwnProperty(_)&&(v[_]=P[_])})(p,b)};function ae(p,b){function v(){this.constructor=p}m(p,b),p.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)}var ve=function(){return ve=Object.assign||function(b){for(var v,P=1,_=arguments.length;P<_;P++)for(var d in v=arguments[P])Object.prototype.hasOwnProperty.call(v,d)&&(b[d]=v[d]);return b},ve.apply(this,arguments)};function x(p,b){var v={};for(var P in p)Object.prototype.hasOwnProperty.call(p,P)&&b.indexOf(P)<0&&(v[P]=p[P]);if(null!=p&&"function"==typeof Object.getOwnPropertySymbols){var _=0;for(P=Object.getOwnPropertySymbols(p);_<P.length;_++)b.indexOf(P[_])<0&&Object.prototype.propertyIsEnumerable.call(p,P[_])&&(v[P[_]]=p[P[_]])}return v}function X(p,b,v,P){var E,_=arguments.length,d=_<3?b:null===P?P=Object.getOwnPropertyDescriptor(b,v):P;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(p,b,v,P);else for(var C=p.length-1;C>=0;C--)(E=p[C])&&(d=(_<3?E(d):_>3?E(b,v,d):E(b,v))||d);return _>3&&d&&Object.defineProperty(b,v,d),d}function xe(p,b){return function(v,P){b(v,P,p)}}function he(p,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(p,b)}function te(p,b,v,P){return new(v||(v=Promise))(function(d,E){function C(B){try{R(P.next(B))}catch(re){E(re)}}function ge(B){try{R(P.throw(B))}catch(re){E(re)}}function R(B){B.done?d(B.value):function _(d){return d instanceof v?d:new v(function(E){E(d)})}(B.value).then(C,ge)}R((P=P.apply(p,b||[])).next())})}function ce(p,b){var P,_,d,E,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return E={next:C(0),throw:C(1),return:C(2)},"function"==typeof Symbol&&(E[Symbol.iterator]=function(){return this}),E;function C(R){return function(B){return function ge(R){if(P)throw new TypeError("Generator is already executing.");for(;v;)try{if(P=1,_&&(d=2&R[0]?_.return:R[0]?_.throw||((d=_.return)&&d.call(_),0):_.next)&&!(d=d.call(_,R[1])).done)return d;switch(_=0,d&&(R=[2&R[0],d.value]),R[0]){case 0:case 1:d=R;break;case 4:return v.label++,{value:R[1],done:!1};case 5:v.label++,_=R[1],R=[0];continue;case 7:R=v.ops.pop(),v.trys.pop();continue;default:if(!(d=(d=v.trys).length>0&&d[d.length-1])&&(6===R[0]||2===R[0])){v=0;continue}if(3===R[0]&&(!d||R[1]>d[0]&&R[1]<d[3])){v.label=R[1];break}if(6===R[0]&&v.label<d[1]){v.label=d[1],d=R;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(R);break}d[2]&&v.ops.pop(),v.trys.pop();continue}R=b.call(p,v)}catch(B){R=[6,B],_=0}finally{P=d=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([R,B])}}}function le(p,b,v,P){void 0===P&&(P=v),p[P]=b[v]}function Re(p,b){for(var v in p)"default"!==v&&!b.hasOwnProperty(v)&&(b[v]=p[v])}function me(p){var b="function"==typeof Symbol&&Symbol.iterator,v=b&&p[b],P=0;if(v)return v.call(p);if(p&&"number"==typeof p.length)return{next:function(){return p&&P>=p.length&&(p=void 0),{value:p&&p[P++],done:!p}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(p,b){var v="function"==typeof Symbol&&p[Symbol.iterator];if(!v)return p;var _,E,P=v.call(p),d=[];try{for(;(void 0===b||b-- >0)&&!(_=P.next()).done;)d.push(_.value)}catch(C){E={error:C}}finally{try{_&&!_.done&&(v=P.return)&&v.call(P)}finally{if(E)throw E.error}}return d}function de(){for(var p=[],b=0;b<arguments.length;b++)p=p.concat(Se(arguments[b]));return p}function Ge(){for(var p=0,b=0,v=arguments.length;b<v;b++)p+=arguments[b].length;var P=Array(p),_=0;for(b=0;b<v;b++)for(var d=arguments[b],E=0,C=d.length;E<C;E++,_++)P[_]=d[E];return P}function Me(p){return this instanceof Me?(this.v=p,this):new Me(p)}function ke(p,b,v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _,P=v.apply(p,b||[]),d=[];return _={},E("next"),E("throw"),E("return"),_[Symbol.asyncIterator]=function(){return this},_;function E(z){P[z]&&(_[z]=function(Pe){return new Promise(function($e,Le){d.push([z,Pe,$e,Le])>1||C(z,Pe)})})}function C(z,Pe){try{!function ge(z){z.value instanceof Me?Promise.resolve(z.value.v).then(R,B):re(d[0][2],z)}(P[z](Pe))}catch($e){re(d[0][3],$e)}}function R(z){C("next",z)}function B(z){C("throw",z)}function re(z,Pe){z(Pe),d.shift(),d.length&&C(d[0][0],d[0][1])}}function Je(p){var b,v;return b={},P("next"),P("throw",function(_){throw _}),P("return"),b[Symbol.iterator]=function(){return this},b;function P(_,d){b[_]=p[_]?function(E){return(v=!v)?{value:Me(p[_](E)),done:"return"===_}:d?d(E):E}:d}}function se(p){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v,b=p[Symbol.asyncIterator];return b?b.call(p):(p=me(p),v={},P("next"),P("throw"),P("return"),v[Symbol.asyncIterator]=function(){return this},v);function P(d){v[d]=p[d]&&function(E){return new Promise(function(C,ge){!function _(d,E,C,ge){Promise.resolve(ge).then(function(R){d({value:R,done:C})},E)}(C,ge,(E=p[d](E)).done,E.value)})}}}function ne(p,b){return Object.defineProperty?Object.defineProperty(p,"raw",{value:b}):p.raw=b,p}function ue(p){if(p&&p.__esModule)return p;var b={};if(null!=p)for(var v in p)Object.hasOwnProperty.call(p,v)&&(b[v]=p[v]);return b.default=p,b}function fe(p){return p&&p.__esModule?p:{default:p}}function Z(p,b){if(!b.has(p))throw new TypeError("attempted to get private field on non-instance");return b.get(p)}function Q(p,b,v){if(!b.has(p))throw new TypeError("attempted to set private field on non-instance");return b.set(p,v),v}},1590:(Ne,M,G)=>{"use strict";const m=G(514);Ne.exports=X;const ae=function fe(){function Z(Q){return typeof Q<"u"&&Q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return Z(self)||Z(window)||Z(this)||{}}}().console||{},ve={mapHttpRequest:Ge,mapHttpResponse:Ge,wrapRequestSerializer:Me,wrapResponseSerializer:Me,wrapErrorSerializer:Me,req:Ge,res:Ge,err:function Se(Z){const Q={type:Z.constructor.name,msg:Z.message,stack:Z.stack};for(const p in Z)void 0===Q[p]&&(Q[p]=Z[p]);return Q}};function X(Z){(Z=Z||{}).browser=Z.browser||{};const Q=Z.browser.transmit;if(Q&&"function"!=typeof Q.send)throw Error("pino: transmit option must have a send function");const p=Z.browser.write||ae;Z.browser.write&&(Z.browser.asObject=!0);const b=Z.serializers||{},v=function x(Z,Q){return Array.isArray(Z)?Z.filter(function(b){return"!stdSerializers.err"!==b}):!0===Z&&Object.keys(Q)}(Z.browser.serialize,b);let P=Z.browser.serialize;Array.isArray(Z.browser.serialize)&&Z.browser.serialize.indexOf("!stdSerializers.err")>-1&&(P=!1),"function"==typeof p&&(p.error=p.fatal=p.warn=p.info=p.debug=p.trace=p),!1===Z.enabled&&(Z.level="silent");const d=Z.level||"info",E=Object.create(p);E.log||(E.log=ke),Object.defineProperty(E,"levelVal",{get:function ge(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(E,"level",{get:function R(){return this._level},set:function B(z){if("silent"!==z&&!this.levels.values[z])throw Error("unknown level "+z);this._level=z,xe(C,E,"error","log"),xe(C,E,"fatal","error"),xe(C,E,"warn","error"),xe(C,E,"info","log"),xe(C,E,"debug","log"),xe(C,E,"trace","log")}});const C={transmit:Q,serialize:v,asObject:Z.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:de(Z)};return E.levels=X.levels,E.level=d,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=ke,E.serializers=b,E._serialize=v,E._stdErrSerialize=P,E.child=function re(z,Pe){if(!z)throw new Error("missing bindings for child Pino");Pe=Pe||{},v&&z.serializers&&(Pe.serializers=z.serializers);const $e=Pe.serializers;if(v&&$e){var Le=Object.assign({},b,$e),Qr=!0===Z.browser.serialize?Object.keys(Le):v;delete z.serializers,ce([z],Qr,Le,this._stdErrSerialize)}function Yr(dt){this._childLevel=1+(0|dt._childLevel),this.error=le(dt,z,"error"),this.fatal=le(dt,z,"fatal"),this.warn=le(dt,z,"warn"),this.info=le(dt,z,"info"),this.debug=le(dt,z,"debug"),this.trace=le(dt,z,"trace"),Le&&(this.serializers=Le,this._serialize=Qr),Q&&(this._logEvent=me([].concat(dt._logEvent.bindings,z)))}return Yr.prototype=this,new Yr(this)},Q&&(E._logEvent=me()),E}function xe(Z,Q,p,b){const v=Object.getPrototypeOf(Q);Q[p]=Q.levelVal>Q.levels.values[p]?ke:v[p]?v[p]:ae[p]||ae[b]||ke,function he(Z,Q,p){!Z.transmit&&Q[p]===ke||(Q[p]=function(b){return function(){const P=Z.timestamp(),_=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ae?ae:this;for(var E=0;E<_.length;E++)_[E]=arguments[E];if(Z.serialize&&!Z.asObject&&ce(_,this._serialize,this.serializers,this._stdErrSerialize),Z.asObject?b.call(d,function te(Z,Q,p,b){Z._serialize&&ce(p,Z._serialize,Z.serializers,Z._stdErrSerialize);const v=p.slice();let P=v[0];const _={};b&&(_.time=b),_.level=X.levels.values[Q];let d=1+(0|Z._childLevel);if(d<1&&(d=1),null!==P&&"object"==typeof P){for(;d--&&"object"==typeof v[0];)Object.assign(_,v.shift());P=v.length?m(v.shift(),v):void 0}else"string"==typeof P&&(P=m(v.shift(),v));return void 0!==P&&(_.msg=P),_}(this,p,_,P)):b.apply(d,_),Z.transmit){const C=Z.transmit.level||Q.level,R=X.levels.values[p];if(R<X.levels.values[C])return;!function Re(Z,Q,p){const b=Q.send,v=Q.ts,P=Q.methodLevel,_=Q.methodValue,d=Q.val,E=Z._logEvent.bindings;ce(p,Z._serialize||Object.keys(Z.serializers),Z.serializers,void 0===Z._stdErrSerialize||Z._stdErrSerialize),Z._logEvent.ts=v,Z._logEvent.messages=p.filter(function(C){return-1===E.indexOf(C)}),Z._logEvent.level.label=P,Z._logEvent.level.value=_,b(P,Z._logEvent,d),Z._logEvent=me(E)}(this,{ts:P,methodLevel:p,methodValue:R,transmitLevel:C,transmitValue:X.levels.values[Z.transmit.level||Q.level],send:Z.transmit.send,val:Q.levelVal},_)}}}(Q[p]))}(Z,Q,p)}function ce(Z,Q,p,b){for(const v in Z)if(b&&Z[v]instanceof Error)Z[v]=X.stdSerializers.err(Z[v]);else if("object"==typeof Z[v]&&!Array.isArray(Z[v]))for(const P in Z[v])Q&&Q.indexOf(P)>-1&&P in p&&(Z[v][P]=p[P](Z[v][P]))}function le(Z,Q,p){return function(){const b=new Array(1+arguments.length);b[0]=Q;for(var v=1;v<b.length;v++)b[v]=arguments[v-1];return Z[p].apply(this,b)}}function me(Z){return{ts:0,messages:[],bindings:Z||[],level:{label:"",value:0}}}function de(Z){return"function"==typeof Z.timestamp?Z.timestamp:!1===Z.timestamp?Je:se}function Ge(){return{}}function Me(Z){return Z}function ke(){}function Je(){return!1}function se(){return Date.now()}X.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},X.stdSerializers=ve,X.stdTimeFunctions=Object.assign({},{nullTime:Je,epochTime:se,unixTime:function ne(){return Math.round(Date.now()/1e3)},isoTime:function ue(){return new Date(Date.now()).toISOString()}})}}]);