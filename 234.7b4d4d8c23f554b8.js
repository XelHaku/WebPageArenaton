(self.webpackChunkArenaton=self.webpackChunkArenaton||[]).push([[234],{5972:(ke,q,Y)=>{"use strict";q.Xx=q._w=q.aP=q.KS=q.jQ=void 0;Y(5465);const je=Y(6713);Y(3403);function Z(ce){const _e=new Float64Array(16);if(ce)for(let re=0;re<ce.length;re++)_e[re]=ce[re];return _e}q.jQ=64,q.KS=64,q.aP=32,new Uint8Array(32)[0]=9;const we=Z(),ae=Z([1]),K=(Z([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Z([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),Re=Z([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Fe=Z([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);Z([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Ce(ce,_e){for(let re=0;re<16;re++)ce[re]=0|_e[re]}function Qe(ce){let _e=1;for(let re=0;re<16;re++){let h=ce[re]+_e+65535;_e=Math.floor(h/65536),ce[re]=h-65536*_e}ce[0]+=_e-1+37*(_e-1)}function Be(ce,_e,re){const h=~(re-1);for(let G=0;G<16;G++){const Ze=h&(ce[G]^_e[G]);ce[G]^=Ze,_e[G]^=Ze}}function et(ce,_e){const re=Z(),h=Z();for(let G=0;G<16;G++)h[G]=_e[G];Qe(h),Qe(h),Qe(h);for(let G=0;G<2;G++){re[0]=h[0]-65517;for(let nt=1;nt<15;nt++)re[nt]=h[nt]-65535-(re[nt-1]>>16&1),re[nt-1]&=65535;re[15]=h[15]-32767-(re[14]>>16&1);const Ze=re[15]>>16&1;re[14]&=65535,Be(h,re,1-Ze)}for(let G=0;G<16;G++)ce[2*G]=255&h[G],ce[2*G+1]=h[G]>>8}function g(ce){const _e=new Uint8Array(32);return et(_e,ce),1&_e[0]}function S(ce,_e,re){for(let h=0;h<16;h++)ce[h]=_e[h]+re[h]}function k(ce,_e,re){for(let h=0;h<16;h++)ce[h]=_e[h]-re[h]}function F(ce,_e,re){let h,G,Ze=0,nt=0,yt=0,$t=0,Et=0,Nt=0,Qt=0,xr=0,cr=0,ur=0,Yt=0,Zt=0,Ht=0,At=0,Rt=0,Tt=0,It=0,vt=0,Xt=0,Tr=0,Ir=0,lr=0,Kr=0,qr=0,nn=0,er=0,zr=0,Zr=0,Vi=0,ai=0,ci=0,tr=re[0],Vt=re[1],Gt=re[2],Mt=re[3],fr=re[4],dr=re[5],hr=re[6],ir=re[7],pr=re[8],Ct=re[9],Wt=re[10],Ut=re[11],_r=re[12],gr=re[13],yr=re[14],sr=re[15];h=_e[0],Ze+=h*tr,nt+=h*Vt,yt+=h*Gt,$t+=h*Mt,Et+=h*fr,Nt+=h*dr,Qt+=h*hr,xr+=h*ir,cr+=h*pr,ur+=h*Ct,Yt+=h*Wt,Zt+=h*Ut,Ht+=h*_r,At+=h*gr,Rt+=h*yr,Tt+=h*sr,h=_e[1],nt+=h*tr,yt+=h*Vt,$t+=h*Gt,Et+=h*Mt,Nt+=h*fr,Qt+=h*dr,xr+=h*hr,cr+=h*ir,ur+=h*pr,Yt+=h*Ct,Zt+=h*Wt,Ht+=h*Ut,At+=h*_r,Rt+=h*gr,Tt+=h*yr,It+=h*sr,h=_e[2],yt+=h*tr,$t+=h*Vt,Et+=h*Gt,Nt+=h*Mt,Qt+=h*fr,xr+=h*dr,cr+=h*hr,ur+=h*ir,Yt+=h*pr,Zt+=h*Ct,Ht+=h*Wt,At+=h*Ut,Rt+=h*_r,Tt+=h*gr,It+=h*yr,vt+=h*sr,h=_e[3],$t+=h*tr,Et+=h*Vt,Nt+=h*Gt,Qt+=h*Mt,xr+=h*fr,cr+=h*dr,ur+=h*hr,Yt+=h*ir,Zt+=h*pr,Ht+=h*Ct,At+=h*Wt,Rt+=h*Ut,Tt+=h*_r,It+=h*gr,vt+=h*yr,Xt+=h*sr,h=_e[4],Et+=h*tr,Nt+=h*Vt,Qt+=h*Gt,xr+=h*Mt,cr+=h*fr,ur+=h*dr,Yt+=h*hr,Zt+=h*ir,Ht+=h*pr,At+=h*Ct,Rt+=h*Wt,Tt+=h*Ut,It+=h*_r,vt+=h*gr,Xt+=h*yr,Tr+=h*sr,h=_e[5],Nt+=h*tr,Qt+=h*Vt,xr+=h*Gt,cr+=h*Mt,ur+=h*fr,Yt+=h*dr,Zt+=h*hr,Ht+=h*ir,At+=h*pr,Rt+=h*Ct,Tt+=h*Wt,It+=h*Ut,vt+=h*_r,Xt+=h*gr,Tr+=h*yr,Ir+=h*sr,h=_e[6],Qt+=h*tr,xr+=h*Vt,cr+=h*Gt,ur+=h*Mt,Yt+=h*fr,Zt+=h*dr,Ht+=h*hr,At+=h*ir,Rt+=h*pr,Tt+=h*Ct,It+=h*Wt,vt+=h*Ut,Xt+=h*_r,Tr+=h*gr,Ir+=h*yr,lr+=h*sr,h=_e[7],xr+=h*tr,cr+=h*Vt,ur+=h*Gt,Yt+=h*Mt,Zt+=h*fr,Ht+=h*dr,At+=h*hr,Rt+=h*ir,Tt+=h*pr,It+=h*Ct,vt+=h*Wt,Xt+=h*Ut,Tr+=h*_r,Ir+=h*gr,lr+=h*yr,Kr+=h*sr,h=_e[8],cr+=h*tr,ur+=h*Vt,Yt+=h*Gt,Zt+=h*Mt,Ht+=h*fr,At+=h*dr,Rt+=h*hr,Tt+=h*ir,It+=h*pr,vt+=h*Ct,Xt+=h*Wt,Tr+=h*Ut,Ir+=h*_r,lr+=h*gr,Kr+=h*yr,qr+=h*sr,h=_e[9],ur+=h*tr,Yt+=h*Vt,Zt+=h*Gt,Ht+=h*Mt,At+=h*fr,Rt+=h*dr,Tt+=h*hr,It+=h*ir,vt+=h*pr,Xt+=h*Ct,Tr+=h*Wt,Ir+=h*Ut,lr+=h*_r,Kr+=h*gr,qr+=h*yr,nn+=h*sr,h=_e[10],Yt+=h*tr,Zt+=h*Vt,Ht+=h*Gt,At+=h*Mt,Rt+=h*fr,Tt+=h*dr,It+=h*hr,vt+=h*ir,Xt+=h*pr,Tr+=h*Ct,Ir+=h*Wt,lr+=h*Ut,Kr+=h*_r,qr+=h*gr,nn+=h*yr,er+=h*sr,h=_e[11],Zt+=h*tr,Ht+=h*Vt,At+=h*Gt,Rt+=h*Mt,Tt+=h*fr,It+=h*dr,vt+=h*hr,Xt+=h*ir,Tr+=h*pr,Ir+=h*Ct,lr+=h*Wt,Kr+=h*Ut,qr+=h*_r,nn+=h*gr,er+=h*yr,zr+=h*sr,h=_e[12],Ht+=h*tr,At+=h*Vt,Rt+=h*Gt,Tt+=h*Mt,It+=h*fr,vt+=h*dr,Xt+=h*hr,Tr+=h*ir,Ir+=h*pr,lr+=h*Ct,Kr+=h*Wt,qr+=h*Ut,nn+=h*_r,er+=h*gr,zr+=h*yr,Zr+=h*sr,h=_e[13],At+=h*tr,Rt+=h*Vt,Tt+=h*Gt,It+=h*Mt,vt+=h*fr,Xt+=h*dr,Tr+=h*hr,Ir+=h*ir,lr+=h*pr,Kr+=h*Ct,qr+=h*Wt,nn+=h*Ut,er+=h*_r,zr+=h*gr,Zr+=h*yr,Vi+=h*sr,h=_e[14],Rt+=h*tr,Tt+=h*Vt,It+=h*Gt,vt+=h*Mt,Xt+=h*fr,Tr+=h*dr,Ir+=h*hr,lr+=h*ir,Kr+=h*pr,qr+=h*Ct,nn+=h*Wt,er+=h*Ut,zr+=h*_r,Zr+=h*gr,Vi+=h*yr,ai+=h*sr,h=_e[15],Tt+=h*tr,It+=h*Vt,vt+=h*Gt,Xt+=h*Mt,Tr+=h*fr,Ir+=h*dr,lr+=h*hr,Kr+=h*ir,qr+=h*pr,nn+=h*Ct,er+=h*Wt,zr+=h*Ut,Zr+=h*_r,Vi+=h*gr,ai+=h*yr,ci+=h*sr,Ze+=38*It,nt+=38*vt,yt+=38*Xt,$t+=38*Tr,Et+=38*Ir,Nt+=38*lr,Qt+=38*Kr,xr+=38*qr,cr+=38*nn,ur+=38*er,Yt+=38*zr,Zt+=38*Zr,Ht+=38*Vi,At+=38*ai,Rt+=38*ci,G=1,h=Ze+G+65535,G=Math.floor(h/65536),Ze=h-65536*G,h=nt+G+65535,G=Math.floor(h/65536),nt=h-65536*G,h=yt+G+65535,G=Math.floor(h/65536),yt=h-65536*G,h=$t+G+65535,G=Math.floor(h/65536),$t=h-65536*G,h=Et+G+65535,G=Math.floor(h/65536),Et=h-65536*G,h=Nt+G+65535,G=Math.floor(h/65536),Nt=h-65536*G,h=Qt+G+65535,G=Math.floor(h/65536),Qt=h-65536*G,h=xr+G+65535,G=Math.floor(h/65536),xr=h-65536*G,h=cr+G+65535,G=Math.floor(h/65536),cr=h-65536*G,h=ur+G+65535,G=Math.floor(h/65536),ur=h-65536*G,h=Yt+G+65535,G=Math.floor(h/65536),Yt=h-65536*G,h=Zt+G+65535,G=Math.floor(h/65536),Zt=h-65536*G,h=Ht+G+65535,G=Math.floor(h/65536),Ht=h-65536*G,h=At+G+65535,G=Math.floor(h/65536),At=h-65536*G,h=Rt+G+65535,G=Math.floor(h/65536),Rt=h-65536*G,h=Tt+G+65535,G=Math.floor(h/65536),Tt=h-65536*G,Ze+=G-1+37*(G-1),G=1,h=Ze+G+65535,G=Math.floor(h/65536),Ze=h-65536*G,h=nt+G+65535,G=Math.floor(h/65536),nt=h-65536*G,h=yt+G+65535,G=Math.floor(h/65536),yt=h-65536*G,h=$t+G+65535,G=Math.floor(h/65536),$t=h-65536*G,h=Et+G+65535,G=Math.floor(h/65536),Et=h-65536*G,h=Nt+G+65535,G=Math.floor(h/65536),Nt=h-65536*G,h=Qt+G+65535,G=Math.floor(h/65536),Qt=h-65536*G,h=xr+G+65535,G=Math.floor(h/65536),xr=h-65536*G,h=cr+G+65535,G=Math.floor(h/65536),cr=h-65536*G,h=ur+G+65535,G=Math.floor(h/65536),ur=h-65536*G,h=Yt+G+65535,G=Math.floor(h/65536),Yt=h-65536*G,h=Zt+G+65535,G=Math.floor(h/65536),Zt=h-65536*G,h=Ht+G+65535,G=Math.floor(h/65536),Ht=h-65536*G,h=At+G+65535,G=Math.floor(h/65536),At=h-65536*G,h=Rt+G+65535,G=Math.floor(h/65536),Rt=h-65536*G,h=Tt+G+65535,G=Math.floor(h/65536),Tt=h-65536*G,Ze+=G-1+37*(G-1),ce[0]=Ze,ce[1]=nt,ce[2]=yt,ce[3]=$t,ce[4]=Et,ce[5]=Nt,ce[6]=Qt,ce[7]=xr,ce[8]=cr,ce[9]=ur,ce[10]=Yt,ce[11]=Zt,ce[12]=Ht,ce[13]=At,ce[14]=Rt,ce[15]=Tt}function y(ce,_e){F(ce,_e,_e)}function H(ce,_e){const re=Z(),h=Z(),G=Z(),Ze=Z(),nt=Z(),yt=Z(),$t=Z(),Et=Z(),Nt=Z();k(re,ce[1],ce[0]),k(Nt,_e[1],_e[0]),F(re,re,Nt),S(h,ce[0],ce[1]),S(Nt,_e[0],_e[1]),F(h,h,Nt),F(G,ce[3],_e[3]),F(G,G,K),F(Ze,ce[2],_e[2]),S(Ze,Ze,Ze),k(nt,h,re),k(yt,Ze,G),S($t,Ze,G),S(Et,h,re),F(ce[0],nt,yt),F(ce[1],Et,$t),F(ce[2],$t,yt),F(ce[3],nt,Et)}function N(ce,_e,re){for(let h=0;h<4;h++)Be(ce[h],_e[h],re)}function O(ce,_e){const re=Z(),h=Z(),G=Z();(function j(ce,_e){const re=Z();let h;for(h=0;h<16;h++)re[h]=_e[h];for(h=253;h>=0;h--)y(re,re),2!==h&&4!==h&&F(re,re,_e);for(h=0;h<16;h++)ce[h]=re[h]})(G,_e[2]),F(re,_e[0],G),F(h,_e[1],G),et(ce,h),ce[31]^=g(re)<<7}function ve(ce,_e){const re=[Z(),Z(),Z(),Z()];Ce(re[0],Re),Ce(re[1],Fe),Ce(re[2],ae),F(re[3],Re,Fe),function D(ce,_e,re){Ce(ce[0],we),Ce(ce[1],ae),Ce(ce[2],ae),Ce(ce[3],we);for(let h=255;h>=0;--h){const G=re[h/8|0]>>(7&h)&1;N(ce,_e,G),H(_e,ce),H(ce,ce),N(ce,_e,G)}}(ce,re,_e)}q._w=function Ue(ce){if(ce.length!==q.aP)throw new Error(`ed25519: seed must be ${q.aP} bytes`);const _e=(0,je.hash)(ce);_e[0]&=248,_e[31]&=127,_e[31]|=64;const re=new Uint8Array(32),h=[Z(),Z(),Z(),Z()];ve(h,_e),O(re,h);const G=new Uint8Array(64);return G.set(ce),G.set(re,32),{publicKey:re,secretKey:G}};const Ee=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(ce,_e){let re,h,G,Ze;for(h=63;h>=32;--h){for(re=0,G=h-32,Ze=h-12;G<Ze;++G)_e[G]+=re-16*_e[h]*Ee[G-(h-32)],re=Math.floor((_e[G]+128)/256),_e[G]-=256*re;_e[G]+=re,_e[h]=0}for(re=0,G=0;G<32;G++)_e[G]+=re-(_e[31]>>4)*Ee[G],re=_e[G]>>8,_e[G]&=255;for(G=0;G<32;G++)_e[G]-=re*Ee[G];for(h=0;h<32;h++)_e[h+1]+=_e[h]>>8,ce[h]=255&_e[h]}function Ye(ce){const _e=new Float64Array(64);for(let re=0;re<64;re++)_e[re]=ce[re];for(let re=0;re<64;re++)ce[re]=0;oe(ce,_e)}q.Xx=function ft(ce,_e){const re=new Float64Array(64),h=[Z(),Z(),Z(),Z()],G=(0,je.hash)(ce.subarray(0,32));G[0]&=248,G[31]&=127,G[31]|=64;const Ze=new Uint8Array(64);Ze.set(G.subarray(32),32);const nt=new je.SHA512;nt.update(Ze.subarray(32)),nt.update(_e);const yt=nt.digest();nt.clean(),Ye(yt),ve(h,yt),O(Ze,h),nt.reset(),nt.update(Ze.subarray(0,32)),nt.update(ce.subarray(32)),nt.update(_e);const $t=nt.digest();Ye($t);for(let Et=0;Et<32;Et++)re[Et]=yt[Et];for(let Et=0;Et<32;Et++)for(let Nt=0;Nt<32;Nt++)re[Et+Nt]+=$t[Et]*G[Nt];return oe(Ze.subarray(32),re),Ze}},6713:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});var b=Y(9546),Pe=Y(3403);q.DIGEST_LENGTH=64,q.BLOCK_SIZE=128;var je=function(){function we(){this.digestLength=q.DIGEST_LENGTH,this.blockSize=q.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return we.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},we.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},we.prototype.clean=function(){Pe.wipe(this._buffer),Pe.wipe(this._tempHi),Pe.wipe(this._tempLo),this.reset()},we.prototype.update=function(ae,ie){if(void 0===ie&&(ie=ae.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var K=0;if(this._bytesHashed+=ie,this._bufferLength>0){for(;this._bufferLength<q.BLOCK_SIZE&&ie>0;)this._buffer[this._bufferLength++]=ae[K++],ie--;this._bufferLength===this.blockSize&&(Z(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(ie>=this.blockSize&&(K=Z(this._tempHi,this._tempLo,this._stateHi,this._stateLo,ae,K,ie),ie%=this.blockSize);ie>0;)this._buffer[this._bufferLength++]=ae[K++],ie--;return this},we.prototype.finish=function(ae){if(!this._finished){var ie=this._bytesHashed,K=this._bufferLength,Re=ie/536870912|0,Fe=ie<<3,Ke=ie%128<112?128:256;this._buffer[K]=128;for(var Ce=K+1;Ce<Ke-8;Ce++)this._buffer[Ce]=0;b.writeUint32BE(Re,this._buffer,Ke-8),b.writeUint32BE(Fe,this._buffer,Ke-4),Z(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Ke),this._finished=!0}for(Ce=0;Ce<this.digestLength/8;Ce++)b.writeUint32BE(this._stateHi[Ce],ae,8*Ce),b.writeUint32BE(this._stateLo[Ce],ae,8*Ce+4);return this},we.prototype.digest=function(){var ae=new Uint8Array(this.digestLength);return this.finish(ae),ae},we.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},we.prototype.restoreState=function(ae){return this._stateHi.set(ae.stateHi),this._stateLo.set(ae.stateLo),this._bufferLength=ae.bufferLength,ae.buffer&&this._buffer.set(ae.buffer),this._bytesHashed=ae.bytesHashed,this._finished=!1,this},we.prototype.cleanSavedState=function(ae){Pe.wipe(ae.stateHi),Pe.wipe(ae.stateLo),ae.buffer&&Pe.wipe(ae.buffer),ae.bufferLength=0,ae.bytesHashed=0},we}();q.SHA512=je;var Te=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function Z(we,ae,ie,K,Re,Fe,Ke){for(var O,D,ve,Ue,V,be,Ee,oe,Ce=ie[0],Qe=ie[1],Be=ie[2],et=ie[3],p=ie[4],_=ie[5],g=ie[6],w=ie[7],S=K[0],k=K[1],F=K[2],y=K[3],j=K[4],T=K[5],H=K[6],N=K[7];Ke>=128;){for(var Ye=0;Ye<16;Ye++)we[Ye]=b.readUint32BE(Re,ft=8*Ye+Fe),ae[Ye]=b.readUint32BE(Re,ft+4);for(Ye=0;Ye<80;Ye++){var h,Qt,Fn=Qe,$n=Be,Pt=et,ce=p,_e=_,re=g,Ze=k,nt=F,yt=y,$t=j,Et=T,Nt=H;if(V=65535&(D=N),be=D>>>16,Ee=65535&(O=w),oe=O>>>16,V+=65535&(D=(j>>>14|p<<18)^(j>>>18|p<<14)^(p>>>9|j<<23)),be+=D>>>16,Ee+=65535&(O=(p>>>14|j<<18)^(p>>>18|j<<14)^(j>>>9|p<<23)),oe+=O>>>16,V+=65535&(D=j&T^~j&H),be+=D>>>16,Ee+=65535&(O=p&_^~p&g),oe+=O>>>16,V+=65535&(D=Te[2*Ye+1]),be+=D>>>16,Ee+=65535&(O=Te[2*Ye]),oe+=O>>>16,be+=(D=ae[Ye%16])>>>16,Ee+=65535&(O=we[Ye%16]),oe+=O>>>16,Ee+=(be+=(V+=65535&D)>>>16)>>>16,V=65535&(D=Ue=65535&V|be<<16),be=D>>>16,Ee=65535&(O=ve=65535&Ee|(oe+=Ee>>>16)<<16),oe=O>>>16,V+=65535&(D=(S>>>28|Ce<<4)^(Ce>>>2|S<<30)^(Ce>>>7|S<<25)),be+=D>>>16,Ee+=65535&(O=(Ce>>>28|S<<4)^(S>>>2|Ce<<30)^(S>>>7|Ce<<25)),oe+=O>>>16,be+=(D=S&k^S&F^k&F)>>>16,Ee+=65535&(O=Ce&Qe^Ce&Be^Qe&Be),oe+=O>>>16,h=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,Qt=65535&V|be<<16,V=65535&(D=yt),be=D>>>16,Ee=65535&(O=Pt),oe=O>>>16,be+=(D=Ue)>>>16,Ee+=65535&(O=ve),oe+=O>>>16,Qe=Ce,Be=Fn,et=$n,p=Pt=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,_=ce,g=_e,w=re,Ce=h,k=S,F=Ze,y=nt,j=yt=65535&V|be<<16,T=$t,H=Et,N=Nt,S=Qt,Ye%16==15)for(var ft=0;ft<16;ft++)V=65535&(D=ae[ft]),be=D>>>16,Ee=65535&(O=we[ft]),oe=O>>>16,V+=65535&(D=ae[(ft+9)%16]),be+=D>>>16,Ee+=65535&(O=we[(ft+9)%16]),oe+=O>>>16,V+=65535&(D=((Ue=ae[(ft+1)%16])>>>1|(ve=we[(ft+1)%16])<<31)^(Ue>>>8|ve<<24)^(Ue>>>7|ve<<25)),be+=D>>>16,Ee+=65535&(O=(ve>>>1|Ue<<31)^(ve>>>8|Ue<<24)^ve>>>7),oe+=O>>>16,be+=(D=((Ue=ae[(ft+14)%16])>>>19|(ve=we[(ft+14)%16])<<13)^(ve>>>29|Ue<<3)^(Ue>>>6|ve<<26))>>>16,Ee+=65535&(O=(ve>>>19|Ue<<13)^(Ue>>>29|ve<<3)^ve>>>6),oe+=O>>>16,we[ft]=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,ae[ft]=65535&V|be<<16}V=65535&(D=S),be=D>>>16,Ee=65535&(O=Ce),oe=O>>>16,be+=(D=K[0])>>>16,Ee+=65535&(O=ie[0]),oe+=O>>>16,ie[0]=Ce=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[0]=S=65535&V|be<<16,V=65535&(D=k),be=D>>>16,Ee=65535&(O=Qe),oe=O>>>16,be+=(D=K[1])>>>16,Ee+=65535&(O=ie[1]),oe+=O>>>16,ie[1]=Qe=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[1]=k=65535&V|be<<16,V=65535&(D=F),be=D>>>16,Ee=65535&(O=Be),oe=O>>>16,be+=(D=K[2])>>>16,Ee+=65535&(O=ie[2]),oe+=O>>>16,ie[2]=Be=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[2]=F=65535&V|be<<16,V=65535&(D=y),be=D>>>16,Ee=65535&(O=et),oe=O>>>16,be+=(D=K[3])>>>16,Ee+=65535&(O=ie[3]),oe+=O>>>16,ie[3]=et=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[3]=y=65535&V|be<<16,V=65535&(D=j),be=D>>>16,Ee=65535&(O=p),oe=O>>>16,be+=(D=K[4])>>>16,Ee+=65535&(O=ie[4]),oe+=O>>>16,ie[4]=p=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[4]=j=65535&V|be<<16,V=65535&(D=T),be=D>>>16,Ee=65535&(O=_),oe=O>>>16,be+=(D=K[5])>>>16,Ee+=65535&(O=ie[5]),oe+=O>>>16,ie[5]=_=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[5]=T=65535&V|be<<16,V=65535&(D=H),be=D>>>16,Ee=65535&(O=g),oe=O>>>16,be+=(D=K[6])>>>16,Ee+=65535&(O=ie[6]),oe+=O>>>16,ie[6]=g=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[6]=H=65535&V|be<<16,V=65535&(D=N),be=D>>>16,Ee=65535&(O=w),oe=O>>>16,be+=(D=K[7])>>>16,Ee+=65535&(O=ie[7]),oe+=O>>>16,ie[7]=w=65535&(Ee+=(be+=(V+=65535&D)>>>16)>>>16)|(oe+=Ee>>>16)<<16,K[7]=N=65535&V|be<<16,Fe+=128,Ke-=128}return Fe}q.hash=function ne(we){var ae=new je;ae.update(we);var ie=ae.digest();return ae.clean(),ie}},7201:ke=>{"use strict";var q="%[a-f0-9]{2}",Y=new RegExp("("+q+")|([^%]+?)","gi"),b=new RegExp("("+q+")+","gi");function Pe(Z,ne){try{return[decodeURIComponent(Z.join(""))]}catch{}if(1===Z.length)return Z;var we=Z.slice(0,ne=ne||1),ae=Z.slice(ne);return Array.prototype.concat.call([],Pe(we),Pe(ae))}function je(Z){try{return decodeURIComponent(Z)}catch{for(var ne=Z.match(Y)||[],we=1;we<ne.length;we++)ne=(Z=Pe(ne,we).join("")).match(Y)||[];return Z}}ke.exports=function(Z){if("string"!=typeof Z)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof Z+"`");try{return Z=Z.replace(/\+/g," "),decodeURIComponent(Z)}catch{return function Te(Z){for(var ne={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},we=b.exec(Z);we;){try{ne[we[0]]=decodeURIComponent(we[0])}catch{var ae=je(we[0]);ae!==we[0]&&(ne[we[0]]=ae)}we=b.exec(Z)}ne["%C2"]="\ufffd";for(var ie=Object.keys(ne),K=0;K<ie.length;K++){var Re=ie[K];Z=Z.replace(new RegExp(Re,"g"),ne[Re])}return Z}(Z)}}},6643:ke=>{"use strict";ke.exports=function(q,Y){for(var b={},Pe=Object.keys(q),je=Array.isArray(Y),Te=0;Te<Pe.length;Te++){var Z=Pe[Te],ne=q[Z];(je?-1!==Y.indexOf(Z):Y(Z,ne,q))&&(b[Z]=ne)}return b}},1661:(ke,q,Y)=>{"use strict";const b=Y(8385),Pe=Y(7201),je=Y(7289),Te=Y(6643),ne=Symbol("encodeFragmentIdentifier");function ie(p){if("string"!=typeof p||1!==p.length)throw new TypeError("arrayFormatSeparator must be single character string")}function K(p,_){return _.encode?_.strict?b(p):encodeURIComponent(p):p}function Re(p,_){return _.decode?Pe(p):p}function Fe(p){return Array.isArray(p)?p.sort():"object"==typeof p?Fe(Object.keys(p)).sort((_,g)=>Number(_)-Number(g)).map(_=>p[_]):p}function Ke(p){const _=p.indexOf("#");return-1!==_&&(p=p.slice(0,_)),p}function Qe(p){const _=(p=Ke(p)).indexOf("?");return-1===_?"":p.slice(_+1)}function Be(p,_){return _.parseNumbers&&!Number.isNaN(Number(p))&&"string"==typeof p&&""!==p.trim()?p=Number(p):_.parseBooleans&&null!==p&&("true"===p.toLowerCase()||"false"===p.toLowerCase())&&(p="true"===p.toLowerCase()),p}function et(p,_){ie((_=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_)).arrayFormatSeparator);const g=function ae(p){let _;switch(p.arrayFormat){case"index":return(g,w,S)=>{_=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),_?(void 0===S[g]&&(S[g]={}),S[g][_[1]]=w):S[g]=w};case"bracket":return(g,w,S)=>{_=/(\[\])$/.exec(g),S[g=g.replace(/\[\]$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"colon-list-separator":return(g,w,S)=>{_=/(:list)$/.exec(g),S[g=g.replace(/:list$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"comma":case"separator":return(g,w,S)=>{const k="string"==typeof w&&w.includes(p.arrayFormatSeparator),F="string"==typeof w&&!k&&Re(w,p).includes(p.arrayFormatSeparator);w=F?Re(w,p):w;const y=k||F?w.split(p.arrayFormatSeparator).map(j=>Re(j,p)):null===w?w:Re(w,p);S[g]=y};case"bracket-separator":return(g,w,S)=>{const k=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!k)return void(S[g]=w&&Re(w,p));const F=null===w?[]:w.split(p.arrayFormatSeparator).map(y=>Re(y,p));S[g]=void 0!==S[g]?[].concat(S[g],F):F};default:return(g,w,S)=>{S[g]=void 0!==S[g]?[].concat(S[g],w):w}}}(_),w=Object.create(null);if("string"!=typeof p||!(p=p.trim().replace(/^[?#&]/,"")))return w;for(const S of p.split("&")){if(""===S)continue;let[k,F]=je(_.decode?S.replace(/\+/g," "):S,"=");F=void 0===F?null:["comma","separator","bracket-separator"].includes(_.arrayFormat)?F:Re(F,_),g(Re(k,_),F,w)}for(const S of Object.keys(w)){const k=w[S];if("object"==typeof k&&null!==k)for(const F of Object.keys(k))k[F]=Be(k[F],_);else w[S]=Be(k,_)}return!1===_.sort?w:(!0===_.sort?Object.keys(w).sort():Object.keys(w).sort(_.sort)).reduce((S,k)=>{const F=w[k];return S[k]=F&&"object"==typeof F&&!Array.isArray(F)?Fe(F):F,S},Object.create(null))}q.extract=Qe,q.parse=et,q.stringify=(p,_)=>{if(!p)return"";ie((_=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_)).arrayFormatSeparator);const g=F=>_.skipNull&&(p=>null==p)(p[F])||_.skipEmptyString&&""===p[F],w=function we(p){switch(p.arrayFormat){case"index":return _=>(g,w)=>{const S=g.length;return void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[",S,"]"].join("")]:[...g,[K(_,p),"[",K(S,p),"]=",K(w,p)].join("")]};case"bracket":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[]"].join("")]:[...g,[K(_,p),"[]=",K(w,p)].join("")];case"colon-list-separator":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),":list="].join("")]:[...g,[K(_,p),":list=",K(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const _="bracket-separator"===p.arrayFormat?"[]=":"=";return g=>(w,S)=>void 0===S||p.skipNull&&null===S||p.skipEmptyString&&""===S?w:(S=null===S?"":S,0===w.length?[[K(g,p),_,K(S,p)].join("")]:[[w,K(S,p)].join(p.arrayFormatSeparator)])}default:return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,K(_,p)]:[...g,[K(_,p),"=",K(w,p)].join("")]}}(_),S={};for(const F of Object.keys(p))g(F)||(S[F]=p[F]);const k=Object.keys(S);return!1!==_.sort&&k.sort(_.sort),k.map(F=>{const y=p[F];return void 0===y?"":null===y?K(F,_):Array.isArray(y)?0===y.length&&"bracket-separator"===_.arrayFormat?K(F,_)+"[]":y.reduce(w(F),[]).join("&"):K(F,_)+"="+K(y,_)}).filter(F=>F.length>0).join("&")},q.parseUrl=(p,_)=>{_=Object.assign({decode:!0},_);const[g,w]=je(p,"#");return Object.assign({url:g.split("?")[0]||"",query:et(Qe(p),_)},_&&_.parseFragmentIdentifier&&w?{fragmentIdentifier:Re(w,_)}:{})},q.stringifyUrl=(p,_)=>{_=Object.assign({encode:!0,strict:!0,[ne]:!0},_);const g=Ke(p.url).split("?")[0]||"",w=q.extract(p.url),S=q.parse(w,{sort:!1}),k=Object.assign(S,p.query);let F=q.stringify(k,_);F&&(F=`?${F}`);let y=function Ce(p){let _="";const g=p.indexOf("#");return-1!==g&&(_=p.slice(g)),_}(p.url);return p.fragmentIdentifier&&(y=`#${_[ne]?K(p.fragmentIdentifier,_):p.fragmentIdentifier}`),`${g}${F}${y}`},q.pick=(p,_,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[ne]:!1},g);const{url:w,query:S,fragmentIdentifier:k}=q.parseUrl(p,g);return q.stringifyUrl({url:w,query:Te(S,_),fragmentIdentifier:k},g)},q.exclude=(p,_,g)=>{const w=Array.isArray(_)?S=>!_.includes(S):(S,k)=>!_(S,k);return q.pick(p,w,g)}},7289:ke=>{"use strict";ke.exports=(q,Y)=>{if("string"!=typeof q||"string"!=typeof Y)throw new TypeError("Expected the arguments to be of type `string`");if(""===Y)return[q];const b=q.indexOf(Y);return-1===b?[q]:[q.slice(0,b),q.slice(b+Y.length)]}},7263:(ke,q)=>{"use strict";function Y(){return(null==global?void 0:global.crypto)||(null==global?void 0:global.msCrypto)||{}}function b(){const je=Y();return je.subtle||je.webkitSubtle}Object.defineProperty(q,"__esModule",{value:!0}),q.isBrowserCryptoAvailable=q.getSubtleCrypto=q.getBrowerCrypto=void 0,q.getBrowerCrypto=Y,q.getSubtleCrypto=b,q.isBrowserCryptoAvailable=function Pe(){return!!Y()&&!!b()}},4574:(ke,q)=>{"use strict";function Y(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function b(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Object.defineProperty(q,"__esModule",{value:!0}),q.isBrowser=q.isNode=q.isReactNative=void 0,q.isReactNative=Y,q.isNode=b,q.isBrowser=function Pe(){return!Y()&&!b()}},2299:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});const b=Y(4308);b.__exportStar(Y(7263),q),b.__exportStar(Y(4574),q)},9234:(ke,q,Y)=>{"use strict";Y.r(q),Y.d(q,{EthereumProvider:()=>KI,OPTIONAL_EVENTS:()=>Bp,OPTIONAL_METHODS:()=>Hp,REQUIRED_EVENTS:()=>Da,REQUIRED_METHODS:()=>ja,default:()=>$a});var b=Y(5861),Pe=Y(2016),je=Y.n(Pe),Te=Y(9026),Z=Y(1028),ne=Y(5465),we=Y(1033),ae=Y(8467),ie=Y(3544),K=Y(5409),Re=Y(439),Fe=Y(6534),Ce=(Y(6453),Y(1634));const na={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Un(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))}const $y=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Uy=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ly=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function My(r,e){if(!("__proto__"===r||"constructor"===r&&e&&"object"==typeof e&&"prototype"in e))return e;!function ky(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}(r)}function oo(r,e={}){if("string"!=typeof r)return r;const t=r.trim();if('"'===r[0]&&'"'===r.at(-1)&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){const o=t.toLowerCase();if("true"===o)return!0;if("false"===o)return!1;if("undefined"===o)return;if("null"===o)return null;if("nan"===o)return Number.NaN;if("infinity"===o)return Number.POSITIVE_INFINITY;if("-infinity"===o)return Number.NEGATIVE_INFINITY}if(!Ly.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if($y.test(r)||Uy.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,My)}return JSON.parse(r)}catch(o){if(e.strict)throw o;return r}}function br(r,...e){try{return function Ky(r){return r&&"function"==typeof r.then?r:Promise.resolve(r)}(r(...e))}catch(t){return Promise.reject(t)}}function ia(r){if(function qy(r){const e=typeof r;return null===r||"object"!==e&&"function"!==e}(r))return String(r);if(function zy(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}(r)||Array.isArray(r))return JSON.stringify(r);if("function"==typeof r.toJSON)return ia(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function td(){if(void 0===typeof Buffer)throw new TypeError("[unstorage] Buffer is not supported!")}const Gc="base64:";function Hr(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Vy(...r){return Hr(r.join(":"))}function ao(r){return(r=Hr(r))?r+":":""}const Wy=()=>{const r=new Map;return{name:"memory",options:{},hasItem:e=>r.has(e),getItem:e=>r.get(e)??null,getItemRaw:e=>r.get(e)??null,setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys:()=>Array.from(r.keys()),clear(){r.clear()},dispose(){r.clear()}}};function rd(r,e,t){return r.watch?r.watch((o,a)=>e(o,t+a)):()=>{}}function nd(r){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,b.Z)(function*(r){"function"==typeof r.dispose&&(yield br(r.dispose))})).apply(this,arguments)}function Br(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function id(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const o=Br(t);return(a,l)=>o.then(f=>l(f.transaction(e,a).objectStore(e)))}let Yc;function Ln(){return Yc||(Yc=id("keyval-store","keyval")),Yc}function sd(r,e=Ln()){return e("readonly",t=>Br(t.get(r)))}const tm=r=>JSON.stringify(r,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),rm=r=>{const t=r.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(o,a)=>"string"==typeof a&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function co(r){if("string"!=typeof r)throw new Error("Cannot safe json parse value of type "+typeof r);try{return rm(r)}catch{return r}}function Wi(r){return"string"==typeof r?r:tm(r)||""}var im=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=a=>e+a;let o;return r.dbName&&r.storeName&&(o=id(r.dbName,r.storeName)),{name:"idb-keyval",options:r,hasItem:a=>(0,b.Z)(function*(){return!(typeof(yield sd(t(a),o))>"u")})(),getItem:a=>(0,b.Z)(function*(){return(yield sd(t(a),o))??null})(),setItem:(a,l)=>function Qy(r,e,t=Ln()){return t("readwrite",o=>(o.put(e,r),Br(o.transaction)))}(t(a),l,o),removeItem:a=>function Yy(r,e=Ln()){return e("readwrite",t=>(t.delete(r),Br(t.transaction)))}(t(a),o),getKeys:()=>function em(r=Ln()){return r("readonly",e=>{if(e.getAllKeys)return Br(e.getAllKeys());const t=[];return function Xc(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Br(r.transaction)}(e,o=>t.push(o.key)).then(()=>t)})}(o),clear:()=>function Xy(r=Ln()){return r("readwrite",e=>(e.clear(),Br(e.transaction)))}(o)}};class am{constructor(){this.indexedDb=function Jy(r={}){const e={mounts:{"":r.driver||Wy()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=m=>{for(const A of e.mountpoints)if(m.startsWith(A))return{base:A,relativeKey:m.slice(A.length),driver:e.mounts[A]};return{base:"",relativeKey:m,driver:e.mounts[""]}},o=(m,A)=>e.mountpoints.filter($=>$.startsWith(m)||A&&m.startsWith($)).map($=>({relativeBase:m.length>$.length?m.slice($.length):void 0,mountpoint:$,driver:e.mounts[$]})),a=(m,A)=>{if(e.watching){A=Hr(A);for(const $ of e.watchListeners)$(m,A)}},l=function(){var m=(0,b.Z)(function*(){if(!e.watching){e.watching=!0;for(const A in e.mounts)e.unwatch[A]=yield rd(e.mounts[A],a,A)}});return function(){return m.apply(this,arguments)}}(),f=function(){var m=(0,b.Z)(function*(){if(e.watching){for(const A in e.unwatch)yield e.unwatch[A]();e.unwatch={},e.watching=!1}});return function(){return m.apply(this,arguments)}}(),x=(m,A,$)=>{const te=new Map,xe=ee=>{let Oe=te.get(ee.base);return Oe||(Oe={driver:ee.driver,base:ee.base,items:[]},te.set(ee.base,Oe)),Oe};for(const ee of m){const Oe="string"==typeof ee,De=Hr(Oe?ee:ee.key),at=Oe?void 0:ee.value,Ot=Oe||!ee.options?A:{...A,...ee.options},dt=t(De);xe(dt).items.push({key:De,value:at,relativeKey:dt.relativeKey,options:Ot})}return Promise.all([...te.values()].map(ee=>$(ee))).then(ee=>ee.flat())},C={hasItem(m,A={}){m=Hr(m);const{relativeKey:$,driver:te}=t(m);return br(te.hasItem,$,A)},getItem(m,A={}){m=Hr(m);const{relativeKey:$,driver:te}=t(m);return br(te.getItem,$,A).then(xe=>oo(xe))},getItems:(m,A)=>x(m,A,$=>$.driver.getItems?br($.driver.getItems,$.items.map(te=>({key:te.relativeKey,options:te.options})),A).then(te=>te.map(xe=>({key:Vy($.base,xe.key),value:oo(xe.value)}))):Promise.all($.items.map(te=>br($.driver.getItem,te.relativeKey,te.options).then(xe=>({key:te.key,value:oo(xe)}))))),getItemRaw(m,A={}){m=Hr(m);const{relativeKey:$,driver:te}=t(m);return te.getItemRaw?br(te.getItemRaw,$,A):br(te.getItem,$,A).then(xe=>function Hy(r){return"string"==typeof r&&r.startsWith(Gc)?(td(),Buffer.from(r.slice(7),"base64")):r}(xe))},setItem:(m,A,$={})=>(0,b.Z)(function*(){if(void 0===A)return C.removeItem(m);m=Hr(m);const{relativeKey:te,driver:xe}=t(m);xe.setItem&&(yield br(xe.setItem,te,ia(A),$),xe.watch||a("update",m))})(),setItems:(m,A)=>(0,b.Z)(function*(){yield x(m,A,function(){var $=(0,b.Z)(function*(te){te.driver.setItems&&(yield br(te.driver.setItems,te.items.map(xe=>({key:xe.relativeKey,value:ia(xe.value),options:xe.options})),A)),te.driver.setItem&&(yield Promise.all(te.items.map(xe=>br(te.driver.setItem,xe.relativeKey,ia(xe.value),xe.options))))});return function(te){return $.apply(this,arguments)}}())})(),setItemRaw:(m,A,$={})=>(0,b.Z)(function*(){if(void 0===A)return C.removeItem(m,$);m=Hr(m);const{relativeKey:te,driver:xe}=t(m);if(xe.setItemRaw)yield br(xe.setItemRaw,te,A,$);else{if(!xe.setItem)return;yield br(xe.setItem,te,function Zy(r){if("string"==typeof r)return r;td();const e=Buffer.from(r).toString("base64");return Gc+e}(A),$)}xe.watch||a("update",m)})(),removeItem:(m,A={})=>(0,b.Z)(function*(){"boolean"==typeof A&&(A={removeMeta:A}),m=Hr(m);const{relativeKey:$,driver:te}=t(m);te.removeItem&&(yield br(te.removeItem,$,A),(A.removeMeta||A.removeMata)&&(yield br(te.removeItem,$+"$",A)),te.watch||a("remove",m))})(),getMeta:(m,A={})=>(0,b.Z)(function*(){"boolean"==typeof A&&(A={nativeOnly:A}),m=Hr(m);const{relativeKey:$,driver:te}=t(m),xe=Object.create(null);if(te.getMeta&&Object.assign(xe,yield br(te.getMeta,$,A)),!A.nativeOnly){const ee=yield br(te.getItem,$+"$",A).then(Oe=>oo(Oe));ee&&"object"==typeof ee&&("string"==typeof ee.atime&&(ee.atime=new Date(ee.atime)),"string"==typeof ee.mtime&&(ee.mtime=new Date(ee.mtime)),Object.assign(xe,ee))}return xe})(),setMeta(m,A,$={}){return this.setItem(m+"$",A,$)},removeMeta(m,A={}){return this.removeItem(m+"$",A)},getKeys:(m,A={})=>(0,b.Z)(function*(){m=ao(m);const $=o(m,!0);let te=[];const xe=[];for(const ee of $){const De=(yield br(ee.driver.getKeys,ee.relativeBase,A)).map(at=>ee.mountpoint+Hr(at)).filter(at=>!te.some(Ot=>at.startsWith(Ot)));xe.push(...De),te=[ee.mountpoint,...te.filter(at=>!at.startsWith(ee.mountpoint))]}return xe.filter(m?ee=>ee.startsWith(m)&&!ee.endsWith("$"):ee=>!ee.endsWith("$"))})(),clear:(m,A={})=>(0,b.Z)(function*(){m=ao(m),yield Promise.all(o(m,!1).map(function(){var $=(0,b.Z)(function*(te){if(te.driver.clear)return br(te.driver.clear,te.relativeBase,A);if(te.driver.removeItem){const xe=yield te.driver.getKeys(te.relativeBase||"",A);return Promise.all(xe.map(ee=>te.driver.removeItem(ee,A)))}});return function(te){return $.apply(this,arguments)}}()))})(),dispose:()=>(0,b.Z)(function*(){yield Promise.all(Object.values(e.mounts).map(m=>nd(m)))})(),watch:m=>(0,b.Z)(function*(){return yield l(),e.watchListeners.push(m),(0,b.Z)(function*(){e.watchListeners=e.watchListeners.filter(A=>A!==m),0===e.watchListeners.length&&(yield f())})})(),unwatch:()=>(0,b.Z)(function*(){e.watchListeners=[],yield f()})(),mount(m,A){if((m=ao(m))&&e.mounts[m])throw new Error(`already mounted at ${m}`);return m&&(e.mountpoints.push(m),e.mountpoints.sort(($,te)=>te.length-$.length)),e.mounts[m]=A,e.watching&&Promise.resolve(rd(A,a,m)).then($=>{e.unwatch[m]=$}).catch(console.error),C},unmount:(m,A=!0)=>(0,b.Z)(function*(){(m=ao(m))&&e.mounts[m]&&(e.watching&&m in e.unwatch&&(e.unwatch[m](),delete e.unwatch[m]),A&&(yield nd(e.mounts[m])),e.mountpoints=e.mountpoints.filter($=>$!==m),delete e.mounts[m])})(),getMount(m=""){m=Hr(m)+":";const A=t(m);return{driver:A.driver,base:A.base}},getMounts:(m="",A={})=>(m=Hr(m),o(m,A.parents).map(te=>({driver:te.driver,base:te.mountpoint})))};return C}({driver:im({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}getKeys(){var e=this;return(0,b.Z)(function*(){return e.indexedDb.getKeys()})()}getEntries(){var e=this;return(0,b.Z)(function*(){return(yield e.indexedDb.getItems(yield e.indexedDb.getKeys())).map(t=>[t.key,t.value])})()}getItem(e){var t=this;return(0,b.Z)(function*(){const o=yield t.indexedDb.getItem(e);if(null!==o)return o})()}setItem(e,t){var o=this;return(0,b.Z)(function*(){yield o.indexedDb.setItem(e,Wi(t))})()}removeItem(e){var t=this;return(0,b.Z)(function*(){yield t.indexedDb.removeItem(e)})()}}var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sa={exports:{}};function cm(r){var e;return[r[0],co(null!=(e=r[1])?e:"")]}!function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,o){this[t]=String(o)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(o){t[o]=void 0,delete t[o]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),sa.exports=typeof eu<"u"&&eu.localStorage?eu.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new e}();class um{constructor(){this.localStorage=sa.exports}getKeys(){var e=this;return(0,b.Z)(function*(){return Object.keys(e.localStorage)})()}getEntries(){var e=this;return(0,b.Z)(function*(){return Object.entries(e.localStorage).map(cm)})()}getItem(e){var t=this;return(0,b.Z)(function*(){const o=t.localStorage.getItem(e);if(null!==o)return co(o)})()}setItem(e,t){var o=this;return(0,b.Z)(function*(){o.localStorage.setItem(e,Wi(t))})()}removeItem(e){var t=this;return(0,b.Z)(function*(){t.localStorage.removeItem(e)})()}}const fm=function(){var r=(0,b.Z)(function*(e,t,o){const a="wc_storage_version",l=yield t.getItem(a);if(l&&l>=1)return void o(t);const f=yield e.getKeys();if(!f.length)return void o(t);const x=[];for(;f.length;){const C=f.shift();if(!C)continue;const m=C.toLowerCase();if(m.includes("wc@")||m.includes("walletconnect")||m.includes("wc_")||m.includes("wallet_connect")){const A=yield e.getItem(C);yield t.setItem(C,A),x.push(C)}}yield t.setItem(a,1),o(t),dm(e,x)});return function(t,o,a){return r.apply(this,arguments)}}(),dm=function(){var r=(0,b.Z)(function*(e,t){t.length&&t.forEach(function(){var o=(0,b.Z)(function*(a){yield e.removeItem(a)});return function(a){return o.apply(this,arguments)}}())});return function(t,o){return r.apply(this,arguments)}}();class hm{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new um;this.storage=e;try{const t=new am;fm(e,t,this.setInitialized)}catch{this.initialized=!0}}getKeys(){var e=this;return(0,b.Z)(function*(){return yield e.initialize(),e.storage.getKeys()})()}getEntries(){var e=this;return(0,b.Z)(function*(){return yield e.initialize(),e.storage.getEntries()})()}getItem(e){var t=this;return(0,b.Z)(function*(){return yield t.initialize(),t.storage.getItem(e)})()}setItem(e,t){var o=this;return(0,b.Z)(function*(){return yield o.initialize(),o.storage.setItem(e,t)})()}removeItem(e){var t=this;return(0,b.Z)(function*(){return yield t.initialize(),t.storage.removeItem(e)})()}initialize(){var e=this;return(0,b.Z)(function*(){e.initialized||(yield new Promise(t=>{const o=setInterval(()=>{e.initialized&&(clearInterval(o),t())},20)}))})()}}var uo=Y(986),mt=Y(2997),bs=Y(2108);class pm extends bs.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class _m extends bs.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class gm{constructor(e,t){this.logger=e,this.core=t}}class ym extends bs.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class mm extends bs.q{constructor(e){super()}}class vm{constructor(e,t,o,a){this.core=e,this.logger=t,this.name=o}}class bm extends bs.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class wm extends bs.q{constructor(e,t){super(),this.core=e,this.logger=t}}class Em{constructor(e,t){this.projectId=e,this.logger=t}}class xm{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class Im{constructor(e){this.client=e}}var ad=Y(5972);const ud="base64url",Pm="utf8",Rm=":",Am="did",Tm="key",ld="base58btc",Cm="z",jm="K36";var Fm=Y(1376),tu=Y(878),ru=Y(2269);function aa(r){return(0,tu.B)((0,ru.m)(Wi(r),Pm),ud)}function fd(r){const e=(0,ru.m)(jm,ld),t=Cm+(0,tu.B)((0,Fm.z)([e,r]),ld);return[Am,Tm,t].join(Rm)}function $m(r){return(0,tu.B)(r,ud)}function dd(r=(0,ne.randomBytes)(32)){return ad._w(r)}function nu(){return(nu=(0,b.Z)(function*(r,e,t,o,a=(0,K.fromMiliseconds)(Date.now())){const l={alg:"EdDSA",typ:"JWT"},C={iss:fd(o.publicKey),sub:r,aud:e,iat:a,exp:a+t},m=function Lm(r){return(0,ru.m)([aa(r.header),aa(r.payload)].join("."),"utf8")}({header:l,payload:C});return function Mm(r){return[aa(r.header),aa(r.payload),$m(r.signature)].join(".")}({header:l,payload:C,signature:ad.Xx(o.secretKey,m)})})).apply(this,arguments)}Y(2768);var hd=function(r,e,t){if(t||2===arguments.length)for(var l,o=0,a=e.length;o<a;o++)(l||!(o in e))&&(l||(l=Array.prototype.slice.call(e,0,o)),l[o]=e[o]);return r.concat(l||Array.prototype.slice.call(e))},Km=function r(e,t,o){this.name=e,this.version=t,this.os=o,this.type="browser"},qm=function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},zm=function r(e,t,o,a){this.name=e,this.version=t,this.os=o,this.bot=a,this.type="bot-device"},Zm=function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Hm=function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Vm=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,pd=3,Gm=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],_d=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yd(r){var e=function gd(r){return""!==r&&Gm.reduce(function(e,t){var o=t[0];if(e)return e;var l=t[1].exec(r);return!!l&&[o,l]},!1)}(r);if(!e)return null;var t=e[0],o=e[1];if("searchbot"===t)return new Zm;var a=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);a?a.length<pd&&(a=hd(hd([],a,!0),function Ym(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}(pd-a.length),!0)):a=[];var l=a.join("."),f=function Jm(r){for(var e=0,t=_d.length;e<t;e++){var o=_d[e],a=o[0];if(o[1].exec(r))return a}return null}(r),x=Vm.exec(r);return x&&x[1]?new zm(t,l,f,x[1]):new Km(t,l,f)}var ca=Y(1661);const bd="base10",Ur="base16",au="base64pad",cu="utf8";function fu(){const r=(0,ne.randomBytes)(32);return(0,ie.BB)(r,Ur)}function du(r){const e=(0,we.vp)((0,ie.mL)(r,cu));return(0,ie.BB)(e,Ur)}function lo(r){return Number((0,ie.BB)(r,bd))}function la(r){const e=(0,ie.mL)(r,au),t=e.slice(0,1);if(1===lo(t)){const x=33,C=x+12,m=e.slice(1,x),A=e.slice(x,C);return{type:t,sealed:e.slice(C),iv:A,senderPublicKey:m}}const l=e.slice(1,13);return{type:t,sealed:e.slice(13),iv:l}}function xd(r){const e=r?.type||0;if(1===e){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Id(r){return 1===r.type&&"string"==typeof r.senderPublicKey&&"string"==typeof r.receiverPublicKey}var gv=Object.defineProperty,Od=Object.getOwnPropertySymbols,yv=Object.prototype.hasOwnProperty,mv=Object.prototype.propertyIsEnumerable,Sd=(r,e,t)=>e in r?gv(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pd=(r,e)=>{for(var t in e||(e={}))yv.call(e,t)&&Sd(r,t,e[t]);if(Od)for(var t of Od(e))mv.call(e,t)&&Sd(r,t,e[t]);return r};const vv="ReactNative",Vr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},wv="js";function pu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Es(){return!(0,Re.getDocument)()&&!!(0,Re.getNavigator)()&&navigator.product===vv}function fo(){return!pu()&&!!(0,Re.getNavigator)()}function xs(){return Es()?Vr.reactNative:pu()?Vr.node:fo()?Vr.browser:Vr.unknown}function Sv(r,e,t){const o=function Iv(){if(xs()===Vr.reactNative&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"){const{OS:t,Version:o}=global.Platform;return[t,o].join("-")}const r=function Wm(r){return r?yd(r):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new Hm:typeof navigator<"u"?yd(navigator.userAgent):function Qm(){return typeof process<"u"&&process.version?new qm(process.version.slice(1)):null}()}();if(null===r)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return"browser"===r.type?[e,r.name,r.version].join("-"):[e,r.version].join("-")}(),a=function Ov(){var r;const e=xs();return e===Vr.browser?[e,(null==(r=(0,Re.getLocation)())?void 0:r.host)||"unknown"].join(":"):e}();return[[r,e].join("-"),[wv,t].join("-"),o,a].join("/")}function Rd(r){return Object.fromEntries(r.entries())}function Ad(r){return new Map(Object.entries(r))}function ho(r,e,t){return new Promise(function(){var o=(0,b.Z)(function*(a,l){const f=setTimeout(()=>l(new Error(t)),e);try{a(yield r)}catch(x){l(x)}clearTimeout(f)});return function(a,l){return o.apply(this,arguments)}}())}function Td(r,e){if("string"==typeof e&&e.startsWith(`${r}:`))return e;if("topic"===r.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===r.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function fa(r,e){return(0,K.fromMiliseconds)((e||Date.now())+(0,K.toMiliseconds)(r))}function Cd(r){return Date.now()>=(0,K.toMiliseconds)(r)}function _u(r,e){return`${r}${e?`:${e}`:""}`}function mu(r){return r?.relay||{protocol:"irn"}}function da(r){const e=Ce.RELAY_JSONRPC[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var $v=Object.defineProperty,jd=Object.getOwnPropertySymbols,Uv=Object.prototype.hasOwnProperty,Lv=Object.prototype.propertyIsEnumerable,Dd=(r,e,t)=>e in r?$v(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;function kv(r,e="-"){const t={},o="relay"+e;return Object.keys(r).forEach(a=>{if(a.startsWith(o)){const l=a.replace(o,"");t[l]=r[a]}}),t}function Fd(r){const e=(r=(r=r.includes("wc://")?r.replace("wc://",""):r).includes("wc:")?r.replace("wc:",""):r).indexOf(":"),t=-1!==r.indexOf("?")?r.indexOf("?"):void 0,o=r.substring(0,e),a=r.substring(e+1,t).split("@"),l=typeof t<"u"?r.substring(t):"",f=ca.parse(l);return{protocol:o,topic:Kv(a[0]),version:parseInt(a[1],10),symKey:f.symKey,relay:kv(f)}}function Kv(r){return r.startsWith("//")?r.substring(2):r}const t0={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},r0={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pt(r,e){const{message:t,code:o}=r0[r];return{message:e?`${t} ${e}`:t,code:o}}function Mn(r,e){const{message:t,code:o}=t0[r];return{message:e?`${t} ${e}`:t,code:o}}function ei(r){return typeof r>"u"}function un(r,e){return!(!e||!ei(r))||"string"==typeof r&&!!r.trim().length}function wu(r){return typeof r<"u"&&null!==typeof r}function zd(){const r=xs();return new Promise(e=>{switch(r){case Vr.browser:e(function y0(){return fo()&&navigator?.onLine}());break;case Vr.reactNative:e(function m0(){return Eu.apply(this,arguments)}());break;default:e(!0)}})}function Eu(){return(Eu=(0,b.Z)(function*(){return!(Es()&&typeof global<"u"&&null!=global&&global.NetInfo)||(yield null==global?void 0:global.NetInfo.fetch())?.isConnected})).apply(this,arguments)}const Zd="INTERNAL_ERROR",Iu="SERVER_ERROR",P0=[-32700,-32600,-32601,-32602,-32603],_o={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[Zd]:{code:-32603,message:"Internal error"},[Iu]:{code:-32e3,message:"Server error"}},Hd=Iu;function Vd(r){return Object.keys(_o).includes(r)?_o[r]:_o[Hd]}function Wd(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var R0=Y(2299);function Ou(r=3){return Date.now()*Math.pow(10,r)+Math.floor(Math.random()*Math.pow(10,r))}function Jd(r=6){return BigInt(Ou(r))}function Os(r,e,t){return{id:t||Ou(),jsonrpc:"2.0",method:r,params:e}}function Su(r,e){return{id:r,jsonrpc:"2.0",result:e}}function pa(r,e,t){return{id:r,jsonrpc:"2.0",error:A0(e,t)}}function A0(r,e){return typeof r>"u"?Vd(Zd):("string"==typeof r&&(r=Object.assign(Object.assign({},Vd(Iu)),{message:r})),typeof e<"u"&&(r.data=e),function Bd(r){return P0.includes(r)}(r.code)&&(r=function Gd(r){return Object.values(_o).find(t=>t.code===r)||_o[Hd]}(r.code)),r)}class T0{}class C0 extends T0{constructor(){super()}}class j0 extends C0{constructor(e){super()}}function Qd(r,e){const t=function $0(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(r);return!(typeof t>"u")&&new RegExp(e).test(t)}function Yd(r){return Qd(r,"^https?:")}function Xd(r){return Qd(r,"^wss?:")}function eh(r){return"object"==typeof r&&"id"in r&&"jsonrpc"in r&&"2.0"===r.jsonrpc}function Pu(r){return eh(r)&&"method"in r}function _a(r){return eh(r)&&(hi(r)||kn(r))}function hi(r){return"result"in r}function kn(r){return"error"in r}class pi extends j0{constructor(e){super(e),this.events=new Pe.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(e=this.connection){var t=this;return(0,b.Z)(function*(){yield t.open(e)})()}disconnect(){var e=this;return(0,b.Z)(function*(){yield e.close()})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(e,t){var o=this;return(0,b.Z)(function*(){return o.requestStrict(Os(e.method,e.params||[],e.id||Jd().toString()),t)})()}requestStrict(e,t){var o=this;return(0,b.Z)(function*(){return new Promise(function(){var a=(0,b.Z)(function*(l,f){if(!o.connection.connected)try{yield o.open()}catch(x){f(x)}o.events.on(`${e.id}`,x=>{kn(x)?f(x.error):l(x.result)});try{yield o.connection.send(e,t)}catch(x){f(x)}});return function(l,f){return a.apply(this,arguments)}}())})()}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),_a(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(e=this.connection){var t=this;return(0,b.Z)(function*(){t.connection===e&&t.connection.connected||(t.connection.connected&&t.close(),"string"==typeof e&&(yield t.connection.open(e),e=t.connection),t.connection=t.setConnection(e),yield t.connection.open(),t.registerEventListeners(),t.events.emit("connect"))})()}close(){var e=this;return(0,b.Z)(function*(){yield e.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const th=r=>r.split("?")[0],k0=typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:Y(3569);class K0{constructor(e){if(this.url=e,this.events=new Pe.EventEmitter,this.registering=!1,!Xd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return(0,b.Z)(function*(){yield t.register(e)})()}close(){var e=this;return(0,b.Z)(function*(){return new Promise((t,o)=>{typeof e.socket>"u"?o(new Error("Connection already closed")):(e.socket.onclose=a=>{e.onClose(a),t()},e.socket.close())})})()}send(e){var t=this;return(0,b.Z)(function*(){typeof t.socket>"u"&&(t.socket=yield t.register());try{t.socket.send(Wi(e))}catch(o){t.onError(e.id,o)}})()}register(e=this.url){if(!Xd(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((o,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,o)=>{const a=new URLSearchParams(e).get("origin"),l=(0,R0.isReactNative)()?{headers:{origin:a}}:{rejectUnauthorized:(r=e,!new RegExp("wss?://localhost(:d{2,5})?").test(r))},f=new k0(e,[],l);var r;typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?f.onerror=x=>{o(this.emitError(x.error))}:f.on("error",x=>{o(this.emitError(x))}),f.onopen=()=>{this.onOpen(f),t(f)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?co(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const o=this.parseError(t),l=pa(e,o.message||o.toString());this.events.emit("payload",l)}parseError(e,t=this.url){return Wd(e,th(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${th(this.url)}`));return this.events.emit("register_error",t),t}}var q0=Y(2650),z0=Y.n(q0),B0=function Z0(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),o=0;o<t.length;o++)t[o]=255;for(var a=0;a<r.length;a++){var l=r.charAt(a),f=l.charCodeAt(0);if(255!==t[f])throw new TypeError(l+" is ambiguous");t[f]=a}var x=r.length,C=r.charAt(0),m=Math.log(x)/Math.log(256),A=Math.log(256)/Math.log(x);function te(ee){if("string"!=typeof ee)throw new TypeError("Expected String");if(0===ee.length)return new Uint8Array;var Oe=0;if(" "!==ee[Oe]){for(var De=0,at=0;ee[Oe]===C;)De++,Oe++;for(var Ot=(ee.length-Oe)*m+1>>>0,dt=new Uint8Array(Ot);ee[Oe];){var He=t[ee.charCodeAt(Oe)];if(255===He)return;for(var ze=0,rt=Ot-1;(0!==He||ze<at)&&-1!==rt;rt--,ze++)dt[rt]=(He+=x*dt[rt]>>>0)%256>>>0,He=He/256>>>0;if(0!==He)throw new Error("Non-zero carry");at=ze,Oe++}if(" "!==ee[Oe]){for(var bt=Ot-at;bt!==Ot&&0===dt[bt];)bt++;for(var wr=new Uint8Array(De+(Ot-bt)),$i=De;bt!==Ot;)wr[$i++]=dt[bt++];return wr}}}return{encode:function $(ee){if(ee instanceof Uint8Array||(ArrayBuffer.isView(ee)?ee=new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength):Array.isArray(ee)&&(ee=Uint8Array.from(ee))),!(ee instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===ee.length)return"";for(var Oe=0,De=0,at=0,Ot=ee.length;at!==Ot&&0===ee[at];)at++,Oe++;for(var dt=(Ot-at)*A+1>>>0,He=new Uint8Array(dt);at!==Ot;){for(var ze=ee[at],rt=0,bt=dt-1;(0!==ze||rt<De)&&-1!==bt;bt--,rt++)He[bt]=(ze+=256*He[bt]>>>0)%x>>>0,ze=ze/x>>>0;if(0!==ze)throw new Error("Non-zero carry");De=rt,at++}for(var wr=dt-De;wr!==dt&&0===He[wr];)wr++;for(var $i=C.repeat(Oe);wr<dt;++wr)$i+=r.charAt(He[wr]);return $i},decodeUnsafe:te,decode:function xe(ee){var Oe=te(ee);if(Oe)return Oe;throw new Error(`Non-${e} character`)}}};const nh=r=>{if(r instanceof Uint8Array&&"Uint8Array"===r.constructor.name)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};class W0{constructor(e,t,o){this.name=e,this.prefix=t,this.baseEncode=o}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class J0{constructor(e,t,o){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=o}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ih(this,e)}}class Q0{constructor(e){this.decoders=e}or(e){return ih(this,e)}decode(e){const o=this.decoders[e[0]];if(o)return o.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ih=(r,e)=>new Q0({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Y0{constructor(e,t,o,a){this.name=e,this.prefix=t,this.baseEncode=o,this.baseDecode=a,this.encoder=new W0(e,t,o),this.decoder=new J0(e,t,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ga=({name:r,prefix:e,encode:t,decode:o})=>new Y0(r,e,t,o),go=({prefix:r,name:e,alphabet:t})=>{const{encode:o,decode:a}=B0(t,e);return ga({prefix:r,name:e,encode:o,decode:l=>nh(a(l))})},Sr=({name:r,prefix:e,bitsPerChar:t,alphabet:o})=>ga({prefix:e,name:r,encode:a=>((r,e,t)=>{const o="="===e[e.length-1],a=(1<<t)-1;let l="",f=0,x=0;for(let C=0;C<r.length;++C)for(x=x<<8|r[C],f+=8;f>t;)f-=t,l+=e[a&x>>f];if(f&&(l+=e[a&x<<t-f]),o)for(;l.length*t&7;)l+="=";return l})(a,o,t),decode:a=>((r,e,t,o)=>{const a={};for(let A=0;A<e.length;++A)a[e[A]]=A;let l=r.length;for(;"="===r[l-1];)--l;const f=new Uint8Array(l*t/8|0);let x=0,C=0,m=0;for(let A=0;A<l;++A){const $=a[r[A]];if(void 0===$)throw new SyntaxError(`Non-${o} character`);C=C<<t|$,x+=t,x>=8&&(x-=8,f[m++]=255&C>>x)}if(x>=t||255&C<<8-x)throw new SyntaxError("Unexpected end of data");return f})(a,o,t,r)}),tb=ga({prefix:"\0",name:"identity",encode:r=>(r=>(new TextDecoder).decode(r))(r),decode:r=>(r=>(new TextEncoder).encode(r))(r)});var rb=Object.freeze({__proto__:null,identity:tb});const nb=Sr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ib=Object.freeze({__proto__:null,base2:nb});const sb=Sr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ob=Object.freeze({__proto__:null,base8:sb});const ab=go({prefix:"9",name:"base10",alphabet:"0123456789"});var cb=Object.freeze({__proto__:null,base10:ab});const ub=Sr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lb=Sr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var fb=Object.freeze({__proto__:null,base16:ub,base16upper:lb});const db=Sr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hb=Sr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pb=Sr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_b=Sr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gb=Sr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yb=Sr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mb=Sr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vb=Sr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bb=Sr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var wb=Object.freeze({__proto__:null,base32:db,base32upper:hb,base32pad:pb,base32padupper:_b,base32hex:gb,base32hexupper:yb,base32hexpad:mb,base32hexpadupper:vb,base32z:bb});const Eb=go({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xb=go({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ib=Object.freeze({__proto__:null,base36:Eb,base36upper:xb});const Ob=go({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sb=go({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Pb=Object.freeze({__proto__:null,base58btc:Ob,base58flickr:Sb});const Nb=Sr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rb=Sr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ab=Sr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Tb=Sr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Cb=Object.freeze({__proto__:null,base64:Nb,base64pad:Rb,base64url:Ab,base64urlpad:Tb});const sh=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),jb=sh.reduce((r,e,t)=>(r[t]=e,r),[]),Db=sh.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]),Ub=ga({prefix:"\u{1f680}",name:"base256emoji",encode:function Fb(r){return r.reduce((e,t)=>e+jb[t],"")},decode:function $b(r){const e=[];for(const t of r){const o=Db[t.codePointAt(0)];if(void 0===o)throw new Error(`Non-base256emoji character: ${t}`);e.push(o)}return new Uint8Array(e)}});var Lb=Object.freeze({__proto__:null,base256emoji:Ub}),oh=128,Kb=-128,qb=Math.pow(2,31),Zb=128,ch=127,Hb=Math.pow(2,7),Bb=Math.pow(2,14),Vb=Math.pow(2,21),Gb=Math.pow(2,28),Wb=Math.pow(2,35),Jb=Math.pow(2,42),Qb=Math.pow(2,49),Yb=Math.pow(2,56),Xb=Math.pow(2,63),tw={encode:function ah(r,e,t){e=e||[];for(var o=t=t||0;r>=qb;)e[t++]=255&r|oh,r/=128;for(;r&Kb;)e[t++]=255&r|oh,r>>>=7;return e[t]=0|r,ah.bytes=t-o+1,e},decode:function Nu(r,o){var f,t=0,a=0,l=o=o||0,x=r.length;do{if(l>=x)throw Nu.bytes=0,new RangeError("Could not decode varint");f=r[l++],t+=a<28?(f&ch)<<a:(f&ch)*Math.pow(2,a),a+=7}while(f>=Zb);return Nu.bytes=l-o,t},encodingLength:function(r){return r<Hb?1:r<Bb?2:r<Vb?3:r<Gb?4:r<Wb?5:r<Jb?6:r<Qb?7:r<Yb?8:r<Xb?9:10}},uh=tw;const lh=(r,e,t=0)=>(uh.encode(r,e,t),e),fh=r=>uh.encodingLength(r),Ru=(r,e)=>{const t=e.byteLength,o=fh(r),a=o+fh(t),l=new Uint8Array(a+t);return lh(r,l,0),lh(t,l,o),l.set(e,a),new rw(r,t,e,l)};class rw{constructor(e,t,o,a){this.code=e,this.size=t,this.digest=o,this.bytes=a}}const dh=({name:r,code:e,encode:t})=>new nw(r,e,t);class nw{constructor(e,t,o){this.name=e,this.code=t,this.encode=o}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ru(this.code,t):t.then(o=>Ru(this.code,o))}throw Error("Unknown type, must be binary type")}}const hh=r=>function(){var e=(0,b.Z)(function*(t){return new Uint8Array(yield crypto.subtle.digest(r,t))});return function(t){return e.apply(this,arguments)}}(),iw=dh({name:"sha2-256",code:18,encode:hh("SHA-256")}),sw=dh({name:"sha2-512",code:19,encode:hh("SHA-512")});Object.freeze({__proto__:null,sha256:iw,sha512:sw});const _h=nh;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:_h,digest:r=>Ru(0,_h(r))}}),new TextEncoder,new TextDecoder;const gh={...rb,...ib,...ob,...cb,...fb,...wb,...Ib,...Pb,...Cb,...Lb};function yh(r){return null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function mh(r,e,t,o){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:o}}}const vh=mh("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>(new TextEncoder).encode(r.substring(1))),Au=mh("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=function uw(r=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?yh(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),lw={utf8:vh,"utf-8":vh,hex:gh.base16,latin1:Au,ascii:Au,binary:Au,...gh},Ci="wc@2:core:",pw={database:":memory:"},wh="client_ed25519_seed",gw=K.ONE_DAY,ww=K.SIX_HOURS,xh="wss://relay.walletconnect.com",Ih="wss://relay.walletconnect.org",Sw=K.ONE_SECOND,Kn_created="subscription_created",Kn_deleted="subscription_deleted",jw=1e3*K.FIVE_SECONDS,yo={wc_pairingDelete:{req:{ttl:K.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:K.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:K.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:K.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:K.ONE_DAY,prompt:!1,tag:0},res:{ttl:K.ONE_DAY,prompt:!1,tag:0}}},yn_expired="expirer_expired",Cu="verify-api",Ss="https://verify.walletconnect.com",ju="https://verify.walletconnect.org",kw=[Ss,ju];class Kw{constructor(e,t){var o=this;this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Ci,this.init=(0,b.Z)(function*(){if(!o.initialized){const a=yield o.getKeyChain();typeof a<"u"&&(o.keychain=a),o.initialized=!0}}),this.has=a=>(this.isInitialized(),this.keychain.has(a)),this.set=function(){var a=(0,b.Z)(function*(l,f){o.isInitialized(),o.keychain.set(l,f),yield o.persist()});return function(l,f){return a.apply(this,arguments)}}(),this.get=a=>{this.isInitialized();const l=this.keychain.get(a);if(typeof l>"u"){const{message:f}=pt("NO_MATCHING_KEY",`${this.name}: ${a}`);throw new Error(f)}return l},this.del=function(){var a=(0,b.Z)(function*(l){o.isInitialized(),o.keychain.delete(l),yield o.persist()});return function(l){return a.apply(this,arguments)}}(),this.core=e,this.logger=(0,mt.generateChildLogger)(t,this.name)}get context(){return(0,mt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setKeyChain(e){var t=this;return(0,b.Z)(function*(){yield t.core.storage.setItem(t.storageKey,Rd(e))})()}getKeyChain(){var e=this;return(0,b.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?Ad(t):void 0})()}persist(){var e=this;return(0,b.Z)(function*(){yield e.setKeyChain(e.keychain)})()}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class qw{constructor(e,t,o){var a=this;this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=(0,b.Z)(function*(){a.initialized||(yield a.keychain.init(),a.initialized=!0)}),this.hasKeys=l=>(this.isInitialized(),this.keychain.has(l)),this.getClientId=(0,b.Z)(function*(){return a.isInitialized(),fd(dd(yield a.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const l=function cv(){const r=ae.Au();return{privateKey:(0,ie.BB)(r.secretKey,Ur),publicKey:(0,ie.BB)(r.publicKey,Ur)}}();return this.setPrivateKey(l.publicKey,l.privateKey)},this.signJWT=function(){var l=(0,b.Z)(function*(f){a.isInitialized();const C=dd(yield a.getClientSeed()),m=fu();return yield function km(r,e,t,o){return nu.apply(this,arguments)}(m,f,gw,C)});return function(f){return l.apply(this,arguments)}}(),this.generateSharedKey=(l,f,x)=>{this.isInitialized();const m=function uv(r,e){const t=ae.gi((0,ie.mL)(r,Ur),(0,ie.mL)(e,Ur),!0),o=new Z.t(we.mE,t).expand(32);return(0,ie.BB)(o,Ur)}(this.getPrivateKey(l),f);return this.setSymKey(m,x)},this.setSymKey=function(){var l=(0,b.Z)(function*(f,x){a.isInitialized();const C=x||function lv(r){const e=(0,we.vp)((0,ie.mL)(r,Ur));return(0,ie.BB)(e,Ur)}(f);return yield a.keychain.set(C,f),C});return function(f,x){return l.apply(this,arguments)}}(),this.deleteKeyPair=function(){var l=(0,b.Z)(function*(f){a.isInitialized(),yield a.keychain.del(f)});return function(f){return l.apply(this,arguments)}}(),this.deleteSymKey=function(){var l=(0,b.Z)(function*(f){a.isInitialized(),yield a.keychain.del(f)});return function(f){return l.apply(this,arguments)}}(),this.encode=function(){var l=(0,b.Z)(function*(f,x,C){a.isInitialized();const m=xd(C),A=Wi(x);if(Id(m)){const ee=m.senderPublicKey,Oe=m.receiverPublicKey;f=yield a.generateSharedKey(ee,Oe)}const $=a.getSymKey(f),{type:te,senderPublicKey:xe}=m;return function dv(r){const e=function fv(r){return(0,ie.mL)(`${r}`,bd)}(typeof r.type<"u"?r.type:0);if(1===lo(e)&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?(0,ie.mL)(r.senderPublicKey,Ur):void 0,o=typeof r.iv<"u"?(0,ie.mL)(r.iv,Ur):(0,ne.randomBytes)(12);return function pv(r){if(1===lo(r.type)){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,ie.BB)((0,ie.zo)([r.type,r.senderPublicKey,r.iv,r.sealed]),au)}return(0,ie.BB)((0,ie.zo)([r.type,r.iv,r.sealed]),au)}({type:e,sealed:new Te.OK((0,ie.mL)(r.symKey,Ur)).seal(o,(0,ie.mL)(r.message,cu)),iv:o,senderPublicKey:t})}({type:te,symKey:$,message:A,senderPublicKey:xe})});return function(f,x,C){return l.apply(this,arguments)}}(),this.decode=function(){var l=(0,b.Z)(function*(f,x,C){a.isInitialized();const m=function _v(r,e){const t=la(r);return xd({type:lo(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?(0,ie.BB)(t.senderPublicKey,Ur):void 0,receiverPublicKey:e?.receiverPublicKey})}(x,C);if(Id(m)){const A=m.receiverPublicKey,$=m.senderPublicKey;f=yield a.generateSharedKey(A,$)}try{const $=function hv(r){const e=new Te.OK((0,ie.mL)(r.symKey,Ur)),{sealed:t,iv:o}=la(r.encoded),a=e.open(o,t);if(null===a)throw new Error("Failed to decrypt");return(0,ie.BB)(a,cu)}({symKey:a.getSymKey(f),encoded:x});return co($)}catch(A){a.logger.error(`Failed to decode message from topic: '${f}', clientId: '${yield a.getClientId()}'`),a.logger.error(A)}});return function(f,x,C){return l.apply(this,arguments)}}(),this.getPayloadType=l=>lo(la(l).type),this.getPayloadSenderPublicKey=l=>{const f=la(l);return f.senderPublicKey?(0,ie.BB)(f.senderPublicKey,Ur):void 0},this.core=e,this.logger=(0,mt.generateChildLogger)(t,this.name),this.keychain=o||new Kw(this.core,this.logger)}get context(){return(0,mt.getLoggerContext)(this.logger)}setPrivateKey(e,t){var o=this;return(0,b.Z)(function*(){return yield o.keychain.set(e,t),e})()}getPrivateKey(e){return this.keychain.get(e)}getClientSeed(){var e=this;return(0,b.Z)(function*(){let t="";try{t=e.keychain.get(wh)}catch{t=fu(),yield e.keychain.set(wh,t)}return function fw(r,e="utf8"){const t=lw[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?t.decoder.decode(`${t.prefix}${r}`):yh(globalThis.Buffer.from(r,"utf-8"))}(t,"base16")})()}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class zw extends gm{constructor(e,t){var o;super(e,t),o=this,this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Ci,this.init=(0,b.Z)(function*(){if(!o.initialized){o.logger.trace("Initialized");try{const a=yield o.getRelayerMessages();typeof a<"u"&&(o.messages=a),o.logger.debug(`Successfully Restored records for ${o.name}`),o.logger.trace({type:"method",method:"restore",size:o.messages.size})}catch(a){o.logger.debug(`Failed to Restore records for ${o.name}`),o.logger.error(a)}finally{o.initialized=!0}}}),this.set=function(){var a=(0,b.Z)(function*(l,f){o.isInitialized();const x=du(f);let C=o.messages.get(l);return typeof C>"u"&&(C={}),typeof C[x]<"u"||(C[x]=f,o.messages.set(l,C),yield o.persist()),x});return function(l,f){return a.apply(this,arguments)}}(),this.get=a=>{this.isInitialized();let l=this.messages.get(a);return typeof l>"u"&&(l={}),l},this.has=(a,l)=>(this.isInitialized(),typeof this.get(a)[du(l)]<"u"),this.del=function(){var a=(0,b.Z)(function*(l){o.isInitialized(),o.messages.delete(l),yield o.persist()});return function(l){return a.apply(this,arguments)}}(),this.logger=(0,mt.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,mt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setRelayerMessages(e){var t=this;return(0,b.Z)(function*(){yield t.core.storage.setItem(t.storageKey,Rd(e))})()}getRelayerMessages(){var e=this;return(0,b.Z)(function*(){const t=yield e.core.storage.getItem(e.storageKey);return typeof t<"u"?Ad(t):void 0})()}persist(){var e=this;return(0,b.Z)(function*(){yield e.setRelayerMessages(e.messages)})()}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Zw extends ym{constructor(e,t){var o;super(e,t),o=this,this.relayer=e,this.logger=t,this.events=new Pe.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,K.toMiliseconds)(K.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=function(){var a=(0,b.Z)(function*(l,f,x){var C;o.logger.debug("Publishing Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:l,message:f,opts:x}});try{const m=x?.ttl||ww,A=mu(x),$=x?.prompt||!1,te=x?.tag||0,xe=x?.id||Jd().toString(),ee={topic:l,message:f,opts:{ttl:m,relay:A,prompt:$,tag:te,id:xe}},Oe=setTimeout(()=>o.queue.set(xe,ee),o.publishTimeout);try{yield yield ho(o.rpcPublish(l,f,m,A,$,te,xe),o.publishTimeout,"Failed to publish payload, please try again."),o.removeRequestFromQueue(xe),o.relayer.events.emit("relayer_publish",ee)}catch(De){if(o.logger.debug("Publishing Payload stalled"),o.needsTransportRestart=!0,null!=(C=x?.internal)&&C.throwOnFailedPublish)throw o.removeRequestFromQueue(xe),De;return}finally{clearTimeout(Oe)}o.logger.debug("Successfully Published Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:l,message:f,opts:x}})}catch(m){throw o.logger.debug("Failed to Publish Payload"),o.logger.error(m),m}});return function(l,f,x){return a.apply(this,arguments)}}(),this.on=(a,l)=>{this.events.on(a,l)},this.once=(a,l)=>{this.events.once(a,l)},this.off=(a,l)=>{this.events.off(a,l)},this.removeListener=(a,l)=>{this.events.removeListener(a,l)},this.relayer=e,this.logger=(0,mt.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,mt.getLoggerContext)(this.logger)}rpcPublish(e,t,o,a,l,f,x){var C,m,A,$;const te={method:da(a.protocol).publish,params:{topic:e,message:t,ttl:o,prompt:l,tag:f},id:x};return ei(null==(C=te.params)?void 0:C.prompt)&&(null==(m=te.params)||delete m.prompt),ei(null==(A=te.params)?void 0:A.tag)&&(null==($=te.params)||delete $.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:te}),this.relayer.request(te)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){var e=this;this.queue.forEach(function(){var t=(0,b.Z)(function*(o){const{topic:a,message:l,opts:f}=o;yield e.publish(a,l,f)});return function(o){return t.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(uo.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit("relayer_connection_stalled");this.checkQueue()}),this.relayer.on("relayer_message_ack",e=>{this.removeRequestFromQueue(e.id.toString())})}}class Hw{constructor(){this.map=new Map,this.set=(e,t)=>{const o=this.get(e);this.exists(e,t)||this.map.set(e,[...o,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const o=this.get(e);if(!this.exists(e,t))return;const a=o.filter(l=>l!==t);a.length?this.map.set(e,a):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Bw=Object.defineProperty,Vw=Object.defineProperties,Gw=Object.getOwnPropertyDescriptors,Oh=Object.getOwnPropertySymbols,Ww=Object.prototype.hasOwnProperty,Jw=Object.prototype.propertyIsEnumerable,Sh=(r,e,t)=>e in r?Bw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vo=(r,e)=>{for(var t in e||(e={}))Ww.call(e,t)&&Sh(r,t,e[t]);if(Oh)for(var t of Oh(e))Jw.call(e,t)&&Sh(r,t,e[t]);return r},Du=(r,e)=>Vw(r,Gw(e));class Qw extends bm{constructor(e,t){var o;super(e,t),o=this,this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Hw,this.events=new Pe.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ci,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=(0,b.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),o.registerEventListeners(),o.clientId=yield o.relayer.core.crypto.getClientId())}),this.subscribe=function(){var a=(0,b.Z)(function*(l,f){yield o.restartToComplete(),o.isInitialized(),o.logger.debug("Subscribing Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:l,opts:f}});try{const x=mu(f),C={topic:l,relay:x};o.pending.set(l,C);const m=yield o.rpcSubscribe(l,x);return o.onSubscribe(m,C),o.logger.debug("Successfully Subscribed Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:l,opts:f}}),m}catch(x){throw o.logger.debug("Failed to Subscribe Topic"),o.logger.error(x),x}});return function(l,f){return a.apply(this,arguments)}}(),this.unsubscribe=function(){var a=(0,b.Z)(function*(l,f){yield o.restartToComplete(),o.isInitialized(),typeof f?.id<"u"?yield o.unsubscribeById(l,f.id,f):yield o.unsubscribeByTopic(l,f)});return function(l,f){return a.apply(this,arguments)}}(),this.isSubscribed=function(){var a=(0,b.Z)(function*(l){return!!o.topics.includes(l)||(yield new Promise((f,x)=>{const C=new K.Watch;C.start(o.pendingSubscriptionWatchLabel);const m=setInterval(()=>{!o.pending.has(l)&&o.topics.includes(l)&&(clearInterval(m),C.stop(o.pendingSubscriptionWatchLabel),f(!0)),C.elapsed(o.pendingSubscriptionWatchLabel)>=jw&&(clearInterval(m),C.stop(o.pendingSubscriptionWatchLabel),x(new Error("Subscription resolution timeout")))},o.pollingInterval)}).catch(()=>!1))});return function(l){return a.apply(this,arguments)}}(),this.on=(a,l)=>{this.events.on(a,l)},this.once=(a,l)=>{this.events.once(a,l)},this.off=(a,l)=>{this.events.off(a,l)},this.removeListener=(a,l)=>{this.events.removeListener(a,l)},this.restart=(0,b.Z)(function*(){o.restartInProgress=!0,yield o.restore(),yield o.reset(),o.restartInProgress=!1}),this.relayer=e,this.logger=(0,mt.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,mt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let o=!1;try{o=this.getSubscription(e).topic===t}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(e,t){var o=this;return(0,b.Z)(function*(){const a=o.topicMap.get(e);yield Promise.all(a.map(function(){var l=(0,b.Z)(function*(f){return yield o.unsubscribeById(e,f,t)});return function(f){return l.apply(this,arguments)}}()))})()}unsubscribeById(e,t,o){var a=this;return(0,b.Z)(function*(){a.logger.debug("Unsubscribing Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:o}});try{const l=mu(o);yield a.rpcUnsubscribe(e,t,l);const f=Mn("USER_DISCONNECTED",`${a.name}, ${e}`);yield a.onUnsubscribe(e,t,f),a.logger.debug("Successfully Unsubscribed Topic"),a.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:o}})}catch(l){throw a.logger.debug("Failed to Unsubscribe Topic"),a.logger.error(l),l}})()}rpcSubscribe(e,t){var o=this;return(0,b.Z)(function*(){const a={method:da(t.protocol).subscribe,params:{topic:e}};o.logger.debug("Outgoing Relay Payload"),o.logger.trace({type:"payload",direction:"outgoing",request:a});try{yield yield ho(o.relayer.request(a),o.subscribeTimeout)}catch{o.logger.debug("Outgoing Relay Subscribe Payload stalled"),o.relayer.events.emit("relayer_connection_stalled")}return du(e+o.clientId)})()}rpcBatchSubscribe(e){var t=this;return(0,b.Z)(function*(){if(!e.length)return;const a={method:da(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(l=>l.topic)}};t.logger.debug("Outgoing Relay Payload"),t.logger.trace({type:"payload",direction:"outgoing",request:a});try{return yield yield ho(t.relayer.request(a),t.subscribeTimeout)}catch{t.logger.debug("Outgoing Relay Payload stalled"),t.relayer.events.emit("relayer_connection_stalled")}})()}rpcUnsubscribe(e,t,o){const a={method:da(o.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,t){this.setSubscription(e,Du(vo({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,vo({},t)),this.pending.delete(t.topic)})}onUnsubscribe(e,t,o){var a=this;return(0,b.Z)(function*(){a.events.removeAllListeners(t),a.hasSubscription(t,e)&&a.deleteSubscription(t,o),yield a.relayer.messages.del(e)})()}setRelayerSubscriptions(e){var t=this;return(0,b.Z)(function*(){yield t.relayer.core.storage.setItem(t.storageKey,e)})()}getRelayerSubscriptions(){var e=this;return(0,b.Z)(function*(){return yield e.relayer.core.storage.getItem(e.storageKey)})()}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,vo({},t)),this.topicMap.set(t.topic,e),this.events.emit(Kn_created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:o}=pt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(o)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const o=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(o.topic,e),this.events.emit(Kn_deleted,Du(vo({},o),{reason:t}))}persist(){var e=this;return(0,b.Z)(function*(){yield e.setRelayerSubscriptions(e.values),e.events.emit("subscription_sync")})()}reset(){var e=this;return(0,b.Z)(function*(){if(e.cached.length){const t=Math.ceil(e.cached.length/e.batchSubscribeTopicsLimit);for(let o=0;o<t;o++){const a=e.cached.splice(0,e.batchSubscribeTopicsLimit);yield e.batchSubscribe(a)}}e.events.emit("subscription_resubscribed")})()}restore(){var e=this;return(0,b.Z)(function*(){try{const t=yield e.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(e.subscriptions.size){const{message:o}=pt("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(o),e.logger.error(`${e.name}: ${JSON.stringify(e.values)}`),new Error(o)}e.cached=t,e.logger.debug(`Successfully Restored subscriptions for ${e.name}`),e.logger.trace({type:"method",method:"restore",subscriptions:e.values})}catch(t){e.logger.debug(`Failed to Restore subscriptions for ${e.name}`),e.logger.error(t)}})()}batchSubscribe(e){var t=this;return(0,b.Z)(function*(){if(!e.length)return;const o=yield t.rpcBatchSubscribe(e);(function po(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))})(o)&&t.onBatchSubscribe(o.map((a,l)=>Du(vo({},e[l]),{id:a})))})()}onConnect(){var e=this;return(0,b.Z)(function*(){e.restartInProgress||(yield e.restart(),e.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var e=this;return(0,b.Z)(function*(){if(!e.initialized||e.relayer.transportExplicitlyClosed)return;const t=[];e.pending.forEach(o=>{t.push(o)}),yield e.batchSubscribe(t)})()}registerEventListeners(){var e=this;this.relayer.core.heartbeat.on(uo.HEARTBEAT_EVENTS.pulse,(0,b.Z)(function*(){yield e.checkPending()})),this.relayer.on("relayer_connect",(0,b.Z)(function*(){yield e.onConnect()})),this.relayer.on("relayer_disconnect",()=>{this.onDisconnect()}),this.events.on(Kn_created,function(){var t=(0,b.Z)(function*(o){const a=Kn_created;e.logger.info(`Emitting ${a}`),e.logger.debug({type:"event",event:a,data:o}),yield e.persist()});return function(o){return t.apply(this,arguments)}}()),this.events.on(Kn_deleted,function(){var t=(0,b.Z)(function*(o){const a=Kn_deleted;e.logger.info(`Emitting ${a}`),e.logger.debug({type:"event",event:a,data:o}),yield e.persist()});return function(o){return t.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}restartToComplete(){var e=this;return(0,b.Z)(function*(){e.restartInProgress&&(yield new Promise(t=>{const o=setInterval(()=>{e.restartInProgress||(clearInterval(o),t())},e.pollingInterval)}))})()}}var Yw=Object.defineProperty,Ph=Object.getOwnPropertySymbols,Xw=Object.prototype.hasOwnProperty,e1=Object.prototype.propertyIsEnumerable,Nh=(r,e,t)=>e in r?Yw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;class r1 extends mm{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.events=new Pe.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=function(){var o=(0,b.Z)(function*(a){t.logger.debug("Publishing Request Payload");try{return yield t.toEstablishConnection(),yield t.provider.request(a)}catch(l){throw t.logger.debug("Failed to Publish Request"),t.logger.error(l),l}});return function(a){return o.apply(this,arguments)}}(),this.onPayloadHandler=o=>{this.onProviderPayload(o)},this.onConnectHandler=()=>{this.events.emit("relayer_connect")},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=o=>{this.logger.error(o),this.events.emit("relayer_error",o),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on("payload",this.onPayloadHandler),this.provider.on("connect",this.onConnectHandler),this.provider.on("disconnect",this.onDisconnectHandler),this.provider.on("error",this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,mt.generateChildLogger)(e.logger,this.name):(0,mt.pino)((0,mt.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new zw(this.logger,e.core),this.subscriber=new Qw(this,this.logger),this.publisher=new Zw(this,this.logger),this.relayUrl=e?.relayUrl||xh,this.projectId=e.projectId,this.bundleId=function Ev(){var r;try{return Es()&&typeof global<"u"&&typeof(null==global?void 0:global.Application)<"u"?null==(r=global.Application)?void 0:r.applicationId:void 0}catch{return}}(),this.provider={}}init(){var e=this;return(0,b.Z)(function*(){e.logger.trace("Initialized"),e.registerEventListeners(),yield e.createProvider(),yield Promise.all([e.messages.init(),e.subscriber.init()]);try{yield e.transportOpen()}catch{e.logger.warn(`Connection via ${e.relayUrl} failed, attempting to connect via failover domain ${Ih}...`),yield e.restartTransport(Ih)}e.initialized=!0,setTimeout((0,b.Z)(function*(){0===e.subscriber.topics.length&&(e.logger.info("No topics subscribed to after init, closing transport"),yield e.transportClose(),e.transportExplicitlyClosed=!1)}),1e4)})()}get context(){return(0,mt.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(e,t,o){var a=this;return(0,b.Z)(function*(){a.isInitialized(),yield a.publisher.publish(e,t,o),yield a.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})})()}subscribe(e,t){var o=this;return(0,b.Z)(function*(){var a;o.isInitialized();let f,l=(null==(a=o.subscriber.topicMap.get(e))?void 0:a[0])||"";if(l)return l;const x=C=>{C.topic===e&&(o.subscriber.off(Kn_created,x),f())};return yield Promise.all([new Promise(C=>{f=C,o.subscriber.on(Kn_created,x)}),new Promise(function(){var C=(0,b.Z)(function*(m){l=yield o.subscriber.subscribe(e,t),m()});return function(m){return C.apply(this,arguments)}}())]),l})()}unsubscribe(e,t){var o=this;return(0,b.Z)(function*(){o.isInitialized(),yield o.subscriber.unsubscribe(e,t)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}transportClose(){var e=this;return(0,b.Z)(function*(){e.transportExplicitlyClosed=!0,e.hasExperiencedNetworkDisruption&&e.connected?yield ho(e.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>e.onProviderDisconnect()):e.connected&&(yield e.provider.disconnect())})()}transportOpen(e){var t=this;return(0,b.Z)(function*(){if(t.transportExplicitlyClosed=!1,yield t.confirmOnlineStateOrThrow(),!t.connectionAttemptInProgress){e&&e!==t.relayUrl&&(t.relayUrl=e,yield t.transportClose(),yield t.createProvider()),t.connectionAttemptInProgress=!0;try{yield Promise.all([new Promise(o=>{if(!t.initialized)return o();t.subscriber.once("subscription_resubscribed",()=>{o()})}),new Promise(function(){var o=(0,b.Z)(function*(a,l){try{yield ho(t.provider.connect(),1e4,`Socket stalled when trying to connect to ${t.relayUrl}`)}catch(f){return void l(f)}a()});return function(a,l){return o.apply(this,arguments)}}())])}catch(o){if(t.logger.error(o),!t.isConnectionStalled(o.message))throw o;t.provider.events.emit("disconnect")}finally{t.connectionAttemptInProgress=!1,t.hasExperiencedNetworkDisruption=!1}}})()}restartTransport(e){var t=this;return(0,b.Z)(function*(){yield t.confirmOnlineStateOrThrow(),!t.connectionAttemptInProgress&&(t.relayUrl=e||t.relayUrl,yield t.transportClose(),yield t.createProvider(),yield t.transportOpen())})()}confirmOnlineStateOrThrow(){return(0,b.Z)(function*(){if(!(yield zd()))throw new Error("No internet connection detected. Please restart your network and try again.")})()}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}createProvider(){var e=this;return(0,b.Z)(function*(){e.provider.connection&&e.unregisterProviderListeners();const t=yield e.core.crypto.signJWT(e.relayUrl);e.provider=new pi(new K0(function Pv({protocol:r,version:e,relayUrl:t,sdkVersion:o,auth:a,projectId:l,useOnCloseEvent:f,bundleId:x}){const C=t.split("?"),m=Sv(r,e,o),$=function xv(r,e){let t=ca.parse(r);return t=Pd(Pd({},t),e),ca.stringify(t)}(C[1]||"",{auth:a,ua:m,projectId:l,useOnCloseEvent:f||void 0,origin:x||void 0});return C[0]+"?"+$}({sdkVersion:"2.10.6",protocol:e.protocol,version:e.version,relayUrl:e.relayUrl,projectId:e.projectId,auth:t,useOnCloseEvent:!0,bundleId:e.bundleId}))),e.registerProviderListeners()})()}recordMessageEvent(e){var t=this;return(0,b.Z)(function*(){const{topic:o,message:a}=e;yield t.messages.set(o,a)})()}shouldIgnoreMessageEvent(e){var t=this;return(0,b.Z)(function*(){const{topic:o,message:a}=e;if(!a||0===a.length)return t.logger.debug(`Ignoring invalid/empty message: ${a}`),!0;if(!(yield t.subscriber.isSubscribed(o)))return t.logger.debug(`Ignoring message for non-subscribed topic ${o}`),!0;const l=t.messages.has(o,a);return l&&t.logger.debug(`Ignoring duplicate message: ${a}`),l})()}onProviderPayload(e){var t=this;return(0,b.Z)(function*(){if(t.logger.debug("Incoming Relay Payload"),t.logger.trace({type:"payload",direction:"incoming",payload:e}),Pu(e)){if(!e.method.endsWith("_subscription"))return;const o=e.params,{topic:a,message:l,publishedAt:f}=o.data,x={topic:a,message:l,publishedAt:f};t.logger.debug("Emitting Relayer Payload"),t.logger.trace(((r,e)=>{for(var t in e||(e={}))Xw.call(e,t)&&Nh(r,t,e[t]);if(Ph)for(var t of Ph(e))e1.call(e,t)&&Nh(r,t,e[t]);return r})({type:"event",event:o.id},x)),t.events.emit(o.id,x),yield t.acknowledgePayload(e),yield t.onMessageEvent(x)}else _a(e)&&t.events.emit("relayer_message_ack",e)})()}onMessageEvent(e){var t=this;return(0,b.Z)(function*(){(yield t.shouldIgnoreMessageEvent(e))||(t.events.emit("relayer_message",e),yield t.recordMessageEvent(e))})()}acknowledgePayload(e){var t=this;return(0,b.Z)(function*(){const o=Su(e.id,!0);yield t.provider.connection.send(o)})()}unregisterProviderListeners(){this.provider.off("payload",this.onPayloadHandler),this.provider.off("connect",this.onConnectHandler),this.provider.off("disconnect",this.onDisconnectHandler),this.provider.off("error",this.onProviderErrorHandler)}registerEventListeners(){var e=this;return(0,b.Z)(function*(){e.events.on("relayer_connection_stalled",()=>{e.restartTransport().catch(o=>e.logger.error(o))});let t=yield zd();!function b0(r){switch(xs()){case Vr.browser:!function w0(r){!Es()&&fo()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}(r);break;case Vr.reactNative:!function E0(r){Es()&&typeof global<"u"&&null!=global&&global.NetInfo&&global?.NetInfo.addEventListener(e=>r(e?.isConnected))}(r)}}(function(){var o=(0,b.Z)(function*(a){e.initialized&&t!==a&&(t=a,a?yield e.restartTransport().catch(l=>e.logger.error(l)):(e.hasExperiencedNetworkDisruption=!0,yield e.transportClose().catch(l=>e.logger.error(l))))});return function(a){return o.apply(this,arguments)}}())})()}onProviderDisconnect(){this.events.emit("relayer_disconnect"),this.attemptToReconnect()}attemptToReconnect(){var e=this;this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((0,b.Z)(function*(){yield e.restartTransport().catch(t=>e.logger.error(t))}),(0,K.toMiliseconds)(Sw)))}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}toEstablishConnection(){var e=this;return(0,b.Z)(function*(){if(yield e.confirmOnlineStateOrThrow(),!e.connected){if(e.connectionAttemptInProgress)return yield new Promise(t=>{const o=setInterval(()=>{e.connected&&(clearInterval(o),t())},e.connectionStatusPollingInterval)});yield e.restartTransport()}})()}}var n1=Object.defineProperty,Rh=Object.getOwnPropertySymbols,i1=Object.prototype.hasOwnProperty,s1=Object.prototype.propertyIsEnumerable,Ah=(r,e,t)=>e in r?n1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Th=(r,e)=>{for(var t in e||(e={}))i1.call(e,t)&&Ah(r,t,e[t]);if(Rh)for(var t of Rh(e))s1.call(e,t)&&Ah(r,t,e[t]);return r};class ya extends vm{constructor(e,t,o,a=Ci,l=void 0){var f;super(e,t,o,a),f=this,this.core=e,this.logger=t,this.name=o,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=(0,b.Z)(function*(){f.initialized||(f.logger.trace("Initialized"),yield f.restore(),f.cached.forEach(x=>{f.getKey&&null!==x&&!ei(x)?f.map.set(f.getKey(x),x):function s0(r){var e;return null==(e=r?.proposer)?void 0:e.publicKey}(x)?f.map.set(x.id,x):function o0(r){return r?.topic}(x)&&f.map.set(x.topic,x)}),f.cached=[],f.initialized=!0)}),this.set=function(){var x=(0,b.Z)(function*(C,m){f.isInitialized(),f.map.has(C)?yield f.update(C,m):(f.logger.debug("Setting value"),f.logger.trace({type:"method",method:"set",key:C,value:m}),f.map.set(C,m),yield f.persist())});return function(C,m){return x.apply(this,arguments)}}(),this.get=x=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:x}),this.getData(x)),this.getAll=x=>(this.isInitialized(),x?this.values.filter(C=>Object.keys(x).every(m=>z0()(C[m],x[m]))):this.values),this.update=function(){var x=(0,b.Z)(function*(C,m){f.isInitialized(),f.logger.debug("Updating value"),f.logger.trace({type:"method",method:"update",key:C,update:m});const A=Th(Th({},f.getData(C)),m);f.map.set(C,A),yield f.persist()});return function(C,m){return x.apply(this,arguments)}}(),this.delete=function(){var x=(0,b.Z)(function*(C,m){f.isInitialized(),f.map.has(C)&&(f.logger.debug("Deleting value"),f.logger.trace({type:"method",method:"delete",key:C,reason:m}),f.map.delete(C),yield f.persist())});return function(C,m){return x.apply(this,arguments)}}(),this.logger=(0,mt.generateChildLogger)(t,this.name),this.storagePrefix=a,this.getKey=l}get context(){return(0,mt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(e){var t=this;return(0,b.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getDataStore(){var e=this;return(0,b.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getData(e){const t=this.map.get(e);if(!t){const{message:o}=pt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}return t}persist(){var e=this;return(0,b.Z)(function*(){yield e.setDataStore(e.values)})()}restore(){var e=this;return(0,b.Z)(function*(){try{const t=yield e.getDataStore();if(typeof t>"u"||!t.length)return;if(e.map.size){const{message:o}=pt("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(o),new Error(o)}e.cached=t,e.logger.debug(`Successfully Restored value for ${e.name}`),e.logger.trace({type:"method",method:"restore",value:e.values})}catch(t){e.logger.debug(`Failed to Restore value for ${e.name}`),e.logger.error(t)}})()}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class o1{constructor(e,t){var o=this;this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(je()),this.initialized=!1,this.storagePrefix=Ci,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=(0,b.Z)(function*(){o.initialized||(yield o.pairings.init(),yield o.cleanup(),o.registerRelayerEvents(),o.registerExpirerEvents(),o.initialized=!0,o.logger.trace("Initialized"))}),this.register=({methods:a})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...a])]},this.create=(0,b.Z)(function*(){o.isInitialized();const a=fu(),l=yield o.core.crypto.setSymKey(a),f=fa(K.FIVE_MINUTES),x={protocol:"irn"},C={topic:l,expiry:f,relay:x,active:!1},m=function zv(r){return`${r.protocol}:${r.topic}@${r.version}?`+ca.stringify(((r,e)=>{for(var t in e||(e={}))Uv.call(e,t)&&Dd(r,t,e[t]);if(jd)for(var t of jd(e))Lv.call(e,t)&&Dd(r,t,e[t]);return r})({symKey:r.symKey},function qv(r,e="-"){const o={};return Object.keys(r).forEach(a=>{r[a]&&(o["relay"+e+a]=r[a])}),o}(r.relay)))}({protocol:o.core.protocol,version:o.core.version,topic:l,symKey:a,relay:x});return yield o.pairings.set(l,C),yield o.core.relayer.subscribe(l),o.core.expirer.set(l,f),{topic:l,uri:m}}),this.pair=function(){var a=(0,b.Z)(function*(l){o.isInitialized(),o.isValidPair(l);const{topic:f,symKey:x,relay:C}=Fd(l.uri);let m;if(o.pairings.keys.includes(f)&&(m=o.pairings.get(f),m.active))throw new Error(`Pairing already exists: ${f}. Please try again with a new connection URI.`);const A=fa(K.FIVE_MINUTES),$={topic:f,relay:C,expiry:A,active:!1};return yield o.pairings.set(f,$),o.core.expirer.set(f,A),l.activatePairing&&(yield o.activate({topic:f})),o.events.emit("pairing_create",$),o.core.crypto.keychain.has(f)||(yield o.core.crypto.setSymKey(x,f),yield o.core.relayer.subscribe(f,{relay:C})),$});return function(l){return a.apply(this,arguments)}}(),this.activate=function(){var a=(0,b.Z)(function*({topic:l}){o.isInitialized();const f=fa(K.THIRTY_DAYS);yield o.pairings.update(l,{active:!0,expiry:f}),o.core.expirer.set(l,f)});return function(l){return a.apply(this,arguments)}}(),this.ping=function(){var a=(0,b.Z)(function*(l){o.isInitialized(),yield o.isValidPing(l);const{topic:f}=l;if(o.pairings.keys.includes(f)){const x=yield o.sendRequest(f,"wc_pairingPing",{}),{done:C,resolve:m,reject:A}=function Tv(r=K.FIVE_MINUTES,e){const t=(0,K.toMiliseconds)(r||K.FIVE_MINUTES);let o,a,l;return{resolve:f=>{l&&o&&(clearTimeout(l),o(f))},reject:f=>{l&&a&&(clearTimeout(l),a(f))},done:()=>new Promise((f,x)=>{l=setTimeout(()=>{x(new Error(e))},t),o=f,a=x})}}();o.events.once(_u("pairing_ping",x),({error:$})=>{$?A($):m()}),yield C()}});return function(l){return a.apply(this,arguments)}}(),this.updateExpiry=function(){var a=(0,b.Z)(function*({topic:l,expiry:f}){o.isInitialized(),yield o.pairings.update(l,{expiry:f})});return function(l){return a.apply(this,arguments)}}(),this.updateMetadata=function(){var a=(0,b.Z)(function*({topic:l,metadata:f}){o.isInitialized(),yield o.pairings.update(l,{peerMetadata:f})});return function(l){return a.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var a=(0,b.Z)(function*(l){o.isInitialized(),yield o.isValidDisconnect(l);const{topic:f}=l;o.pairings.keys.includes(f)&&(yield o.sendRequest(f,"wc_pairingDelete",Mn("USER_DISCONNECTED")),yield o.deletePairing(f))});return function(l){return a.apply(this,arguments)}}(),this.sendRequest=function(){var a=(0,b.Z)(function*(l,f,x){const C=Os(f,x),m=yield o.core.crypto.encode(l,C),A=yo[f].req;return o.core.history.set(l,C),o.core.relayer.publish(l,m,A),C.id});return function(l,f,x){return a.apply(this,arguments)}}(),this.sendResult=function(){var a=(0,b.Z)(function*(l,f,x){const C=Su(l,x),m=yield o.core.crypto.encode(f,C),A=yield o.core.history.get(f,l),$=yo[A.request.method].res;yield o.core.relayer.publish(f,m,$),yield o.core.history.resolve(C)});return function(l,f,x){return a.apply(this,arguments)}}(),this.sendError=function(){var a=(0,b.Z)(function*(l,f,x){const C=pa(l,x),m=yield o.core.crypto.encode(f,C),A=yield o.core.history.get(f,l),$=yo[A.request.method]?yo[A.request.method].res:yo.unregistered_method.res;yield o.core.relayer.publish(f,m,$),yield o.core.history.resolve(C)});return function(l,f,x){return a.apply(this,arguments)}}(),this.deletePairing=function(){var a=(0,b.Z)(function*(l,f){yield o.core.relayer.unsubscribe(l),yield Promise.all([o.pairings.delete(l,Mn("USER_DISCONNECTED")),o.core.crypto.deleteSymKey(l),f?Promise.resolve():o.core.expirer.del(l)])});return function(l,f){return a.apply(this,arguments)}}(),this.cleanup=(0,b.Z)(function*(){const a=o.pairings.getAll().filter(l=>Cd(l.expiry));yield Promise.all(a.map(l=>o.deletePairing(l.topic)))}),this.onRelayEventRequest=a=>{const{topic:l,payload:f}=a;switch(f.method){case"wc_pairingPing":return this.onPairingPingRequest(l,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(l,f);default:return this.onUnknownRpcMethodRequest(l,f)}},this.onRelayEventResponse=function(){var a=(0,b.Z)(function*(l){const{topic:f,payload:x}=l,C=(yield o.core.history.get(f,x.id)).request.method;return"wc_pairingPing"===C?o.onPairingPingResponse(f,x):o.onUnknownRpcMethodResponse(C)});return function(l){return a.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var a=(0,b.Z)(function*(l,f){const{id:x}=f;try{o.isValidPing({topic:l}),yield o.sendResult(x,l,!0),o.events.emit("pairing_ping",{id:x,topic:l})}catch(C){yield o.sendError(x,l,C),o.logger.error(C)}});return function(l,f){return a.apply(this,arguments)}}(),this.onPairingPingResponse=(a,l)=>{const{id:f}=l;setTimeout(()=>{hi(l)?this.events.emit(_u("pairing_ping",f),{}):kn(l)&&this.events.emit(_u("pairing_ping",f),{error:l.error})},500)},this.onPairingDeleteRequest=function(){var a=(0,b.Z)(function*(l,f){const{id:x}=f;try{o.isValidDisconnect({topic:l}),yield o.deletePairing(l),o.events.emit("pairing_delete",{id:x,topic:l})}catch(C){yield o.sendError(x,l,C),o.logger.error(C)}});return function(l,f){return a.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var a=(0,b.Z)(function*(l,f){const{id:x,method:C}=f;try{if(o.registeredMethods.includes(C))return;const m=Mn("WC_METHOD_UNSUPPORTED",C);yield o.sendError(x,l,m),o.logger.error(m)}catch(m){yield o.sendError(x,l,m),o.logger.error(m)}});return function(l,f){return a.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=a=>{this.registeredMethods.includes(a)||this.logger.error(Mn("WC_METHOD_UNSUPPORTED",a))},this.isValidPair=a=>{var l;if(!wu(a)){const{message:x}=pt("MISSING_OR_INVALID",`pair() params: ${a}`);throw new Error(x)}if(!function i0(r){if(un(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}(a.uri)){const{message:x}=pt("MISSING_OR_INVALID",`pair() uri: ${a.uri}`);throw new Error(x)}const f=Fd(a.uri);if(null==(l=f?.relay)||!l.protocol){const{message:x}=pt("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(x)}if(null==f||!f.symKey){const{message:x}=pt("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(x)}},this.isValidPing=function(){var a=(0,b.Z)(function*(l){if(!wu(l)){const{message:x}=pt("MISSING_OR_INVALID",`ping() params: ${l}`);throw new Error(x)}const{topic:f}=l;yield o.isValidPairingTopic(f)});return function(l){return a.apply(this,arguments)}}(),this.isValidDisconnect=function(){var a=(0,b.Z)(function*(l){if(!wu(l)){const{message:x}=pt("MISSING_OR_INVALID",`disconnect() params: ${l}`);throw new Error(x)}const{topic:f}=l;yield o.isValidPairingTopic(f)});return function(l){return a.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var a=(0,b.Z)(function*(l){if(!un(l,!1)){const{message:f}=pt("MISSING_OR_INVALID",`pairing topic should be a string: ${l}`);throw new Error(f)}if(!o.pairings.keys.includes(l)){const{message:f}=pt("NO_MATCHING_KEY",`pairing topic doesn't exist: ${l}`);throw new Error(f)}if(Cd(o.pairings.get(l).expiry)){yield o.deletePairing(l);const{message:f}=pt("EXPIRED",`pairing topic: ${l}`);throw new Error(f)}});return function(l){return a.apply(this,arguments)}}(),this.core=e,this.logger=(0,mt.generateChildLogger)(t,this.name),this.pairings=new ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,mt.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){var e=this;this.core.relayer.on("relayer_message",function(){var t=(0,b.Z)(function*(o){const{topic:a,message:l}=o;if(!e.pairings.keys.includes(a)||e.ignoredPayloadTypes.includes(e.core.crypto.getPayloadType(l)))return;const f=yield e.core.crypto.decode(a,l);try{Pu(f)?(e.core.history.set(a,f),e.onRelayEventRequest({topic:a,payload:f})):_a(f)&&(yield e.core.history.resolve(f),yield e.onRelayEventResponse({topic:a,payload:f}),e.core.history.delete(a,f.id))}catch(x){e.logger.error(x)}});return function(o){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.core.expirer.on(yn_expired,function(){var t=(0,b.Z)(function*(o){const{topic:a}=function Dv(r){const[e,t]=r.split(":"),o={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)o.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);o.id=Number(t)}return o}(o.target);a&&e.pairings.keys.includes(a)&&(yield e.deletePairing(a,!0),e.events.emit("pairing_expire",{topic:a}))});return function(o){return t.apply(this,arguments)}}())}}class a1 extends _m{constructor(e,t){var o;super(e,t),o=this,this.core=e,this.logger=t,this.records=new Map,this.events=new Pe.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=(0,b.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(a=>o.records.set(a.id,a)),o.cached=[],o.registerEventListeners(),o.initialized=!0)}),this.set=(a,l,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:a,request:l,chainId:f}),this.records.has(l.id))return;const x={id:l.id,topic:a,request:{method:l.method,params:l.params||null},chainId:f,expiry:fa(K.THIRTY_DAYS)};this.records.set(x.id,x),this.events.emit("history_created",x)},this.resolve=function(){var a=(0,b.Z)(function*(l){if(o.isInitialized(),o.logger.debug("Updating JSON-RPC response history record"),o.logger.trace({type:"method",method:"update",response:l}),!o.records.has(l.id))return;const f=yield o.getRecord(l.id);typeof f.response>"u"&&(f.response=kn(l)?{error:l.error}:{result:l.result},o.records.set(f.id,f),o.events.emit("history_updated",f))});return function(l){return a.apply(this,arguments)}}(),this.get=function(){var a=(0,b.Z)(function*(l,f){return o.isInitialized(),o.logger.debug("Getting record"),o.logger.trace({type:"method",method:"get",topic:l,id:f}),yield o.getRecord(f)});return function(l,f){return a.apply(this,arguments)}}(),this.delete=(a,l)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:l}),this.values.forEach(f=>{if(f.topic===a){if(typeof l<"u"&&f.id!==l)return;this.records.delete(f.id),this.events.emit("history_deleted",f)}})},this.exists=function(){var a=(0,b.Z)(function*(l,f){return o.isInitialized(),!!o.records.has(f)&&(yield o.getRecord(f)).topic===l});return function(l,f){return a.apply(this,arguments)}}(),this.on=(a,l)=>{this.events.on(a,l)},this.once=(a,l)=>{this.events.once(a,l)},this.off=(a,l)=>{this.events.off(a,l)},this.removeListener=(a,l)=>{this.events.removeListener(a,l)},this.logger=(0,mt.generateChildLogger)(t,this.name)}get context(){return(0,mt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const o={topic:t.topic,request:Os(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(o)}),e}setJsonRpcRecords(e){var t=this;return(0,b.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getJsonRpcRecords(){var e=this;return(0,b.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:o}=pt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(o)}return t}persist(){var e=this;return(0,b.Z)(function*(){yield e.setJsonRpcRecords(e.values),e.events.emit("history_sync")})()}restore(){var e=this;return(0,b.Z)(function*(){try{const t=yield e.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(e.records.size){const{message:o}=pt("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(o),new Error(o)}e.cached=t,e.logger.debug(`Successfully Restored records for ${e.name}`),e.logger.trace({type:"method",method:"restore",records:e.values})}catch(t){e.logger.debug(`Failed to Restore records for ${e.name}`),e.logger.error(t)}})()}registerEventListeners(){this.events.on("history_created",e=>{const t="history_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on("history_updated",e=>{const t="history_updated";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on("history_deleted",e=>{const t="history_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(uo.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{(0,K.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class c1 extends wm{constructor(e,t){var o;super(e,t),o=this,this.core=e,this.logger=t,this.expirations=new Map,this.events=new Pe.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Ci,this.init=(0,b.Z)(function*(){o.initialized||(o.logger.trace("Initialized"),yield o.restore(),o.cached.forEach(a=>o.expirations.set(a.target,a)),o.cached=[],o.registerEventListeners(),o.initialized=!0)}),this.has=a=>{try{const l=this.formatTarget(a);return typeof this.getExpiration(l)<"u"}catch{return!1}},this.set=(a,l)=>{this.isInitialized();const f=this.formatTarget(a),x={target:f,expiry:l};this.expirations.set(f,x),this.checkExpiry(f,x),this.events.emit("expirer_created",{target:f,expiration:x})},this.get=a=>{this.isInitialized();const l=this.formatTarget(a);return this.getExpiration(l)},this.del=a=>{if(this.isInitialized(),this.has(a)){const l=this.formatTarget(a),f=this.getExpiration(l);this.expirations.delete(l),this.events.emit("expirer_deleted",{target:l,expiration:f})}},this.on=(a,l)=>{this.events.on(a,l)},this.once=(a,l)=>{this.events.once(a,l)},this.off=(a,l)=>{this.events.off(a,l)},this.removeListener=(a,l)=>{this.events.removeListener(a,l)},this.logger=(0,mt.generateChildLogger)(t,this.name)}get context(){return(0,mt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function Cv(r){return Td("topic",r)}(e);if("number"==typeof e)return function jv(r){return Td("id",r)}(e);const{message:t}=pt("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}setExpirations(e){var t=this;return(0,b.Z)(function*(){yield t.core.storage.setItem(t.storageKey,e)})()}getExpirations(){var e=this;return(0,b.Z)(function*(){return yield e.core.storage.getItem(e.storageKey)})()}persist(){var e=this;return(0,b.Z)(function*(){yield e.setExpirations(e.values),e.events.emit("expirer_sync")})()}restore(){var e=this;return(0,b.Z)(function*(){try{const t=yield e.getExpirations();if(typeof t>"u"||!t.length)return;if(e.expirations.size){const{message:o}=pt("RESTORE_WILL_OVERRIDE",e.name);throw e.logger.error(o),new Error(o)}e.cached=t,e.logger.debug(`Successfully Restored expirations for ${e.name}`),e.logger.trace({type:"method",method:"restore",expirations:e.values})}catch(t){e.logger.debug(`Failed to Restore expirations for ${e.name}`),e.logger.error(t)}})()}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:o}=pt("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}return t}checkExpiry(e,t){const{expiry:o}=t;(0,K.toMiliseconds)(o)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(yn_expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(uo.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",e=>{const t="expirer_created";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(yn_expired,e=>{const t=yn_expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on("expirer_deleted",e=>{const t="expirer_deleted";this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=pt("NOT_INITIALIZED",this.name);throw new Error(e)}}}class u1 extends Em{constructor(e,t){var o;super(e,t),o=this,this.projectId=e,this.logger=t,this.name=Cu,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=function(){var a=(0,b.Z)(function*(l){if(o.verifyDisabled||Es()||!fo())return;const f=o.getVerifyUrl(l?.verifyUrl);o.verifyUrl!==f&&o.removeIframe(),o.verifyUrl=f;try{yield o.createIframe()}catch(x){o.logger.info(`Verify iframe failed to load: ${o.verifyUrl}`),o.logger.info(x)}if(!o.initialized){o.removeIframe(),o.verifyUrl=ju;try{yield o.createIframe()}catch(x){o.logger.info(`Verify iframe failed to load: ${o.verifyUrl}`),o.logger.info(x),o.verifyDisabled=!0}}});return function(l){return a.apply(this,arguments)}}(),this.register=function(){var a=(0,b.Z)(function*(l){o.initialized?o.sendPost(l.attestationId):(o.addToQueue(l.attestationId),yield o.init())});return function(l){return a.apply(this,arguments)}}(),this.resolve=function(){var a=(0,b.Z)(function*(l){if(o.isDevEnv)return"";const f=o.getVerifyUrl(l?.verifyUrl);let x;try{x=yield o.fetchAttestation(l.attestationId,f)}catch(C){o.logger.info(`failed to resolve attestation: ${l.attestationId} from url: ${f}`),o.logger.info(C),x=yield o.fetchAttestation(l.attestationId,ju)}return x});return function(l){return a.apply(this,arguments)}}(),this.fetchAttestation=function(){var a=(0,b.Z)(function*(l,f){o.logger.info(`resolving attestation: ${l} from url: ${f}`);const x=o.startAbortTimer(2*K.ONE_SECOND),C=yield fetch(`${f}/attestation/${l}`,{signal:o.abortController.signal});return clearTimeout(x),200===C.status?yield C.json():void 0});return function(l,f){return a.apply(this,arguments)}}(),this.addToQueue=a=>{this.queue.push(a)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(a=>this.sendPost(a)),this.queue=[])},this.sendPost=a=>{var l;try{if(!this.iframe)return;null==(l=this.iframe.contentWindow)||l.postMessage(a,"*"),this.logger.info(`postMessage sent: ${a} ${this.verifyUrl}`)}catch{}},this.createIframe=(0,b.Z)(function*(){let a;const l=f=>{"verify_ready"===f.data&&(o.initialized=!0,o.processQueue(),window.removeEventListener("message",l),a())};yield Promise.race([new Promise(f=>{if(document.getElementById(Cu))return f();window.addEventListener("message",l);const x=document.createElement("iframe");x.id=Cu,x.src=`${o.verifyUrl}/${o.projectId}`,x.style.display="none",document.body.append(x),o.iframe=x,a=f}),new Promise((f,x)=>setTimeout(()=>{window.removeEventListener("message",l),x("verify iframe load timeout")},(0,K.toMiliseconds)(K.FIVE_SECONDS)))])}),this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=a=>{let l=a||Ss;return kw.includes(l)||(this.logger.info(`verify url: ${l}, not included in trusted list, assigning default: ${Ss}`),l=Ss),l},this.logger=(0,mt.generateChildLogger)(t,this.name),this.verifyUrl=Ss,this.abortController=new AbortController,this.isDevEnv=pu()&&process.env.IS_VITEST}get context(){return(0,mt.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,K.toMiliseconds)(e))}}var l1=Object.defineProperty,Ch=Object.getOwnPropertySymbols,f1=Object.prototype.hasOwnProperty,d1=Object.prototype.propertyIsEnumerable,jh=(r,e,t)=>e in r?l1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Dh=(r,e)=>{for(var t in e||(e={}))f1.call(e,t)&&jh(r,t,e[t]);if(Ch)for(var t of Ch(e))d1.call(e,t)&&jh(r,t,e[t]);return r};class Fu extends pm{constructor(e){super(e),this.protocol="wc",this.version=2,this.name="core",this.events=new Pe.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||xh,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,mt.pino)((0,mt.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.logger=(0,mt.generateChildLogger)(t,this.name),this.heartbeat=new uo.HeartBeat,this.crypto=new qw(this,this.logger,e?.keychain),this.history=new a1(this,this.logger),this.expirer=new c1(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new hm(Dh(Dh({},pw),e?.storageOptions)),this.relayer=new r1({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new o1(this,this.logger),this.verify=new u1(this.projectId||"",this.logger)}static init(e){return(0,b.Z)(function*(){const t=new Fu(e);yield t.initialize();const o=yield t.crypto.getClientId();return yield t.storage.setItem("WALLETCONNECT_CLIENT_ID",o),t})()}get context(){return(0,mt.getLoggerContext)(this.logger)}start(){var e=this;return(0,b.Z)(function*(){e.initialized||(yield e.initialize())})()}initialize(){var e=this;return(0,b.Z)(function*(){e.logger.trace("Initialized");try{yield e.crypto.init(),yield e.history.init(),yield e.expirer.init(),yield e.relayer.init(),yield e.heartbeat.init(),yield e.pairing.init(),e.initialized=!0,e.logger.info("Core Initialization Success")}catch(t){throw e.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),e.logger.error(t.message),t}})()}}const h1=Fu;function $u(r,e){return r.includes(":")?[r]:e.chains||[]}Y(960);function qu(r){const e=(0,we.vp)((0,ie.mL)(r,"utf8"));return(0,ie.BB)(e,"base16")}const R1="ReactNative",Wr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function Hh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function wo(){return!Hh()&&!!(0,Re.getNavigator)()}function Ns(){return function bo(){return!(0,Re.getDocument)()&&!!(0,Re.getNavigator)()&&navigator.product===R1}()?Wr.reactNative:Hh()?Wr.node:wo()?Wr.browser:Wr.unknown}function Yi(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Eo(r=K.FIVE_MINUTES,e){const t=(0,K.toMiliseconds)(r||K.FIVE_MINUTES);let o,a,l;return{resolve:f=>{l&&o&&(clearTimeout(l),o(f))},reject:f=>{l&&a&&(clearTimeout(l),a(f))},done:()=>new Promise((f,x)=>{l=setTimeout(()=>{x(new Error(e))},t),o=f,a=x})}}function Xi(r,e){return(0,K.fromMiliseconds)((e||Date.now())+(0,K.toMiliseconds)(r))}function Rs(r){return Date.now()>=(0,K.toMiliseconds)(r)}function Pr(r,e){return`${r}${e?`:${e}`:""}`}function Zu(){return(Zu=(0,b.Z)(function*({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;let a=("string"==typeof t?JSON.parse(t):t)?.href;if("string"!=typeof a)return;a.endsWith("/")&&(a=a.slice(0,-1));const l=`${a}/wc?requestId=${r}&sessionTopic=${e}`,f=Ns();f===Wr.browser?l.startsWith("https://")?window.open(l,"_blank","noreferrer noopener"):window.open(l,"_self","noreferrer noopener"):f===Wr.reactNative&&typeof(null==global?void 0:global.Linking)<"u"&&(yield global.Linking.openURL(l))}catch(o){console.error(o)}})).apply(this,arguments)}function Hu(){return(Hu=(0,b.Z)(function*(r,e){try{return(yield r.getItem(e))||(wo()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}})).apply(this,arguments)}function As(r){const e=[];return r.forEach(t=>{const[o,a]=t.split(":");e.push(`${o}:${a}`)}),e}const uE={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},lE={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Xe(r,e){const{message:t,code:o}=lE[r];return{message:e?`${t} ${e}`:t,code:o}}function ln(r,e){const{message:t,code:o}=uE[r];return{message:e?`${t} ${e}`:t,code:o}}function ba(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))}function Ts(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function mn(r){return typeof r>"u"}function Nr(r,e){return!(!e||!mn(r))||"string"==typeof r&&!!r.trim().length}function Bu(r,e){return!(!e||!mn(r))||"number"==typeof r&&!isNaN(r)}function wa(r){return!(!Nr(r,!1)||!r.includes(":"))&&2===r.split(":").length}function Xh(r){let e=!0;return ba(r)?r.length&&(e=r.every(t=>Nr(t,!1))):e=!1,e}function ep(r,e){let t=null;return Object.values(r).forEach(o=>{if(t)return;const a=function mE(r,e){let t=null;return Xh(r?.methods)?Xh(r?.events)||(t=ln("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=ln("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}(o,`${e}, namespace`);a&&(t=a)}),t}function Ea(r,e){let t=null;if(r&&Ts(r)){const o=ep(r,e);o&&(t=o);const a=function yE(r,e){let t=null;return Object.values(r).forEach(o=>{if(t)return;const a=function gE(r,e){let t=null;return ba(r)?r.forEach(o=>{t||function dE(r){if(Nr(r,!1)&&r.includes(":")){const e=r.split(":");if(3===e.length)return!!e[2]&&wa(e[0]+":"+e[1])}return!1}(o)||(t=ln("UNSUPPORTED_ACCOUNTS",`${e}, account ${o} should be a string and conform to "namespace:chainId:address" format`))}):t=ln("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}(o?.accounts,`${e} namespace`);a&&(t=a)}),t}(r,e);a&&(t=a)}else t=Xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function tp(r){return Nr(r.protocol,!0)}function qn(r){return typeof r<"u"&&null!==typeof r}function rp(r,e){return!(!wa(e)||!function iE(r){const e=[];return Object.values(r).forEach(t=>{e.push(...As(t.accounts))}),e}(r).includes(e))}function Vu(r,e,t){let o=null;const a=function NE(r){const e={};return Object.keys(r).forEach(t=>{var o;t.includes(":")?e[t]=r[t]:null==(o=r[t].chains)||o.forEach(a=>{e[a]={methods:r[t].methods,events:r[t].events}})}),e}(r),l=function RE(r){const e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:As(r[t].accounts)?.forEach(a=>{e[a]={accounts:r[t].accounts.filter(l=>l.includes(`${a}:`)),methods:r[t].methods,events:r[t].events}})}),e}(e),f=Object.keys(a),x=Object.keys(l),C=np(Object.keys(r)),m=np(Object.keys(e)),A=C.filter($=>!m.includes($));return A.length&&(o=Xe("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${A.toString()}\n      Received: ${Object.keys(e).toString()}`)),Yi(f,x)||(o=Xe("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.\n      Required: ${f.toString()}\n      Approved: ${x.toString()}`)),Object.keys(e).forEach($=>{if(!$.includes(":")||o)return;const te=As(e[$].accounts);te.includes($)||(o=Xe("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${$}\n        Required: ${$}\n        Approved: ${te.toString()}`))}),f.forEach($=>{o||(Yi(a[$].methods,l[$].methods)?Yi(a[$].events,l[$].events)||(o=Xe("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${$}`)):o=Xe("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${$}`))}),o}function np(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}const Wu={};class xa{static get(e){return Wu[e]}static set(e,t){Wu[e]=t}static delete(e){delete Wu[e]}}const Ju="wc@2:client:",ap="WALLETCONNECT_DEEPLINK_CHOICE",cp="Proposal expired",Ia=K.SEVEN_DAYS,xo={wc_sessionPropose:{req:{ttl:K.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:K.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:K.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:K.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:K.ONE_DAY,prompt:!1,tag:1104},res:{ttl:K.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:K.ONE_DAY,prompt:!1,tag:1106},res:{ttl:K.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:K.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:K.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:K.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:K.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:K.ONE_DAY,prompt:!1,tag:1112},res:{ttl:K.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:K.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:K.THIRTY_SECONDS,prompt:!1,tag:1115}}},Yu={min:K.FIVE_MINUTES,max:K.SEVEN_DAYS},kE=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var KE=Object.defineProperty,qE=Object.defineProperties,zE=Object.getOwnPropertyDescriptors,up=Object.getOwnPropertySymbols,ZE=Object.prototype.hasOwnProperty,HE=Object.prototype.propertyIsEnumerable,lp=(r,e,t)=>e in r?KE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Jr=(r,e)=>{for(var t in e||(e={}))ZE.call(e,t)&&lp(r,t,e[t]);if(up)for(var t of up(e))HE.call(e,t)&&lp(r,t,e[t]);return r},Io=(r,e)=>qE(r,zE(e));class BE extends Im{constructor(e){var t;super(e),t=this,this.name="engine",this.events=new(je()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:"IDLE",queue:[]},this.sessionRequestQueue={state:"IDLE",queue:[]},this.requestQueueDelay=K.ONE_SECOND,this.init=(0,b.Z)(function*(){t.initialized||(yield t.cleanup(),t.registerRelayerEvents(),t.registerExpirerEvents(),t.registerPairingEvents(),t.client.core.pairing.register({methods:Object.keys(xo)}),t.initialized=!0,setTimeout(()=>{t.sessionRequestQueue.queue=t.getPendingSessionRequests(),t.processSessionRequestQueue()},(0,K.toMiliseconds)(t.requestQueueDelay)))}),this.connect=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized();const l=Io(Jr({},a),{requiredNamespaces:a.requiredNamespaces||{},optionalNamespaces:a.optionalNamespaces||{}});yield t.isValidConnect(l);const{pairingTopic:f,requiredNamespaces:x,optionalNamespaces:C,sessionProperties:m,relays:A}=l;let te,$=f,xe=!1;if($&&(xe=t.client.core.pairing.pairings.get($).active),!$||!xe){const{topic:ze,uri:rt}=yield t.client.core.pairing.create();$=ze,te=rt}const ee=yield t.client.core.crypto.generateKeyPair(),Oe=Jr({requiredNamespaces:x,optionalNamespaces:C,relays:A??[{protocol:"irn"}],proposer:{publicKey:ee,metadata:t.client.metadata}},m&&{sessionProperties:m}),{reject:De,resolve:at,done:Ot}=Eo(K.FIVE_MINUTES,cp);if(t.events.once(Pr("session_connect"),function(){var ze=(0,b.Z)(function*({error:rt,session:bt}){if(rt)De(rt);else if(bt){bt.self.publicKey=ee;const wr=Io(Jr({},bt),{requiredNamespaces:bt.requiredNamespaces,optionalNamespaces:bt.optionalNamespaces});yield t.client.session.set(bt.topic,wr),yield t.setExpiry(bt.topic,bt.expiry),$&&(yield t.client.core.pairing.updateMetadata({topic:$,metadata:bt.peer.metadata})),at(wr)}});return function(rt){return ze.apply(this,arguments)}}()),!$){const{message:ze}=Xe("NO_MATCHING_KEY",`connect() pairing topic: ${$}`);throw new Error(ze)}const dt=yield t.sendRequest({topic:$,method:"wc_sessionPropose",params:Oe}),He=Xi(K.FIVE_MINUTES);return yield t.setProposal(dt,Jr({id:dt,expiry:He},Oe)),{uri:te,approval:Ot}});return function(a){return o.apply(this,arguments)}}(),this.pair=function(){var o=(0,b.Z)(function*(a){return yield t.isInitialized(),yield t.client.core.pairing.pair(a)});return function(a){return o.apply(this,arguments)}}(),this.approve=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidApprove(a);const{id:l,relayProtocol:f,namespaces:x,sessionProperties:C}=a,m=t.client.proposal.get(l);let{pairingTopic:A,proposer:$,requiredNamespaces:te,optionalNamespaces:xe}=m;A=A||"",Ts(te)||(te=function aE(r,e){const t=Ea(r,e);if(t)throw new Error(t.message);const o={};for(const[a,l]of Object.entries(r))o[a]={methods:l.methods,events:l.events,chains:l.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return o}(x,"approve()"));const ee=yield t.client.core.crypto.generateKeyPair(),Oe=$.publicKey,De=yield t.client.core.crypto.generateSharedKey(ee,Oe);A&&l&&(yield t.client.core.pairing.updateMetadata({topic:A,metadata:$.metadata}),yield t.sendResult({id:l,topic:A,result:{relay:{protocol:f??"irn"},responderPublicKey:ee}}),yield t.client.proposal.delete(l,ln("USER_DISCONNECTED")),yield t.client.core.pairing.activate({topic:A}));const at=Jr({relay:{protocol:f??"irn"},namespaces:x,requiredNamespaces:te,optionalNamespaces:xe,pairingTopic:A,controller:{publicKey:ee,metadata:t.client.metadata},expiry:Xi(Ia)},C&&{sessionProperties:C});yield t.client.core.relayer.subscribe(De),yield t.sendRequest({topic:De,method:"wc_sessionSettle",params:at,throwOnFailedPublish:!0});const Ot=Io(Jr({},at),{topic:De,pairingTopic:A,acknowledged:!1,self:at.controller,peer:{publicKey:$.publicKey,metadata:$.metadata},controller:ee});return yield t.client.session.set(De,Ot),yield t.setExpiry(De,Xi(Ia)),{topic:De,acknowledged:()=>new Promise(dt=>setTimeout(()=>dt(t.client.session.get(De)),500))}});return function(a){return o.apply(this,arguments)}}(),this.reject=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidReject(a);const{id:l,reason:f}=a,{pairingTopic:x}=t.client.proposal.get(l);x&&(yield t.sendError(l,x,f),yield t.client.proposal.delete(l,ln("USER_DISCONNECTED")))});return function(a){return o.apply(this,arguments)}}(),this.update=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidUpdate(a);const{topic:l,namespaces:f}=a,x=yield t.sendRequest({topic:l,method:"wc_sessionUpdate",params:{namespaces:f}}),{done:C,resolve:m,reject:A}=Eo();return t.events.once(Pr("session_update",x),({error:$})=>{$?A($):m()}),yield t.client.session.update(l,{namespaces:f}),{acknowledged:C}});return function(a){return o.apply(this,arguments)}}(),this.extend=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidExtend(a);const{topic:l}=a,f=yield t.sendRequest({topic:l,method:"wc_sessionExtend",params:{}}),{done:x,resolve:C,reject:m}=Eo();return t.events.once(Pr("session_extend",f),({error:A})=>{A?m(A):C()}),yield t.setExpiry(l,Xi(Ia)),{acknowledged:x}});return function(a){return o.apply(this,arguments)}}(),this.request=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidRequest(a);const{chainId:l,request:f,topic:x,expiry:C}=a,m=Ou(),{done:A,resolve:$,reject:te}=Eo(C,"Request expired. Please try again.");return t.events.once(Pr("session_request",m),({error:xe,result:ee})=>{xe?te(xe):$(ee)}),yield Promise.all([new Promise(function(){var xe=(0,b.Z)(function*(ee){yield t.sendRequest({clientRpcId:m,topic:x,method:"wc_sessionRequest",params:{request:f,chainId:l},expiry:C,throwOnFailedPublish:!0}).catch(Oe=>te(Oe)),t.client.events.emit("session_request_sent",{topic:x,request:f,chainId:l,id:m}),ee()});return function(ee){return xe.apply(this,arguments)}}()),new Promise(function(){var xe=(0,b.Z)(function*(ee){const Oe=yield function q1(r,e){return Hu.apply(this,arguments)}(t.client.core.storage,ap);(function K1(r){Zu.apply(this,arguments)})({id:m,topic:x,wcDeepLink:Oe}),ee()});return function(ee){return xe.apply(this,arguments)}}()),A()]).then(xe=>xe[2])});return function(a){return o.apply(this,arguments)}}(),this.respond=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidRespond(a);const{topic:l,response:f}=a,{id:x}=f;hi(f)?yield t.sendResult({id:x,topic:l,result:f.result,throwOnFailedPublish:!0}):kn(f)&&(yield t.sendError(x,l,f.error)),t.cleanupAfterResponse(a)});return function(a){return o.apply(this,arguments)}}(),this.ping=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidPing(a);const{topic:l}=a;if(t.client.session.keys.includes(l)){const f=yield t.sendRequest({topic:l,method:"wc_sessionPing",params:{}}),{done:x,resolve:C,reject:m}=Eo();t.events.once(Pr("session_ping",f),({error:A})=>{A?m(A):C()}),yield x()}else t.client.core.pairing.pairings.keys.includes(l)&&(yield t.client.core.pairing.ping({topic:l}))});return function(a){return o.apply(this,arguments)}}(),this.emit=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidEmit(a);const{topic:l,event:f,chainId:x}=a;yield t.sendRequest({topic:l,method:"wc_sessionEvent",params:{event:f,chainId:x}})});return function(a){return o.apply(this,arguments)}}(),this.disconnect=function(){var o=(0,b.Z)(function*(a){yield t.isInitialized(),yield t.isValidDisconnect(a);const{topic:l}=a;t.client.session.keys.includes(l)?(yield t.sendRequest({topic:l,method:"wc_sessionDelete",params:ln("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield t.deleteSession(l)):yield t.client.core.pairing.disconnect({topic:l})});return function(a){return o.apply(this,arguments)}}(),this.find=o=>(this.isInitialized(),this.client.session.getAll().filter(a=>function fE(r,e){const{requiredNamespaces:t}=e,o=Object.keys(r.namespaces),a=Object.keys(t);let l=!0;return!!Yi(a,o)&&(o.forEach(f=>{const{accounts:x,methods:C,events:m}=r.namespaces[f],A=As(x),$=t[f];Yi($u(f,$),A)&&Yi($.methods,C)&&Yi($.events,m)||(l=!1)}),l)}(a,o))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=function(){var o=(0,b.Z)(function*(a){if(a.pairingTopic)try{const l=t.client.core.pairing.pairings.get(a.pairingTopic),f=t.client.core.pairing.pairings.getAll().filter(x=>{var C,m;return(null==(C=x.peerMetadata)?void 0:C.url)&&(null==(m=x.peerMetadata)?void 0:m.url)===a.peer.metadata.url&&x.topic&&x.topic!==l.topic});if(0===f.length)return;t.client.logger.info(`Cleaning up ${f.length} duplicate pairing(s)`),yield Promise.all(f.map(x=>t.client.core.pairing.disconnect({topic:x.topic}))),t.client.logger.info("Duplicate pairings clean up finished")}catch(l){t.client.logger.error(l)}});return function(a){return o.apply(this,arguments)}}(),this.deleteSession=function(){var o=(0,b.Z)(function*(a,l){const{self:f}=t.client.session.get(a);yield t.client.core.relayer.unsubscribe(a),t.client.session.delete(a,ln("USER_DISCONNECTED")),t.client.core.crypto.keychain.has(f.publicKey)&&(yield t.client.core.crypto.deleteKeyPair(f.publicKey)),t.client.core.crypto.keychain.has(a)&&(yield t.client.core.crypto.deleteSymKey(a)),l||t.client.core.expirer.del(a),t.client.core.storage.removeItem(ap).catch(x=>t.client.logger.warn(x))});return function(a,l){return o.apply(this,arguments)}}(),this.deleteProposal=function(){var o=(0,b.Z)(function*(a,l){yield Promise.all([t.client.proposal.delete(a,ln("USER_DISCONNECTED")),l?Promise.resolve():t.client.core.expirer.del(a)])});return function(a,l){return o.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var o=(0,b.Z)(function*(a,l,f=!1){yield Promise.all([t.client.pendingRequest.delete(a,l),f?Promise.resolve():t.client.core.expirer.del(a)]),t.sessionRequestQueue.queue=t.sessionRequestQueue.queue.filter(x=>x.id!==a),f&&(t.sessionRequestQueue.state="IDLE")});return function(a,l){return o.apply(this,arguments)}}(),this.setExpiry=function(){var o=(0,b.Z)(function*(a,l){t.client.session.keys.includes(a)&&(yield t.client.session.update(a,{expiry:l})),t.client.core.expirer.set(a,l)});return function(a,l){return o.apply(this,arguments)}}(),this.setProposal=function(){var o=(0,b.Z)(function*(a,l){yield t.client.proposal.set(a,l),t.client.core.expirer.set(a,l.expiry)});return function(a,l){return o.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var o=(0,b.Z)(function*(a){const l=xo.wc_sessionRequest.req.ttl,{id:f,topic:x,params:C,verifyContext:m}=a;yield t.client.pendingRequest.set(f,{id:f,topic:x,params:C,verifyContext:m}),l&&t.client.core.expirer.set(f,Xi(l))});return function(a){return o.apply(this,arguments)}}(),this.sendRequest=function(){var o=(0,b.Z)(function*(a){const{topic:l,method:f,params:x,expiry:C,relayRpcId:m,clientRpcId:A,throwOnFailedPublish:$}=a,te=Os(f,x,A);if(wo()&&kE.includes(f)){const Oe=qu(JSON.stringify(te));t.client.core.verify.register({attestationId:Oe})}const xe=yield t.client.core.crypto.encode(l,te),ee=xo[f].req;return C&&(ee.ttl=C),m&&(ee.id=m),t.client.core.history.set(l,te),$?(ee.internal=Io(Jr({},ee.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(l,xe,ee)):t.client.core.relayer.publish(l,xe,ee).catch(Oe=>t.client.logger.error(Oe)),te.id});return function(a){return o.apply(this,arguments)}}(),this.sendResult=function(){var o=(0,b.Z)(function*(a){const{id:l,topic:f,result:x,throwOnFailedPublish:C}=a,m=Su(l,x),A=yield t.client.core.crypto.encode(f,m),$=yield t.client.core.history.get(f,l),te=xo[$.request.method].res;C?(te.internal=Io(Jr({},te.internal),{throwOnFailedPublish:!0}),yield t.client.core.relayer.publish(f,A,te)):t.client.core.relayer.publish(f,A,te).catch(xe=>t.client.logger.error(xe)),yield t.client.core.history.resolve(m)});return function(a){return o.apply(this,arguments)}}(),this.sendError=function(){var o=(0,b.Z)(function*(a,l,f){const x=pa(a,f),C=yield t.client.core.crypto.encode(l,x),m=yield t.client.core.history.get(l,a);t.client.core.relayer.publish(l,C,xo[m.request.method].res),yield t.client.core.history.resolve(x)});return function(a,l,f){return o.apply(this,arguments)}}(),this.cleanup=(0,b.Z)(function*(){const o=[],a=[];t.client.session.getAll().forEach(l=>{Rs(l.expiry)&&o.push(l.topic)}),t.client.proposal.getAll().forEach(l=>{Rs(l.expiry)&&a.push(l.id)}),yield Promise.all([...o.map(l=>t.deleteSession(l)),...a.map(l=>t.deleteProposal(l))])}),this.onRelayEventRequest=function(){var o=(0,b.Z)(function*(a){t.requestQueue.queue.push(a),yield t.processRequestsQueue()});return function(a){return o.apply(this,arguments)}}(),this.processRequestsQueue=(0,b.Z)(function*(){if("ACTIVE"!==t.requestQueue.state){for(t.client.logger.info(`Request queue starting with ${t.requestQueue.queue.length} requests`);t.requestQueue.queue.length>0;){t.requestQueue.state="ACTIVE";const o=t.requestQueue.queue.shift();if(o)try{t.processRequest(o),yield new Promise(a=>setTimeout(a,300))}catch(a){t.client.logger.warn(a)}}t.requestQueue.state="IDLE"}else t.client.logger.info("Request queue already active, skipping...")}),this.processRequest=o=>{const{topic:a,payload:l}=o,f=l.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(a,l);case"wc_sessionSettle":return this.onSessionSettleRequest(a,l);case"wc_sessionUpdate":return this.onSessionUpdateRequest(a,l);case"wc_sessionExtend":return this.onSessionExtendRequest(a,l);case"wc_sessionPing":return this.onSessionPingRequest(a,l);case"wc_sessionDelete":return this.onSessionDeleteRequest(a,l);case"wc_sessionRequest":return this.onSessionRequest(a,l);case"wc_sessionEvent":return this.onSessionEventRequest(a,l);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=function(){var o=(0,b.Z)(function*(a){const{topic:l,payload:f}=a,x=(yield t.client.core.history.get(l,f.id)).request.method;switch(x){case"wc_sessionPropose":return t.onSessionProposeResponse(l,f);case"wc_sessionSettle":return t.onSessionSettleResponse(l,f);case"wc_sessionUpdate":return t.onSessionUpdateResponse(l,f);case"wc_sessionExtend":return t.onSessionExtendResponse(l,f);case"wc_sessionPing":return t.onSessionPingResponse(l,f);case"wc_sessionRequest":return t.onSessionRequestResponse(l,f);default:return t.client.logger.info(`Unsupported response method ${x}`)}});return function(a){return o.apply(this,arguments)}}(),this.onRelayEventUnknownPayload=o=>{const{topic:a}=o,{message:l}=Xe("MISSING_OR_INVALID",`Decoded payload on topic ${a} is not identifiable as a JSON-RPC request or a response.`);throw new Error(l)},this.onSessionProposeRequest=function(){var o=(0,b.Z)(function*(a,l){const{params:f,id:x}=l;try{t.isValidConnect(Jr({},l.params));const C=Xi(K.FIVE_MINUTES),m=Jr({id:x,pairingTopic:a,expiry:C},f);yield t.setProposal(x,m);const A=qu(JSON.stringify(l)),$=yield t.getVerifyContext(A,m.proposer.metadata);t.client.events.emit("session_proposal",{id:x,params:m,verifyContext:$})}catch(C){yield t.sendError(x,a,C),t.client.logger.error(C)}});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var o=(0,b.Z)(function*(a,l){const{id:f}=l;if(hi(l)){const{result:x}=l;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:x});const C=t.client.proposal.get(f);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:C});const m=C.proposer.publicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:m});const A=x.responderPublicKey;t.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:A});const $=yield t.client.core.crypto.generateSharedKey(m,A);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:$});const te=yield t.client.core.relayer.subscribe($);t.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:te}),yield t.client.core.pairing.activate({topic:a})}else kn(l)&&(yield t.client.proposal.delete(f,ln("USER_DISCONNECTED")),t.events.emit(Pr("session_connect"),{error:l.error}))});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var o=(0,b.Z)(function*(a,l){const{id:f,params:x}=l;try{t.isValidSessionSettleRequest(x);const{relay:C,controller:m,expiry:A,namespaces:$,requiredNamespaces:te,optionalNamespaces:xe,sessionProperties:ee,pairingTopic:Oe}=l.params,De=Jr({topic:a,relay:C,expiry:A,namespaces:$,acknowledged:!0,pairingTopic:Oe,requiredNamespaces:te,optionalNamespaces:xe,controller:m.publicKey,self:{publicKey:"",metadata:t.client.metadata},peer:{publicKey:m.publicKey,metadata:m.metadata}},ee&&{sessionProperties:ee});yield t.sendResult({id:l.id,topic:a,result:!0}),t.events.emit(Pr("session_connect"),{session:De}),t.cleanupDuplicatePairings(De)}catch(C){yield t.sendError(f,a,C),t.client.logger.error(C)}});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var o=(0,b.Z)(function*(a,l){const{id:f}=l;hi(l)?(yield t.client.session.update(a,{acknowledged:!0}),t.events.emit(Pr("session_approve",f),{})):kn(l)&&(yield t.client.session.delete(a,ln("USER_DISCONNECTED")),t.events.emit(Pr("session_approve",f),{error:l.error}))});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var o=(0,b.Z)(function*(a,l){const{params:f,id:x}=l;try{const C=`${a}_session_update`,m=xa.get(C);if(m&&t.isRequestOutOfSync(m,x))return void t.client.logger.info(`Discarding out of sync request - ${x}`);t.isValidUpdate(Jr({topic:a},f)),yield t.client.session.update(a,{namespaces:f.namespaces}),yield t.sendResult({id:x,topic:a,result:!0}),t.client.events.emit("session_update",{id:x,topic:a,params:f}),xa.set(C,x)}catch(C){yield t.sendError(x,a,C),t.client.logger.error(C)}});return function(a,l){return o.apply(this,arguments)}}(),this.isRequestOutOfSync=(o,a)=>parseInt(a.toString().slice(0,-3))<=parseInt(o.toString().slice(0,-3)),this.onSessionUpdateResponse=(o,a)=>{const{id:l}=a;hi(a)?this.events.emit(Pr("session_update",l),{}):kn(a)&&this.events.emit(Pr("session_update",l),{error:a.error})},this.onSessionExtendRequest=function(){var o=(0,b.Z)(function*(a,l){const{id:f}=l;try{t.isValidExtend({topic:a}),yield t.setExpiry(a,Xi(Ia)),yield t.sendResult({id:f,topic:a,result:!0}),t.client.events.emit("session_extend",{id:f,topic:a})}catch(x){yield t.sendError(f,a,x),t.client.logger.error(x)}});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionExtendResponse=(o,a)=>{const{id:l}=a;hi(a)?this.events.emit(Pr("session_extend",l),{}):kn(a)&&this.events.emit(Pr("session_extend",l),{error:a.error})},this.onSessionPingRequest=function(){var o=(0,b.Z)(function*(a,l){const{id:f}=l;try{t.isValidPing({topic:a}),yield t.sendResult({id:f,topic:a,result:!0}),t.client.events.emit("session_ping",{id:f,topic:a})}catch(x){yield t.sendError(f,a,x),t.client.logger.error(x)}});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionPingResponse=(o,a)=>{const{id:l}=a;setTimeout(()=>{hi(a)?this.events.emit(Pr("session_ping",l),{}):kn(a)&&this.events.emit(Pr("session_ping",l),{error:a.error})},500)},this.onSessionDeleteRequest=function(){var o=(0,b.Z)(function*(a,l){const{id:f}=l;try{t.isValidDisconnect({topic:a,reason:l.params}),yield Promise.all([new Promise(x=>{t.client.core.relayer.once("relayer_publish",(0,b.Z)(function*(){x(yield t.deleteSession(a))}))}),t.sendResult({id:f,topic:a,result:!0})]),t.client.events.emit("session_delete",{id:f,topic:a})}catch(x){t.client.logger.error(x)}});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionRequest=function(){var o=(0,b.Z)(function*(a,l){const{id:f,params:x}=l;try{t.isValidRequest(Jr({topic:a},x));const C=qu(JSON.stringify(Os("wc_sessionRequest",x,f))),m=t.client.session.get(a),$={id:f,topic:a,params:x,verifyContext:yield t.getVerifyContext(C,m.peer.metadata)};yield t.setPendingSessionRequest($),t.addSessionRequestToSessionRequestQueue($),t.processSessionRequestQueue()}catch(C){yield t.sendError(f,a,C),t.client.logger.error(C)}});return function(a,l){return o.apply(this,arguments)}}(),this.onSessionRequestResponse=(o,a)=>{const{id:l}=a;hi(a)?this.events.emit(Pr("session_request",l),{result:a.result}):kn(a)&&this.events.emit(Pr("session_request",l),{error:a.error})},this.onSessionEventRequest=function(){var o=(0,b.Z)(function*(a,l){const{id:f,params:x}=l;try{const C=`${a}_session_event_${x.event.name}`,m=xa.get(C);if(m&&t.isRequestOutOfSync(m,f))return void t.client.logger.info(`Discarding out of sync request - ${f}`);t.isValidEmit(Jr({topic:a},x)),t.client.events.emit("session_event",{id:f,topic:a,params:x}),xa.set(C,f)}catch(C){yield t.sendError(f,a,C),t.client.logger.error(C)}});return function(a,l){return o.apply(this,arguments)}}(),this.addSessionRequestToSessionRequestQueue=o=>{this.sessionRequestQueue.queue.push(o)},this.cleanupAfterResponse=o=>{this.deletePendingSessionRequest(o.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state="IDLE",this.processSessionRequestQueue()},(0,K.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if("ACTIVE"===this.sessionRequestQueue.state)return void this.client.logger.info("session request queue is already active.");const o=this.sessionRequestQueue.queue[0];if(o)try{this.sessionRequestQueue.state="ACTIVE",this.client.events.emit("session_request",o)}catch(a){this.client.logger.error(a)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=o=>{if(o.active)return;const a=this.client.proposal.getAll().find(l=>l.pairingTopic===o.topic);a&&this.onSessionProposeRequest(o.topic,Os("wc_sessionPropose",{requiredNamespaces:a.requiredNamespaces,optionalNamespaces:a.optionalNamespaces,relays:a.relays,proposer:a.proposer,sessionProperties:a.sessionProperties},a.id))},this.isValidConnect=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:A}=Xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(a)}`);throw new Error(A)}const{pairingTopic:l,requiredNamespaces:f,optionalNamespaces:x,sessionProperties:C,relays:m}=a;if(mn(l)||(yield t.isValidPairingTopic(l)),!function bE(r,e){let t=!1;return e&&!r?t=!0:r&&ba(r)&&r.length&&r.forEach(o=>{t=tp(o)}),t}(m,!0)){const{message:A}=Xe("MISSING_OR_INVALID",`connect() relays: ${m}`);throw new Error(A)}!mn(f)&&0!==Ts(f)&&t.validateNamespaces(f,"requiredNamespaces"),!mn(x)&&0!==Ts(x)&&t.validateNamespaces(x,"optionalNamespaces"),mn(C)||t.validateSessionProps(C,"sessionProperties")});return function(a){return o.apply(this,arguments)}}(),this.validateNamespaces=(o,a)=>{const l=function vE(r,e,t){let o=null;if(r&&Ts(r)){const a=ep(r,e);a&&(o=a);const l=function _E(r,e,t){let o=null;return Object.entries(r).forEach(([a,l])=>{if(o)return;const f=function pE(r,e,t){let o=null;return ba(e)&&e.length?e.forEach(a=>{o||wa(a)||(o=ln("UNSUPPORTED_CHAINS",`${t}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):wa(r)||(o=ln("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),o}(a,$u(a,l),`${e} ${t}`);f&&(o=f)}),o}(r,e,t);l&&(o=l)}else o=Xe("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return o}(o,"connect()",a);if(l)throw new Error(l.message)},this.isValidApprove=function(){var o=(0,b.Z)(function*(a){if(!qn(a))throw new Error(Xe("MISSING_OR_INVALID",`approve() params: ${a}`).message);const{id:l,namespaces:f,relayProtocol:x,sessionProperties:C}=a;yield t.isValidProposalId(l);const m=t.client.proposal.get(l),A=Ea(f,"approve()");if(A)throw new Error(A.message);const $=Vu(m.requiredNamespaces,f,"approve()");if($)throw new Error($.message);if(!Nr(x,!0)){const{message:te}=Xe("MISSING_OR_INVALID",`approve() relayProtocol: ${x}`);throw new Error(te)}mn(C)||t.validateSessionProps(C,"sessionProperties")});return function(a){return o.apply(this,arguments)}}(),this.isValidReject=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:x}=Xe("MISSING_OR_INVALID",`reject() params: ${a}`);throw new Error(x)}const{id:l,reason:f}=a;if(yield t.isValidProposalId(l),!function EE(r){return!!(r&&"object"==typeof r&&r.code&&Bu(r.code,!1)&&r.message&&Nr(r.message,!1))}(f)){const{message:x}=Xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(f)}`);throw new Error(x)}});return function(a){return o.apply(this,arguments)}}(),this.isValidSessionSettleRequest=o=>{if(!qn(o)){const{message:A}=Xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${o}`);throw new Error(A)}const{relay:a,controller:l,namespaces:f,expiry:x}=o;if(!tp(a)){const{message:A}=Xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(A)}const C=function hE(r,e){let t=null;return Nr(r?.publicKey,!1)||(t=Xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}(l,"onSessionSettleRequest()");if(C)throw new Error(C.message);const m=Ea(f,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(Rs(x)){const{message:A}=Xe("EXPIRED","onSessionSettleRequest()");throw new Error(A)}},this.isValidUpdate=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:A}=Xe("MISSING_OR_INVALID",`update() params: ${a}`);throw new Error(A)}const{topic:l,namespaces:f}=a;yield t.isValidSessionTopic(l);const x=t.client.session.get(l),C=Ea(f,"update()");if(C)throw new Error(C.message);const m=Vu(x.requiredNamespaces,f,"update()");if(m)throw new Error(m.message)});return function(a){return o.apply(this,arguments)}}(),this.isValidExtend=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:f}=Xe("MISSING_OR_INVALID",`extend() params: ${a}`);throw new Error(f)}const{topic:l}=a;yield t.isValidSessionTopic(l)});return function(a){return o.apply(this,arguments)}}(),this.isValidRequest=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:A}=Xe("MISSING_OR_INVALID",`request() params: ${a}`);throw new Error(A)}const{topic:l,request:f,chainId:x,expiry:C}=a;yield t.isValidSessionTopic(l);const{namespaces:m}=t.client.session.get(l);if(!rp(m,x)){const{message:A}=Xe("MISSING_OR_INVALID",`request() chainId: ${x}`);throw new Error(A)}if(!function xE(r){return!(mn(r)||!Nr(r.method,!1))}(f)){const{message:A}=Xe("MISSING_OR_INVALID",`request() ${JSON.stringify(f)}`);throw new Error(A)}if(!function SE(r,e,t){return!!Nr(t,!1)&&function sE(r,e){const t=[];return Object.values(r).forEach(o=>{As(o.accounts).includes(e)&&t.push(...o.methods)}),t}(r,e).includes(t)}(m,x,f.method)){const{message:A}=Xe("MISSING_OR_INVALID",`request() method: ${f.method}`);throw new Error(A)}if(C&&!function AE(r,e){return Bu(r,!1)&&r<=e.max&&r>=e.min}(C,Yu)){const{message:A}=Xe("MISSING_OR_INVALID",`request() expiry: ${C}. Expiry must be a number (in seconds) between ${Yu.min} and ${Yu.max}`);throw new Error(A)}});return function(a){return o.apply(this,arguments)}}(),this.isValidRespond=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:x}=Xe("MISSING_OR_INVALID",`respond() params: ${a}`);throw new Error(x)}const{topic:l,response:f}=a;if(yield t.isValidSessionTopic(l),!function IE(r){return!(mn(r)||mn(r.result)&&mn(r.error)||!Bu(r.id,!1)||!Nr(r.jsonrpc,!1))}(f)){const{message:x}=Xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(f)}`);throw new Error(x)}});return function(a){return o.apply(this,arguments)}}(),this.isValidPing=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:f}=Xe("MISSING_OR_INVALID",`ping() params: ${a}`);throw new Error(f)}const{topic:l}=a;yield t.isValidSessionOrPairingTopic(l)});return function(a){return o.apply(this,arguments)}}(),this.isValidEmit=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:m}=Xe("MISSING_OR_INVALID",`emit() params: ${a}`);throw new Error(m)}const{topic:l,event:f,chainId:x}=a;yield t.isValidSessionTopic(l);const{namespaces:C}=t.client.session.get(l);if(!rp(C,x)){const{message:m}=Xe("MISSING_OR_INVALID",`emit() chainId: ${x}`);throw new Error(m)}if(!function OE(r){return!(mn(r)||!Nr(r.name,!1))}(f)){const{message:m}=Xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error(m)}if(!function PE(r,e,t){return!!Nr(t,!1)&&function oE(r,e){const t=[];return Object.values(r).forEach(o=>{As(o.accounts).includes(e)&&t.push(...o.events)}),t}(r,e).includes(t)}(C,x,f.name)){const{message:m}=Xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error(m)}});return function(a){return o.apply(this,arguments)}}(),this.isValidDisconnect=function(){var o=(0,b.Z)(function*(a){if(!qn(a)){const{message:f}=Xe("MISSING_OR_INVALID",`disconnect() params: ${a}`);throw new Error(f)}const{topic:l}=a;yield t.isValidSessionOrPairingTopic(l)});return function(a){return o.apply(this,arguments)}}(),this.getVerifyContext=function(){var o=(0,b.Z)(function*(a,l){const f={verified:{verifyUrl:l.verifyUrl||Ss,validation:"UNKNOWN",origin:l.url||""}};try{const x=yield t.client.core.verify.resolve({attestationId:a,verifyUrl:l.verifyUrl});x&&(f.verified.origin=x.origin,f.verified.isScam=x.isScam,f.verified.validation=x.origin===new URL(l.url).origin?"VALID":"INVALID")}catch(x){t.client.logger.info(x)}return t.client.logger.info(`Verify context: ${JSON.stringify(f)}`),f});return function(a,l){return o.apply(this,arguments)}}(),this.validateSessionProps=(o,a)=>{Object.values(o).forEach(l=>{if(!Nr(l,!1)){const{message:f}=Xe("MISSING_OR_INVALID",`${a} must be in Record<string, string> format. Received: ${JSON.stringify(l)}`);throw new Error(f)}})}}isInitialized(){var e=this;return(0,b.Z)(function*(){if(!e.initialized){const{message:t}=Xe("NOT_INITIALIZED",e.name);throw new Error(t)}yield e.client.core.relayer.confirmOnlineStateOrThrow()})()}registerRelayerEvents(){var e=this;this.client.core.relayer.on("relayer_message",function(){var t=(0,b.Z)(function*(o){const{topic:a,message:l}=o;if(e.ignoredPayloadTypes.includes(e.client.core.crypto.getPayloadType(l)))return;const f=yield e.client.core.crypto.decode(a,l);try{Pu(f)?(e.client.core.history.set(a,f),e.onRelayEventRequest({topic:a,payload:f})):_a(f)?(yield e.client.core.history.resolve(f),yield e.onRelayEventResponse({topic:a,payload:f}),e.client.core.history.delete(a,f.id)):e.onRelayEventUnknownPayload({topic:a,payload:f})}catch(x){e.client.logger.error(x)}});return function(o){return t.apply(this,arguments)}}())}registerExpirerEvents(){var e=this;this.client.core.expirer.on(yn_expired,function(){var t=(0,b.Z)(function*(o){const{topic:a,id:l}=function k1(r){const[e,t]=r.split(":"),o={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof t)o.topic=t;else{if("id"!==e||!Number.isInteger(Number(t)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);o.id=Number(t)}return o}(o.target);if(l&&e.client.pendingRequest.keys.includes(l))return yield e.deletePendingSessionRequest(l,Xe("EXPIRED"),!0);a?e.client.session.keys.includes(a)&&(yield e.deleteSession(a,!0),e.client.events.emit("session_expire",{topic:a})):l&&(yield e.deleteProposal(l,!0),e.client.events.emit("proposal_expire",{id:l}))});return function(o){return t.apply(this,arguments)}}())}registerPairingEvents(){this.client.core.pairing.events.on("pairing_create",e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Nr(e,!1)){const{message:t}=Xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Xe("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}isValidSessionTopic(e){var t=this;return(0,b.Z)(function*(){if(!Nr(e,!1)){const{message:o}=Xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(o)}if(!t.client.session.keys.includes(e)){const{message:o}=Xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(o)}if(Rs(t.client.session.get(e).expiry)){yield t.deleteSession(e);const{message:o}=Xe("EXPIRED",`session topic: ${e}`);throw new Error(o)}})()}isValidSessionOrPairingTopic(e){var t=this;return(0,b.Z)(function*(){if(t.client.session.keys.includes(e))yield t.isValidSessionTopic(e);else{if(!t.client.core.pairing.pairings.keys.includes(e)){if(Nr(e,!1)){const{message:o}=Xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(o)}{const{message:o}=Xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(o)}}t.isValidPairingTopic(e)}})()}isValidProposalId(e){var t=this;return(0,b.Z)(function*(){if(!function wE(r){return"number"==typeof r}(e)){const{message:o}=Xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(o)}if(!t.client.proposal.keys.includes(e)){const{message:o}=Xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(o)}if(Rs(t.client.proposal.get(e).expiry)){yield t.deleteProposal(e);const{message:o}=Xe("EXPIRED",`proposal id: ${e}`);throw new Error(o)}})()}}class VE extends ya{constructor(e,t){super(e,t,"proposal",Ju),this.core=e,this.logger=t}}class GE extends ya{constructor(e,t){super(e,t,"session",Ju),this.core=e,this.logger=t}}class WE extends ya{constructor(e,t){super(e,t,"request",Ju,o=>o.id),this.core=e,this.logger=t}}class Xu extends xm{constructor(e){var t;super(e),t=this,this.protocol="wc",this.version=2,this.name="client",this.events=new Pe.EventEmitter,this.on=(a,l)=>this.events.on(a,l),this.once=(a,l)=>this.events.once(a,l),this.off=(a,l)=>this.events.off(a,l),this.removeListener=(a,l)=>this.events.removeListener(a,l),this.removeAllListeners=a=>this.events.removeAllListeners(a),this.connect=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.connect(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.pair=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.pair(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.approve=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.approve(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.reject=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.reject(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.update=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.update(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.extend=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.extend(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.request=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.request(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.respond=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.respond(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.ping=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.ping(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.emit=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.emit(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.disconnect=function(){var a=(0,b.Z)(function*(l){try{return yield t.engine.disconnect(l)}catch(f){throw t.logger.error(f.message),f}});return function(l){return a.apply(this,arguments)}}(),this.find=a=>{try{return this.engine.find(a)}catch(l){throw this.logger.error(l.message),l}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(a){throw this.logger.error(a.message),a}},this.name=e?.name||"client",this.metadata=e?.metadata||function j1(){return(0,Fe.D)()||{name:"",description:"",url:"",icons:[""]}}();const o=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,mt.pino)((0,mt.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.core=e?.core||new h1(e),this.logger=(0,mt.generateChildLogger)(o,this.name),this.session=new GE(this.core,this.logger),this.proposal=new VE(this.core,this.logger),this.pendingRequest=new WE(this.core,this.logger),this.engine=new BE(this)}static init(e){return(0,b.Z)(function*(){const t=new Xu(e);return yield t.initialize(),t})()}get context(){return(0,mt.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var e=this;return(0,b.Z)(function*(){e.logger.trace("Initialized");try{yield e.core.start(),yield e.session.init(),yield e.proposal.init(),yield e.pendingRequest.init(),yield e.engine.init(),e.core.verify.init({verifyUrl:e.metadata.verifyUrl}),e.logger.info("SignClient Initialization Success")}catch(t){throw e.logger.info("SignClient Initialization Failure"),e.logger.error(t.message),t}})()}}Y(7803);const Oa=":";function ri(r=[],e=[]){return[...new Set([...r,...e])]}function Na(r){return r.includes(":")}function Ds(r){return Na(r)?r.split(":")[0]:r}const Lx={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function Di(r,e){const{message:t,code:o}=Lx[r];return{message:e?`${t} ${e}`:t,code:o}}function Fs(r,e){return!!Array.isArray(r)&&(!(typeof e<"u"&&r.length)||r.every(e))}var rI=Y(2055),Cp=Y.n(rI);const jp={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class Fp{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Pe.EventEmitter,this.isAvailable=!1,this.registering=!1,!Yd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(e=this.url){var t=this;return(0,b.Z)(function*(){yield t.register(e)})()}close(){var e=this;return(0,b.Z)(function*(){if(!e.isAvailable)throw new Error("Connection already closed");e.onClose()})()}send(e,t){var o=this;return(0,b.Z)(function*(){o.isAvailable||(yield o.register());try{const a=Wi(e),f=yield(yield Cp()(o.url,Object.assign(Object.assign({},jp),{body:a}))).json();o.onPayload({data:f})}catch(a){o.onError(e.id,a)}})()}register(e=this.url){var t=this;return(0,b.Z)(function*(){if(!Yd(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(t.registering){const o=t.events.getMaxListeners();return(t.events.listenerCount("register_error")>=o||t.events.listenerCount("open")>=o)&&t.events.setMaxListeners(o+1),new Promise((a,l)=>{t.events.once("register_error",f=>{t.resetMaxListeners(),l(f)}),t.events.once("open",()=>{if(t.resetMaxListeners(),typeof t.isAvailable>"u")return l(new Error("HTTP connection is missing or invalid"));a()})})}t.url=e,t.registering=!0;try{if(!t.disableProviderPing){const o=Wi({id:1,jsonrpc:"2.0",method:"test",params:[]});yield Cp()(e,Object.assign(Object.assign({},jp),{body:o}))}t.onOpen()}catch(o){const a=t.parseError(o);throw t.events.emit("register_error",a),t.onClose(),a}})()}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?co(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const o=this.parseError(t),l=pa(e,o.message||o.toString());this.events.emit("payload",l)}parseError(e,t=this.url){return Wd(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}const ns=Fp,Up="wc@2:universal_provider:";var r,e,Po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dl={exports:{}};r=dl,e=dl.exports,function(){var t,f="Expected a function",C="__lodash_hash_undefined__",A="__lodash_placeholder__",ss=1/0,Ui=9007199254740991,ni=4294967295,QI=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],$s="[object Arguments]",La="[object Array]",Ro="[object Boolean]",Ao="[object Date]",Ma="[object Error]",ka="[object Function]",Qp="[object GeneratorFunction]",zn="[object Map]",To="[object Number]",mi="[object Object]",Yp="[object Promise]",Co="[object RegExp]",Zn="[object Set]",jo="[object String]",Ka="[object Symbol]",Do="[object WeakMap]",Fo="[object ArrayBuffer]",Us="[object DataView]",ml="[object Float32Array]",vl="[object Float64Array]",bl="[object Int8Array]",wl="[object Int16Array]",El="[object Int32Array]",xl="[object Uint8Array]",Il="[object Uint8ClampedArray]",Ol="[object Uint16Array]",Sl="[object Uint32Array]",iO=/\b__p \+= '';/g,sO=/\b(__p \+=) '' \+/g,oO=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xp=/&(?:amp|lt|gt|quot|#39);/g,e_=/[&<>"']/g,aO=RegExp(Xp.source),cO=RegExp(e_.source),uO=/<%-([\s\S]+?)%>/g,lO=/<%([\s\S]+?)%>/g,t_=/<%=([\s\S]+?)%>/g,fO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dO=/^\w*$/,hO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pl=/[\\^$.*+?()[\]{}|]/g,pO=RegExp(Pl.source),Nl=/^\s+/,_O=/\s/,gO=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yO=/\{\n\/\* \[wrapped with (.+)\] \*/,mO=/,? & /,vO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,bO=/[()=,{}\[\]\/\s]/,wO=/\\(\\)?/g,EO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,r_=/\w*$/,xO=/^[-+]0x[0-9a-f]+$/i,IO=/^0b[01]+$/i,OO=/^\[object .+?Constructor\]$/,SO=/^0o[0-7]+$/i,PO=/^(?:0|[1-9]\d*)$/,NO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qa=/($^)/,RO=/['\n\r\u2028\u2029\\]/g,za="\\ud800-\\udfff",n_="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",i_="\\u2700-\\u27bf",s_="a-z\\xdf-\\xf6\\xf8-\\xff",o_="A-Z\\xc0-\\xd6\\xd8-\\xde",a_="\\ufe0e\\ufe0f",c_="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",UO="["+za+"]",u_="["+c_+"]",Za="["+n_+"]",l_="\\d+",LO="["+i_+"]",f_="["+s_+"]",d_="[^"+za+c_+l_+i_+s_+o_+"]",Al="\\ud83c[\\udffb-\\udfff]",h_="[^"+za+"]",Tl="(?:\\ud83c[\\udde6-\\uddff]){2}",Cl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ls="["+o_+"]",__="(?:"+f_+"|"+d_+")",kO="(?:"+Ls+"|"+d_+")",g_="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",y_="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",m_="(?:"+Za+"|"+Al+")?",v_="["+a_+"]?",b_=v_+m_+"(?:\\u200d(?:"+[h_,Tl,Cl].join("|")+")"+v_+m_+")*",ZO="(?:"+[LO,Tl,Cl].join("|")+")"+b_,HO="(?:"+[h_+Za+"?",Za,Tl,Cl,UO].join("|")+")",BO=RegExp("['\u2019]","g"),VO=RegExp(Za,"g"),jl=RegExp(Al+"(?="+Al+")|"+HO+b_,"g"),GO=RegExp([Ls+"?"+f_+"+"+g_+"(?="+[u_,Ls,"$"].join("|")+")",kO+"+"+y_+"(?="+[u_,Ls+__,"$"].join("|")+")",Ls+"?"+__+"+"+g_,Ls+"+"+y_,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l_,ZO].join("|"),"g"),WO=RegExp("[\\u200d"+za+n_+a_+"]"),JO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,QO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],YO=-1,Lt={};Lt[ml]=Lt[vl]=Lt[bl]=Lt[wl]=Lt[El]=Lt[xl]=Lt[Il]=Lt[Ol]=Lt[Sl]=!0,Lt[$s]=Lt[La]=Lt[Fo]=Lt[Ro]=Lt[Us]=Lt[Ao]=Lt[Ma]=Lt[ka]=Lt[zn]=Lt[To]=Lt[mi]=Lt[Co]=Lt[Zn]=Lt[jo]=Lt[Do]=!1;var Ft={};Ft[$s]=Ft[La]=Ft[Fo]=Ft[Us]=Ft[Ro]=Ft[Ao]=Ft[ml]=Ft[vl]=Ft[bl]=Ft[wl]=Ft[El]=Ft[zn]=Ft[To]=Ft[mi]=Ft[Co]=Ft[Zn]=Ft[jo]=Ft[Ka]=Ft[xl]=Ft[Il]=Ft[Ol]=Ft[Sl]=!0,Ft[Ma]=Ft[ka]=Ft[Do]=!1;var rS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nS=parseFloat,iS=parseInt,w_="object"==typeof Po&&Po&&Po.Object===Object&&Po,sS="object"==typeof self&&self&&self.Object===Object&&self,Rr=w_||sS||Function("return this")(),Dl=e&&!e.nodeType&&e,os=Dl&&r&&!r.nodeType&&r,E_=os&&os.exports===Dl,Fl=E_&&w_.process,bn=function(){try{return os&&os.require&&os.require("util").types||Fl&&Fl.binding&&Fl.binding("util")}catch{}}(),x_=bn&&bn.isArrayBuffer,I_=bn&&bn.isDate,O_=bn&&bn.isMap,S_=bn&&bn.isRegExp,P_=bn&&bn.isSet,N_=bn&&bn.isTypedArray;function fn(Q,ge,se){switch(se.length){case 0:return Q.call(ge);case 1:return Q.call(ge,se[0]);case 2:return Q.call(ge,se[0],se[1]);case 3:return Q.call(ge,se[0],se[1],se[2])}return Q.apply(ge,se)}function oS(Q,ge,se,Me){for(var it=-1,wt=null==Q?0:Q.length;++it<wt;){var mr=Q[it];ge(Me,mr,se(mr),Q)}return Me}function En(Q,ge){for(var se=-1,Me=null==Q?0:Q.length;++se<Me&&!1!==ge(Q[se],se,Q););return Q}function aS(Q,ge){for(var se=null==Q?0:Q.length;se--&&!1!==ge(Q[se],se,Q););return Q}function R_(Q,ge){for(var se=-1,Me=null==Q?0:Q.length;++se<Me;)if(!ge(Q[se],se,Q))return!1;return!0}function Li(Q,ge){for(var se=-1,Me=null==Q?0:Q.length,it=0,wt=[];++se<Me;){var mr=Q[se];ge(mr,se,Q)&&(wt[it++]=mr)}return wt}function Ha(Q,ge){return!(null==Q||!Q.length)&&Ms(Q,ge,0)>-1}function $l(Q,ge,se){for(var Me=-1,it=null==Q?0:Q.length;++Me<it;)if(se(ge,Q[Me]))return!0;return!1}function zt(Q,ge){for(var se=-1,Me=null==Q?0:Q.length,it=Array(Me);++se<Me;)it[se]=ge(Q[se],se,Q);return it}function Mi(Q,ge){for(var se=-1,Me=ge.length,it=Q.length;++se<Me;)Q[it+se]=ge[se];return Q}function Ul(Q,ge,se,Me){var it=-1,wt=null==Q?0:Q.length;for(Me&&wt&&(se=Q[++it]);++it<wt;)se=ge(se,Q[it],it,Q);return se}function cS(Q,ge,se,Me){var it=null==Q?0:Q.length;for(Me&&it&&(se=Q[--it]);it--;)se=ge(se,Q[it],it,Q);return se}function Ll(Q,ge){for(var se=-1,Me=null==Q?0:Q.length;++se<Me;)if(ge(Q[se],se,Q))return!0;return!1}var uS=Ml("length");function A_(Q,ge,se){var Me;return se(Q,function(it,wt,mr){if(ge(it,wt,mr))return Me=wt,!1}),Me}function Ba(Q,ge,se,Me){for(var it=Q.length,wt=se+(Me?1:-1);Me?wt--:++wt<it;)if(ge(Q[wt],wt,Q))return wt;return-1}function Ms(Q,ge,se){return ge==ge?function xS(Q,ge,se){for(var Me=se-1,it=Q.length;++Me<it;)if(Q[Me]===ge)return Me;return-1}(Q,ge,se):Ba(Q,T_,se)}function dS(Q,ge,se,Me){for(var it=se-1,wt=Q.length;++it<wt;)if(Me(Q[it],ge))return it;return-1}function T_(Q){return Q!=Q}function C_(Q,ge){var se=null==Q?0:Q.length;return se?Kl(Q,ge)/se:NaN}function Ml(Q){return function(ge){return null==ge?t:ge[Q]}}function kl(Q){return function(ge){return null==Q?t:Q[ge]}}function j_(Q,ge,se,Me,it){return it(Q,function(wt,mr,Dt){se=Me?(Me=!1,wt):ge(se,wt,mr,Dt)}),se}function Kl(Q,ge){for(var se,Me=-1,it=Q.length;++Me<it;){var wt=ge(Q[Me]);wt!==t&&(se=se===t?wt:se+wt)}return se}function ql(Q,ge){for(var se=-1,Me=Array(Q);++se<Q;)Me[se]=ge(se);return Me}function D_(Q){return Q&&Q.slice(0,L_(Q)+1).replace(Nl,"")}function dn(Q){return function(ge){return Q(ge)}}function zl(Q,ge){return zt(ge,function(se){return Q[se]})}function $o(Q,ge){return Q.has(ge)}function F_(Q,ge){for(var se=-1,Me=Q.length;++se<Me&&Ms(ge,Q[se],0)>-1;);return se}function $_(Q,ge){for(var se=Q.length;se--&&Ms(ge,Q[se],0)>-1;);return se}var gS=kl({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),yS=kl({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function mS(Q){return"\\"+rS[Q]}function ks(Q){return WO.test(Q)}function Zl(Q){var ge=-1,se=Array(Q.size);return Q.forEach(function(Me,it){se[++ge]=[it,Me]}),se}function U_(Q,ge){return function(se){return Q(ge(se))}}function ki(Q,ge){for(var se=-1,Me=Q.length,it=0,wt=[];++se<Me;){var mr=Q[se];(mr===ge||mr===A)&&(Q[se]=A,wt[it++]=se)}return wt}function Va(Q){var ge=-1,se=Array(Q.size);return Q.forEach(function(Me){se[++ge]=Me}),se}function Ks(Q){return ks(Q)?function SS(Q){for(var ge=jl.lastIndex=0;jl.test(Q);)++ge;return ge}(Q):uS(Q)}function Hn(Q){return ks(Q)?function PS(Q){return Q.match(jl)||[]}(Q):function lS(Q){return Q.split("")}(Q)}function L_(Q){for(var ge=Q.length;ge--&&_O.test(Q.charAt(ge)););return ge}var OS=kl({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),qs=function Q(ge){var n,se=(ge=null==ge?Rr:qs.defaults(Rr.Object(),ge,qs.pick(Rr,QO))).Array,Me=ge.Date,it=ge.Error,wt=ge.Function,mr=ge.Math,Dt=ge.Object,Hl=ge.RegExp,AS=ge.String,xn=ge.TypeError,Ga=se.prototype,zs=Dt.prototype,Wa=ge["__core-js_shared__"],Ja=wt.prototype.toString,St=zs.hasOwnProperty,CS=0,M_=(n=/[^.]+$/.exec(Wa&&Wa.keys&&Wa.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Qa=zs.toString,jS=Ja.call(Dt),DS=Rr._,FS=Hl("^"+Ja.call(St).replace(Pl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ya=E_?ge.Buffer:t,Ki=ge.Symbol,Xa=ge.Uint8Array,k_=Ya?Ya.allocUnsafe:t,ec=U_(Dt.getPrototypeOf,Dt),K_=Dt.create,q_=zs.propertyIsEnumerable,tc=Ga.splice,z_=Ki?Ki.isConcatSpreadable:t,Uo=Ki?Ki.iterator:t,as=Ki?Ki.toStringTag:t,rc=function(){try{var n=ds(Dt,"defineProperty");return n({},"",{}),n}catch{}}(),$S=ge.clearTimeout!==Rr.clearTimeout&&ge.clearTimeout,US=Me&&Me.now!==Rr.Date.now&&Me.now,LS=ge.setTimeout!==Rr.setTimeout&&ge.setTimeout,nc=mr.ceil,ic=mr.floor,Bl=Dt.getOwnPropertySymbols,MS=Ya?Ya.isBuffer:t,Z_=ge.isFinite,kS=Ga.join,KS=U_(Dt.keys,Dt),vr=mr.max,jr=mr.min,qS=Me.now,zS=ge.parseInt,H_=mr.random,ZS=Ga.reverse,Vl=ds(ge,"DataView"),Lo=ds(ge,"Map"),Gl=ds(ge,"Promise"),Zs=ds(ge,"Set"),Mo=ds(ge,"WeakMap"),ko=ds(Dt,"create"),sc=Mo&&new Mo,Hs={},HS=hs(Vl),BS=hs(Lo),VS=hs(Gl),GS=hs(Zs),WS=hs(Mo),oc=Ki?Ki.prototype:t,Ko=oc?oc.valueOf:t,B_=oc?oc.toString:t;function P(n){if(Jt(n)&&!ot(n)&&!(n instanceof _t)){if(n instanceof An)return n;if(St.call(n,"__wrapped__"))return Vg(n)}return new An(n)}var Bs=function(){function n(){}return function(s){if(!Bt(s))return{};if(K_)return K_(s);n.prototype=s;var u=new n;return n.prototype=t,u}}();function ac(){}function An(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=t}function _t(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ni,this.__views__=[]}function cs(n){var s=-1,u=null==n?0:n.length;for(this.clear();++s<u;){var d=n[s];this.set(d[0],d[1])}}function vi(n){var s=-1,u=null==n?0:n.length;for(this.clear();++s<u;){var d=n[s];this.set(d[0],d[1])}}function bi(n){var s=-1,u=null==n?0:n.length;for(this.clear();++s<u;){var d=n[s];this.set(d[0],d[1])}}function us(n){var s=-1,u=null==n?0:n.length;for(this.__data__=new bi;++s<u;)this.add(n[s])}function Bn(n){var s=this.__data__=new vi(n);this.size=s.size}function V_(n,s){var u=ot(n),d=!u&&ps(n),I=!u&&!d&&Bi(n),R=!u&&!d&&!I&&Js(n),z=u||d||I||R,B=z?ql(n.length,AS):[],X=B.length;for(var Ie in n)(s||St.call(n,Ie))&&(!z||!("length"==Ie||I&&("offset"==Ie||"parent"==Ie)||R&&("buffer"==Ie||"byteLength"==Ie||"byteOffset"==Ie)||Ii(Ie,X)))&&B.push(Ie);return B}function G_(n){var s=n.length;return s?n[of(0,s-1)]:t}function wP(n,s){return wc(Xr(n),ls(s,0,n.length))}function EP(n){return wc(Xr(n))}function Wl(n,s,u){(u!==t&&!Vn(n[s],u)||u===t&&!(s in n))&&wi(n,s,u)}function qo(n,s,u){var d=n[s];(!St.call(n,s)||!Vn(d,u)||u===t&&!(s in n))&&wi(n,s,u)}function cc(n,s){for(var u=n.length;u--;)if(Vn(n[u][0],s))return u;return-1}function xP(n,s,u,d){return qi(n,function(I,R,z){s(d,I,u(I),z)}),d}function W_(n,s){return n&&si(s,Er(s),n)}function wi(n,s,u){"__proto__"==s&&rc?rc(n,s,{configurable:!0,enumerable:!0,value:u,writable:!0}):n[s]=u}function Jl(n,s){for(var u=-1,d=s.length,I=se(d),R=null==n;++u<d;)I[u]=R?t:Tf(n,s[u]);return I}function ls(n,s,u){return n==n&&(u!==t&&(n=n<=u?n:u),s!==t&&(n=n>=s?n:s)),n}function Tn(n,s,u,d,I,R){var z,B=1&s,X=2&s,Ie=4&s;if(u&&(z=I?u(n,d,I,R):u(n)),z!==t)return z;if(!Bt(n))return n;var Se=ot(n);if(Se){if(z=function dN(n){var s=n.length,u=new n.constructor(s);return s&&"string"==typeof n[0]&&St.call(n,"index")&&(u.index=n.index,u.input=n.input),u}(n),!B)return Xr(n,z)}else{var Ae=Dr(n),$e=Ae==ka||Ae==Qp;if(Bi(n))return vg(n,B);if(Ae==mi||Ae==$s||$e&&!I){if(z=X||$e?{}:Lg(n),!B)return X?function tN(n,s){return si(n,$g(n),s)}(n,function IP(n,s){return n&&si(s,tn(s),n)}(z,n)):function eN(n,s){return si(n,bf(n),s)}(n,W_(z,n))}else{if(!Ft[Ae])return I?n:{};z=function hN(n,s,u){var d=n.constructor;switch(s){case Fo:return hf(n);case Ro:case Ao:return new d(+n);case Us:return function JP(n,s){var u=s?hf(n.buffer):n.buffer;return new n.constructor(u,n.byteOffset,n.byteLength)}(n,u);case ml:case vl:case bl:case wl:case El:case xl:case Il:case Ol:case Sl:return bg(n,u);case zn:return new d;case To:case jo:return new d(n);case Co:return function QP(n){var s=new n.constructor(n.source,r_.exec(n));return s.lastIndex=n.lastIndex,s}(n);case Zn:return new d;case Ka:return function YP(n){return Ko?Dt(Ko.call(n)):{}}(n)}}(n,Ae,B)}}R||(R=new Bn);var qe=R.get(n);if(qe)return qe;R.set(n,z),hy(n)?n.forEach(function(We){z.add(Tn(We,s,u,We,n,R))}):fy(n)&&n.forEach(function(We,ht){z.set(ht,Tn(We,s,u,ht,n,R))});var ut=Se?t:(Ie?X?yf:gf:X?tn:Er)(n);return En(ut||n,function(We,ht){ut&&(We=n[ht=We]),qo(z,ht,Tn(We,s,u,ht,n,R))}),z}function J_(n,s,u){var d=u.length;if(null==n)return!d;for(n=Dt(n);d--;){var I=u[d],z=n[I];if(z===t&&!(I in n)||!(0,s[I])(z))return!1}return!0}function Q_(n,s,u){if("function"!=typeof n)throw new xn(f);return Wo(function(){n.apply(t,u)},s)}function zo(n,s,u,d){var I=-1,R=Ha,z=!0,B=n.length,X=[],Ie=s.length;if(!B)return X;u&&(s=zt(s,dn(u))),d?(R=$l,z=!1):s.length>=200&&(R=$o,z=!1,s=new us(s));e:for(;++I<B;){var Se=n[I],Ae=null==u?Se:u(Se);if(Se=d||0!==Se?Se:0,z&&Ae==Ae){for(var $e=Ie;$e--;)if(s[$e]===Ae)continue e;X.push(Se)}else R(s,Ae,d)||X.push(Se)}return X}P.templateSettings={escape:uO,evaluate:lO,interpolate:t_,variable:"",imports:{_:P}},(P.prototype=ac.prototype).constructor=P,(An.prototype=Bs(ac.prototype)).constructor=An,(_t.prototype=Bs(ac.prototype)).constructor=_t,cs.prototype.clear=function XS(){this.__data__=ko?ko(null):{},this.size=0},cs.prototype.delete=function eP(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s},cs.prototype.get=function tP(n){var s=this.__data__;if(ko){var u=s[n];return u===C?t:u}return St.call(s,n)?s[n]:t},cs.prototype.has=function rP(n){var s=this.__data__;return ko?s[n]!==t:St.call(s,n)},cs.prototype.set=function nP(n,s){var u=this.__data__;return this.size+=this.has(n)?0:1,u[n]=ko&&s===t?C:s,this},vi.prototype.clear=function iP(){this.__data__=[],this.size=0},vi.prototype.delete=function sP(n){var s=this.__data__,u=cc(s,n);return!(u<0||(u==s.length-1?s.pop():tc.call(s,u,1),--this.size,0))},vi.prototype.get=function oP(n){var s=this.__data__,u=cc(s,n);return u<0?t:s[u][1]},vi.prototype.has=function aP(n){return cc(this.__data__,n)>-1},vi.prototype.set=function cP(n,s){var u=this.__data__,d=cc(u,n);return d<0?(++this.size,u.push([n,s])):u[d][1]=s,this},bi.prototype.clear=function uP(){this.size=0,this.__data__={hash:new cs,map:new(Lo||vi),string:new cs}},bi.prototype.delete=function lP(n){var s=bc(this,n).delete(n);return this.size-=s?1:0,s},bi.prototype.get=function fP(n){return bc(this,n).get(n)},bi.prototype.has=function dP(n){return bc(this,n).has(n)},bi.prototype.set=function hP(n,s){var u=bc(this,n),d=u.size;return u.set(n,s),this.size+=u.size==d?0:1,this},us.prototype.add=us.prototype.push=function pP(n){return this.__data__.set(n,C),this},us.prototype.has=function _P(n){return this.__data__.has(n)},Bn.prototype.clear=function gP(){this.__data__=new vi,this.size=0},Bn.prototype.delete=function yP(n){var s=this.__data__,u=s.delete(n);return this.size=s.size,u},Bn.prototype.get=function mP(n){return this.__data__.get(n)},Bn.prototype.has=function vP(n){return this.__data__.has(n)},Bn.prototype.set=function bP(n,s){var u=this.__data__;if(u instanceof vi){var d=u.__data__;if(!Lo||d.length<199)return d.push([n,s]),this.size=++u.size,this;u=this.__data__=new bi(d)}return u.set(n,s),this.size=u.size,this};var qi=Ig(ii),Y_=Ig(Yl,!0);function SP(n,s){var u=!0;return qi(n,function(d,I,R){return u=!!s(d,I,R)}),u}function uc(n,s,u){for(var d=-1,I=n.length;++d<I;){var R=n[d],z=s(R);if(null!=z&&(B===t?z==z&&!pn(z):u(z,B)))var B=z,X=R}return X}function X_(n,s){var u=[];return qi(n,function(d,I,R){s(d,I,R)&&u.push(d)}),u}function Ar(n,s,u,d,I){var R=-1,z=n.length;for(u||(u=_N),I||(I=[]);++R<z;){var B=n[R];s>0&&u(B)?s>1?Ar(B,s-1,u,d,I):Mi(I,B):d||(I[I.length]=B)}return I}var Ql=Og(),eg=Og(!0);function ii(n,s){return n&&Ql(n,s,Er)}function Yl(n,s){return n&&eg(n,s,Er)}function lc(n,s){return Li(s,function(u){return Oi(n[u])})}function fs(n,s){for(var u=0,d=(s=Zi(s,n)).length;null!=n&&u<d;)n=n[oi(s[u++])];return u&&u==d?n:t}function tg(n,s,u){var d=s(n);return ot(n)?d:Mi(d,u(n))}function Lr(n){return null==n?n===t?"[object Undefined]":"[object Null]":as&&as in Dt(n)?function uN(n){var s=St.call(n,as),u=n[as];try{n[as]=t;var d=!0}catch{}var I=Qa.call(n);return d&&(s?n[as]=u:delete n[as]),I}(n):function EN(n){return Qa.call(n)}(n)}function Xl(n,s){return n>s}function NP(n,s){return null!=n&&St.call(n,s)}function RP(n,s){return null!=n&&s in Dt(n)}function ef(n,s,u){for(var d=u?$l:Ha,I=n[0].length,R=n.length,z=R,B=se(R),X=1/0,Ie=[];z--;){var Se=n[z];z&&s&&(Se=zt(Se,dn(s))),X=jr(Se.length,X),B[z]=!u&&(s||I>=120&&Se.length>=120)?new us(z&&Se):t}Se=n[0];var Ae=-1,$e=B[0];e:for(;++Ae<I&&Ie.length<X;){var qe=Se[Ae],Ge=s?s(qe):qe;if(qe=u||0!==qe?qe:0,!($e?$o($e,Ge):d(Ie,Ge,u))){for(z=R;--z;){var ut=B[z];if(!(ut?$o(ut,Ge):d(n[z],Ge,u)))continue e}$e&&$e.push(Ge),Ie.push(qe)}}return Ie}function Zo(n,s,u){var d=null==(n=qg(n,s=Zi(s,n)))?n:n[oi(jn(s))];return null==d?t:fn(d,n,u)}function rg(n){return Jt(n)&&Lr(n)==$s}function Ho(n,s,u,d,I){return n===s||(null==n||null==s||!Jt(n)&&!Jt(s)?n!=n&&s!=s:function DP(n,s,u,d,I,R){var z=ot(n),B=ot(s),X=z?La:Dr(n),Ie=B?La:Dr(s),Se=(X=X==$s?mi:X)==mi,Ae=(Ie=Ie==$s?mi:Ie)==mi,$e=X==Ie;if($e&&Bi(n)){if(!Bi(s))return!1;z=!0,Se=!1}if($e&&!Se)return R||(R=new Bn),z||Js(n)?Fg(n,s,u,d,I,R):function aN(n,s,u,d,I,R,z){switch(u){case Us:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case Fo:return!(n.byteLength!=s.byteLength||!R(new Xa(n),new Xa(s)));case Ro:case Ao:case To:return Vn(+n,+s);case Ma:return n.name==s.name&&n.message==s.message;case Co:case jo:return n==s+"";case zn:var B=Zl;case Zn:if(B||(B=Va),n.size!=s.size&&!(1&d))return!1;var Ie=z.get(n);if(Ie)return Ie==s;d|=2,z.set(n,s);var Se=Fg(B(n),B(s),d,I,R,z);return z.delete(n),Se;case Ka:if(Ko)return Ko.call(n)==Ko.call(s)}return!1}(n,s,X,u,d,I,R);if(!(1&u)){var qe=Se&&St.call(n,"__wrapped__"),Ge=Ae&&St.call(s,"__wrapped__");if(qe||Ge){var ut=qe?n.value():n,We=Ge?s.value():s;return R||(R=new Bn),I(ut,We,u,d,R)}}return!!$e&&(R||(R=new Bn),function cN(n,s,u,d,I,R){var z=1&u,B=gf(n),X=B.length;if(X!=gf(s).length&&!z)return!1;for(var Ae=X;Ae--;){var $e=B[Ae];if(!(z?$e in s:St.call(s,$e)))return!1}var qe=R.get(n),Ge=R.get(s);if(qe&&Ge)return qe==s&&Ge==n;var ut=!0;R.set(n,s),R.set(s,n);for(var We=z;++Ae<X;){var ht=n[$e=B[Ae]],gt=s[$e];if(d)var _n=z?d(gt,ht,$e,s,n,R):d(ht,gt,$e,n,s,R);if(!(_n===t?ht===gt||I(ht,gt,u,d,R):_n)){ut=!1;break}We||(We="constructor"==$e)}if(ut&&!We){var kr=n.constructor,gn=s.constructor;kr!=gn&&"constructor"in n&&"constructor"in s&&!("function"==typeof kr&&kr instanceof kr&&"function"==typeof gn&&gn instanceof gn)&&(ut=!1)}return R.delete(n),R.delete(s),ut}(n,s,u,d,I,R))}(n,s,u,d,Ho,I))}function tf(n,s,u,d){var I=u.length,R=I,z=!d;if(null==n)return!R;for(n=Dt(n);I--;){var B=u[I];if(z&&B[2]?B[1]!==n[B[0]]:!(B[0]in n))return!1}for(;++I<R;){var X=(B=u[I])[0],Ie=n[X],Se=B[1];if(z&&B[2]){if(Ie===t&&!(X in n))return!1}else{var Ae=new Bn;if(d)var $e=d(Ie,Se,X,n,s,Ae);if(!($e===t?Ho(Se,Ie,3,d,Ae):$e))return!1}}return!0}function ng(n){return!(!Bt(n)||function yN(n){return!!M_&&M_ in n}(n))&&(Oi(n)?FS:OO).test(hs(n))}function ig(n){return"function"==typeof n?n:null==n?rn:"object"==typeof n?ot(n)?ag(n[0],n[1]):og(n):Sy(n)}function rf(n){if(!Go(n))return KS(n);var s=[];for(var u in Dt(n))St.call(n,u)&&"constructor"!=u&&s.push(u);return s}function nf(n,s){return n<s}function sg(n,s){var u=-1,d=en(n)?se(n.length):[];return qi(n,function(I,R,z){d[++u]=s(I,R,z)}),d}function og(n){var s=vf(n);return 1==s.length&&s[0][2]?kg(s[0][0],s[0][1]):function(u){return u===n||tf(u,n,s)}}function ag(n,s){return wf(n)&&Mg(s)?kg(oi(n),s):function(u){var d=Tf(u,n);return d===t&&d===s?Cf(u,n):Ho(s,d,3)}}function fc(n,s,u,d,I){n!==s&&Ql(s,function(R,z){if(I||(I=new Bn),Bt(R))!function kP(n,s,u,d,I,R,z){var B=xf(n,u),X=xf(s,u),Ie=z.get(X);if(Ie)Wl(n,u,Ie);else{var Se=R?R(B,X,u+"",n,s,z):t,Ae=Se===t;if(Ae){var $e=ot(X),qe=!$e&&Bi(X),Ge=!$e&&!qe&&Js(X);Se=X,$e||qe||Ge?ot(B)?Se=B:rr(B)?Se=Xr(B):qe?(Ae=!1,Se=vg(X,!0)):Ge?(Ae=!1,Se=bg(X,!0)):Se=[]:Jo(X)||ps(X)?(Se=B,ps(B)?Se=gy(B):(!Bt(B)||Oi(B))&&(Se=Lg(X))):Ae=!1}Ae&&(z.set(X,Se),I(Se,X,d,R,z),z.delete(X)),Wl(n,u,Se)}}(n,s,z,u,fc,d,I);else{var B=d?d(xf(n,z),R,z+"",n,s,I):t;B===t&&(B=R),Wl(n,z,B)}},tn)}function cg(n,s){var u=n.length;if(u)return Ii(s+=s<0?u:0,u)?n[s]:t}function ug(n,s,u){s=s.length?zt(s,function(R){return ot(R)?function(z){return fs(z,1===R.length?R[0]:R)}:R}):[rn];var d=-1;return s=zt(s,dn(Ve())),function hS(Q,ge){var se=Q.length;for(Q.sort(ge);se--;)Q[se]=Q[se].value;return Q}(sg(n,function(R,z,B){return{criteria:zt(s,function(Ie){return Ie(R)}),index:++d,value:R}}),function(R,z){return function XP(n,s,u){for(var d=-1,I=n.criteria,R=s.criteria,z=I.length,B=u.length;++d<z;){var X=wg(I[d],R[d]);if(X)return d>=B?X:X*("desc"==u[d]?-1:1)}return n.index-s.index}(R,z,u)})}function lg(n,s,u){for(var d=-1,I=s.length,R={};++d<I;){var z=s[d],B=fs(n,z);u(B,z)&&Bo(R,Zi(z,n),B)}return R}function sf(n,s,u,d){var I=d?dS:Ms,R=-1,z=s.length,B=n;for(n===s&&(s=Xr(s)),u&&(B=zt(n,dn(u)));++R<z;)for(var X=0,Ie=s[R],Se=u?u(Ie):Ie;(X=I(B,Se,X,d))>-1;)B!==n&&tc.call(B,X,1),tc.call(n,X,1);return n}function fg(n,s){for(var u=n?s.length:0,d=u-1;u--;){var I=s[u];if(u==d||I!==R){var R=I;Ii(I)?tc.call(n,I,1):uf(n,I)}}return n}function of(n,s){return n+ic(H_()*(s-n+1))}function af(n,s){var u="";if(!n||s<1||s>Ui)return u;do{s%2&&(u+=n),(s=ic(s/2))&&(n+=n)}while(s);return u}function lt(n,s){return If(Kg(n,s,rn),n+"")}function ZP(n){return G_(Qs(n))}function HP(n,s){var u=Qs(n);return wc(u,ls(s,0,u.length))}function Bo(n,s,u,d){if(!Bt(n))return n;for(var I=-1,R=(s=Zi(s,n)).length,z=R-1,B=n;null!=B&&++I<R;){var X=oi(s[I]),Ie=u;if("__proto__"===X||"constructor"===X||"prototype"===X)return n;if(I!=z){var Se=B[X];(Ie=d?d(Se,X,B):t)===t&&(Ie=Bt(Se)?Se:Ii(s[I+1])?[]:{})}qo(B,X,Ie),B=B[X]}return n}var dg=sc?function(n,s){return sc.set(n,s),n}:rn,BP=rc?function(n,s){return rc(n,"toString",{configurable:!0,enumerable:!1,value:Df(s),writable:!0})}:rn;function VP(n){return wc(Qs(n))}function Cn(n,s,u){var d=-1,I=n.length;s<0&&(s=-s>I?0:I+s),(u=u>I?I:u)<0&&(u+=I),I=s>u?0:u-s>>>0,s>>>=0;for(var R=se(I);++d<I;)R[d]=n[d+s];return R}function GP(n,s){var u;return qi(n,function(d,I,R){return!(u=s(d,I,R))}),!!u}function dc(n,s,u){var d=0,I=null==n?d:n.length;if("number"==typeof s&&s==s&&I<=2147483647){for(;d<I;){var R=d+I>>>1,z=n[R];null!==z&&!pn(z)&&(u?z<=s:z<s)?d=R+1:I=R}return I}return cf(n,s,rn,u)}function cf(n,s,u,d){var I=0,R=null==n?0:n.length;if(0===R)return 0;for(var z=(s=u(s))!=s,B=null===s,X=pn(s),Ie=s===t;I<R;){var Se=ic((I+R)/2),Ae=u(n[Se]),$e=Ae!==t,qe=null===Ae,Ge=Ae==Ae,ut=pn(Ae);if(z)var We=d||Ge;else We=Ie?Ge&&(d||$e):B?Ge&&$e&&(d||!qe):X?Ge&&$e&&!qe&&(d||!ut):!qe&&!ut&&(d?Ae<=s:Ae<s);We?I=Se+1:R=Se}return jr(R,4294967294)}function hg(n,s){for(var u=-1,d=n.length,I=0,R=[];++u<d;){var z=n[u],B=s?s(z):z;if(!u||!Vn(B,X)){var X=B;R[I++]=0===z?0:z}}return R}function pg(n){return"number"==typeof n?n:pn(n)?NaN:+n}function hn(n){if("string"==typeof n)return n;if(ot(n))return zt(n,hn)+"";if(pn(n))return B_?B_.call(n):"";var s=n+"";return"0"==s&&1/n==-ss?"-0":s}function zi(n,s,u){var d=-1,I=Ha,R=n.length,z=!0,B=[],X=B;if(u)z=!1,I=$l;else if(R>=200){var Ie=s?null:sN(n);if(Ie)return Va(Ie);z=!1,I=$o,X=new us}else X=s?[]:B;e:for(;++d<R;){var Se=n[d],Ae=s?s(Se):Se;if(Se=u||0!==Se?Se:0,z&&Ae==Ae){for(var $e=X.length;$e--;)if(X[$e]===Ae)continue e;s&&X.push(Ae),B.push(Se)}else I(X,Ae,u)||(X!==B&&X.push(Ae),B.push(Se))}return B}function uf(n,s){return null==(n=qg(n,s=Zi(s,n)))||delete n[oi(jn(s))]}function _g(n,s,u,d){return Bo(n,s,u(fs(n,s)),d)}function hc(n,s,u,d){for(var I=n.length,R=d?I:-1;(d?R--:++R<I)&&s(n[R],R,n););return u?Cn(n,d?0:R,d?R+1:I):Cn(n,d?R+1:0,d?I:R)}function gg(n,s){var u=n;return u instanceof _t&&(u=u.value()),Ul(s,function(d,I){return I.func.apply(I.thisArg,Mi([d],I.args))},u)}function lf(n,s,u){var d=n.length;if(d<2)return d?zi(n[0]):[];for(var I=-1,R=se(d);++I<d;)for(var z=n[I],B=-1;++B<d;)B!=I&&(R[I]=zo(R[I]||z,n[B],s,u));return zi(Ar(R,1),s,u)}function yg(n,s,u){for(var d=-1,I=n.length,R=s.length,z={};++d<I;)u(z,n[d],d<R?s[d]:t);return z}function ff(n){return rr(n)?n:[]}function df(n){return"function"==typeof n?n:rn}function Zi(n,s){return ot(n)?n:wf(n,s)?[n]:Bg(xt(n))}var WP=lt;function Hi(n,s,u){var d=n.length;return u=u===t?d:u,!s&&u>=d?n:Cn(n,s,u)}var mg=$S||function(n){return Rr.clearTimeout(n)};function vg(n,s){if(s)return n.slice();var u=n.length,d=k_?k_(u):new n.constructor(u);return n.copy(d),d}function hf(n){var s=new n.constructor(n.byteLength);return new Xa(s).set(new Xa(n)),s}function bg(n,s){var u=s?hf(n.buffer):n.buffer;return new n.constructor(u,n.byteOffset,n.length)}function wg(n,s){if(n!==s){var u=n!==t,d=null===n,I=n==n,R=pn(n),z=s!==t,B=null===s,X=s==s,Ie=pn(s);if(!B&&!Ie&&!R&&n>s||R&&z&&X&&!B&&!Ie||d&&z&&X||!u&&X||!I)return 1;if(!d&&!R&&!Ie&&n<s||Ie&&u&&I&&!d&&!R||B&&u&&I||!z&&I||!X)return-1}return 0}function Eg(n,s,u,d){for(var I=-1,R=n.length,z=u.length,B=-1,X=s.length,Ie=vr(R-z,0),Se=se(X+Ie),Ae=!d;++B<X;)Se[B]=s[B];for(;++I<z;)(Ae||I<R)&&(Se[u[I]]=n[I]);for(;Ie--;)Se[B++]=n[I++];return Se}function xg(n,s,u,d){for(var I=-1,R=n.length,z=-1,B=u.length,X=-1,Ie=s.length,Se=vr(R-B,0),Ae=se(Se+Ie),$e=!d;++I<Se;)Ae[I]=n[I];for(var qe=I;++X<Ie;)Ae[qe+X]=s[X];for(;++z<B;)($e||I<R)&&(Ae[qe+u[z]]=n[I++]);return Ae}function Xr(n,s){var u=-1,d=n.length;for(s||(s=se(d));++u<d;)s[u]=n[u];return s}function si(n,s,u,d){var I=!u;u||(u={});for(var R=-1,z=s.length;++R<z;){var B=s[R],X=d?d(u[B],n[B],B,u,n):t;X===t&&(X=n[B]),I?wi(u,B,X):qo(u,B,X)}return u}function pc(n,s){return function(u,d){var I=ot(u)?oS:xP,R=s?s():{};return I(u,n,Ve(d,2),R)}}function Vs(n){return lt(function(s,u){var d=-1,I=u.length,R=I>1?u[I-1]:t,z=I>2?u[2]:t;for(R=n.length>3&&"function"==typeof R?(I--,R):t,z&&Mr(u[0],u[1],z)&&(R=I<3?t:R,I=1),s=Dt(s);++d<I;){var B=u[d];B&&n(s,B,d,R)}return s})}function Ig(n,s){return function(u,d){if(null==u)return u;if(!en(u))return n(u,d);for(var I=u.length,R=s?I:-1,z=Dt(u);(s?R--:++R<I)&&!1!==d(z[R],R,z););return u}}function Og(n){return function(s,u,d){for(var I=-1,R=Dt(s),z=d(s),B=z.length;B--;){var X=z[n?B:++I];if(!1===u(R[X],X,R))break}return s}}function Sg(n){return function(s){var u=ks(s=xt(s))?Hn(s):t,d=u?u[0]:s.charAt(0),I=u?Hi(u,1).join(""):s.slice(1);return d[n]()+I}}function Gs(n){return function(s){return Ul(Iy(xy(s).replace(BO,"")),n,"")}}function Vo(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var u=Bs(n.prototype),d=n.apply(u,s);return Bt(d)?d:u}}function Pg(n){return function(s,u,d){var I=Dt(s);if(!en(s)){var R=Ve(u,3);s=Er(s),u=function(B){return R(I[B],B,I)}}var z=n(s,u,d);return z>-1?I[R?s[z]:z]:t}}function Ng(n){return xi(function(s){var u=s.length,d=u,I=An.prototype.thru;for(n&&s.reverse();d--;){var R=s[d];if("function"!=typeof R)throw new xn(f);if(I&&!z&&"wrapper"==vc(R))var z=new An([],!0)}for(d=z?d:u;++d<u;){var B=vc(R=s[d]),X="wrapper"==B?mf(R):t;z=X&&Ef(X[0])&&424==X[1]&&!X[4].length&&1==X[9]?z[vc(X[0])].apply(z,X[3]):1==R.length&&Ef(R)?z[B]():z.thru(R)}return function(){var Ie=arguments,Se=Ie[0];if(z&&1==Ie.length&&ot(Se))return z.plant(Se).value();for(var Ae=0,$e=u?s[Ae].apply(this,Ie):Se;++Ae<u;)$e=s[Ae].call(this,$e);return $e}})}function _c(n,s,u,d,I,R,z,B,X,Ie){var Se=128&s,Ae=1&s,$e=2&s,qe=24&s,Ge=512&s,ut=$e?t:Vo(n);return function We(){for(var ht=arguments.length,gt=se(ht),_n=ht;_n--;)gt[_n]=arguments[_n];if(qe)var kr=Ws(We),gn=function _S(Q,ge){for(var se=Q.length,Me=0;se--;)Q[se]===ge&&++Me;return Me}(gt,kr);if(d&&(gt=Eg(gt,d,I,qe)),R&&(gt=xg(gt,R,z,qe)),ht-=gn,qe&&ht<Ie){var nr=ki(gt,kr);return Tg(n,s,_c,We.placeholder,u,gt,nr,B,X,Ie-ht)}var Gn=Ae?u:this,Pi=$e?Gn[n]:n;return ht=gt.length,B?gt=function xN(n,s){for(var u=n.length,d=jr(s.length,u),I=Xr(n);d--;){var R=s[d];n[d]=Ii(R,u)?I[R]:t}return n}(gt,B):Ge&&ht>1&&gt.reverse(),Se&&X<ht&&(gt.length=X),this&&this!==Rr&&this instanceof We&&(Pi=ut||Vo(Pi)),Pi.apply(Gn,gt)}}function Rg(n,s){return function(u,d){return function TP(n,s,u,d){return ii(n,function(I,R,z){s(d,u(I),R,z)}),d}(u,n,s(d),{})}}function gc(n,s){return function(u,d){var I;if(u===t&&d===t)return s;if(u!==t&&(I=u),d!==t){if(I===t)return d;"string"==typeof u||"string"==typeof d?(u=hn(u),d=hn(d)):(u=pg(u),d=pg(d)),I=n(u,d)}return I}}function pf(n){return xi(function(s){return s=zt(s,dn(Ve())),lt(function(u){var d=this;return n(s,function(I){return fn(I,d,u)})})})}function yc(n,s){var u=(s=s===t?" ":hn(s)).length;if(u<2)return u?af(s,n):s;var d=af(s,nc(n/Ks(s)));return ks(s)?Hi(Hn(d),0,n).join(""):d.slice(0,n)}function Ag(n){return function(s,u,d){return d&&"number"!=typeof d&&Mr(s,u,d)&&(u=d=t),s=Si(s),u===t?(u=s,s=0):u=Si(u),function zP(n,s,u,d){for(var I=-1,R=vr(nc((s-n)/(u||1)),0),z=se(R);R--;)z[d?R:++I]=n,n+=u;return z}(s,u,d=d===t?s<u?1:-1:Si(d),n)}}function mc(n){return function(s,u){return"string"==typeof s&&"string"==typeof u||(s=Dn(s),u=Dn(u)),n(s,u)}}function Tg(n,s,u,d,I,R,z,B,X,Ie){var Se=8&s;s|=Se?32:64,4&(s&=~(Se?64:32))||(s&=-4);var ut=[n,s,I,Se?R:t,Se?z:t,Se?t:R,Se?t:z,B,X,Ie],We=u.apply(t,ut);return Ef(n)&&zg(We,ut),We.placeholder=d,Zg(We,n,s)}function _f(n){var s=mr[n];return function(u,d){if(u=Dn(u),(d=null==d?0:jr(ct(d),292))&&Z_(u)){var I=(xt(u)+"e").split("e");return+((I=(xt(s(I[0]+"e"+(+I[1]+d)))+"e").split("e"))[0]+"e"+(+I[1]-d))}return s(u)}}var sN=Zs&&1/Va(new Zs([,-0]))[1]==ss?function(n){return new Zs(n)}:Uf;function Cg(n){return function(s){var u=Dr(s);return u==zn?Zl(s):u==Zn?function ES(Q){var ge=-1,se=Array(Q.size);return Q.forEach(function(Me){se[++ge]=[Me,Me]}),se}(s):function pS(Q,ge){return zt(ge,function(se){return[se,Q[se]]})}(s,n(s))}}function Ei(n,s,u,d,I,R,z,B){var X=2&s;if(!X&&"function"!=typeof n)throw new xn(f);var Ie=d?d.length:0;if(Ie||(s&=-97,d=I=t),z=z===t?z:vr(ct(z),0),B=B===t?B:ct(B),Ie-=I?I.length:0,64&s){var Se=d,Ae=I;d=I=t}var $e=X?t:mf(n),qe=[n,s,u,d,I,Se,Ae,R,z,B];if($e&&function bN(n,s){var u=n[1],d=s[1],I=u|d;if(!(I<131)&&!(128==d&&8==u||128==d&&256==u&&n[7].length<=s[8]||384==d&&s[7].length<=s[8]&&8==u))return n;1&d&&(n[2]=s[2],I|=1&u?0:4);var B=s[3];if(B){var X=n[3];n[3]=X?Eg(X,B,s[4]):B,n[4]=X?ki(n[3],A):s[4]}(B=s[5])&&(n[5]=(X=n[5])?xg(X,B,s[6]):B,n[6]=X?ki(n[5],A):s[6]),(B=s[7])&&(n[7]=B),128&d&&(n[8]=null==n[8]?s[8]:jr(n[8],s[8])),null==n[9]&&(n[9]=s[9]),n[0]=s[0],n[1]=I}(qe,$e),n=qe[0],s=qe[1],u=qe[2],d=qe[3],I=qe[4],!(B=qe[9]=qe[9]===t?X?0:n.length:vr(qe[9]-Ie,0))&&24&s&&(s&=-25),s&&1!=s)Ge=8==s||16==s?function nN(n,s,u){var d=Vo(n);return function I(){for(var R=arguments.length,z=se(R),B=R,X=Ws(I);B--;)z[B]=arguments[B];var Ie=R<3&&z[0]!==X&&z[R-1]!==X?[]:ki(z,X);return(R-=Ie.length)<u?Tg(n,s,_c,I.placeholder,t,z,Ie,t,t,u-R):fn(this&&this!==Rr&&this instanceof I?d:n,this,z)}}(n,s,B):32!=s&&33!=s||I.length?_c.apply(t,qe):function iN(n,s,u,d){var I=1&s,R=Vo(n);return function z(){for(var B=-1,X=arguments.length,Ie=-1,Se=d.length,Ae=se(Se+X),$e=this&&this!==Rr&&this instanceof z?R:n;++Ie<Se;)Ae[Ie]=d[Ie];for(;X--;)Ae[Ie++]=arguments[++B];return fn($e,I?u:this,Ae)}}(n,s,u,d);else var Ge=function rN(n,s,u){var d=1&s,I=Vo(n);return function R(){return(this&&this!==Rr&&this instanceof R?I:n).apply(d?u:this,arguments)}}(n,s,u);return Zg(($e?dg:zg)(Ge,qe),n,s)}function jg(n,s,u,d){return n===t||Vn(n,zs[u])&&!St.call(d,u)?s:n}function Dg(n,s,u,d,I,R){return Bt(n)&&Bt(s)&&(R.set(s,n),fc(n,s,t,Dg,R),R.delete(s)),n}function oN(n){return Jo(n)?t:n}function Fg(n,s,u,d,I,R){var z=1&u,B=n.length,X=s.length;if(B!=X&&!(z&&X>B))return!1;var Ie=R.get(n),Se=R.get(s);if(Ie&&Se)return Ie==s&&Se==n;var Ae=-1,$e=!0,qe=2&u?new us:t;for(R.set(n,s),R.set(s,n);++Ae<B;){var Ge=n[Ae],ut=s[Ae];if(d)var We=z?d(ut,Ge,Ae,s,n,R):d(Ge,ut,Ae,n,s,R);if(We!==t){if(We)continue;$e=!1;break}if(qe){if(!Ll(s,function(ht,gt){if(!$o(qe,gt)&&(Ge===ht||I(Ge,ht,u,d,R)))return qe.push(gt)})){$e=!1;break}}else if(Ge!==ut&&!I(Ge,ut,u,d,R)){$e=!1;break}}return R.delete(n),R.delete(s),$e}function xi(n){return If(Kg(n,t,Jg),n+"")}function gf(n){return tg(n,Er,bf)}function yf(n){return tg(n,tn,$g)}var mf=sc?function(n){return sc.get(n)}:Uf;function vc(n){for(var s=n.name+"",u=Hs[s],d=St.call(Hs,s)?u.length:0;d--;){var I=u[d],R=I.func;if(null==R||R==n)return I.name}return s}function Ws(n){return(St.call(P,"placeholder")?P:n).placeholder}function Ve(){var n=P.iteratee||Ff;return n=n===Ff?ig:n,arguments.length?n(arguments[0],arguments[1]):n}function bc(n,s){var u=n.__data__;return function gN(n){var s=typeof n;return"string"==s||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==n:null===n}(s)?u["string"==typeof s?"string":"hash"]:u.map}function vf(n){for(var s=Er(n),u=s.length;u--;){var d=s[u],I=n[d];s[u]=[d,I,Mg(I)]}return s}function ds(n,s){var u=function vS(Q,ge){return null==Q?t:Q[ge]}(n,s);return ng(u)?u:t}var bf=Bl?function(n){return null==n?[]:(n=Dt(n),Li(Bl(n),function(s){return q_.call(n,s)}))}:Lf,$g=Bl?function(n){for(var s=[];n;)Mi(s,bf(n)),n=ec(n);return s}:Lf,Dr=Lr;function Ug(n,s,u){for(var d=-1,I=(s=Zi(s,n)).length,R=!1;++d<I;){var z=oi(s[d]);if(!(R=null!=n&&u(n,z)))break;n=n[z]}return R||++d!=I?R:!!(I=null==n?0:n.length)&&Pc(I)&&Ii(z,I)&&(ot(n)||ps(n))}function Lg(n){return"function"!=typeof n.constructor||Go(n)?{}:Bs(ec(n))}function _N(n){return ot(n)||ps(n)||!!(z_&&n&&n[z_])}function Ii(n,s){var u=typeof n;return!!(s=s??Ui)&&("number"==u||"symbol"!=u&&PO.test(n))&&n>-1&&n%1==0&&n<s}function Mr(n,s,u){if(!Bt(u))return!1;var d=typeof s;return!!("number"==d?en(u)&&Ii(s,u.length):"string"==d&&s in u)&&Vn(u[s],n)}function wf(n,s){if(ot(n))return!1;var u=typeof n;return!("number"!=u&&"symbol"!=u&&"boolean"!=u&&null!=n&&!pn(n))||dO.test(n)||!fO.test(n)||null!=s&&n in Dt(s)}function Ef(n){var s=vc(n),u=P[s];if("function"!=typeof u||!(s in _t.prototype))return!1;if(n===u)return!0;var d=mf(u);return!!d&&n===d[0]}(Vl&&Dr(new Vl(new ArrayBuffer(1)))!=Us||Lo&&Dr(new Lo)!=zn||Gl&&Dr(Gl.resolve())!=Yp||Zs&&Dr(new Zs)!=Zn||Mo&&Dr(new Mo)!=Do)&&(Dr=function(n){var s=Lr(n),u=s==mi?n.constructor:t,d=u?hs(u):"";if(d)switch(d){case HS:return Us;case BS:return zn;case VS:return Yp;case GS:return Zn;case WS:return Do}return s});var mN=Wa?Oi:Mf;function Go(n){var s=n&&n.constructor;return n===("function"==typeof s&&s.prototype||zs)}function Mg(n){return n==n&&!Bt(n)}function kg(n,s){return function(u){return null!=u&&u[n]===s&&(s!==t||n in Dt(u))}}function Kg(n,s,u){return s=vr(s===t?n.length-1:s,0),function(){for(var d=arguments,I=-1,R=vr(d.length-s,0),z=se(R);++I<R;)z[I]=d[s+I];I=-1;for(var B=se(s+1);++I<s;)B[I]=d[I];return B[s]=u(z),fn(n,this,B)}}function qg(n,s){return s.length<2?n:fs(n,Cn(s,0,-1))}function xf(n,s){if(("constructor"!==s||"function"!=typeof n[s])&&"__proto__"!=s)return n[s]}var zg=Hg(dg),Wo=LS||function(n,s){return Rr.setTimeout(n,s)},If=Hg(BP);function Zg(n,s,u){var d=s+"";return If(n,function pN(n,s){var u=s.length;if(!u)return n;var d=u-1;return s[d]=(u>1?"& ":"")+s[d],s=s.join(u>2?", ":" "),n.replace(gO,"{\n/* [wrapped with "+s+"] */\n")}(d,function IN(n,s){return En(QI,function(u){var d="_."+u[0];s&u[1]&&!Ha(n,d)&&n.push(d)}),n.sort()}(function fN(n){var s=n.match(yO);return s?s[1].split(mO):[]}(d),u)))}function Hg(n){var s=0,u=0;return function(){var d=qS(),I=16-(d-u);if(u=d,I>0){if(++s>=800)return arguments[0]}else s=0;return n.apply(t,arguments)}}function wc(n,s){var u=-1,d=n.length,I=d-1;for(s=s===t?d:s;++u<s;){var R=of(u,I),z=n[R];n[R]=n[u],n[u]=z}return n.length=s,n}var Bg=function vN(n){var s=Oc(n,function(d){return 500===u.size&&u.clear(),d}),u=s.cache;return s}(function(n){var s=[];return 46===n.charCodeAt(0)&&s.push(""),n.replace(hO,function(u,d,I,R){s.push(I?R.replace(wO,"$1"):d||u)}),s});function oi(n){if("string"==typeof n||pn(n))return n;var s=n+"";return"0"==s&&1/n==-ss?"-0":s}function hs(n){if(null!=n){try{return Ja.call(n)}catch{}try{return n+""}catch{}}return""}function Vg(n){if(n instanceof _t)return n.clone();var s=new An(n.__wrapped__,n.__chain__);return s.__actions__=Xr(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}var NN=lt(function(n,s){return rr(n)?zo(n,Ar(s,1,rr,!0)):[]}),RN=lt(function(n,s){var u=jn(s);return rr(u)&&(u=t),rr(n)?zo(n,Ar(s,1,rr,!0),Ve(u,2)):[]}),AN=lt(function(n,s){var u=jn(s);return rr(u)&&(u=t),rr(n)?zo(n,Ar(s,1,rr,!0),t,u):[]});function Gg(n,s,u){var d=null==n?0:n.length;if(!d)return-1;var I=null==u?0:ct(u);return I<0&&(I=vr(d+I,0)),Ba(n,Ve(s,3),I)}function Wg(n,s,u){var d=null==n?0:n.length;if(!d)return-1;var I=d-1;return u!==t&&(I=ct(u),I=u<0?vr(d+I,0):jr(I,d-1)),Ba(n,Ve(s,3),I,!0)}function Jg(n){return null!=n&&n.length?Ar(n,1):[]}function Qg(n){return n&&n.length?n[0]:t}var KN=lt(function(n){var s=zt(n,ff);return s.length&&s[0]===n[0]?ef(s):[]}),qN=lt(function(n){var s=jn(n),u=zt(n,ff);return s===jn(u)?s=t:u.pop(),u.length&&u[0]===n[0]?ef(u,Ve(s,2)):[]}),zN=lt(function(n){var s=jn(n),u=zt(n,ff);return(s="function"==typeof s?s:t)&&u.pop(),u.length&&u[0]===n[0]?ef(u,t,s):[]});function jn(n){var s=null==n?0:n.length;return s?n[s-1]:t}var VN=lt(Yg);function Yg(n,s){return n&&n.length&&s&&s.length?sf(n,s):n}var JN=xi(function(n,s){var u=null==n?0:n.length,d=Jl(n,s);return fg(n,zt(s,function(I){return Ii(I,u)?+I:I}).sort(wg)),d});function Of(n){return null==n?n:ZS.call(n)}var dR=lt(function(n){return zi(Ar(n,1,rr,!0))}),hR=lt(function(n){var s=jn(n);return rr(s)&&(s=t),zi(Ar(n,1,rr,!0),Ve(s,2))}),pR=lt(function(n){var s=jn(n);return s="function"==typeof s?s:t,zi(Ar(n,1,rr,!0),t,s)});function Sf(n){if(!n||!n.length)return[];var s=0;return n=Li(n,function(u){if(rr(u))return s=vr(u.length,s),!0}),ql(s,function(u){return zt(n,Ml(u))})}function Xg(n,s){if(!n||!n.length)return[];var u=Sf(n);return null==s?u:zt(u,function(d){return fn(s,t,d)})}var mR=lt(function(n,s){return rr(n)?zo(n,s):[]}),vR=lt(function(n){return lf(Li(n,rr))}),bR=lt(function(n){var s=jn(n);return rr(s)&&(s=t),lf(Li(n,rr),Ve(s,2))}),wR=lt(function(n){var s=jn(n);return s="function"==typeof s?s:t,lf(Li(n,rr),t,s)}),ER=lt(Sf),OR=lt(function(n){var s=n.length,u=s>1?n[s-1]:t;return u="function"==typeof u?(n.pop(),u):t,Xg(n,u)});function ey(n){var s=P(n);return s.__chain__=!0,s}function Ec(n,s){return s(n)}var PR=xi(function(n){var s=n.length,u=s?n[0]:0,d=this.__wrapped__,I=function(R){return Jl(R,n)};return!(s>1||this.__actions__.length)&&d instanceof _t&&Ii(u)?((d=d.slice(u,+u+(s?1:0))).__actions__.push({func:Ec,args:[I],thisArg:t}),new An(d,this.__chain__).thru(function(R){return s&&!R.length&&R.push(t),R})):this.thru(I)}),FR=pc(function(n,s,u){St.call(n,u)?++n[u]:wi(n,u,1)}),LR=Pg(Gg),MR=Pg(Wg);function ty(n,s){return(ot(n)?En:qi)(n,Ve(s,3))}function ry(n,s){return(ot(n)?aS:Y_)(n,Ve(s,3))}var zR=pc(function(n,s,u){St.call(n,u)?n[u].push(s):wi(n,u,[s])}),HR=lt(function(n,s,u){var d=-1,I="function"==typeof s,R=en(n)?se(n.length):[];return qi(n,function(z){R[++d]=I?fn(s,z,u):Zo(z,s,u)}),R}),BR=pc(function(n,s,u){wi(n,u,s)});function xc(n,s){return(ot(n)?zt:sg)(n,Ve(s,3))}var GR=pc(function(n,s,u){n[u?0:1].push(s)},function(){return[[],[]]}),nA=lt(function(n,s){if(null==n)return[];var u=s.length;return u>1&&Mr(n,s[0],s[1])?s=[]:u>2&&Mr(s[0],s[1],s[2])&&(s=[s[0]]),ug(n,Ar(s,1),[])}),Ic=US||function(){return Rr.Date.now()};function ny(n,s,u){return s=u?t:s,Ei(n,128,t,t,t,t,s=n&&null==s?n.length:s)}function iy(n,s){var u;if("function"!=typeof s)throw new xn(f);return n=ct(n),function(){return--n>0&&(u=s.apply(this,arguments)),n<=1&&(s=t),u}}var Pf=lt(function(n,s,u){var d=1;if(u.length){var I=ki(u,Ws(Pf));d|=32}return Ei(n,d,s,u,I)}),sy=lt(function(n,s,u){var d=3;if(u.length){var I=ki(u,Ws(sy));d|=32}return Ei(s,d,n,u,I)});function cy(n,s,u){var d,I,R,z,B,X,Ie=0,Se=!1,Ae=!1,$e=!0;if("function"!=typeof n)throw new xn(f);function qe(nr){var Gn=d,Pi=I;return d=I=t,Ie=nr,z=n.apply(Pi,Gn)}function We(nr){var Gn=nr-X;return X===t||Gn>=s||Gn<0||Ae&&nr-Ie>=R}function ht(){var nr=Ic();if(We(nr))return gt(nr);B=Wo(ht,function ut(nr){var Py=s-(nr-X);return Ae?jr(Py,R-(nr-Ie)):Py}(nr))}function gt(nr){return B=t,$e&&d?qe(nr):(d=I=t,z)}function gn(){var nr=Ic(),Gn=We(nr);if(d=arguments,I=this,X=nr,Gn){if(B===t)return function Ge(nr){return Ie=nr,B=Wo(ht,s),Se?qe(nr):z}(X);if(Ae)return mg(B),B=Wo(ht,s),qe(X)}return B===t&&(B=Wo(ht,s)),z}return s=Dn(s)||0,Bt(u)&&(Se=!!u.leading,R=(Ae="maxWait"in u)?vr(Dn(u.maxWait)||0,s):R,$e="trailing"in u?!!u.trailing:$e),gn.cancel=function _n(){B!==t&&mg(B),Ie=0,d=X=I=B=t},gn.flush=function kr(){return B===t?z:gt(Ic())},gn}var sA=lt(function(n,s){return Q_(n,1,s)}),oA=lt(function(n,s,u){return Q_(n,Dn(s)||0,u)});function Oc(n,s){if("function"!=typeof n||null!=s&&"function"!=typeof s)throw new xn(f);var u=function(){var d=arguments,I=s?s.apply(this,d):d[0],R=u.cache;if(R.has(I))return R.get(I);var z=n.apply(this,d);return u.cache=R.set(I,z)||R,z};return u.cache=new(Oc.Cache||bi),u}function Sc(n){if("function"!=typeof n)throw new xn(f);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}Oc.Cache=bi;var uA=WP(function(n,s){var u=(s=1==s.length&&ot(s[0])?zt(s[0],dn(Ve())):zt(Ar(s,1),dn(Ve()))).length;return lt(function(d){for(var I=-1,R=jr(d.length,u);++I<R;)d[I]=s[I].call(this,d[I]);return fn(n,this,d)})}),Nf=lt(function(n,s){var u=ki(s,Ws(Nf));return Ei(n,32,t,s,u)}),uy=lt(function(n,s){var u=ki(s,Ws(uy));return Ei(n,64,t,s,u)}),lA=xi(function(n,s){return Ei(n,256,t,t,t,s)});function Vn(n,s){return n===s||n!=n&&s!=s}var EA=mc(Xl),xA=mc(function(n,s){return n>=s}),ps=rg(function(){return arguments}())?rg:function(n){return Jt(n)&&St.call(n,"callee")&&!q_.call(n,"callee")},ot=se.isArray,IA=x_?dn(x_):function CP(n){return Jt(n)&&Lr(n)==Fo};function en(n){return null!=n&&Pc(n.length)&&!Oi(n)}function rr(n){return Jt(n)&&en(n)}var Bi=MS||Mf,SA=I_?dn(I_):function jP(n){return Jt(n)&&Lr(n)==Ao};function Rf(n){if(!Jt(n))return!1;var s=Lr(n);return s==Ma||"[object DOMException]"==s||"string"==typeof n.message&&"string"==typeof n.name&&!Jo(n)}function Oi(n){if(!Bt(n))return!1;var s=Lr(n);return s==ka||s==Qp||"[object AsyncFunction]"==s||"[object Proxy]"==s}function ly(n){return"number"==typeof n&&n==ct(n)}function Pc(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=Ui}function Bt(n){var s=typeof n;return null!=n&&("object"==s||"function"==s)}function Jt(n){return null!=n&&"object"==typeof n}var fy=O_?dn(O_):function FP(n){return Jt(n)&&Dr(n)==zn};function dy(n){return"number"==typeof n||Jt(n)&&Lr(n)==To}function Jo(n){if(!Jt(n)||Lr(n)!=mi)return!1;var s=ec(n);if(null===s)return!0;var u=St.call(s,"constructor")&&s.constructor;return"function"==typeof u&&u instanceof u&&Ja.call(u)==jS}var Af=S_?dn(S_):function $P(n){return Jt(n)&&Lr(n)==Co},hy=P_?dn(P_):function UP(n){return Jt(n)&&Dr(n)==Zn};function Nc(n){return"string"==typeof n||!ot(n)&&Jt(n)&&Lr(n)==jo}function pn(n){return"symbol"==typeof n||Jt(n)&&Lr(n)==Ka}var Js=N_?dn(N_):function LP(n){return Jt(n)&&Pc(n.length)&&!!Lt[Lr(n)]},qA=mc(nf),zA=mc(function(n,s){return n<=s});function py(n){if(!n)return[];if(en(n))return Nc(n)?Hn(n):Xr(n);if(Uo&&n[Uo])return function wS(Q){for(var ge,se=[];!(ge=Q.next()).done;)se.push(ge.value);return se}(n[Uo]());var s=Dr(n);return(s==zn?Zl:s==Zn?Va:Qs)(n)}function Si(n){return n?(n=Dn(n))===ss||n===-ss?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function ct(n){var s=Si(n),u=s%1;return s==s?u?s-u:s:0}function _y(n){return n?ls(ct(n),0,ni):0}function Dn(n){if("number"==typeof n)return n;if(pn(n))return NaN;if(Bt(n)){var s="function"==typeof n.valueOf?n.valueOf():n;n=Bt(s)?s+"":s}if("string"!=typeof n)return 0===n?n:+n;n=D_(n);var u=IO.test(n);return u||SO.test(n)?iS(n.slice(2),u?2:8):xO.test(n)?NaN:+n}function gy(n){return si(n,tn(n))}function xt(n){return null==n?"":hn(n)}var HA=Vs(function(n,s){if(Go(s)||en(s))si(s,Er(s),n);else for(var u in s)St.call(s,u)&&qo(n,u,s[u])}),yy=Vs(function(n,s){si(s,tn(s),n)}),Rc=Vs(function(n,s,u,d){si(s,tn(s),n,d)}),BA=Vs(function(n,s,u,d){si(s,Er(s),n,d)}),VA=xi(Jl),WA=lt(function(n,s){n=Dt(n);var u=-1,d=s.length,I=d>2?s[2]:t;for(I&&Mr(s[0],s[1],I)&&(d=1);++u<d;)for(var R=s[u],z=tn(R),B=-1,X=z.length;++B<X;){var Ie=z[B],Se=n[Ie];(Se===t||Vn(Se,zs[Ie])&&!St.call(n,Ie))&&(n[Ie]=R[Ie])}return n}),JA=lt(function(n){return n.push(t,Dg),fn(my,t,n)});function Tf(n,s,u){var d=null==n?t:fs(n,s);return d===t?u:d}function Cf(n,s){return null!=n&&Ug(n,s,RP)}var o2=Rg(function(n,s,u){null!=s&&"function"!=typeof s.toString&&(s=Qa.call(s)),n[s]=u},Df(rn)),a2=Rg(function(n,s,u){null!=s&&"function"!=typeof s.toString&&(s=Qa.call(s)),St.call(n,s)?n[s].push(u):n[s]=[u]},Ve),c2=lt(Zo);function Er(n){return en(n)?V_(n):rf(n)}function tn(n){return en(n)?V_(n,!0):function MP(n){if(!Bt(n))return function wN(n){var s=[];if(null!=n)for(var u in Dt(n))s.push(u);return s}(n);var s=Go(n),u=[];for(var d in n)"constructor"==d&&(s||!St.call(n,d))||u.push(d);return u}(n)}var f2=Vs(function(n,s,u){fc(n,s,u)}),my=Vs(function(n,s,u,d){fc(n,s,u,d)}),d2=xi(function(n,s){var u={};if(null==n)return u;var d=!1;s=zt(s,function(R){return R=Zi(R,n),d||(d=R.length>1),R}),si(n,yf(n),u),d&&(u=Tn(u,7,oN));for(var I=s.length;I--;)uf(u,s[I]);return u}),p2=xi(function(n,s){return null==n?{}:function KP(n,s){return lg(n,s,function(u,d){return Cf(n,d)})}(n,s)});function vy(n,s){if(null==n)return{};var u=zt(yf(n),function(d){return[d]});return s=Ve(s),lg(n,u,function(d,I){return s(d,I[0])})}var by=Cg(Er),wy=Cg(tn);function Qs(n){return null==n?[]:zl(n,Er(n))}var S2=Gs(function(n,s,u){return s=s.toLowerCase(),n+(u?Ey(s):s)});function Ey(n){return jf(xt(n).toLowerCase())}function xy(n){return(n=xt(n))&&n.replace(NO,gS).replace(VO,"")}var A2=Gs(function(n,s,u){return n+(u?"-":"")+s.toLowerCase()}),T2=Gs(function(n,s,u){return n+(u?" ":"")+s.toLowerCase()}),C2=Sg("toLowerCase"),M2=Gs(function(n,s,u){return n+(u?"_":"")+s.toLowerCase()}),K2=Gs(function(n,s,u){return n+(u?" ":"")+jf(s)}),Q2=Gs(function(n,s,u){return n+(u?" ":"")+s.toUpperCase()}),jf=Sg("toUpperCase");function Iy(n,s,u){return n=xt(n),(s=u?t:s)===t?function bS(Q){return JO.test(Q)}(n)?function NS(Q){return Q.match(GO)||[]}(n):function fS(Q){return Q.match(vO)||[]}(n):n.match(s)||[]}var Oy=lt(function(n,s){try{return fn(n,t,s)}catch(u){return Rf(u)?u:new it(u)}}),Y2=xi(function(n,s){return En(s,function(u){u=oi(u),wi(n,u,Pf(n[u],n))}),n});function Df(n){return function(){return n}}var r6=Ng(),n6=Ng(!0);function rn(n){return n}function Ff(n){return ig("function"==typeof n?n:Tn(n,1))}var o6=lt(function(n,s){return function(u){return Zo(u,n,s)}}),a6=lt(function(n,s){return function(u){return Zo(n,u,s)}});function $f(n,s,u){var d=Er(s),I=lc(s,d);null==u&&(!Bt(s)||!I.length&&d.length)&&(u=s,s=n,n=this,I=lc(s,Er(s)));var R=!(Bt(u)&&"chain"in u&&!u.chain),z=Oi(n);return En(I,function(B){var X=s[B];n[B]=X,z&&(n.prototype[B]=function(){var Ie=this.__chain__;if(R||Ie){var Se=n(this.__wrapped__);return(Se.__actions__=Xr(this.__actions__)).push({func:X,args:arguments,thisArg:n}),Se.__chain__=Ie,Se}return X.apply(n,Mi([this.value()],arguments))})}),n}function Uf(){}var l6=pf(zt),f6=pf(R_),d6=pf(Ll);function Sy(n){return wf(n)?Ml(oi(n)):function qP(n){return function(s){return fs(s,n)}}(n)}var p6=Ag(),_6=Ag(!0);function Lf(){return[]}function Mf(){return!1}var E6=gc(function(n,s){return n+s},0),x6=_f("ceil"),I6=gc(function(n,s){return n/s},1),O6=_f("floor"),C6=gc(function(n,s){return n*s},1),j6=_f("round"),D6=gc(function(n,s){return n-s},0);return P.after=function iA(n,s){if("function"!=typeof s)throw new xn(f);return n=ct(n),function(){if(--n<1)return s.apply(this,arguments)}},P.ary=ny,P.assign=HA,P.assignIn=yy,P.assignInWith=Rc,P.assignWith=BA,P.at=VA,P.before=iy,P.bind=Pf,P.bindAll=Y2,P.bindKey=sy,P.castArray=function gA(){if(!arguments.length)return[];var n=arguments[0];return ot(n)?n:[n]},P.chain=ey,P.chunk=function ON(n,s,u){s=(u?Mr(n,s,u):s===t)?1:vr(ct(s),0);var d=null==n?0:n.length;if(!d||s<1)return[];for(var I=0,R=0,z=se(nc(d/s));I<d;)z[R++]=Cn(n,I,I+=s);return z},P.compact=function SN(n){for(var s=-1,u=null==n?0:n.length,d=0,I=[];++s<u;){var R=n[s];R&&(I[d++]=R)}return I},P.concat=function PN(){var n=arguments.length;if(!n)return[];for(var s=se(n-1),u=arguments[0],d=n;d--;)s[d-1]=arguments[d];return Mi(ot(u)?Xr(u):[u],Ar(s,1))},P.cond=function X2(n){var s=null==n?0:n.length,u=Ve();return n=s?zt(n,function(d){if("function"!=typeof d[1])throw new xn(f);return[u(d[0]),d[1]]}):[],lt(function(d){for(var I=-1;++I<s;){var R=n[I];if(fn(R[0],this,d))return fn(R[1],this,d)}})},P.conforms=function e6(n){return function OP(n){var s=Er(n);return function(u){return J_(u,n,s)}}(Tn(n,1))},P.constant=Df,P.countBy=FR,P.create=function GA(n,s){var u=Bs(n);return null==s?u:W_(u,s)},P.curry=function oy(n,s,u){var d=Ei(n,8,t,t,t,t,t,s=u?t:s);return d.placeholder=oy.placeholder,d},P.curryRight=function ay(n,s,u){var d=Ei(n,16,t,t,t,t,t,s=u?t:s);return d.placeholder=ay.placeholder,d},P.debounce=cy,P.defaults=WA,P.defaultsDeep=JA,P.defer=sA,P.delay=oA,P.difference=NN,P.differenceBy=RN,P.differenceWith=AN,P.drop=function TN(n,s,u){var d=null==n?0:n.length;return d?Cn(n,(s=u||s===t?1:ct(s))<0?0:s,d):[]},P.dropRight=function CN(n,s,u){var d=null==n?0:n.length;return d?Cn(n,0,(s=d-(s=u||s===t?1:ct(s)))<0?0:s):[]},P.dropRightWhile=function jN(n,s){return n&&n.length?hc(n,Ve(s,3),!0,!0):[]},P.dropWhile=function DN(n,s){return n&&n.length?hc(n,Ve(s,3),!0):[]},P.fill=function FN(n,s,u,d){var I=null==n?0:n.length;return I?(u&&"number"!=typeof u&&Mr(n,s,u)&&(u=0,d=I),function PP(n,s,u,d){var I=n.length;for((u=ct(u))<0&&(u=-u>I?0:I+u),(d=d===t||d>I?I:ct(d))<0&&(d+=I),d=u>d?0:_y(d);u<d;)n[u++]=s;return n}(n,s,u,d)):[]},P.filter=function UR(n,s){return(ot(n)?Li:X_)(n,Ve(s,3))},P.flatMap=function kR(n,s){return Ar(xc(n,s),1)},P.flatMapDeep=function KR(n,s){return Ar(xc(n,s),ss)},P.flatMapDepth=function qR(n,s,u){return u=u===t?1:ct(u),Ar(xc(n,s),u)},P.flatten=Jg,P.flattenDeep=function $N(n){return null!=n&&n.length?Ar(n,ss):[]},P.flattenDepth=function UN(n,s){return null!=n&&n.length?Ar(n,s=s===t?1:ct(s)):[]},P.flip=function aA(n){return Ei(n,512)},P.flow=r6,P.flowRight=n6,P.fromPairs=function LN(n){for(var s=-1,u=null==n?0:n.length,d={};++s<u;){var I=n[s];d[I[0]]=I[1]}return d},P.functions=function n2(n){return null==n?[]:lc(n,Er(n))},P.functionsIn=function i2(n){return null==n?[]:lc(n,tn(n))},P.groupBy=zR,P.initial=function kN(n){return null!=n&&n.length?Cn(n,0,-1):[]},P.intersection=KN,P.intersectionBy=qN,P.intersectionWith=zN,P.invert=o2,P.invertBy=a2,P.invokeMap=HR,P.iteratee=Ff,P.keyBy=BR,P.keys=Er,P.keysIn=tn,P.map=xc,P.mapKeys=function u2(n,s){var u={};return s=Ve(s,3),ii(n,function(d,I,R){wi(u,s(d,I,R),d)}),u},P.mapValues=function l2(n,s){var u={};return s=Ve(s,3),ii(n,function(d,I,R){wi(u,I,s(d,I,R))}),u},P.matches=function i6(n){return og(Tn(n,1))},P.matchesProperty=function s6(n,s){return ag(n,Tn(s,1))},P.memoize=Oc,P.merge=f2,P.mergeWith=my,P.method=o6,P.methodOf=a6,P.mixin=$f,P.negate=Sc,P.nthArg=function u6(n){return n=ct(n),lt(function(s){return cg(s,n)})},P.omit=d2,P.omitBy=function h2(n,s){return vy(n,Sc(Ve(s)))},P.once=function cA(n){return iy(2,n)},P.orderBy=function VR(n,s,u,d){return null==n?[]:(ot(s)||(s=null==s?[]:[s]),ot(u=d?t:u)||(u=null==u?[]:[u]),ug(n,s,u))},P.over=l6,P.overArgs=uA,P.overEvery=f6,P.overSome=d6,P.partial=Nf,P.partialRight=uy,P.partition=GR,P.pick=p2,P.pickBy=vy,P.property=Sy,P.propertyOf=function h6(n){return function(s){return null==n?t:fs(n,s)}},P.pull=VN,P.pullAll=Yg,P.pullAllBy=function GN(n,s,u){return n&&n.length&&s&&s.length?sf(n,s,Ve(u,2)):n},P.pullAllWith=function WN(n,s,u){return n&&n.length&&s&&s.length?sf(n,s,t,u):n},P.pullAt=JN,P.range=p6,P.rangeRight=_6,P.rearg=lA,P.reject=function QR(n,s){return(ot(n)?Li:X_)(n,Sc(Ve(s,3)))},P.remove=function QN(n,s){var u=[];if(!n||!n.length)return u;var d=-1,I=[],R=n.length;for(s=Ve(s,3);++d<R;){var z=n[d];s(z,d,n)&&(u.push(z),I.push(d))}return fg(n,I),u},P.rest=function fA(n,s){if("function"!=typeof n)throw new xn(f);return lt(n,s=s===t?s:ct(s))},P.reverse=Of,P.sampleSize=function XR(n,s,u){return s=(u?Mr(n,s,u):s===t)?1:ct(s),(ot(n)?wP:HP)(n,s)},P.set=function g2(n,s,u){return null==n?n:Bo(n,s,u)},P.setWith=function y2(n,s,u,d){return d="function"==typeof d?d:t,null==n?n:Bo(n,s,u,d)},P.shuffle=function eA(n){return(ot(n)?EP:VP)(n)},P.slice=function YN(n,s,u){var d=null==n?0:n.length;return d?(u&&"number"!=typeof u&&Mr(n,s,u)?(s=0,u=d):(s=null==s?0:ct(s),u=u===t?d:ct(u)),Cn(n,s,u)):[]},P.sortBy=nA,P.sortedUniq=function sR(n){return n&&n.length?hg(n):[]},P.sortedUniqBy=function oR(n,s){return n&&n.length?hg(n,Ve(s,2)):[]},P.split=function k2(n,s,u){return u&&"number"!=typeof u&&Mr(n,s,u)&&(s=u=t),(u=u===t?ni:u>>>0)?(n=xt(n))&&("string"==typeof s||null!=s&&!Af(s))&&!(s=hn(s))&&ks(n)?Hi(Hn(n),0,u):n.split(s,u):[]},P.spread=function dA(n,s){if("function"!=typeof n)throw new xn(f);return s=null==s?0:vr(ct(s),0),lt(function(u){var d=u[s],I=Hi(u,0,s);return d&&Mi(I,d),fn(n,this,I)})},P.tail=function aR(n){var s=null==n?0:n.length;return s?Cn(n,1,s):[]},P.take=function cR(n,s,u){return n&&n.length?Cn(n,0,(s=u||s===t?1:ct(s))<0?0:s):[]},P.takeRight=function uR(n,s,u){var d=null==n?0:n.length;return d?Cn(n,(s=d-(s=u||s===t?1:ct(s)))<0?0:s,d):[]},P.takeRightWhile=function lR(n,s){return n&&n.length?hc(n,Ve(s,3),!1,!0):[]},P.takeWhile=function fR(n,s){return n&&n.length?hc(n,Ve(s,3)):[]},P.tap=function SR(n,s){return s(n),n},P.throttle=function hA(n,s,u){var d=!0,I=!0;if("function"!=typeof n)throw new xn(f);return Bt(u)&&(d="leading"in u?!!u.leading:d,I="trailing"in u?!!u.trailing:I),cy(n,s,{leading:d,maxWait:s,trailing:I})},P.thru=Ec,P.toArray=py,P.toPairs=by,P.toPairsIn=wy,P.toPath=function b6(n){return ot(n)?zt(n,oi):pn(n)?[n]:Xr(Bg(xt(n)))},P.toPlainObject=gy,P.transform=function m2(n,s,u){var d=ot(n),I=d||Bi(n)||Js(n);if(s=Ve(s,4),null==u){var R=n&&n.constructor;u=I?d?new R:[]:Bt(n)&&Oi(R)?Bs(ec(n)):{}}return(I?En:ii)(n,function(z,B,X){return s(u,z,B,X)}),u},P.unary=function pA(n){return ny(n,1)},P.union=dR,P.unionBy=hR,P.unionWith=pR,P.uniq=function _R(n){return n&&n.length?zi(n):[]},P.uniqBy=function gR(n,s){return n&&n.length?zi(n,Ve(s,2)):[]},P.uniqWith=function yR(n,s){return s="function"==typeof s?s:t,n&&n.length?zi(n,t,s):[]},P.unset=function v2(n,s){return null==n||uf(n,s)},P.unzip=Sf,P.unzipWith=Xg,P.update=function b2(n,s,u){return null==n?n:_g(n,s,df(u))},P.updateWith=function w2(n,s,u,d){return d="function"==typeof d?d:t,null==n?n:_g(n,s,df(u),d)},P.values=Qs,P.valuesIn=function E2(n){return null==n?[]:zl(n,tn(n))},P.without=mR,P.words=Iy,P.wrap=function _A(n,s){return Nf(df(s),n)},P.xor=vR,P.xorBy=bR,P.xorWith=wR,P.zip=ER,P.zipObject=function xR(n,s){return yg(n||[],s||[],qo)},P.zipObjectDeep=function IR(n,s){return yg(n||[],s||[],Bo)},P.zipWith=OR,P.entries=by,P.entriesIn=wy,P.extend=yy,P.extendWith=Rc,$f(P,P),P.add=E6,P.attempt=Oy,P.camelCase=S2,P.capitalize=Ey,P.ceil=x6,P.clamp=function x2(n,s,u){return u===t&&(u=s,s=t),u!==t&&(u=(u=Dn(u))==u?u:0),s!==t&&(s=(s=Dn(s))==s?s:0),ls(Dn(n),s,u)},P.clone=function yA(n){return Tn(n,4)},P.cloneDeep=function vA(n){return Tn(n,5)},P.cloneDeepWith=function bA(n,s){return Tn(n,5,s="function"==typeof s?s:t)},P.cloneWith=function mA(n,s){return Tn(n,4,s="function"==typeof s?s:t)},P.conformsTo=function wA(n,s){return null==s||J_(n,s,Er(s))},P.deburr=xy,P.defaultTo=function t6(n,s){return null==n||n!=n?s:n},P.divide=I6,P.endsWith=function P2(n,s,u){n=xt(n),s=hn(s);var d=n.length,I=u=u===t?d:ls(ct(u),0,d);return(u-=s.length)>=0&&n.slice(u,I)==s},P.eq=Vn,P.escape=function N2(n){return(n=xt(n))&&cO.test(n)?n.replace(e_,yS):n},P.escapeRegExp=function R2(n){return(n=xt(n))&&pO.test(n)?n.replace(Pl,"\\$&"):n},P.every=function $R(n,s,u){var d=ot(n)?R_:SP;return u&&Mr(n,s,u)&&(s=t),d(n,Ve(s,3))},P.find=LR,P.findIndex=Gg,P.findKey=function QA(n,s){return A_(n,Ve(s,3),ii)},P.findLast=MR,P.findLastIndex=Wg,P.findLastKey=function YA(n,s){return A_(n,Ve(s,3),Yl)},P.floor=O6,P.forEach=ty,P.forEachRight=ry,P.forIn=function XA(n,s){return null==n?n:Ql(n,Ve(s,3),tn)},P.forInRight=function e2(n,s){return null==n?n:eg(n,Ve(s,3),tn)},P.forOwn=function t2(n,s){return n&&ii(n,Ve(s,3))},P.forOwnRight=function r2(n,s){return n&&Yl(n,Ve(s,3))},P.get=Tf,P.gt=EA,P.gte=xA,P.has=function s2(n,s){return null!=n&&Ug(n,s,NP)},P.hasIn=Cf,P.head=Qg,P.identity=rn,P.includes=function ZR(n,s,u,d){n=en(n)?n:Qs(n),u=u&&!d?ct(u):0;var I=n.length;return u<0&&(u=vr(I+u,0)),Nc(n)?u<=I&&n.indexOf(s,u)>-1:!!I&&Ms(n,s,u)>-1},P.indexOf=function MN(n,s,u){var d=null==n?0:n.length;if(!d)return-1;var I=null==u?0:ct(u);return I<0&&(I=vr(d+I,0)),Ms(n,s,I)},P.inRange=function I2(n,s,u){return s=Si(s),u===t?(u=s,s=0):u=Si(u),function AP(n,s,u){return n>=jr(s,u)&&n<vr(s,u)}(n=Dn(n),s,u)},P.invoke=c2,P.isArguments=ps,P.isArray=ot,P.isArrayBuffer=IA,P.isArrayLike=en,P.isArrayLikeObject=rr,P.isBoolean=function OA(n){return!0===n||!1===n||Jt(n)&&Lr(n)==Ro},P.isBuffer=Bi,P.isDate=SA,P.isElement=function PA(n){return Jt(n)&&1===n.nodeType&&!Jo(n)},P.isEmpty=function NA(n){if(null==n)return!0;if(en(n)&&(ot(n)||"string"==typeof n||"function"==typeof n.splice||Bi(n)||Js(n)||ps(n)))return!n.length;var s=Dr(n);if(s==zn||s==Zn)return!n.size;if(Go(n))return!rf(n).length;for(var u in n)if(St.call(n,u))return!1;return!0},P.isEqual=function RA(n,s){return Ho(n,s)},P.isEqualWith=function AA(n,s,u){var d=(u="function"==typeof u?u:t)?u(n,s):t;return d===t?Ho(n,s,t,u):!!d},P.isError=Rf,P.isFinite=function TA(n){return"number"==typeof n&&Z_(n)},P.isFunction=Oi,P.isInteger=ly,P.isLength=Pc,P.isMap=fy,P.isMatch=function CA(n,s){return n===s||tf(n,s,vf(s))},P.isMatchWith=function jA(n,s,u){return u="function"==typeof u?u:t,tf(n,s,vf(s),u)},P.isNaN=function DA(n){return dy(n)&&n!=+n},P.isNative=function FA(n){if(mN(n))throw new it("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ng(n)},P.isNil=function UA(n){return null==n},P.isNull=function $A(n){return null===n},P.isNumber=dy,P.isObject=Bt,P.isObjectLike=Jt,P.isPlainObject=Jo,P.isRegExp=Af,P.isSafeInteger=function LA(n){return ly(n)&&n>=-Ui&&n<=Ui},P.isSet=hy,P.isString=Nc,P.isSymbol=pn,P.isTypedArray=Js,P.isUndefined=function MA(n){return n===t},P.isWeakMap=function kA(n){return Jt(n)&&Dr(n)==Do},P.isWeakSet=function KA(n){return Jt(n)&&"[object WeakSet]"==Lr(n)},P.join=function ZN(n,s){return null==n?"":kS.call(n,s)},P.kebabCase=A2,P.last=jn,P.lastIndexOf=function HN(n,s,u){var d=null==n?0:n.length;if(!d)return-1;var I=d;return u!==t&&(I=(I=ct(u))<0?vr(d+I,0):jr(I,d-1)),s==s?function IS(Q,ge,se){for(var Me=se+1;Me--;)if(Q[Me]===ge)return Me;return Me}(n,s,I):Ba(n,T_,I,!0)},P.lowerCase=T2,P.lowerFirst=C2,P.lt=qA,P.lte=zA,P.max=function S6(n){return n&&n.length?uc(n,rn,Xl):t},P.maxBy=function P6(n,s){return n&&n.length?uc(n,Ve(s,2),Xl):t},P.mean=function N6(n){return C_(n,rn)},P.meanBy=function R6(n,s){return C_(n,Ve(s,2))},P.min=function A6(n){return n&&n.length?uc(n,rn,nf):t},P.minBy=function T6(n,s){return n&&n.length?uc(n,Ve(s,2),nf):t},P.stubArray=Lf,P.stubFalse=Mf,P.stubObject=function g6(){return{}},P.stubString=function y6(){return""},P.stubTrue=function m6(){return!0},P.multiply=C6,P.nth=function BN(n,s){return n&&n.length?cg(n,ct(s)):t},P.noConflict=function c6(){return Rr._===this&&(Rr._=DS),this},P.noop=Uf,P.now=Ic,P.pad=function j2(n,s,u){n=xt(n);var d=(s=ct(s))?Ks(n):0;if(!s||d>=s)return n;var I=(s-d)/2;return yc(ic(I),u)+n+yc(nc(I),u)},P.padEnd=function D2(n,s,u){n=xt(n);var d=(s=ct(s))?Ks(n):0;return s&&d<s?n+yc(s-d,u):n},P.padStart=function F2(n,s,u){n=xt(n);var d=(s=ct(s))?Ks(n):0;return s&&d<s?yc(s-d,u)+n:n},P.parseInt=function $2(n,s,u){return u||null==s?s=0:s&&(s=+s),zS(xt(n).replace(Nl,""),s||0)},P.random=function O2(n,s,u){if(u&&"boolean"!=typeof u&&Mr(n,s,u)&&(s=u=t),u===t&&("boolean"==typeof s?(u=s,s=t):"boolean"==typeof n&&(u=n,n=t)),n===t&&s===t?(n=0,s=1):(n=Si(n),s===t?(s=n,n=0):s=Si(s)),n>s){var d=n;n=s,s=d}if(u||n%1||s%1){var I=H_();return jr(n+I*(s-n+nS("1e-"+((I+"").length-1))),s)}return of(n,s)},P.reduce=function WR(n,s,u){var d=ot(n)?Ul:j_,I=arguments.length<3;return d(n,Ve(s,4),u,I,qi)},P.reduceRight=function JR(n,s,u){var d=ot(n)?cS:j_,I=arguments.length<3;return d(n,Ve(s,4),u,I,Y_)},P.repeat=function U2(n,s,u){return s=(u?Mr(n,s,u):s===t)?1:ct(s),af(xt(n),s)},P.replace=function L2(){var n=arguments,s=xt(n[0]);return n.length<3?s:s.replace(n[1],n[2])},P.result=function _2(n,s,u){var d=-1,I=(s=Zi(s,n)).length;for(I||(I=1,n=t);++d<I;){var R=null==n?t:n[oi(s[d])];R===t&&(d=I,R=u),n=Oi(R)?R.call(n):R}return n},P.round=j6,P.runInContext=Q,P.sample=function YR(n){return(ot(n)?G_:ZP)(n)},P.size=function tA(n){if(null==n)return 0;if(en(n))return Nc(n)?Ks(n):n.length;var s=Dr(n);return s==zn||s==Zn?n.size:rf(n).length},P.snakeCase=M2,P.some=function rA(n,s,u){var d=ot(n)?Ll:GP;return u&&Mr(n,s,u)&&(s=t),d(n,Ve(s,3))},P.sortedIndex=function XN(n,s){return dc(n,s)},P.sortedIndexBy=function eR(n,s,u){return cf(n,s,Ve(u,2))},P.sortedIndexOf=function tR(n,s){var u=null==n?0:n.length;if(u){var d=dc(n,s);if(d<u&&Vn(n[d],s))return d}return-1},P.sortedLastIndex=function rR(n,s){return dc(n,s,!0)},P.sortedLastIndexBy=function nR(n,s,u){return cf(n,s,Ve(u,2),!0)},P.sortedLastIndexOf=function iR(n,s){if(null!=n&&n.length){var d=dc(n,s,!0)-1;if(Vn(n[d],s))return d}return-1},P.startCase=K2,P.startsWith=function q2(n,s,u){return n=xt(n),u=null==u?0:ls(ct(u),0,n.length),s=hn(s),n.slice(u,u+s.length)==s},P.subtract=D6,P.sum=function F6(n){return n&&n.length?Kl(n,rn):0},P.sumBy=function $6(n,s){return n&&n.length?Kl(n,Ve(s,2)):0},P.template=function z2(n,s,u){var d=P.templateSettings;u&&Mr(n,s,u)&&(s=t),n=xt(n),s=Rc({},s,d,jg);var B,X,I=Rc({},s.imports,d.imports,jg),R=Er(I),z=zl(I,R),Ie=0,Se=s.interpolate||qa,Ae="__p += '",$e=Hl((s.escape||qa).source+"|"+Se.source+"|"+(Se===t_?EO:qa).source+"|"+(s.evaluate||qa).source+"|$","g"),qe="//# sourceURL="+(St.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++YO+"]")+"\n";n.replace($e,function(We,ht,gt,_n,kr,gn){return gt||(gt=_n),Ae+=n.slice(Ie,gn).replace(RO,mS),ht&&(B=!0,Ae+="' +\n__e("+ht+") +\n'"),kr&&(X=!0,Ae+="';\n"+kr+";\n__p += '"),gt&&(Ae+="' +\n((__t = ("+gt+")) == null ? '' : __t) +\n'"),Ie=gn+We.length,We}),Ae+="';\n";var Ge=St.call(s,"variable")&&s.variable;if(Ge){if(bO.test(Ge))throw new it("Invalid `variable` option passed into `_.template`")}else Ae="with (obj) {\n"+Ae+"\n}\n";Ae=(X?Ae.replace(iO,""):Ae).replace(sO,"$1").replace(oO,"$1;"),Ae="function("+(Ge||"obj")+") {\n"+(Ge?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(B?", __e = _.escape":"")+(X?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ae+"return __p\n}";var ut=Oy(function(){return wt(R,qe+"return "+Ae).apply(t,z)});if(ut.source=Ae,Rf(ut))throw ut;return ut},P.times=function v6(n,s){if((n=ct(n))<1||n>Ui)return[];var u=ni,d=jr(n,ni);s=Ve(s),n-=ni;for(var I=ql(d,s);++u<n;)s(u);return I},P.toFinite=Si,P.toInteger=ct,P.toLength=_y,P.toLower=function Z2(n){return xt(n).toLowerCase()},P.toNumber=Dn,P.toSafeInteger=function ZA(n){return n?ls(ct(n),-Ui,Ui):0===n?n:0},P.toString=xt,P.toUpper=function H2(n){return xt(n).toUpperCase()},P.trim=function B2(n,s,u){if((n=xt(n))&&(u||s===t))return D_(n);if(!n||!(s=hn(s)))return n;var d=Hn(n),I=Hn(s);return Hi(d,F_(d,I),$_(d,I)+1).join("")},P.trimEnd=function V2(n,s,u){if((n=xt(n))&&(u||s===t))return n.slice(0,L_(n)+1);if(!n||!(s=hn(s)))return n;var d=Hn(n);return Hi(d,0,$_(d,Hn(s))+1).join("")},P.trimStart=function G2(n,s,u){if((n=xt(n))&&(u||s===t))return n.replace(Nl,"");if(!n||!(s=hn(s)))return n;var d=Hn(n);return Hi(d,F_(d,Hn(s))).join("")},P.truncate=function W2(n,s){var u=30,d="...";if(Bt(s)){var I="separator"in s?s.separator:I;u="length"in s?ct(s.length):u,d="omission"in s?hn(s.omission):d}var R=(n=xt(n)).length;if(ks(n)){var z=Hn(n);R=z.length}if(u>=R)return n;var B=u-Ks(d);if(B<1)return d;var X=z?Hi(z,0,B).join(""):n.slice(0,B);if(I===t)return X+d;if(z&&(B+=X.length-B),Af(I)){if(n.slice(B).search(I)){var Ie,Se=X;for(I.global||(I=Hl(I.source,xt(r_.exec(I))+"g")),I.lastIndex=0;Ie=I.exec(Se);)var Ae=Ie.index;X=X.slice(0,Ae===t?B:Ae)}}else if(n.indexOf(hn(I),B)!=B){var $e=X.lastIndexOf(I);$e>-1&&(X=X.slice(0,$e))}return X+d},P.unescape=function J2(n){return(n=xt(n))&&aO.test(n)?n.replace(Xp,OS):n},P.uniqueId=function w6(n){var s=++CS;return xt(n)+s},P.upperCase=Q2,P.upperFirst=jf,P.each=ty,P.eachRight=ry,P.first=Qg,$f(P,function(){var n={};return ii(P,function(s,u){St.call(P.prototype,u)||(n[u]=s)}),n}(),{chain:!1}),P.VERSION="4.17.21",En(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){P[n].placeholder=P}),En(["drop","take"],function(n,s){_t.prototype[n]=function(u){u=u===t?1:vr(ct(u),0);var d=this.__filtered__&&!s?new _t(this):this.clone();return d.__filtered__?d.__takeCount__=jr(u,d.__takeCount__):d.__views__.push({size:jr(u,ni),type:n+(d.__dir__<0?"Right":"")}),d},_t.prototype[n+"Right"]=function(u){return this.reverse()[n](u).reverse()}}),En(["filter","map","takeWhile"],function(n,s){var u=s+1,d=1==u||3==u;_t.prototype[n]=function(I){var R=this.clone();return R.__iteratees__.push({iteratee:Ve(I,3),type:u}),R.__filtered__=R.__filtered__||d,R}}),En(["head","last"],function(n,s){var u="take"+(s?"Right":"");_t.prototype[n]=function(){return this[u](1).value()[0]}}),En(["initial","tail"],function(n,s){var u="drop"+(s?"":"Right");_t.prototype[n]=function(){return this.__filtered__?new _t(this):this[u](1)}}),_t.prototype.compact=function(){return this.filter(rn)},_t.prototype.find=function(n){return this.filter(n).head()},_t.prototype.findLast=function(n){return this.reverse().find(n)},_t.prototype.invokeMap=lt(function(n,s){return"function"==typeof n?new _t(this):this.map(function(u){return Zo(u,n,s)})}),_t.prototype.reject=function(n){return this.filter(Sc(Ve(n)))},_t.prototype.slice=function(n,s){n=ct(n);var u=this;return u.__filtered__&&(n>0||s<0)?new _t(u):(n<0?u=u.takeRight(-n):n&&(u=u.drop(n)),s!==t&&(u=(s=ct(s))<0?u.dropRight(-s):u.take(s-n)),u)},_t.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},_t.prototype.toArray=function(){return this.take(ni)},ii(_t.prototype,function(n,s){var u=/^(?:filter|find|map|reject)|While$/.test(s),d=/^(?:head|last)$/.test(s),I=P[d?"take"+("last"==s?"Right":""):s],R=d||/^find/.test(s);I&&(P.prototype[s]=function(){var z=this.__wrapped__,B=d?[1]:arguments,X=z instanceof _t,Ie=B[0],Se=X||ot(z),Ae=function(ht){var gt=I.apply(P,Mi([ht],B));return d&&$e?gt[0]:gt};Se&&u&&"function"==typeof Ie&&1!=Ie.length&&(X=Se=!1);var $e=this.__chain__,Ge=R&&!$e,ut=X&&!this.__actions__.length;if(!R&&Se){z=ut?z:new _t(this);var We=n.apply(z,B);return We.__actions__.push({func:Ec,args:[Ae],thisArg:t}),new An(We,$e)}return Ge&&ut?n.apply(this,B):(We=this.thru(Ae),Ge?d?We.value()[0]:We.value():We)})}),En(["pop","push","shift","sort","splice","unshift"],function(n){var s=Ga[n],u=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",d=/^(?:pop|shift)$/.test(n);P.prototype[n]=function(){var I=arguments;if(d&&!this.__chain__){var R=this.value();return s.apply(ot(R)?R:[],I)}return this[u](function(z){return s.apply(ot(z)?z:[],I)})}}),ii(_t.prototype,function(n,s){var u=P[s];if(u){var d=u.name+"";St.call(Hs,d)||(Hs[d]=[]),Hs[d].push({name:s,func:u})}}),Hs[_c(t,2).name]=[{name:"wrapper",func:t}],_t.prototype.clone=function JS(){var n=new _t(this.__wrapped__);return n.__actions__=Xr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Xr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Xr(this.__views__),n},_t.prototype.reverse=function QS(){if(this.__filtered__){var n=new _t(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},_t.prototype.value=function YS(){var n=this.__wrapped__.value(),s=this.__dir__,u=ot(n),d=s<0,I=u?n.length:0,R=function lN(n,s,u){for(var d=-1,I=u.length;++d<I;){var R=u[d],z=R.size;switch(R.type){case"drop":n+=z;break;case"dropRight":s-=z;break;case"take":s=jr(s,n+z);break;case"takeRight":n=vr(n,s-z)}}return{start:n,end:s}}(0,I,this.__views__),z=R.start,B=R.end,X=B-z,Ie=d?B:z-1,Se=this.__iteratees__,Ae=Se.length,$e=0,qe=jr(X,this.__takeCount__);if(!u||!d&&I==X&&qe==X)return gg(n,this.__actions__);var Ge=[];e:for(;X--&&$e<qe;){for(var ut=-1,We=n[Ie+=s];++ut<Ae;){var ht=Se[ut],_n=ht.type,kr=(0,ht.iteratee)(We);if(2==_n)We=kr;else if(!kr){if(1==_n)continue e;break e}}Ge[$e++]=We}return Ge},P.prototype.at=PR,P.prototype.chain=function NR(){return ey(this)},P.prototype.commit=function RR(){return new An(this.value(),this.__chain__)},P.prototype.next=function AR(){this.__values__===t&&(this.__values__=py(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?t:this.__values__[this.__index__++]}},P.prototype.plant=function CR(n){for(var s,u=this;u instanceof ac;){var d=Vg(u);d.__index__=0,d.__values__=t,s?I.__wrapped__=d:s=d;var I=d;u=u.__wrapped__}return I.__wrapped__=n,s},P.prototype.reverse=function jR(){var n=this.__wrapped__;if(n instanceof _t){var s=n;return this.__actions__.length&&(s=new _t(this)),(s=s.reverse()).__actions__.push({func:Ec,args:[Of],thisArg:t}),new An(s,this.__chain__)}return this.thru(Of)},P.prototype.toJSON=P.prototype.valueOf=P.prototype.value=function DR(){return gg(this.__wrapped__,this.__actions__)},P.prototype.first=P.prototype.head,Uo&&(P.prototype[Uo]=function TR(){return this}),P}();os?((os.exports=qs)._=qs,Dl._=qs):Rr._=qs}.call(Po);var aI=Object.defineProperty,cI=Object.defineProperties,uI=Object.getOwnPropertyDescriptors,Lp=Object.getOwnPropertySymbols,lI=Object.prototype.hasOwnProperty,fI=Object.prototype.propertyIsEnumerable,Mp=(r,e,t)=>e in r?aI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ta=(r,e)=>{for(var t in e||(e={}))lI.call(e,t)&&Mp(r,t,e[t]);if(Lp)for(var t of Lp(e))fI.call(e,t)&&Mp(r,t,e[t]);return r},dI=(r,e)=>cI(r,uI(e));function Fi(r,e,t){var o;const a=function fp(r){const[e,t]=r.split(Oa);return{namespace:e,reference:t}}(r);return(null==(o=e.rpcMap)?void 0:o[a.reference])||`https://rpc.walletconnect.com/v1/?chainId=${a.namespace}:${a.reference}&projectId=${t}`}function is(r){return r.includes(":")?r.split(":")[1]:r}function kp(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Kp(r){var e,t,o,a;const l={};if(!function Ra(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}(r))return l;for(const[f,x]of Object.entries(r)){const C=Na(f)?[f]:x.chains,m=x.methods||[],A=x.events||[],$=x.rpcMap||{},te=Ds(f);l[te]=dI(Ta(Ta({},l[te]),x),{chains:ri(C,null==(e=l[te])?void 0:e.chains),methods:ri(m,null==(t=l[te])?void 0:t.methods),events:ri(A,null==(o=l[te])?void 0:o.events),rpcMap:Ta(Ta({},$),null==(a=l[te])?void 0:a.rpcMap)})}return l}function _I(r){return r.includes(":")?r.split(":")[2]:r}function gI(r){const e={};for(const[t,o]of Object.entries(r)){const a=o.methods||[],l=o.events||[],f=o.accounts||[],x=Na(t)?[t]:o.chains?o.chains:kp(o.accounts);e[t]={chains:x,methods:a,events:l,accounts:f}}return e}function hl(r){return"number"==typeof r?r:r.includes("0x")?parseInt(r,16):r.includes(":")?Number(r.split(":")[1]):Number(r)}const qp={},qt=r=>qp[r],pl=(r,e)=>{qp[r]=e};class yI{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;const a=is(t);e[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||Fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new ns(o,qt("disableProviderPing")))}}class mI{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(e){var t=this;return(0,b.Z)(function*(){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return t.getAccounts();case"wallet_switchEthereumChain":return yield t.handleSwitchChain(e);case"eth_chainId":return parseInt(t.getDefaultChain())}return t.namespace.methods.includes(e.request.method)?yield t.client.request(e):t.getHttpProvider().request(e.request)})()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit("default_chain_changed",`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const o=t||Fi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new Fp(o,qt("disableProviderPing")))}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;const a=parseInt(is(t));e[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}handleSwitchChain(e){var t=this;return(0,b.Z)(function*(){var o,a;let l=e.request.params?null==(o=e.request.params[0])?void 0:o.chainId:"0x0";l=l.startsWith("0x")?l:`0x${l}`;const f=parseInt(l,16);if(t.isChainApproved(f))t.setDefaultChain(`${f}`);else{if(!t.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${f}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);yield t.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:l}]},chainId:null==(a=t.namespace.chains)?void 0:a[0]}),t.setDefaultChain(`${f}`)}return null})()}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class vI{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;const a=is(t);e[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||Fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new ns(o,qt("disableProviderPing")))}}class bI{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;const a=is(t);e[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||Fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new ns(o,qt("disableProviderPing")))}}class wI{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const o=this.getCardanoRPCUrl(t),a=is(t);e[a]=this.createHttpProvider(a,o)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||this.getCardanoRPCUrl(e);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new ns(o,qt("disableProviderPing")))}}class EI{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;const a=is(t);e[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||Fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new ns(o,qt("disableProviderPing")))}}class xI{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit("default_chain_changed",`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;const a=is(t);e[a]=this.createHttpProvider(a,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||Fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new pi(new ns(o,qt("disableProviderPing")))}}class II{constructor(e){this.name="near",this.namespace=e.namespace,this.events=qt("events"),this.client=qt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const o=t||Fi(`${this.name}:${e}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,o)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var o;e[t]=this.createHttpProvider(t,null==(o=this.namespace.rpcMap)?void 0:o[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const o=this.createHttpProvider(e,t);o&&(this.httpProviders[e]=o)}createHttpProvider(e,t){const o=t||Fi(e,this.namespace);return typeof o>"u"?void 0:new pi(new ns(o,qt("disableProviderPing")))}}var OI=Object.defineProperty,SI=Object.defineProperties,PI=Object.getOwnPropertyDescriptors,zp=Object.getOwnPropertySymbols,NI=Object.prototype.hasOwnProperty,RI=Object.prototype.propertyIsEnumerable,Zp=(r,e,t)=>e in r?OI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ca=(r,e)=>{for(var t in e||(e={}))NI.call(e,t)&&Zp(r,t,e[t]);if(zp)for(var t of zp(e))RI.call(e,t)&&Zp(r,t,e[t]);return r},_l=(r,e)=>SI(r,PI(e));class gl{constructor(e){this.events=new(je()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,mt.pino)((0,mt.getDefaultLoggerOptions)({level:e?.logger||"error"})),this.disableProviderPing=e?.disableProviderPing||!1}static init(e){return(0,b.Z)(function*(){const t=new gl(e);return yield t.initialize(),t})()}request(e,t){var o=this;return(0,b.Z)(function*(){const[a,l]=o.validateChain(t);if(!o.session)throw new Error("Please call connect() before request()");return yield o.getProvider(a).request({request:Ca({},e),chainId:`${a}:${l}`,topic:o.session.topic})})()}sendAsync(e,t,o){this.request(e,o).then(a=>t(null,a)).catch(a=>t(a,void 0))}enable(){var e=this;return(0,b.Z)(function*(){if(!e.client)throw new Error("Sign Client not initialized");return e.session||(yield e.connect({namespaces:e.namespaces,optionalNamespaces:e.optionalNamespaces,sessionProperties:e.sessionProperties})),yield e.requestAccounts()})()}disconnect(){var e=this;return(0,b.Z)(function*(){var t;if(!e.session)throw new Error("Please call connect() before enable()");yield e.client.disconnect({topic:null==(t=e.session)?void 0:t.topic,reason:Di("USER_DISCONNECTED")}),yield e.cleanup()})()}connect(e){var t=this;return(0,b.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");if(t.setNamespaces(e),yield t.cleanupPendingPairings(),!e.skipPairing)return yield t.pair(e.pairingTopic)})()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}pair(e){var t=this;return(0,b.Z)(function*(){t.shouldAbortPairingAttempt=!1;let o=0;do{if(t.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(o>=t.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:a,approval:l}=yield t.client.connect({pairingTopic:e,requiredNamespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties});a&&(t.uri=a,t.events.emit("display_uri",a)),yield l().then(f=>{t.session=f,t.namespaces||(t.namespaces=gI(f.namespaces),t.persist("namespaces",t.namespaces))}).catch(f=>{if(f.message!==cp)throw f;o++})}while(!t.session);return t.onConnect(),t.session})()}setDefaultChain(e,t){try{if(!this.session)return;const[o,a]=this.validateChain(e);this.getProvider(o).setDefaultChain(a,t)}catch(o){if(!/Please call connect/.test(o.message))throw o}}cleanupPendingPairings(e={}){var t=this;return(0,b.Z)(function*(){t.logger.info("Cleaning up inactive pairings...");const o=t.client.pairing.getAll();if(Fs(o)){for(const a of o)e.deletePairings?t.client.core.expirer.set(a.topic,0):yield t.client.core.relayer.subscriber.unsubscribe(a.topic);t.logger.info(`Inactive pairings cleared: ${o.length}`)}})()}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){var e=this;return(0,b.Z)(function*(){e.namespaces=yield e.getFromStore("namespaces"),e.optionalNamespaces=(yield e.getFromStore("optionalNamespaces"))||{},e.client.session.length&&(e.session=e.client.session.get(e.client.session.keys[e.client.session.keys.length-1]),e.createProviders())})()}initialize(){var e=this;return(0,b.Z)(function*(){e.logger.trace("Initialized"),yield e.createClient(),yield e.checkStorage(),e.registerEventListeners()})()}createClient(){var e=this;return(0,b.Z)(function*(){e.client=e.providerOpts.client||(yield Xu.init({logger:e.providerOpts.logger||"error",relayUrl:e.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:e.providerOpts.projectId,metadata:e.providerOpts.metadata,storageOptions:e.providerOpts.storageOptions,storage:e.providerOpts.storage,name:e.providerOpts.name})),e.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Ds(t)))];pl("client",this.client),pl("events",this.events),pl("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const o=function hI(r,e){const t=Object.keys(e.namespaces).filter(a=>a.includes(r));if(!t.length)return[];const o=[];return t.forEach(a=>{o.push(...e.namespaces[a].accounts)}),o}(t,this.session),a=kp(o),l=function pI(r={},e={}){const t=Kp(r),o=Kp(e);return dl.exports.merge(t,o)}(this.namespaces,this.optionalNamespaces),f=_l(Ca({},l[t]),{accounts:o,chains:a});switch(t){case"eip155":this.rpcProviders[t]=new mI({namespace:f});break;case"solana":this.rpcProviders[t]=new vI({namespace:f});break;case"cosmos":this.rpcProviders[t]=new bI({namespace:f});break;case"polkadot":this.rpcProviders[t]=new yI({namespace:f});break;case"cip34":this.rpcProviders[t]=new wI({namespace:f});break;case"elrond":this.rpcProviders[t]=new EI({namespace:f});break;case"multiversx":this.rpcProviders[t]=new xI({namespace:f});break;case"near":this.rpcProviders[t]=new II({namespace:f})}})}registerEventListeners(){var e=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:o}=t,{event:a}=o;if("accountsChanged"===a.name){const l=a.data;l&&Fs(l)&&this.events.emit("accountsChanged",l.map(_I))}else if("chainChanged"===a.name){const l=o.chainId,f=o.event.data,x=Ds(l),C=hl(l)!==hl(f)?`${x}:${hl(f)}`:l;this.onChainChanged(C)}else this.events.emit(a.name,a.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:o})=>{var a;const{namespaces:l}=o,f=null==(a=this.client)?void 0:a.session.get(t);this.session=_l(Ca({},f),{namespaces:l}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:o})}),this.client.on("session_delete",function(){var t=(0,b.Z)(function*(o){yield e.cleanup(),e.events.emit("session_delete",o),e.events.emit("disconnect",_l(Ca({},Di("USER_DISCONNECTED")),{data:o.topic}))});return function(o){return t.apply(this,arguments)}}()),this.on("default_chain_changed",t=>{this.onChainChanged(t,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:o,sessionProperties:a}=e;t&&Object.keys(t).length&&(this.namespaces=t),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",t),this.persist("optionalNamespaces",o)}validateChain(e){const[t,o]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,o];if(t&&!Object.keys(this.namespaces||{}).map(f=>Ds(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&o)return[t,o];const a=Ds(Object.keys(this.namespaces)[0]);return[a,this.rpcProviders[a].getDefaultChain()]}requestAccounts(){var e=this;return(0,b.Z)(function*(){const[t]=e.validateChain();return yield e.getProvider(t).requestAccounts()})()}onChainChanged(e,t=!1){var o;if(!this.namespaces)return;const[a,l]=this.validateChain(e);t||this.getProvider(a).setDefaultChain(l),(null!=(o=this.namespaces[a])?o:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var e=this;return(0,b.Z)(function*(){e.session=void 0,e.namespaces=void 0,e.optionalNamespaces=void 0,e.sessionProperties=void 0,e.persist("namespaces",void 0),e.persist("optionalNamespaces",void 0),e.persist("sessionProperties",void 0),yield e.cleanupPendingPairings({deletePairings:!0})})()}persist(e,t){this.client.core.storage.setItem(`${Up}/${e}`,t)}getFromStore(e){var t=this;return(0,b.Z)(function*(){return yield t.client.core.storage.getItem(`${Up}/${e}`)})()}}const AI=gl,ja=["eth_sendTransaction","personal_sign"],Hp=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Da=["chainChanged","accountsChanged"],Bp=["chainChanged","accountsChanged","message","disconnect","connect"];var FI=Object.defineProperty,$I=Object.defineProperties,UI=Object.getOwnPropertyDescriptors,Vp=Object.getOwnPropertySymbols,LI=Object.prototype.hasOwnProperty,MI=Object.prototype.propertyIsEnumerable,Gp=(r,e,t)=>e in r?FI(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,No=(r,e)=>{for(var t in e||(e={}))LI.call(e,t)&&Gp(r,t,e[t]);if(Vp)for(var t of Vp(e))MI.call(e,t)&&Gp(r,t,e[t]);return r},Wp=(r,e)=>$I(r,UI(e));function Fa(r){return Number(r[0].split(":")[1])}function yl(r){return`0x${r.toString(16)}`}class $a{constructor(){this.events=new Pe.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static init(e){return(0,b.Z)(function*(){const t=new $a;return yield t.initialize(e),t})()}request(e){var t=this;return(0,b.Z)(function*(){return yield t.signer.request(e,t.formatChainId(t.chainId))})()}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}enable(){var e=this;return(0,b.Z)(function*(){return e.session||(yield e.connect()),yield e.request({method:"eth_requestAccounts"})})()}connect(e){var t=this;return(0,b.Z)(function*(){if(!t.signer.client)throw new Error("Provider not initialized. Call init() first");t.loadConnectOpts(e);const{required:o,optional:a}=function kI(r){const{chains:e,optionalChains:t,methods:o,optionalMethods:a,events:l,optionalEvents:f,rpcMap:x}=r;if(!Un(e))throw new Error("Invalid chains");const C={chains:e,methods:o||ja,events:l||Da,rpcMap:No({},e.length?{[Fa(e)]:x[Fa(e)]}:{})},m=l?.filter(xe=>!Da.includes(xe)),A=o?.filter(xe=>!ja.includes(xe));if(!(t||f||a||null!=m&&m.length||null!=A&&A.length))return{required:e.length?C:void 0};const te={chains:[...new Set(m?.length&&A?.length||!t?C.chains.concat(t||[]):t)],methods:[...new Set(C.methods.concat(null!=a&&a.length?a:Hp))],events:[...new Set(C.events.concat(null!=f&&f.length?f:Bp))],rpcMap:x};return{required:e.length?C:void 0,optional:t.length?te:void 0}}(t.rpc);try{const l=yield new Promise(function(){var x=(0,b.Z)(function*(C,m){var A;t.rpc.showQrModal&&(null==(A=t.modal)||A.subscribeModal($=>{!$.open&&!t.signer.session&&(t.signer.abortPairingAttempt(),m(new Error("Connection request reset. Please try again.")))})),yield t.signer.connect(Wp(No({namespaces:No({},o&&{[t.namespace]:o})},a&&{optionalNamespaces:{[t.namespace]:a}}),{pairingTopic:e?.pairingTopic})).then($=>{C($)}).catch($=>{m(new Error($.message))})});return function(C,m){return x.apply(this,arguments)}}());if(!l)return;const f=function j(r,e=[]){const t=[];return Object.keys(r).forEach(o=>{e.length&&!e.includes(o)||t.push(...r[o].accounts)}),t}(l.namespaces,[t.namespace]);t.setChainIds(t.rpc.chains.length?t.rpc.chains:f),t.setAccounts(f),t.events.emit("connect",{chainId:yl(t.chainId)})}catch(l){throw t.signer.logger.error(l),l}finally{t.modal&&t.modal.closeModal()}})()}disconnect(){var e=this;return(0,b.Z)(function*(){e.session&&(yield e.signer.disconnect()),e.reset()})()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:o}=t;"accountsChanged"===o.name?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===o.name?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",yl(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Wp(No({},function fi(r,e){const{message:t,code:o}=na[r];return{message:e?`${t} ${e}`:t,code:o}}("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,o;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(o=this.modal)||o.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",yl(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,o,a]=e.split(":");return{chainId:`${t}:${o}`,address:a}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,o;const a=null!=(t=e?.chains)?t:[],l=null!=(o=e?.optionalChains)?o:[],f=a.concat(l);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const x=a.length?e?.methods||ja:[],C=a.length?e?.events||Da:[],m=e?.optionalMethods||[],A=e?.optionalEvents||[],$=e?.rpcMap||this.buildRpcMap(f,e.projectId),te=e?.qrModalOptions||void 0;return{chains:a?.map(xe=>this.formatChainId(xe)),optionalChains:l.map(xe=>this.formatChainId(xe)),methods:x,events:C,optionalMethods:m,optionalEvents:A,rpcMap:$,showQrModal:!(null==e||!e.showQrModal),qrModalOptions:te,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const o={};return e.forEach(a=>{o[a]=this.getRpcUrl(a,t)}),o}initialize(e){var t=this;return(0,b.Z)(function*(){if(t.rpc=t.getRpcConfig(e),t.chainId=Fa(t.rpc.chains.length?t.rpc.chains:t.rpc.optionalChains),t.signer=yield AI.init({projectId:t.rpc.projectId,metadata:t.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),t.registerEventListeners(),yield t.loadPersistedSession(),t.rpc.showQrModal){let o;try{const{WalletConnectModal:a}=yield Y.e(301).then(Y.bind(Y,3301));o=a}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(o)try{t.modal=new o(No({walletConnectVersion:2,projectId:t.rpc.projectId,standaloneChains:t.rpc.chains},t.rpc.qrModalOptions))}catch(a){throw t.signer.logger.error(a),new Error("Could not generate WalletConnectModal Instance")}}})()}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:o,rpcMap:a}=e;t&&Un(t)&&(this.rpc.chains=t.map(l=>this.formatChainId(l)),t.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)})),o&&Un(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o?.map(l=>this.formatChainId(l)),o.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)}))}getRpcUrl(e,t){var o;return(null==(o=this.rpc.rpcMap)?void 0:o[e])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}loadPersistedSession(){var e=this;return(0,b.Z)(function*(){if(!e.session)return;const t=yield e.signer.client.core.storage.getItem(`${e.STORAGE_KEY}/chainId`),o=e.session.namespaces[`${e.namespace}:${t}`]?e.session.namespaces[`${e.namespace}:${t}`]:e.session.namespaces[e.namespace];e.setChainIds(t?[e.formatChainId(t)]:o?.accounts),e.setAccounts(o?.accounts)})()}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const KI=$a},3862:ke=>{"use strict";var q="%[a-f0-9]{2}",Y=new RegExp("("+q+")|([^%]+?)","gi"),b=new RegExp("("+q+")+","gi");function Pe(Z,ne){try{return[decodeURIComponent(Z.join(""))]}catch{}if(1===Z.length)return Z;var we=Z.slice(0,ne=ne||1),ae=Z.slice(ne);return Array.prototype.concat.call([],Pe(we),Pe(ae))}function je(Z){try{return decodeURIComponent(Z)}catch{for(var ne=Z.match(Y)||[],we=1;we<ne.length;we++)ne=(Z=Pe(ne,we).join("")).match(Y)||[];return Z}}ke.exports=function(Z){if("string"!=typeof Z)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof Z+"`");try{return Z=Z.replace(/\+/g," "),decodeURIComponent(Z)}catch{return function Te(Z){for(var ne={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},we=b.exec(Z);we;){try{ne[we[0]]=decodeURIComponent(we[0])}catch{var ae=je(we[0]);ae!==we[0]&&(ne[we[0]]=ae)}we=b.exec(Z)}ne["%C2"]="\ufffd";for(var ie=Object.keys(ne),K=0;K<ie.length;K++){var Re=ie[K];Z=Z.replace(new RegExp(Re,"g"),ne[Re])}return Z}(Z)}}},9030:ke=>{"use strict";ke.exports=function(q,Y){for(var b={},Pe=Object.keys(q),je=Array.isArray(Y),Te=0;Te<Pe.length;Te++){var Z=Pe[Te],ne=q[Z];(je?-1!==Y.indexOf(Z):Y(Z,ne,q))&&(b[Z]=ne)}return b}},6453:(ke,q,Y)=>{"use strict";const b=Y(8385),Pe=Y(3862),je=Y(5464),Te=Y(9030),ne=Symbol("encodeFragmentIdentifier");function ie(p){if("string"!=typeof p||1!==p.length)throw new TypeError("arrayFormatSeparator must be single character string")}function K(p,_){return _.encode?_.strict?b(p):encodeURIComponent(p):p}function Re(p,_){return _.decode?Pe(p):p}function Fe(p){return Array.isArray(p)?p.sort():"object"==typeof p?Fe(Object.keys(p)).sort((_,g)=>Number(_)-Number(g)).map(_=>p[_]):p}function Ke(p){const _=p.indexOf("#");return-1!==_&&(p=p.slice(0,_)),p}function Qe(p){const _=(p=Ke(p)).indexOf("?");return-1===_?"":p.slice(_+1)}function Be(p,_){return _.parseNumbers&&!Number.isNaN(Number(p))&&"string"==typeof p&&""!==p.trim()?p=Number(p):_.parseBooleans&&null!==p&&("true"===p.toLowerCase()||"false"===p.toLowerCase())&&(p="true"===p.toLowerCase()),p}function et(p,_){ie((_=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_)).arrayFormatSeparator);const g=function ae(p){let _;switch(p.arrayFormat){case"index":return(g,w,S)=>{_=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),_?(void 0===S[g]&&(S[g]={}),S[g][_[1]]=w):S[g]=w};case"bracket":return(g,w,S)=>{_=/(\[\])$/.exec(g),S[g=g.replace(/\[\]$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"colon-list-separator":return(g,w,S)=>{_=/(:list)$/.exec(g),S[g=g.replace(/:list$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"comma":case"separator":return(g,w,S)=>{const k="string"==typeof w&&w.includes(p.arrayFormatSeparator),F="string"==typeof w&&!k&&Re(w,p).includes(p.arrayFormatSeparator);w=F?Re(w,p):w;const y=k||F?w.split(p.arrayFormatSeparator).map(j=>Re(j,p)):null===w?w:Re(w,p);S[g]=y};case"bracket-separator":return(g,w,S)=>{const k=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!k)return void(S[g]=w&&Re(w,p));const F=null===w?[]:w.split(p.arrayFormatSeparator).map(y=>Re(y,p));S[g]=void 0!==S[g]?[].concat(S[g],F):F};default:return(g,w,S)=>{S[g]=void 0!==S[g]?[].concat(S[g],w):w}}}(_),w=Object.create(null);if("string"!=typeof p||!(p=p.trim().replace(/^[?#&]/,"")))return w;for(const S of p.split("&")){if(""===S)continue;let[k,F]=je(_.decode?S.replace(/\+/g," "):S,"=");F=void 0===F?null:["comma","separator","bracket-separator"].includes(_.arrayFormat)?F:Re(F,_),g(Re(k,_),F,w)}for(const S of Object.keys(w)){const k=w[S];if("object"==typeof k&&null!==k)for(const F of Object.keys(k))k[F]=Be(k[F],_);else w[S]=Be(k,_)}return!1===_.sort?w:(!0===_.sort?Object.keys(w).sort():Object.keys(w).sort(_.sort)).reduce((S,k)=>{const F=w[k];return S[k]=F&&"object"==typeof F&&!Array.isArray(F)?Fe(F):F,S},Object.create(null))}q.extract=Qe,q.parse=et,q.stringify=(p,_)=>{if(!p)return"";ie((_=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_)).arrayFormatSeparator);const g=F=>_.skipNull&&(p=>null==p)(p[F])||_.skipEmptyString&&""===p[F],w=function we(p){switch(p.arrayFormat){case"index":return _=>(g,w)=>{const S=g.length;return void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[",S,"]"].join("")]:[...g,[K(_,p),"[",K(S,p),"]=",K(w,p)].join("")]};case"bracket":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[]"].join("")]:[...g,[K(_,p),"[]=",K(w,p)].join("")];case"colon-list-separator":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),":list="].join("")]:[...g,[K(_,p),":list=",K(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const _="bracket-separator"===p.arrayFormat?"[]=":"=";return g=>(w,S)=>void 0===S||p.skipNull&&null===S||p.skipEmptyString&&""===S?w:(S=null===S?"":S,0===w.length?[[K(g,p),_,K(S,p)].join("")]:[[w,K(S,p)].join(p.arrayFormatSeparator)])}default:return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,K(_,p)]:[...g,[K(_,p),"=",K(w,p)].join("")]}}(_),S={};for(const F of Object.keys(p))g(F)||(S[F]=p[F]);const k=Object.keys(S);return!1!==_.sort&&k.sort(_.sort),k.map(F=>{const y=p[F];return void 0===y?"":null===y?K(F,_):Array.isArray(y)?0===y.length&&"bracket-separator"===_.arrayFormat?K(F,_)+"[]":y.reduce(w(F),[]).join("&"):K(F,_)+"="+K(y,_)}).filter(F=>F.length>0).join("&")},q.parseUrl=(p,_)=>{_=Object.assign({decode:!0},_);const[g,w]=je(p,"#");return Object.assign({url:g.split("?")[0]||"",query:et(Qe(p),_)},_&&_.parseFragmentIdentifier&&w?{fragmentIdentifier:Re(w,_)}:{})},q.stringifyUrl=(p,_)=>{_=Object.assign({encode:!0,strict:!0,[ne]:!0},_);const g=Ke(p.url).split("?")[0]||"",w=q.extract(p.url),S=q.parse(w,{sort:!1}),k=Object.assign(S,p.query);let F=q.stringify(k,_);F&&(F=`?${F}`);let y=function Ce(p){let _="";const g=p.indexOf("#");return-1!==g&&(_=p.slice(g)),_}(p.url);return p.fragmentIdentifier&&(y=`#${_[ne]?K(p.fragmentIdentifier,_):p.fragmentIdentifier}`),`${g}${F}${y}`},q.pick=(p,_,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[ne]:!1},g);const{url:w,query:S,fragmentIdentifier:k}=q.parseUrl(p,g);return q.stringifyUrl({url:w,query:Te(S,_),fragmentIdentifier:k},g)},q.exclude=(p,_,g)=>{const w=Array.isArray(_)?S=>!_.includes(S):(S,k)=>!_(S,k);return q.pick(p,w,g)}},5464:ke=>{"use strict";ke.exports=(q,Y)=>{if("string"!=typeof q||"string"!=typeof Y)throw new TypeError("Expected the arguments to be of type `string`");if(""===Y)return[q];const b=q.indexOf(Y);return-1===b?[q]:[q.slice(0,b),q.slice(b+Y.length)]}},2108:(ke,q,Y)=>{"use strict";Y.d(q,{q:()=>b});class b{}},699:(ke,q,Y)=>{"use strict";Y.r(q),Y.d(q,{IEvents:()=>b.q});var b=Y(2108)},4953:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HEARTBEAT_EVENTS=q.HEARTBEAT_INTERVAL=void 0;const b=Y(5409);q.HEARTBEAT_INTERVAL=b.FIVE_SECONDS,q.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},5368:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),Y(9653).__exportStar(Y(4953),q)},9754:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HeartBeat=void 0;const b=Y(9653),Pe=Y(2016),je=Y(5409),Te=Y(4083),Z=Y(5368);class ne extends Te.IHeartBeat{constructor(ae){super(ae),this.events=new Pe.EventEmitter,this.interval=Z.HEARTBEAT_INTERVAL,this.interval=ae?.interval||Z.HEARTBEAT_INTERVAL}static init(ae){return b.__awaiter(this,void 0,void 0,function*(){const ie=new ne(ae);return yield ie.init(),ie})}init(){return b.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(ae,ie){this.events.on(ae,ie)}once(ae,ie){this.events.once(ae,ie)}off(ae,ie){this.events.off(ae,ie)}removeListener(ae,ie){this.events.removeListener(ae,ie)}initialize(){return b.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),je.toMiliseconds(this.interval))})}pulse(){this.events.emit(Z.HEARTBEAT_EVENTS.pulse)}}q.HeartBeat=ne},986:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});const b=Y(9653);b.__exportStar(Y(9754),q),b.__exportStar(Y(4083),q),b.__exportStar(Y(5368),q)},7293:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.IHeartBeat=void 0;const b=Y(699);q.IHeartBeat=class Pe extends b.IEvents{constructor(Te){super()}}},4083:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),Y(9653).__exportStar(Y(7293),q)},6904:(ke,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.PINO_CUSTOM_CONTEXT_KEY=q.PINO_LOGGER_DEFAULTS=void 0,q.PINO_LOGGER_DEFAULTS={level:"info"},q.PINO_CUSTOM_CONTEXT_KEY="custom_context"},2997:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.pino=void 0;const b=Y(7121),Pe=b.__importDefault(Y(1590));Object.defineProperty(q,"pino",{enumerable:!0,get:function(){return Pe.default}}),b.__exportStar(Y(6904),q),b.__exportStar(Y(2723),q)},2723:(ke,q,Y)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.generateChildLogger=q.formatChildLoggerContext=q.getLoggerContext=q.setBrowserLoggerContext=q.getBrowserLoggerContext=q.getDefaultLoggerOptions=void 0;const b=Y(6904);function je(ae,ie=b.PINO_CUSTOM_CONTEXT_KEY){return ae[ie]||""}function Te(ae,ie,K=b.PINO_CUSTOM_CONTEXT_KEY){return ae[K]=ie,ae}function Z(ae,ie=b.PINO_CUSTOM_CONTEXT_KEY){let K="";return K=typeof ae.bindings>"u"?je(ae,ie):ae.bindings().context||"",K}function ne(ae,ie,K=b.PINO_CUSTOM_CONTEXT_KEY){const Re=Z(ae,K);return Re.trim()?`${Re}/${ie}`:ie}q.getDefaultLoggerOptions=function Pe(ae){return Object.assign(Object.assign({},ae),{level:ae?.level||b.PINO_LOGGER_DEFAULTS.level})},q.getBrowserLoggerContext=je,q.setBrowserLoggerContext=Te,q.getLoggerContext=Z,q.formatChildLoggerContext=ne,q.generateChildLogger=function we(ae,ie,K=b.PINO_CUSTOM_CONTEXT_KEY){const Re=ne(ae,ie,K);return Te(ae.child({context:Re}),Re,K)}},2768:()=>{},7425:ke=>{"use strict";var q="%[a-f0-9]{2}",Y=new RegExp("("+q+")|([^%]+?)","gi"),b=new RegExp("("+q+")+","gi");function Pe(Z,ne){try{return[decodeURIComponent(Z.join(""))]}catch{}if(1===Z.length)return Z;var we=Z.slice(0,ne=ne||1),ae=Z.slice(ne);return Array.prototype.concat.call([],Pe(we),Pe(ae))}function je(Z){try{return decodeURIComponent(Z)}catch{for(var ne=Z.match(Y)||[],we=1;we<ne.length;we++)ne=(Z=Pe(ne,we).join("")).match(Y)||[];return Z}}ke.exports=function(Z){if("string"!=typeof Z)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof Z+"`");try{return Z=Z.replace(/\+/g," "),decodeURIComponent(Z)}catch{return function Te(Z){for(var ne={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},we=b.exec(Z);we;){try{ne[we[0]]=decodeURIComponent(we[0])}catch{var ae=je(we[0]);ae!==we[0]&&(ne[we[0]]=ae)}we=b.exec(Z)}ne["%C2"]="\ufffd";for(var ie=Object.keys(ne),K=0;K<ie.length;K++){var Re=ie[K];Z=Z.replace(new RegExp(Re,"g"),ne[Re])}return Z}(Z)}}},6156:ke=>{"use strict";ke.exports=function(q,Y){for(var b={},Pe=Object.keys(q),je=Array.isArray(Y),Te=0;Te<Pe.length;Te++){var Z=Pe[Te],ne=q[Z];(je?-1!==Y.indexOf(Z):Y(Z,ne,q))&&(b[Z]=ne)}return b}},960:(ke,q,Y)=>{"use strict";const b=Y(8385),Pe=Y(7425),je=Y(3592),Te=Y(6156),ne=Symbol("encodeFragmentIdentifier");function ie(p){if("string"!=typeof p||1!==p.length)throw new TypeError("arrayFormatSeparator must be single character string")}function K(p,_){return _.encode?_.strict?b(p):encodeURIComponent(p):p}function Re(p,_){return _.decode?Pe(p):p}function Fe(p){return Array.isArray(p)?p.sort():"object"==typeof p?Fe(Object.keys(p)).sort((_,g)=>Number(_)-Number(g)).map(_=>p[_]):p}function Ke(p){const _=p.indexOf("#");return-1!==_&&(p=p.slice(0,_)),p}function Qe(p){const _=(p=Ke(p)).indexOf("?");return-1===_?"":p.slice(_+1)}function Be(p,_){return _.parseNumbers&&!Number.isNaN(Number(p))&&"string"==typeof p&&""!==p.trim()?p=Number(p):_.parseBooleans&&null!==p&&("true"===p.toLowerCase()||"false"===p.toLowerCase())&&(p="true"===p.toLowerCase()),p}function et(p,_){ie((_=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_)).arrayFormatSeparator);const g=function ae(p){let _;switch(p.arrayFormat){case"index":return(g,w,S)=>{_=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),_?(void 0===S[g]&&(S[g]={}),S[g][_[1]]=w):S[g]=w};case"bracket":return(g,w,S)=>{_=/(\[\])$/.exec(g),S[g=g.replace(/\[\]$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"colon-list-separator":return(g,w,S)=>{_=/(:list)$/.exec(g),S[g=g.replace(/:list$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"comma":case"separator":return(g,w,S)=>{const k="string"==typeof w&&w.includes(p.arrayFormatSeparator),F="string"==typeof w&&!k&&Re(w,p).includes(p.arrayFormatSeparator);w=F?Re(w,p):w;const y=k||F?w.split(p.arrayFormatSeparator).map(j=>Re(j,p)):null===w?w:Re(w,p);S[g]=y};case"bracket-separator":return(g,w,S)=>{const k=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!k)return void(S[g]=w&&Re(w,p));const F=null===w?[]:w.split(p.arrayFormatSeparator).map(y=>Re(y,p));S[g]=void 0!==S[g]?[].concat(S[g],F):F};default:return(g,w,S)=>{S[g]=void 0!==S[g]?[].concat(S[g],w):w}}}(_),w=Object.create(null);if("string"!=typeof p||!(p=p.trim().replace(/^[?#&]/,"")))return w;for(const S of p.split("&")){if(""===S)continue;let[k,F]=je(_.decode?S.replace(/\+/g," "):S,"=");F=void 0===F?null:["comma","separator","bracket-separator"].includes(_.arrayFormat)?F:Re(F,_),g(Re(k,_),F,w)}for(const S of Object.keys(w)){const k=w[S];if("object"==typeof k&&null!==k)for(const F of Object.keys(k))k[F]=Be(k[F],_);else w[S]=Be(k,_)}return!1===_.sort?w:(!0===_.sort?Object.keys(w).sort():Object.keys(w).sort(_.sort)).reduce((S,k)=>{const F=w[k];return S[k]=F&&"object"==typeof F&&!Array.isArray(F)?Fe(F):F,S},Object.create(null))}q.extract=Qe,q.parse=et,q.stringify=(p,_)=>{if(!p)return"";ie((_=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_)).arrayFormatSeparator);const g=F=>_.skipNull&&(p=>null==p)(p[F])||_.skipEmptyString&&""===p[F],w=function we(p){switch(p.arrayFormat){case"index":return _=>(g,w)=>{const S=g.length;return void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[",S,"]"].join("")]:[...g,[K(_,p),"[",K(S,p),"]=",K(w,p)].join("")]};case"bracket":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[]"].join("")]:[...g,[K(_,p),"[]=",K(w,p)].join("")];case"colon-list-separator":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),":list="].join("")]:[...g,[K(_,p),":list=",K(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const _="bracket-separator"===p.arrayFormat?"[]=":"=";return g=>(w,S)=>void 0===S||p.skipNull&&null===S||p.skipEmptyString&&""===S?w:(S=null===S?"":S,0===w.length?[[K(g,p),_,K(S,p)].join("")]:[[w,K(S,p)].join(p.arrayFormatSeparator)])}default:return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,K(_,p)]:[...g,[K(_,p),"=",K(w,p)].join("")]}}(_),S={};for(const F of Object.keys(p))g(F)||(S[F]=p[F]);const k=Object.keys(S);return!1!==_.sort&&k.sort(_.sort),k.map(F=>{const y=p[F];return void 0===y?"":null===y?K(F,_):Array.isArray(y)?0===y.length&&"bracket-separator"===_.arrayFormat?K(F,_)+"[]":y.reduce(w(F),[]).join("&"):K(F,_)+"="+K(y,_)}).filter(F=>F.length>0).join("&")},q.parseUrl=(p,_)=>{_=Object.assign({decode:!0},_);const[g,w]=je(p,"#");return Object.assign({url:g.split("?")[0]||"",query:et(Qe(p),_)},_&&_.parseFragmentIdentifier&&w?{fragmentIdentifier:Re(w,_)}:{})},q.stringifyUrl=(p,_)=>{_=Object.assign({encode:!0,strict:!0,[ne]:!0},_);const g=Ke(p.url).split("?")[0]||"",w=q.extract(p.url),S=q.parse(w,{sort:!1}),k=Object.assign(S,p.query);let F=q.stringify(k,_);F&&(F=`?${F}`);let y=function Ce(p){let _="";const g=p.indexOf("#");return-1!==g&&(_=p.slice(g)),_}(p.url);return p.fragmentIdentifier&&(y=`#${_[ne]?K(p.fragmentIdentifier,_):p.fragmentIdentifier}`),`${g}${F}${y}`},q.pick=(p,_,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[ne]:!1},g);const{url:w,query:S,fragmentIdentifier:k}=q.parseUrl(p,g);return q.stringifyUrl({url:w,query:Te(S,_),fragmentIdentifier:k},g)},q.exclude=(p,_,g)=>{const w=Array.isArray(_)?S=>!_.includes(S):(S,k)=>!_(S,k);return q.pick(p,w,g)}},3592:ke=>{"use strict";ke.exports=(q,Y)=>{if("string"!=typeof q||"string"!=typeof Y)throw new TypeError("Expected the arguments to be of type `string`");if(""===Y)return[q];const b=q.indexOf(Y);return-1===b?[q]:[q.slice(0,b),q.slice(b+Y.length)]}},8679:ke=>{"use strict";var q="%[a-f0-9]{2}",Y=new RegExp("("+q+")|([^%]+?)","gi"),b=new RegExp("("+q+")+","gi");function Pe(Z,ne){try{return[decodeURIComponent(Z.join(""))]}catch{}if(1===Z.length)return Z;var we=Z.slice(0,ne=ne||1),ae=Z.slice(ne);return Array.prototype.concat.call([],Pe(we),Pe(ae))}function je(Z){try{return decodeURIComponent(Z)}catch{for(var ne=Z.match(Y)||[],we=1;we<ne.length;we++)ne=(Z=Pe(ne,we).join("")).match(Y)||[];return Z}}ke.exports=function(Z){if("string"!=typeof Z)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof Z+"`");try{return Z=Z.replace(/\+/g," "),decodeURIComponent(Z)}catch{return function Te(Z){for(var ne={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},we=b.exec(Z);we;){try{ne[we[0]]=decodeURIComponent(we[0])}catch{var ae=je(we[0]);ae!==we[0]&&(ne[we[0]]=ae)}we=b.exec(Z)}ne["%C2"]="\ufffd";for(var ie=Object.keys(ne),K=0;K<ie.length;K++){var Re=ie[K];Z=Z.replace(new RegExp(Re,"g"),ne[Re])}return Z}(Z)}}},969:ke=>{"use strict";ke.exports=function(q,Y){for(var b={},Pe=Object.keys(q),je=Array.isArray(Y),Te=0;Te<Pe.length;Te++){var Z=Pe[Te],ne=q[Z];(je?-1!==Y.indexOf(Z):Y(Z,ne,q))&&(b[Z]=ne)}return b}},7803:(ke,q,Y)=>{"use strict";const b=Y(8385),Pe=Y(8679),je=Y(7547),Te=Y(969),ne=Symbol("encodeFragmentIdentifier");function ie(p){if("string"!=typeof p||1!==p.length)throw new TypeError("arrayFormatSeparator must be single character string")}function K(p,_){return _.encode?_.strict?b(p):encodeURIComponent(p):p}function Re(p,_){return _.decode?Pe(p):p}function Fe(p){return Array.isArray(p)?p.sort():"object"==typeof p?Fe(Object.keys(p)).sort((_,g)=>Number(_)-Number(g)).map(_=>p[_]):p}function Ke(p){const _=p.indexOf("#");return-1!==_&&(p=p.slice(0,_)),p}function Qe(p){const _=(p=Ke(p)).indexOf("?");return-1===_?"":p.slice(_+1)}function Be(p,_){return _.parseNumbers&&!Number.isNaN(Number(p))&&"string"==typeof p&&""!==p.trim()?p=Number(p):_.parseBooleans&&null!==p&&("true"===p.toLowerCase()||"false"===p.toLowerCase())&&(p="true"===p.toLowerCase()),p}function et(p,_){ie((_=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_)).arrayFormatSeparator);const g=function ae(p){let _;switch(p.arrayFormat){case"index":return(g,w,S)=>{_=/\[(\d*)\]$/.exec(g),g=g.replace(/\[\d*\]$/,""),_?(void 0===S[g]&&(S[g]={}),S[g][_[1]]=w):S[g]=w};case"bracket":return(g,w,S)=>{_=/(\[\])$/.exec(g),S[g=g.replace(/\[\]$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"colon-list-separator":return(g,w,S)=>{_=/(:list)$/.exec(g),S[g=g.replace(/:list$/,"")]=_?void 0!==S[g]?[].concat(S[g],w):[w]:w};case"comma":case"separator":return(g,w,S)=>{const k="string"==typeof w&&w.includes(p.arrayFormatSeparator),F="string"==typeof w&&!k&&Re(w,p).includes(p.arrayFormatSeparator);w=F?Re(w,p):w;const y=k||F?w.split(p.arrayFormatSeparator).map(j=>Re(j,p)):null===w?w:Re(w,p);S[g]=y};case"bracket-separator":return(g,w,S)=>{const k=/(\[\])$/.test(g);if(g=g.replace(/\[\]$/,""),!k)return void(S[g]=w&&Re(w,p));const F=null===w?[]:w.split(p.arrayFormatSeparator).map(y=>Re(y,p));S[g]=void 0!==S[g]?[].concat(S[g],F):F};default:return(g,w,S)=>{S[g]=void 0!==S[g]?[].concat(S[g],w):w}}}(_),w=Object.create(null);if("string"!=typeof p||!(p=p.trim().replace(/^[?#&]/,"")))return w;for(const S of p.split("&")){if(""===S)continue;let[k,F]=je(_.decode?S.replace(/\+/g," "):S,"=");F=void 0===F?null:["comma","separator","bracket-separator"].includes(_.arrayFormat)?F:Re(F,_),g(Re(k,_),F,w)}for(const S of Object.keys(w)){const k=w[S];if("object"==typeof k&&null!==k)for(const F of Object.keys(k))k[F]=Be(k[F],_);else w[S]=Be(k,_)}return!1===_.sort?w:(!0===_.sort?Object.keys(w).sort():Object.keys(w).sort(_.sort)).reduce((S,k)=>{const F=w[k];return S[k]=F&&"object"==typeof F&&!Array.isArray(F)?Fe(F):F,S},Object.create(null))}q.extract=Qe,q.parse=et,q.stringify=(p,_)=>{if(!p)return"";ie((_=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_)).arrayFormatSeparator);const g=F=>_.skipNull&&(p=>null==p)(p[F])||_.skipEmptyString&&""===p[F],w=function we(p){switch(p.arrayFormat){case"index":return _=>(g,w)=>{const S=g.length;return void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[",S,"]"].join("")]:[...g,[K(_,p),"[",K(S,p),"]=",K(w,p)].join("")]};case"bracket":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),"[]"].join("")]:[...g,[K(_,p),"[]=",K(w,p)].join("")];case"colon-list-separator":return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,[K(_,p),":list="].join("")]:[...g,[K(_,p),":list=",K(w,p)].join("")];case"comma":case"separator":case"bracket-separator":{const _="bracket-separator"===p.arrayFormat?"[]=":"=";return g=>(w,S)=>void 0===S||p.skipNull&&null===S||p.skipEmptyString&&""===S?w:(S=null===S?"":S,0===w.length?[[K(g,p),_,K(S,p)].join("")]:[[w,K(S,p)].join(p.arrayFormatSeparator)])}default:return _=>(g,w)=>void 0===w||p.skipNull&&null===w||p.skipEmptyString&&""===w?g:null===w?[...g,K(_,p)]:[...g,[K(_,p),"=",K(w,p)].join("")]}}(_),S={};for(const F of Object.keys(p))g(F)||(S[F]=p[F]);const k=Object.keys(S);return!1!==_.sort&&k.sort(_.sort),k.map(F=>{const y=p[F];return void 0===y?"":null===y?K(F,_):Array.isArray(y)?0===y.length&&"bracket-separator"===_.arrayFormat?K(F,_)+"[]":y.reduce(w(F),[]).join("&"):K(F,_)+"="+K(y,_)}).filter(F=>F.length>0).join("&")},q.parseUrl=(p,_)=>{_=Object.assign({decode:!0},_);const[g,w]=je(p,"#");return Object.assign({url:g.split("?")[0]||"",query:et(Qe(p),_)},_&&_.parseFragmentIdentifier&&w?{fragmentIdentifier:Re(w,_)}:{})},q.stringifyUrl=(p,_)=>{_=Object.assign({encode:!0,strict:!0,[ne]:!0},_);const g=Ke(p.url).split("?")[0]||"",w=q.extract(p.url),S=q.parse(w,{sort:!1}),k=Object.assign(S,p.query);let F=q.stringify(k,_);F&&(F=`?${F}`);let y=function Ce(p){let _="";const g=p.indexOf("#");return-1!==g&&(_=p.slice(g)),_}(p.url);return p.fragmentIdentifier&&(y=`#${_[ne]?K(p.fragmentIdentifier,_):p.fragmentIdentifier}`),`${g}${F}${y}`},q.pick=(p,_,g)=>{g=Object.assign({parseFragmentIdentifier:!0,[ne]:!1},g);const{url:w,query:S,fragmentIdentifier:k}=q.parseUrl(p,g);return q.stringifyUrl({url:w,query:Te(S,_),fragmentIdentifier:k},g)},q.exclude=(p,_,g)=>{const w=Array.isArray(_)?S=>!_.includes(S):(S,k)=>!_(S,k);return q.pick(p,w,g)}},7547:ke=>{"use strict";ke.exports=(q,Y)=>{if("string"!=typeof q||"string"!=typeof Y)throw new TypeError("Expected the arguments to be of type `string`");if(""===Y)return[q];const b=q.indexOf(Y);return-1===b?[q]:[q.slice(0,b),q.slice(b+Y.length)]}},2055:function(ke,q){var je,Y=typeof self<"u"?self:this,b=function(){function je(){this.fetch=!1,this.DOMException=Y.DOMException}return je.prototype=Y,new je}();je=b,function(Z){var ne_searchParams="URLSearchParams"in je,ne_iterable="Symbol"in je&&"iterator"in Symbol,ne_blob="FileReader"in je&&"Blob"in je&&function(){try{return new Blob,!0}catch{return!1}}(),ne_formData="FormData"in je,ne_arrayBuffer="ArrayBuffer"in je;if(ne_arrayBuffer)var ae=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ie=ArrayBuffer.isView||function(N){return N&&ae.indexOf(Object.prototype.toString.call(N))>-1};function K(N){if("string"!=typeof N&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function Re(N){return"string"!=typeof N&&(N=String(N)),N}function Fe(N){var O={next:function(){var D=N.shift();return{done:void 0===D,value:D}}};return ne_iterable&&(O[Symbol.iterator]=function(){return O}),O}function Ke(N){this.map={},N instanceof Ke?N.forEach(function(O,D){this.append(D,O)},this):Array.isArray(N)?N.forEach(function(O){this.append(O[0],O[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(O){this.append(O,N[O])},this)}function Ce(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function Qe(N){return new Promise(function(O,D){N.onload=function(){O(N.result)},N.onerror=function(){D(N.error)}})}function Be(N){var O=new FileReader,D=Qe(O);return O.readAsArrayBuffer(N),D}function _(N){if(N.slice)return N.slice(0);var O=new Uint8Array(N.byteLength);return O.set(new Uint8Array(N)),O.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?"string"==typeof N?this._bodyText=N:ne_blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:ne_formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:ne_searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():ne_arrayBuffer&&ne_blob&&function we(N){return N&&DataView.prototype.isPrototypeOf(N)}(N)?(this._bodyArrayBuffer=_(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ne_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||ie(N))?this._bodyArrayBuffer=_(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||("string"==typeof N?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ne_searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ne_blob&&(this.blob=function(){var N=Ce(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Ce(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Be)}),this.text=function(){var N=Ce(this);if(N)return N;if(this._bodyBlob)return function et(N){var O=new FileReader,D=Qe(O);return O.readAsText(N),D}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function p(N){for(var O=new Uint8Array(N),D=new Array(O.length),ve=0;ve<O.length;ve++)D[ve]=String.fromCharCode(O[ve]);return D.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ne_formData&&(this.formData=function(){return this.text().then(F)}),this.json=function(){return this.text().then(JSON.parse)},this}Ke.prototype.append=function(N,O){N=K(N),O=Re(O);var D=this.map[N];this.map[N]=D?D+", "+O:O},Ke.prototype.delete=function(N){delete this.map[K(N)]},Ke.prototype.get=function(N){return N=K(N),this.has(N)?this.map[N]:null},Ke.prototype.has=function(N){return this.map.hasOwnProperty(K(N))},Ke.prototype.set=function(N,O){this.map[K(N)]=Re(O)},Ke.prototype.forEach=function(N,O){for(var D in this.map)this.map.hasOwnProperty(D)&&N.call(O,this.map[D],D,this)},Ke.prototype.keys=function(){var N=[];return this.forEach(function(O,D){N.push(D)}),Fe(N)},Ke.prototype.values=function(){var N=[];return this.forEach(function(O){N.push(O)}),Fe(N)},Ke.prototype.entries=function(){var N=[];return this.forEach(function(O,D){N.push([D,O])}),Fe(N)},ne_iterable&&(Ke.prototype[Symbol.iterator]=Ke.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(N,O){var D=(O=O||{}).body;if(N instanceof k){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,O.headers||(this.headers=new Ke(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!D&&null!=N._bodyInit&&(D=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=O.credentials||this.credentials||"same-origin",(O.headers||!this.headers)&&(this.headers=new Ke(O.headers)),this.method=function S(N){var O=N.toUpperCase();return w.indexOf(O)>-1?O:N}(O.method||this.method||"GET"),this.mode=O.mode||this.mode||null,this.signal=O.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&D)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(D)}function F(N){var O=new FormData;return N.trim().split("&").forEach(function(D){if(D){var ve=D.split("="),Ue=ve.shift().replace(/\+/g," "),V=ve.join("=").replace(/\+/g," ");O.append(decodeURIComponent(Ue),decodeURIComponent(V))}}),O}function y(N){var O=new Ke;return N.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(ve){var Ue=ve.split(":"),V=Ue.shift().trim();if(V){var be=Ue.join(":").trim();O.append(V,be)}}),O}function j(N,O){O||(O={}),this.type="default",this.status=void 0===O.status?200:O.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in O?O.statusText:"OK",this.headers=new Ke(O.headers),this.url=O.url||"",this._initBody(N)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},g.call(k.prototype),g.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Ke(this.headers),url:this.url})},j.error=function(){var N=new j(null,{status:0,statusText:""});return N.type="error",N};var T=[301,302,303,307,308];j.redirect=function(N,O){if(-1===T.indexOf(O))throw new RangeError("Invalid status code");return new j(null,{status:O,headers:{location:N}})},Z.DOMException=je.DOMException;try{new Z.DOMException}catch{Z.DOMException=function(O,D){this.message=O,this.name=D;var ve=Error(O);this.stack=ve.stack},Z.DOMException.prototype=Object.create(Error.prototype),Z.DOMException.prototype.constructor=Z.DOMException}function H(N,O){return new Promise(function(D,ve){var Ue=new k(N,O);if(Ue.signal&&Ue.signal.aborted)return ve(new Z.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function be(){V.abort()}V.onload=function(){var Ee={status:V.status,statusText:V.statusText,headers:y(V.getAllResponseHeaders()||"")};Ee.url="responseURL"in V?V.responseURL:Ee.headers.get("X-Request-URL"),D(new j("response"in V?V.response:V.responseText,Ee))},V.onerror=function(){ve(new TypeError("Network request failed"))},V.ontimeout=function(){ve(new TypeError("Network request failed"))},V.onabort=function(){ve(new Z.DOMException("Aborted","AbortError"))},V.open(Ue.method,Ue.url,!0),"include"===Ue.credentials?V.withCredentials=!0:"omit"===Ue.credentials&&(V.withCredentials=!1),"responseType"in V&&ne_blob&&(V.responseType="blob"),Ue.headers.forEach(function(Ee,oe){V.setRequestHeader(oe,Ee)}),Ue.signal&&(Ue.signal.addEventListener("abort",be),V.onreadystatechange=function(){4===V.readyState&&Ue.signal.removeEventListener("abort",be)}),V.send(typeof Ue._bodyInit>"u"?null:Ue._bodyInit)})}H.polyfill=!0,je.fetch||(je.fetch=H,je.Headers=Ke,je.Request=k,je.Response=j),Z.Headers=Ke,Z.Request=k,Z.Response=j,Z.fetch=H,Object.defineProperty(Z,"__esModule",{value:!0})}({}),b.fetch.ponyfill=!0,delete b.fetch.polyfill;var Pe=b;(q=Pe.fetch).default=Pe.fetch,q.fetch=Pe.fetch,q.Headers=Pe.Headers,q.Request=Pe.Request,q.Response=Pe.Response,ke.exports=q},2016:ke=>{"use strict";var b,q="object"==typeof Reflect?Reflect:null,Y=q&&"function"==typeof q.apply?q.apply:function(g,w,S){return Function.prototype.apply.call(g,w,S)};b=q&&"function"==typeof q.ownKeys?q.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var je=Number.isNaN||function(g){return g!=g};function Te(){Te.init.call(this)}ke.exports=Te,ke.exports.once=function Be(_,g){return new Promise(function(w,S){function k(y){_.removeListener(g,F),S(y)}function F(){"function"==typeof _.removeListener&&_.removeListener("error",k),w([].slice.call(arguments))}p(_,g,F,{once:!0}),"error"!==g&&function et(_,g,w){"function"==typeof _.on&&p(_,"error",g,w)}(_,k,{once:!0})})},Te.EventEmitter=Te,Te.prototype._events=void 0,Te.prototype._eventsCount=0,Te.prototype._maxListeners=void 0;var Z=10;function ne(_){if("function"!=typeof _)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}function we(_){return void 0===_._maxListeners?Te.defaultMaxListeners:_._maxListeners}function ae(_,g,w,S){var k,F,y;if(ne(w),void 0===(F=_._events)?(F=_._events=Object.create(null),_._eventsCount=0):(void 0!==F.newListener&&(_.emit("newListener",g,w.listener?w.listener:w),F=_._events),y=F[g]),void 0===y)y=F[g]=w,++_._eventsCount;else if("function"==typeof y?y=F[g]=S?[w,y]:[y,w]:S?y.unshift(w):y.push(w),(k=we(_))>0&&y.length>k&&!y.warned){y.warned=!0;var j=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=_,j.type=g,j.count=y.length,function Pe(_){console&&console.warn&&console.warn(_)}(j)}return _}function ie(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function K(_,g,w){var S={fired:!1,wrapFn:void 0,target:_,type:g,listener:w},k=ie.bind(S);return k.listener=w,S.wrapFn=k,k}function Re(_,g,w){var S=_._events;if(void 0===S)return[];var k=S[g];return void 0===k?[]:"function"==typeof k?w?[k.listener||k]:[k]:w?function Qe(_){for(var g=new Array(_.length),w=0;w<g.length;++w)g[w]=_[w].listener||_[w];return g}(k):Ke(k,k.length)}function Fe(_){var g=this._events;if(void 0!==g){var w=g[_];if("function"==typeof w)return 1;if(void 0!==w)return w.length}return 0}function Ke(_,g){for(var w=new Array(g),S=0;S<g;++S)w[S]=_[S];return w}function p(_,g,w,S){if("function"==typeof _.on)S.once?_.once(g,w):_.on(g,w);else{if("function"!=typeof _.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _);_.addEventListener(g,function k(F){S.once&&_.removeEventListener(g,k),w(F)})}}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return Z},set:function(_){if("number"!=typeof _||_<0||je(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");Z=_}}),Te.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Te.prototype.setMaxListeners=function(g){if("number"!=typeof g||g<0||je(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},Te.prototype.getMaxListeners=function(){return we(this)},Te.prototype.emit=function(g){for(var w=[],S=1;S<arguments.length;S++)w.push(arguments[S]);var k="error"===g,F=this._events;if(void 0!==F)k=k&&void 0===F.error;else if(!k)return!1;if(k){var y;if(w.length>0&&(y=w[0]),y instanceof Error)throw y;var j=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw j.context=y,j}var T=F[g];if(void 0===T)return!1;if("function"==typeof T)Y(T,this,w);else{var H=T.length,N=Ke(T,H);for(S=0;S<H;++S)Y(N[S],this,w)}return!0},Te.prototype.on=Te.prototype.addListener=function(g,w){return ae(this,g,w,!1)},Te.prototype.prependListener=function(g,w){return ae(this,g,w,!0)},Te.prototype.once=function(g,w){return ne(w),this.on(g,K(this,g,w)),this},Te.prototype.prependOnceListener=function(g,w){return ne(w),this.prependListener(g,K(this,g,w)),this},Te.prototype.off=Te.prototype.removeListener=function(g,w){var S,k,F,y,j;if(ne(w),void 0===(k=this._events))return this;if(void 0===(S=k[g]))return this;if(S===w||S.listener===w)0==--this._eventsCount?this._events=Object.create(null):(delete k[g],k.removeListener&&this.emit("removeListener",g,S.listener||w));else if("function"!=typeof S){for(F=-1,y=S.length-1;y>=0;y--)if(S[y]===w||S[y].listener===w){j=S[y].listener,F=y;break}if(F<0)return this;0===F?S.shift():function Ce(_,g){for(;g+1<_.length;g++)_[g]=_[g+1];_.pop()}(S,F),1===S.length&&(k[g]=S[0]),void 0!==k.removeListener&&this.emit("removeListener",g,j||w)}return this},Te.prototype.removeAllListeners=function(g){var w,S,k;if(void 0===(S=this._events))return this;if(void 0===S.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==S[g]&&(0==--this._eventsCount?this._events=Object.create(null):delete S[g]),this;if(0===arguments.length){var y,F=Object.keys(S);for(k=0;k<F.length;++k)"removeListener"!==(y=F[k])&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(w=S[g]))this.removeListener(g,w);else if(void 0!==w)for(k=w.length-1;k>=0;k--)this.removeListener(g,w[k]);return this},Te.prototype.listeners=function(g){return Re(this,g,!0)},Te.prototype.rawListeners=function(g){return Re(this,g,!1)},Te.listenerCount=function(_,g){return"function"==typeof _.listenerCount?_.listenerCount(g):Fe.call(_,g)},Te.prototype.listenerCount=Fe,Te.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]}},2650:(ke,q,Y)=>{ke=Y.nmd(ke);var Pe="__lodash_hash_undefined__",je=1,Te=2,Z=9007199254740991,ne="[object Arguments]",we="[object Array]",ae="[object AsyncFunction]",ie="[object Boolean]",K="[object Date]",Re="[object Error]",Fe="[object Function]",Ke="[object GeneratorFunction]",Ce="[object Map]",Qe="[object Number]",Be="[object Null]",et="[object Object]",p="[object Promise]",_="[object Proxy]",g="[object RegExp]",w="[object Set]",S="[object String]",F="[object Undefined]",y="[object WeakMap]",j="[object ArrayBuffer]",T="[object DataView]",Ye=/^\[object .+?Constructor\]$/,ft=/^(?:0|[1-9]\d*)$/,tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt[ne]=tt[we]=tt[j]=tt[ie]=tt[T]=tt[K]=tt[Re]=tt[Fe]=tt[Ce]=tt[Qe]=tt[et]=tt[g]=tt[w]=tt[S]=tt[y]=!1;var Fn="object"==typeof global&&global&&global.Object===Object&&global,$n="object"==typeof self&&self&&self.Object===Object&&self,Pt=Fn||$n||Function("return this")(),ce=q&&!q.nodeType&&q,_e=ce&&ke&&!ke.nodeType&&ke,re=_e&&_e.exports===ce,h=re&&Fn.process,G=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),Ze=G&&G.isTypedArray;function $t(L,J){for(var Ne=-1,Le=null==L?0:L.length;++Ne<Le;)if(J(L[Ne],Ne,L))return!0;return!1}function Qt(L,J){return L.has(J)}function cr(L){var J=-1,Ne=Array(L.size);return L.forEach(function(Le,jt){Ne[++J]=[jt,Le]}),Ne}function Yt(L){var J=-1,Ne=Array(L.size);return L.forEach(function(Le){Ne[++J]=Le}),Ne}var L,Zt=Array.prototype,At=Object.prototype,Rt=Pt["__core-js_shared__"],Tt=Function.prototype.toString,It=At.hasOwnProperty,vt=(L=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",Xt=At.toString,Tr=RegExp("^"+Tt.call(It).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ir=re?Pt.Buffer:void 0,lr=Pt.Symbol,Kr=Pt.Uint8Array,qr=At.propertyIsEnumerable,nn=Zt.splice,er=lr?lr.toStringTag:void 0,zr=Object.getOwnPropertySymbols,Zr=Ir?Ir.isBuffer:void 0,Vi=function ur(L,J){return function(Ne){return L(J(Ne))}}(Object.keys,Object),ai=Ri(Pt,"DataView"),ci=Ri(Pt,"Map"),tr=Ri(Pt,"Promise"),Vt=Ri(Pt,"Set"),Gt=Ri(Pt,"WeakMap"),Mt=Ri(Object,"create"),fr=Qn(ai),dr=Qn(ci),hr=Qn(tr),ir=Qn(Vt),pr=Qn(Gt),Ct=lr?lr.prototype:void 0,Wt=Ct?Ct.valueOf:void 0;function Ut(L){var J=-1,Ne=null==L?0:L.length;for(this.clear();++J<Ne;){var Le=L[J];this.set(Le[0],Le[1])}}function Wn(L){var J=-1,Ne=null==L?0:L.length;for(this.clear();++J<Ne;){var Le=L[J];this.set(Le[0],Le[1])}}function Ni(L){var J=-1,Ne=null==L?0:L.length;for(this.clear();++J<Ne;){var Le=L[J];this.set(Le[0],Le[1])}}function Xs(L){var J=-1,Ne=null==L?0:L.length;for(this.__data__=new Ni;++J<Ne;)this.add(L[J])}function li(L){var J=this.__data__=new Wn(L);this.size=J.size}function _s(L,J){for(var Ne=L.length;Ne--;)if(na(L[Ne][0],J))return Ne;return-1}function gs(L){return null==L?void 0===L?F:Be:er&&er in Object(L)?function Ai(L){var J=It.call(L,er),Ne=L[er];try{L[er]=void 0;var Le=!0}catch{}var jt=Xt.call(L);return Le&&(J?L[er]=Ne:delete L[er]),jt}(L):function qc(L){return Xt.call(L)}(L)}function ea(L){return vs(L)&&gs(L)==ne}function ta(L,J,Ne,Le,jt){return L===J||(null==L||null==J||!vs(L)&&!vs(J)?L!=L&&J!=J:function Wf(L,J,Ne,Le,jt,st){var kt=sn(L),or=sn(J),ar=kt?we:Jn(L),Kt=or?we:Jn(J),$r=(ar=ar==ne?et:ar)==et,on=(Kt=Kt==ne?et:Kt)==et,Or=ar==Kt;if(Or&&Un(L)){if(!Un(J))return!1;kt=!0,$r=!1}if(Or&&!$r)return st||(st=new li),kt||Gi(L)?to(L,J,Ne,Le,jt,st):function Lc(L,J,Ne,Le,jt,st,kt){switch(Ne){case T:if(L.byteLength!=J.byteLength||L.byteOffset!=J.byteOffset)return!1;L=L.buffer,J=J.buffer;case j:return!(L.byteLength!=J.byteLength||!st(new Kr(L),new Kr(J)));case ie:case K:case Qe:return na(+L,+J);case Re:return L.name==J.name&&L.message==J.message;case g:case S:return L==J+"";case Ce:var or=cr;case w:if(or||(or=Yt),L.size!=J.size&&!(Le&je))return!1;var Kt=kt.get(L);if(Kt)return Kt==J;Le|=Te,kt.set(L,J);var $r=to(or(L),or(J),Le,jt,st,kt);return kt.delete(L),$r;case"[object Symbol]":if(Wt)return Wt.call(L)==Wt.call(J)}return!1}(L,J,ar,Ne,Le,jt,st);if(!(Ne&je)){var an=$r&&It.call(L,"__wrapped__"),cn=on&&It.call(J,"__wrapped__");if(an||cn){var di=an?L.value():L,Xn=cn?J.value():J;return st||(st=new li),jt(di,Xn,Ne,Le,st)}}return!!Or&&(st||(st=new li),function Mc(L,J,Ne,Le,jt,st){var kt=Ne&je,or=ro(L),ar=or.length;if(ar!=ro(J).length&&!kt)return!1;for(var on=ar;on--;){var Or=or[on];if(!(kt?Or in J:It.call(J,Or)))return!1}var an=st.get(L);if(an&&st.get(J))return an==J;var cn=!0;st.set(L,J),st.set(J,L);for(var di=kt;++on<ar;){var Xn=L[Or=or[on]],Ti=J[Or];if(Le)var Hc=kt?Le(Ti,Xn,Or,J,L,st):Le(Xn,Ti,Or,L,J,st);if(!(void 0===Hc?Xn===Ti||jt(Xn,Ti,Ne,Le,st):Hc)){cn=!1;break}di||(di="constructor"==Or)}if(cn&&!di){var io=L.constructor,so=J.constructor;io!=so&&"constructor"in L&&"constructor"in J&&!("function"==typeof io&&io instanceof io&&"function"==typeof so&&so instanceof so)&&(cn=!1)}return st.delete(L),st.delete(J),cn}(L,J,Ne,Le,jt,st))}(L,J,Ne,Le,ta,jt))}function to(L,J,Ne,Le,jt,st){var kt=Ne&je,or=L.length,ar=J.length;if(or!=ar&&!(kt&&ar>or))return!1;var Kt=st.get(L);if(Kt&&st.get(J))return Kt==J;var $r=-1,on=!0,Or=Ne&Te?new Xs:void 0;for(st.set(L,J),st.set(J,L);++$r<or;){var an=L[$r],cn=J[$r];if(Le)var di=kt?Le(cn,an,$r,J,L,st):Le(an,cn,$r,L,J,st);if(void 0!==di){if(di)continue;on=!1;break}if(Or){if(!$t(J,function(Xn,Ti){if(!Qt(Or,Ti)&&(an===Xn||jt(an,Xn,Ne,Le,st)))return Or.push(Ti)})){on=!1;break}}else if(an!==cn&&!jt(an,cn,Ne,Le,st)){on=!1;break}}return st.delete(L),st.delete(J),on}function ro(L){return function Dc(L,J,Ne){var Le=J(L);return sn(L)?Le:function yt(L,J){for(var Ne=-1,Le=J.length,jt=L.length;++Ne<Le;)L[jt+Ne]=J[Ne];return L}(Le,Ne(L))}(L,Zc,kc)}function ys(L,J){var Ne=L.__data__;return function Jf(L){var J=typeof L;return"string"==J||"number"==J||"symbol"==J||"boolean"==J?"__proto__"!==L:null===L}(J)?Ne["string"==typeof J?"string":"hash"]:Ne.map}function Ri(L,J){var Ne=function xr(L,J){return L?.[J]}(L,J);return function Fc(L){return!(!ms(L)||function Qf(L){return!!vt&&vt in L}(L))&&(Yn(L)?Tr:Ye).test(Qn(L))}(Ne)?Ne:void 0}Ut.prototype.clear=function _r(){this.__data__=Mt?Mt(null):{},this.size=0},Ut.prototype.delete=function gr(L){var J=this.has(L)&&delete this.__data__[L];return this.size-=J?1:0,J},Ut.prototype.get=function yr(L){var J=this.__data__;if(Mt){var Ne=J[L];return Ne===Pe?void 0:Ne}return It.call(J,L)?J[L]:void 0},Ut.prototype.has=function sr(L){var J=this.__data__;return Mt?void 0!==J[L]:It.call(J,L)},Ut.prototype.set=function kf(L,J){var Ne=this.__data__;return this.size+=this.has(L)?0:1,Ne[L]=Mt&&void 0===J?Pe:J,this},Wn.prototype.clear=function Kf(){this.__data__=[],this.size=0},Wn.prototype.delete=function Qo(L){var J=this.__data__,Ne=_s(J,L);return!(Ne<0||(Ne==J.length-1?J.pop():nn.call(J,Ne,1),--this.size,0))},Wn.prototype.get=function qf(L){var J=this.__data__,Ne=_s(J,L);return Ne<0?void 0:J[Ne][1]},Wn.prototype.has=function zf(L){return _s(this.__data__,L)>-1},Wn.prototype.set=function Zf(L,J){var Ne=this.__data__,Le=_s(Ne,L);return Le<0?(++this.size,Ne.push([L,J])):Ne[Le][1]=J,this},Ni.prototype.clear=function Hf(){this.size=0,this.__data__={hash:new Ut,map:new(ci||Wn),string:new Ut}},Ni.prototype.delete=function Bf(L){var J=ys(this,L).delete(L);return this.size-=J?1:0,J},Ni.prototype.get=function ui(L){return ys(this,L).get(L)},Ni.prototype.has=function Vf(L){return ys(this,L).has(L)},Ni.prototype.set=function Ys(L,J){var Ne=ys(this,L),Le=Ne.size;return Ne.set(L,J),this.size+=Ne.size==Le?0:1,this},Xs.prototype.add=Xs.prototype.push=function eo(L){return this.__data__.set(L,Pe),this},Xs.prototype.has=function Ac(L){return this.__data__.has(L)},li.prototype.clear=function Gf(){this.__data__=new Wn,this.size=0},li.prototype.delete=function Tc(L){var J=this.__data__,Ne=J.delete(L);return this.size=J.size,Ne},li.prototype.get=function Yo(L){return this.__data__.get(L)},li.prototype.has=function Cc(L){return this.__data__.has(L)},li.prototype.set=function jc(L,J){var Ne=this.__data__;if(Ne instanceof Wn){var Le=Ne.__data__;if(!ci||Le.length<199)return Le.push([L,J]),this.size=++Ne.size,this;Ne=this.__data__=new Ni(Le)}return Ne.set(L,J),this.size=Ne.size,this};var kc=zr?function(L){return null==L?[]:(L=Object(L),function nt(L,J){for(var Ne=-1,Le=null==L?0:L.length,jt=0,st=[];++Ne<Le;){var kt=L[Ne];J(kt,Ne,L)&&(st[jt++]=kt)}return st}(zr(L),function(J){return qr.call(L,J)}))}:function Yf(){return[]},Jn=gs;function Kc(L,J){return!!(J=J??Z)&&("number"==typeof L||ft.test(L))&&L>-1&&L%1==0&&L<J}function Qn(L){if(null!=L){try{return Tt.call(L)}catch{}try{return L+""}catch{}}return""}function na(L,J){return L===J||L!=L&&J!=J}(ai&&Jn(new ai(new ArrayBuffer(1)))!=T||ci&&Jn(new ci)!=Ce||tr&&Jn(tr.resolve())!=p||Vt&&Jn(new Vt)!=w||Gt&&Jn(new Gt)!=y)&&(Jn=function(L){var J=gs(L),Ne=J==et?L.constructor:void 0,Le=Ne?Qn(Ne):"";if(Le)switch(Le){case fr:return T;case dr:return Ce;case hr:return p;case ir:return w;case pr:return y}return J});var zc=ea(function(){return arguments}())?ea:function(L){return vs(L)&&It.call(L,"callee")&&!qr.call(L,"callee")},sn=Array.isArray,Un=Zr||function Xf(){return!1};function Yn(L){if(!ms(L))return!1;var J=gs(L);return J==Fe||J==Ke||J==ae||J==_}function Fr(L){return"number"==typeof L&&L>-1&&L%1==0&&L<=Z}function ms(L){var J=typeof L;return null!=L&&("object"==J||"function"==J)}function vs(L){return null!=L&&"object"==typeof L}var Gi=Ze?function Nt(L){return function(J){return L(J)}}(Ze):function $c(L){return vs(L)&&Fr(L.length)&&!!tt[gs(L)]};function Zc(L){return function fi(L){return null!=L&&Fr(L.length)&&!Yn(L)}(L)?function Xo(L,J){var Ne=sn(L),Le=!Ne&&zc(L),jt=!Ne&&!Le&&Un(L),st=!Ne&&!Le&&!jt&&Gi(L),kt=Ne||Le||jt||st,or=kt?function Et(L,J){for(var Ne=-1,Le=Array(L);++Ne<L;)Le[Ne]=J(Ne);return Le}(L.length,String):[],ar=or.length;for(var Kt in L)(J||It.call(L,Kt))&&(!kt||!("length"==Kt||jt&&("offset"==Kt||"parent"==Kt)||st&&("buffer"==Kt||"byteLength"==Kt||"byteOffset"==Kt)||Kc(Kt,ar)))&&or.push(Kt);return or}(L):function Uc(L){if(!function ra(L){var J=L&&L.constructor;return L===("function"==typeof J&&J.prototype||At)}(L))return Vi(L);var J=[];for(var Ne in Object(L))It.call(L,Ne)&&"constructor"!=Ne&&J.push(Ne);return J}(L)}ke.exports=function no(L,J){return ta(L,J)}},514:ke=>{"use strict";function q(b){try{return JSON.stringify(b)}catch{return'"[Circular]"'}}ke.exports=function Y(b,Pe,je){var Te=je&&je.stringify||q;if("object"==typeof b&&null!==b){var ne=Pe.length+1;if(1===ne)return b;var we=new Array(ne);we[0]=Te(b);for(var ae=1;ae<ne;ae++)we[ae]=Te(Pe[ae]);return we.join(" ")}if("string"!=typeof b)return b;var ie=Pe.length;if(0===ie)return b;for(var K="",Re=0,Fe=-1,Ke=b&&b.length||0,Ce=0;Ce<Ke;){if(37===b.charCodeAt(Ce)&&Ce+1<Ke){switch(Fe=Fe>-1?Fe:0,b.charCodeAt(Ce+1)){case 100:case 102:if(Re>=ie||null==Pe[Re])break;Fe<Ce&&(K+=b.slice(Fe,Ce)),K+=Number(Pe[Re]),Fe=Ce+2,Ce++;break;case 105:if(Re>=ie||null==Pe[Re])break;Fe<Ce&&(K+=b.slice(Fe,Ce)),K+=Math.floor(Number(Pe[Re])),Fe=Ce+2,Ce++;break;case 79:case 111:case 106:if(Re>=ie||void 0===Pe[Re])break;Fe<Ce&&(K+=b.slice(Fe,Ce));var Qe=typeof Pe[Re];if("string"===Qe){K+="'"+Pe[Re]+"'",Fe=Ce+2,Ce++;break}if("function"===Qe){K+=Pe[Re].name||"<anonymous>",Fe=Ce+2,Ce++;break}K+=Te(Pe[Re]),Fe=Ce+2,Ce++;break;case 115:if(Re>=ie)break;Fe<Ce&&(K+=b.slice(Fe,Ce)),K+=String(Pe[Re]),Fe=Ce+2,Ce++;break;case 37:Fe<Ce&&(K+=b.slice(Fe,Ce)),K+="%",Fe=Ce+2,Ce++,Re--}++Re}++Ce}return-1===Fe?b:(Fe<Ke&&(K+=b.slice(Fe)),K)}},3569:ke=>{"use strict";ke.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},4308:(ke,q,Y)=>{"use strict";Y.r(q),Y.d(q,{__assign:()=>je,__asyncDelegator:()=>p,__asyncGenerator:()=>et,__asyncValues:()=>_,__await:()=>Be,__awaiter:()=>ae,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>F,__createBinding:()=>K,__decorate:()=>Z,__exportStar:()=>Re,__extends:()=>Pe,__generator:()=>ie,__importDefault:()=>S,__importStar:()=>w,__makeTemplateObject:()=>g,__metadata:()=>we,__param:()=>ne,__read:()=>Ke,__rest:()=>Te,__spread:()=>Ce,__spreadArrays:()=>Qe,__values:()=>Fe});var b=function(y,j){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var N in H)H.hasOwnProperty(N)&&(T[N]=H[N])})(y,j)};function Pe(y,j){function T(){this.constructor=y}b(y,j),y.prototype=null===j?Object.create(j):(T.prototype=j.prototype,new T)}var je=function(){return je=Object.assign||function(j){for(var T,H=1,N=arguments.length;H<N;H++)for(var O in T=arguments[H])Object.prototype.hasOwnProperty.call(T,O)&&(j[O]=T[O]);return j},je.apply(this,arguments)};function Te(y,j){var T={};for(var H in y)Object.prototype.hasOwnProperty.call(y,H)&&j.indexOf(H)<0&&(T[H]=y[H]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(H=Object.getOwnPropertySymbols(y);N<H.length;N++)j.indexOf(H[N])<0&&Object.prototype.propertyIsEnumerable.call(y,H[N])&&(T[H[N]]=y[H[N]])}return T}function Z(y,j,T,H){var D,N=arguments.length,O=N<3?j:null===H?H=Object.getOwnPropertyDescriptor(j,T):H;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(y,j,T,H);else for(var ve=y.length-1;ve>=0;ve--)(D=y[ve])&&(O=(N<3?D(O):N>3?D(j,T,O):D(j,T))||O);return N>3&&O&&Object.defineProperty(j,T,O),O}function ne(y,j){return function(T,H){j(T,H,y)}}function we(y,j){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(y,j)}function ae(y,j,T,H){return new(T||(T=Promise))(function(O,D){function ve(be){try{V(H.next(be))}catch(Ee){D(Ee)}}function Ue(be){try{V(H.throw(be))}catch(Ee){D(Ee)}}function V(be){be.done?O(be.value):function N(O){return O instanceof T?O:new T(function(D){D(O)})}(be.value).then(ve,Ue)}V((H=H.apply(y,j||[])).next())})}function ie(y,j){var H,N,O,D,T={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return D={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function ve(V){return function(be){return function Ue(V){if(H)throw new TypeError("Generator is already executing.");for(;T;)try{if(H=1,N&&(O=2&V[0]?N.return:V[0]?N.throw||((O=N.return)&&O.call(N),0):N.next)&&!(O=O.call(N,V[1])).done)return O;switch(N=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return T.label++,{value:V[1],done:!1};case 5:T.label++,N=V[1],V=[0];continue;case 7:V=T.ops.pop(),T.trys.pop();continue;default:if(!(O=(O=T.trys).length>0&&O[O.length-1])&&(6===V[0]||2===V[0])){T=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){T.label=V[1];break}if(6===V[0]&&T.label<O[1]){T.label=O[1],O=V;break}if(O&&T.label<O[2]){T.label=O[2],T.ops.push(V);break}O[2]&&T.ops.pop(),T.trys.pop();continue}V=j.call(y,T)}catch(be){V=[6,be],N=0}finally{H=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,be])}}}function K(y,j,T,H){void 0===H&&(H=T),y[H]=j[T]}function Re(y,j){for(var T in y)"default"!==T&&!j.hasOwnProperty(T)&&(j[T]=y[T])}function Fe(y){var j="function"==typeof Symbol&&Symbol.iterator,T=j&&y[j],H=0;if(T)return T.call(y);if(y&&"number"==typeof y.length)return{next:function(){return y&&H>=y.length&&(y=void 0),{value:y&&y[H++],done:!y}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(y,j){var T="function"==typeof Symbol&&y[Symbol.iterator];if(!T)return y;var N,D,H=T.call(y),O=[];try{for(;(void 0===j||j-- >0)&&!(N=H.next()).done;)O.push(N.value)}catch(ve){D={error:ve}}finally{try{N&&!N.done&&(T=H.return)&&T.call(H)}finally{if(D)throw D.error}}return O}function Ce(){for(var y=[],j=0;j<arguments.length;j++)y=y.concat(Ke(arguments[j]));return y}function Qe(){for(var y=0,j=0,T=arguments.length;j<T;j++)y+=arguments[j].length;var H=Array(y),N=0;for(j=0;j<T;j++)for(var O=arguments[j],D=0,ve=O.length;D<ve;D++,N++)H[N]=O[D];return H}function Be(y){return this instanceof Be?(this.v=y,this):new Be(y)}function et(y,j,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,H=T.apply(y,j||[]),O=[];return N={},D("next"),D("throw"),D("return"),N[Symbol.asyncIterator]=function(){return this},N;function D(oe){H[oe]&&(N[oe]=function(Ye){return new Promise(function(ft,tt){O.push([oe,Ye,ft,tt])>1||ve(oe,Ye)})})}function ve(oe,Ye){try{!function Ue(oe){oe.value instanceof Be?Promise.resolve(oe.value.v).then(V,be):Ee(O[0][2],oe)}(H[oe](Ye))}catch(ft){Ee(O[0][3],ft)}}function V(oe){ve("next",oe)}function be(oe){ve("throw",oe)}function Ee(oe,Ye){oe(Ye),O.shift(),O.length&&ve(O[0][0],O[0][1])}}function p(y){var j,T;return j={},H("next"),H("throw",function(N){throw N}),H("return"),j[Symbol.iterator]=function(){return this},j;function H(N,O){j[N]=y[N]?function(D){return(T=!T)?{value:Be(y[N](D)),done:"return"===N}:O?O(D):D}:O}}function _(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,j=y[Symbol.asyncIterator];return j?j.call(y):(y=Fe(y),T={},H("next"),H("throw"),H("return"),T[Symbol.asyncIterator]=function(){return this},T);function H(O){T[O]=y[O]&&function(D){return new Promise(function(ve,Ue){!function N(O,D,ve,Ue){Promise.resolve(Ue).then(function(V){O({value:V,done:ve})},D)}(ve,Ue,(D=y[O](D)).done,D.value)})}}}function g(y,j){return Object.defineProperty?Object.defineProperty(y,"raw",{value:j}):y.raw=j,y}function w(y){if(y&&y.__esModule)return y;var j={};if(null!=y)for(var T in y)Object.hasOwnProperty.call(y,T)&&(j[T]=y[T]);return j.default=y,j}function S(y){return y&&y.__esModule?y:{default:y}}function k(y,j){if(!j.has(y))throw new TypeError("attempted to get private field on non-instance");return j.get(y)}function F(y,j,T){if(!j.has(y))throw new TypeError("attempted to set private field on non-instance");return j.set(y,T),T}},9653:(ke,q,Y)=>{"use strict";Y.r(q),Y.d(q,{__assign:()=>je,__asyncDelegator:()=>p,__asyncGenerator:()=>et,__asyncValues:()=>_,__await:()=>Be,__awaiter:()=>ae,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>F,__createBinding:()=>K,__decorate:()=>Z,__exportStar:()=>Re,__extends:()=>Pe,__generator:()=>ie,__importDefault:()=>S,__importStar:()=>w,__makeTemplateObject:()=>g,__metadata:()=>we,__param:()=>ne,__read:()=>Ke,__rest:()=>Te,__spread:()=>Ce,__spreadArrays:()=>Qe,__values:()=>Fe});var b=function(y,j){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var N in H)H.hasOwnProperty(N)&&(T[N]=H[N])})(y,j)};function Pe(y,j){function T(){this.constructor=y}b(y,j),y.prototype=null===j?Object.create(j):(T.prototype=j.prototype,new T)}var je=function(){return je=Object.assign||function(j){for(var T,H=1,N=arguments.length;H<N;H++)for(var O in T=arguments[H])Object.prototype.hasOwnProperty.call(T,O)&&(j[O]=T[O]);return j},je.apply(this,arguments)};function Te(y,j){var T={};for(var H in y)Object.prototype.hasOwnProperty.call(y,H)&&j.indexOf(H)<0&&(T[H]=y[H]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(H=Object.getOwnPropertySymbols(y);N<H.length;N++)j.indexOf(H[N])<0&&Object.prototype.propertyIsEnumerable.call(y,H[N])&&(T[H[N]]=y[H[N]])}return T}function Z(y,j,T,H){var D,N=arguments.length,O=N<3?j:null===H?H=Object.getOwnPropertyDescriptor(j,T):H;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(y,j,T,H);else for(var ve=y.length-1;ve>=0;ve--)(D=y[ve])&&(O=(N<3?D(O):N>3?D(j,T,O):D(j,T))||O);return N>3&&O&&Object.defineProperty(j,T,O),O}function ne(y,j){return function(T,H){j(T,H,y)}}function we(y,j){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(y,j)}function ae(y,j,T,H){return new(T||(T=Promise))(function(O,D){function ve(be){try{V(H.next(be))}catch(Ee){D(Ee)}}function Ue(be){try{V(H.throw(be))}catch(Ee){D(Ee)}}function V(be){be.done?O(be.value):function N(O){return O instanceof T?O:new T(function(D){D(O)})}(be.value).then(ve,Ue)}V((H=H.apply(y,j||[])).next())})}function ie(y,j){var H,N,O,D,T={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return D={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function ve(V){return function(be){return function Ue(V){if(H)throw new TypeError("Generator is already executing.");for(;T;)try{if(H=1,N&&(O=2&V[0]?N.return:V[0]?N.throw||((O=N.return)&&O.call(N),0):N.next)&&!(O=O.call(N,V[1])).done)return O;switch(N=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return T.label++,{value:V[1],done:!1};case 5:T.label++,N=V[1],V=[0];continue;case 7:V=T.ops.pop(),T.trys.pop();continue;default:if(!(O=(O=T.trys).length>0&&O[O.length-1])&&(6===V[0]||2===V[0])){T=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){T.label=V[1];break}if(6===V[0]&&T.label<O[1]){T.label=O[1],O=V;break}if(O&&T.label<O[2]){T.label=O[2],T.ops.push(V);break}O[2]&&T.ops.pop(),T.trys.pop();continue}V=j.call(y,T)}catch(be){V=[6,be],N=0}finally{H=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,be])}}}function K(y,j,T,H){void 0===H&&(H=T),y[H]=j[T]}function Re(y,j){for(var T in y)"default"!==T&&!j.hasOwnProperty(T)&&(j[T]=y[T])}function Fe(y){var j="function"==typeof Symbol&&Symbol.iterator,T=j&&y[j],H=0;if(T)return T.call(y);if(y&&"number"==typeof y.length)return{next:function(){return y&&H>=y.length&&(y=void 0),{value:y&&y[H++],done:!y}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(y,j){var T="function"==typeof Symbol&&y[Symbol.iterator];if(!T)return y;var N,D,H=T.call(y),O=[];try{for(;(void 0===j||j-- >0)&&!(N=H.next()).done;)O.push(N.value)}catch(ve){D={error:ve}}finally{try{N&&!N.done&&(T=H.return)&&T.call(H)}finally{if(D)throw D.error}}return O}function Ce(){for(var y=[],j=0;j<arguments.length;j++)y=y.concat(Ke(arguments[j]));return y}function Qe(){for(var y=0,j=0,T=arguments.length;j<T;j++)y+=arguments[j].length;var H=Array(y),N=0;for(j=0;j<T;j++)for(var O=arguments[j],D=0,ve=O.length;D<ve;D++,N++)H[N]=O[D];return H}function Be(y){return this instanceof Be?(this.v=y,this):new Be(y)}function et(y,j,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,H=T.apply(y,j||[]),O=[];return N={},D("next"),D("throw"),D("return"),N[Symbol.asyncIterator]=function(){return this},N;function D(oe){H[oe]&&(N[oe]=function(Ye){return new Promise(function(ft,tt){O.push([oe,Ye,ft,tt])>1||ve(oe,Ye)})})}function ve(oe,Ye){try{!function Ue(oe){oe.value instanceof Be?Promise.resolve(oe.value.v).then(V,be):Ee(O[0][2],oe)}(H[oe](Ye))}catch(ft){Ee(O[0][3],ft)}}function V(oe){ve("next",oe)}function be(oe){ve("throw",oe)}function Ee(oe,Ye){oe(Ye),O.shift(),O.length&&ve(O[0][0],O[0][1])}}function p(y){var j,T;return j={},H("next"),H("throw",function(N){throw N}),H("return"),j[Symbol.iterator]=function(){return this},j;function H(N,O){j[N]=y[N]?function(D){return(T=!T)?{value:Be(y[N](D)),done:"return"===N}:O?O(D):D}:O}}function _(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,j=y[Symbol.asyncIterator];return j?j.call(y):(y=Fe(y),T={},H("next"),H("throw"),H("return"),T[Symbol.asyncIterator]=function(){return this},T);function H(O){T[O]=y[O]&&function(D){return new Promise(function(ve,Ue){!function N(O,D,ve,Ue){Promise.resolve(Ue).then(function(V){O({value:V,done:ve})},D)}(ve,Ue,(D=y[O](D)).done,D.value)})}}}function g(y,j){return Object.defineProperty?Object.defineProperty(y,"raw",{value:j}):y.raw=j,y}function w(y){if(y&&y.__esModule)return y;var j={};if(null!=y)for(var T in y)Object.hasOwnProperty.call(y,T)&&(j[T]=y[T]);return j.default=y,j}function S(y){return y&&y.__esModule?y:{default:y}}function k(y,j){if(!j.has(y))throw new TypeError("attempted to get private field on non-instance");return j.get(y)}function F(y,j,T){if(!j.has(y))throw new TypeError("attempted to set private field on non-instance");return j.set(y,T),T}},7121:(ke,q,Y)=>{"use strict";Y.r(q),Y.d(q,{__assign:()=>je,__asyncDelegator:()=>p,__asyncGenerator:()=>et,__asyncValues:()=>_,__await:()=>Be,__awaiter:()=>ae,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>F,__createBinding:()=>K,__decorate:()=>Z,__exportStar:()=>Re,__extends:()=>Pe,__generator:()=>ie,__importDefault:()=>S,__importStar:()=>w,__makeTemplateObject:()=>g,__metadata:()=>we,__param:()=>ne,__read:()=>Ke,__rest:()=>Te,__spread:()=>Ce,__spreadArrays:()=>Qe,__values:()=>Fe});var b=function(y,j){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,H){T.__proto__=H}||function(T,H){for(var N in H)H.hasOwnProperty(N)&&(T[N]=H[N])})(y,j)};function Pe(y,j){function T(){this.constructor=y}b(y,j),y.prototype=null===j?Object.create(j):(T.prototype=j.prototype,new T)}var je=function(){return je=Object.assign||function(j){for(var T,H=1,N=arguments.length;H<N;H++)for(var O in T=arguments[H])Object.prototype.hasOwnProperty.call(T,O)&&(j[O]=T[O]);return j},je.apply(this,arguments)};function Te(y,j){var T={};for(var H in y)Object.prototype.hasOwnProperty.call(y,H)&&j.indexOf(H)<0&&(T[H]=y[H]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(H=Object.getOwnPropertySymbols(y);N<H.length;N++)j.indexOf(H[N])<0&&Object.prototype.propertyIsEnumerable.call(y,H[N])&&(T[H[N]]=y[H[N]])}return T}function Z(y,j,T,H){var D,N=arguments.length,O=N<3?j:null===H?H=Object.getOwnPropertyDescriptor(j,T):H;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(y,j,T,H);else for(var ve=y.length-1;ve>=0;ve--)(D=y[ve])&&(O=(N<3?D(O):N>3?D(j,T,O):D(j,T))||O);return N>3&&O&&Object.defineProperty(j,T,O),O}function ne(y,j){return function(T,H){j(T,H,y)}}function we(y,j){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(y,j)}function ae(y,j,T,H){return new(T||(T=Promise))(function(O,D){function ve(be){try{V(H.next(be))}catch(Ee){D(Ee)}}function Ue(be){try{V(H.throw(be))}catch(Ee){D(Ee)}}function V(be){be.done?O(be.value):function N(O){return O instanceof T?O:new T(function(D){D(O)})}(be.value).then(ve,Ue)}V((H=H.apply(y,j||[])).next())})}function ie(y,j){var H,N,O,D,T={label:0,sent:function(){if(1&O[0])throw O[1];return O[1]},trys:[],ops:[]};return D={next:ve(0),throw:ve(1),return:ve(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function ve(V){return function(be){return function Ue(V){if(H)throw new TypeError("Generator is already executing.");for(;T;)try{if(H=1,N&&(O=2&V[0]?N.return:V[0]?N.throw||((O=N.return)&&O.call(N),0):N.next)&&!(O=O.call(N,V[1])).done)return O;switch(N=0,O&&(V=[2&V[0],O.value]),V[0]){case 0:case 1:O=V;break;case 4:return T.label++,{value:V[1],done:!1};case 5:T.label++,N=V[1],V=[0];continue;case 7:V=T.ops.pop(),T.trys.pop();continue;default:if(!(O=(O=T.trys).length>0&&O[O.length-1])&&(6===V[0]||2===V[0])){T=0;continue}if(3===V[0]&&(!O||V[1]>O[0]&&V[1]<O[3])){T.label=V[1];break}if(6===V[0]&&T.label<O[1]){T.label=O[1],O=V;break}if(O&&T.label<O[2]){T.label=O[2],T.ops.push(V);break}O[2]&&T.ops.pop(),T.trys.pop();continue}V=j.call(y,T)}catch(be){V=[6,be],N=0}finally{H=O=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,be])}}}function K(y,j,T,H){void 0===H&&(H=T),y[H]=j[T]}function Re(y,j){for(var T in y)"default"!==T&&!j.hasOwnProperty(T)&&(j[T]=y[T])}function Fe(y){var j="function"==typeof Symbol&&Symbol.iterator,T=j&&y[j],H=0;if(T)return T.call(y);if(y&&"number"==typeof y.length)return{next:function(){return y&&H>=y.length&&(y=void 0),{value:y&&y[H++],done:!y}}};throw new TypeError(j?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(y,j){var T="function"==typeof Symbol&&y[Symbol.iterator];if(!T)return y;var N,D,H=T.call(y),O=[];try{for(;(void 0===j||j-- >0)&&!(N=H.next()).done;)O.push(N.value)}catch(ve){D={error:ve}}finally{try{N&&!N.done&&(T=H.return)&&T.call(H)}finally{if(D)throw D.error}}return O}function Ce(){for(var y=[],j=0;j<arguments.length;j++)y=y.concat(Ke(arguments[j]));return y}function Qe(){for(var y=0,j=0,T=arguments.length;j<T;j++)y+=arguments[j].length;var H=Array(y),N=0;for(j=0;j<T;j++)for(var O=arguments[j],D=0,ve=O.length;D<ve;D++,N++)H[N]=O[D];return H}function Be(y){return this instanceof Be?(this.v=y,this):new Be(y)}function et(y,j,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,H=T.apply(y,j||[]),O=[];return N={},D("next"),D("throw"),D("return"),N[Symbol.asyncIterator]=function(){return this},N;function D(oe){H[oe]&&(N[oe]=function(Ye){return new Promise(function(ft,tt){O.push([oe,Ye,ft,tt])>1||ve(oe,Ye)})})}function ve(oe,Ye){try{!function Ue(oe){oe.value instanceof Be?Promise.resolve(oe.value.v).then(V,be):Ee(O[0][2],oe)}(H[oe](Ye))}catch(ft){Ee(O[0][3],ft)}}function V(oe){ve("next",oe)}function be(oe){ve("throw",oe)}function Ee(oe,Ye){oe(Ye),O.shift(),O.length&&ve(O[0][0],O[0][1])}}function p(y){var j,T;return j={},H("next"),H("throw",function(N){throw N}),H("return"),j[Symbol.iterator]=function(){return this},j;function H(N,O){j[N]=y[N]?function(D){return(T=!T)?{value:Be(y[N](D)),done:"return"===N}:O?O(D):D}:O}}function _(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,j=y[Symbol.asyncIterator];return j?j.call(y):(y=Fe(y),T={},H("next"),H("throw"),H("return"),T[Symbol.asyncIterator]=function(){return this},T);function H(O){T[O]=y[O]&&function(D){return new Promise(function(ve,Ue){!function N(O,D,ve,Ue){Promise.resolve(Ue).then(function(V){O({value:V,done:ve})},D)}(ve,Ue,(D=y[O](D)).done,D.value)})}}}function g(y,j){return Object.defineProperty?Object.defineProperty(y,"raw",{value:j}):y.raw=j,y}function w(y){if(y&&y.__esModule)return y;var j={};if(null!=y)for(var T in y)Object.hasOwnProperty.call(y,T)&&(j[T]=y[T]);return j.default=y,j}function S(y){return y&&y.__esModule?y:{default:y}}function k(y,j){if(!j.has(y))throw new TypeError("attempted to get private field on non-instance");return j.get(y)}function F(y,j,T){if(!j.has(y))throw new TypeError("attempted to set private field on non-instance");return j.set(y,T),T}},1590:(ke,q,Y)=>{"use strict";const b=Y(514);ke.exports=Z;const Pe=function S(){function k(F){return typeof F<"u"&&F}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return k(self)||k(window)||k(this)||{}}}().console||{},je={mapHttpRequest:Qe,mapHttpResponse:Qe,wrapRequestSerializer:Be,wrapResponseSerializer:Be,wrapErrorSerializer:Be,req:Qe,res:Qe,err:function Ke(k){const F={type:k.constructor.name,msg:k.message,stack:k.stack};for(const y in k)void 0===F[y]&&(F[y]=k[y]);return F}};function Z(k){(k=k||{}).browser=k.browser||{};const F=k.browser.transmit;if(F&&"function"!=typeof F.send)throw Error("pino: transmit option must have a send function");const y=k.browser.write||Pe;k.browser.write&&(k.browser.asObject=!0);const j=k.serializers||{},T=function Te(k,F){return Array.isArray(k)?k.filter(function(j){return"!stdSerializers.err"!==j}):!0===k&&Object.keys(F)}(k.browser.serialize,j);let H=k.browser.serialize;Array.isArray(k.browser.serialize)&&k.browser.serialize.indexOf("!stdSerializers.err")>-1&&(H=!1),"function"==typeof y&&(y.error=y.fatal=y.warn=y.info=y.debug=y.trace=y),!1===k.enabled&&(k.level="silent");const O=k.level||"info",D=Object.create(y);D.log||(D.log=et),Object.defineProperty(D,"levelVal",{get:function Ue(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(D,"level",{get:function V(){return this._level},set:function be(oe){if("silent"!==oe&&!this.levels.values[oe])throw Error("unknown level "+oe);this._level=oe,ne(ve,D,"error","log"),ne(ve,D,"fatal","error"),ne(ve,D,"warn","error"),ne(ve,D,"info","log"),ne(ve,D,"debug","log"),ne(ve,D,"trace","log")}});const ve={transmit:F,serialize:T,asObject:k.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:Ce(k)};return D.levels=Z.levels,D.level=O,D.setMaxListeners=D.getMaxListeners=D.emit=D.addListener=D.on=D.prependListener=D.once=D.prependOnceListener=D.removeListener=D.removeAllListeners=D.listeners=D.listenerCount=D.eventNames=D.write=D.flush=et,D.serializers=j,D._serialize=T,D._stdErrSerialize=H,D.child=function Ee(oe,Ye){if(!oe)throw new Error("missing bindings for child Pino");Ye=Ye||{},T&&oe.serializers&&(Ye.serializers=oe.serializers);const ft=Ye.serializers;if(T&&ft){var tt=Object.assign({},j,ft),Fn=!0===k.browser.serialize?Object.keys(tt):T;delete oe.serializers,ie([oe],Fn,tt,this._stdErrSerialize)}function $n(Pt){this._childLevel=1+(0|Pt._childLevel),this.error=K(Pt,oe,"error"),this.fatal=K(Pt,oe,"fatal"),this.warn=K(Pt,oe,"warn"),this.info=K(Pt,oe,"info"),this.debug=K(Pt,oe,"debug"),this.trace=K(Pt,oe,"trace"),tt&&(this.serializers=tt,this._serialize=Fn),F&&(this._logEvent=Fe([].concat(Pt._logEvent.bindings,oe)))}return $n.prototype=this,new $n(this)},F&&(D._logEvent=Fe()),D}function ne(k,F,y,j){const T=Object.getPrototypeOf(F);F[y]=F.levelVal>F.levels.values[y]?et:T[y]?T[y]:Pe[y]||Pe[j]||et,function we(k,F,y){!k.transmit&&F[y]===et||(F[y]=function(j){return function(){const H=k.timestamp(),N=new Array(arguments.length),O=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Pe?Pe:this;for(var D=0;D<N.length;D++)N[D]=arguments[D];if(k.serialize&&!k.asObject&&ie(N,this._serialize,this.serializers,this._stdErrSerialize),k.asObject?j.call(O,function ae(k,F,y,j){k._serialize&&ie(y,k._serialize,k.serializers,k._stdErrSerialize);const T=y.slice();let H=T[0];const N={};j&&(N.time=j),N.level=Z.levels.values[F];let O=1+(0|k._childLevel);if(O<1&&(O=1),null!==H&&"object"==typeof H){for(;O--&&"object"==typeof T[0];)Object.assign(N,T.shift());H=T.length?b(T.shift(),T):void 0}else"string"==typeof H&&(H=b(T.shift(),T));return void 0!==H&&(N.msg=H),N}(this,y,N,H)):j.apply(O,N),k.transmit){const ve=k.transmit.level||F.level,V=Z.levels.values[y];if(V<Z.levels.values[ve])return;!function Re(k,F,y){const j=F.send,T=F.ts,H=F.methodLevel,N=F.methodValue,O=F.val,D=k._logEvent.bindings;ie(y,k._serialize||Object.keys(k.serializers),k.serializers,void 0===k._stdErrSerialize||k._stdErrSerialize),k._logEvent.ts=T,k._logEvent.messages=y.filter(function(ve){return-1===D.indexOf(ve)}),k._logEvent.level.label=H,k._logEvent.level.value=N,j(H,k._logEvent,O),k._logEvent=Fe(D)}(this,{ts:H,methodLevel:y,methodValue:V,transmitLevel:ve,transmitValue:Z.levels.values[k.transmit.level||F.level],send:k.transmit.send,val:F.levelVal},N)}}}(F[y]))}(k,F,y)}function ie(k,F,y,j){for(const T in k)if(j&&k[T]instanceof Error)k[T]=Z.stdSerializers.err(k[T]);else if("object"==typeof k[T]&&!Array.isArray(k[T]))for(const H in k[T])F&&F.indexOf(H)>-1&&H in y&&(k[T][H]=y[H](k[T][H]))}function K(k,F,y){return function(){const j=new Array(1+arguments.length);j[0]=F;for(var T=1;T<j.length;T++)j[T]=arguments[T-1];return k[y].apply(this,j)}}function Fe(k){return{ts:0,messages:[],bindings:k||[],level:{label:"",value:0}}}function Ce(k){return"function"==typeof k.timestamp?k.timestamp:!1===k.timestamp?p:_}function Qe(){return{}}function Be(k){return k}function et(){}function p(){return!1}function _(){return Date.now()}Z.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Z.stdSerializers=je,Z.stdTimeFunctions=Object.assign({},{nullTime:p,epochTime:_,unixTime:function g(){return Math.round(Date.now()/1e3)},isoTime:function w(){return new Date(Date.now()).toISOString()}})}}]);